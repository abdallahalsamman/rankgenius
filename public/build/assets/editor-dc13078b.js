var go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ns(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var gi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */gi.exports;(function(c,t){(function(){var n,i="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",d="Expected a function",h="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",m=500,x="__lodash_placeholder__",v=1,_=2,I=4,E=1,w=2,y=1,N=2,O=4,Y=8,U=16,P=32,q=64,K=128,T=256,B=512,R=30,A="...",j=800,X=16,J=1,V=2,wt=3,ut=1/0,Et=9007199254740991,Ht=17976931348623157e292,mt=0/0,ft=4294967295,oe=ft-1,$=ft>>>1,W=[["ary",K],["bind",y],["bindKey",N],["curry",Y],["curryRight",U],["flip",B],["partial",P],["partialRight",q],["rearg",T]],Q="[object Arguments]",it="[object Array]",nt="[object AsyncFunction]",Bt="[object Boolean]",It="[object Date]",de="[object DOMException]",ie="[object Error]",yt="[object Function]",Zt="[object GeneratorFunction]",Dt="[object Map]",tn="[object Number]",Co="[object Null]",ue="[object Object]",en="[object Promise]",zc="[object Proxy]",Xn="[object RegExp]",Ie="[object Set]",Zn="[object String]",Eo="[object Symbol]",Wc="[object Undefined]",Vn="[object WeakMap]",$c="[object WeakSet]",Jn="[object ArrayBuffer]",Sn="[object DataView]",xi="[object Float32Array]",Ci="[object Float64Array]",Ei="[object Int8Array]",Si="[object Int16Array]",Ti="[object Int32Array]",_i="[object Uint8Array]",Bi="[object Uint8ClampedArray]",Li="[object Uint16Array]",Ii="[object Uint32Array]",jc=/\b__p \+= '';/g,qc=/\b(__p \+=) '' \+/g,Yc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bs=/&(?:amp|lt|gt|quot|#39);/g,vs=/[&<>"']/g,Kc=RegExp(bs.source),Gc=RegExp(vs.source),Xc=/<%-([\s\S]+?)%>/g,Zc=/<%([\s\S]+?)%>/g,ws=/<%=([\s\S]+?)%>/g,Vc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Jc=/^\w*$/,Qc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mi=/[\\^$.*+?()[\]{}|]/g,td=RegExp(Mi.source),Ai=/^\s+/,ed=/\s/,nd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,od=/\{\n\/\* \[wrapped with (.+)\] \*/,id=/,? & /,rd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,sd=/[()=,{}\[\]\/\s]/,ad=/\\(\\)?/g,ld=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ks=/\w*$/,cd=/^[-+]0x[0-9a-f]+$/i,dd=/^0b[01]+$/i,ud=/^\[object .+?Constructor\]$/,hd=/^0o[0-7]+$/i,pd=/^(?:0|[1-9]\d*)$/,fd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,So=/($^)/,gd=/['\n\r\u2028\u2029\\]/g,To="\\ud800-\\udfff",md="\\u0300-\\u036f",bd="\\ufe20-\\ufe2f",vd="\\u20d0-\\u20ff",ys=md+bd+vd,xs="\\u2700-\\u27bf",Cs="a-z\\xdf-\\xf6\\xf8-\\xff",wd="\\xac\\xb1\\xd7\\xf7",kd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",yd="\\u2000-\\u206f",xd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Es="A-Z\\xc0-\\xd6\\xd8-\\xde",Ss="\\ufe0e\\ufe0f",Ts=wd+kd+yd+xd,Oi="['’]",Cd="["+To+"]",_s="["+Ts+"]",_o="["+ys+"]",Bs="\\d+",Ed="["+xs+"]",Ls="["+Cs+"]",Is="[^"+To+Ts+Bs+xs+Cs+Es+"]",Ri="\\ud83c[\\udffb-\\udfff]",Sd="(?:"+_o+"|"+Ri+")",Ms="[^"+To+"]",Ni="(?:\\ud83c[\\udde6-\\uddff]){2}",Di="[\\ud800-\\udbff][\\udc00-\\udfff]",Tn="["+Es+"]",As="\\u200d",Os="(?:"+Ls+"|"+Is+")",Td="(?:"+Tn+"|"+Is+")",Rs="(?:"+Oi+"(?:d|ll|m|re|s|t|ve))?",Ns="(?:"+Oi+"(?:D|LL|M|RE|S|T|VE))?",Ds=Sd+"?",Ps="["+Ss+"]?",_d="(?:"+As+"(?:"+[Ms,Ni,Di].join("|")+")"+Ps+Ds+")*",Bd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ld="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Hs=Ps+Ds+_d,Id="(?:"+[Ed,Ni,Di].join("|")+")"+Hs,Md="(?:"+[Ms+_o+"?",_o,Ni,Di,Cd].join("|")+")",Ad=RegExp(Oi,"g"),Od=RegExp(_o,"g"),Pi=RegExp(Ri+"(?="+Ri+")|"+Md+Hs,"g"),Rd=RegExp([Tn+"?"+Ls+"+"+Rs+"(?="+[_s,Tn,"$"].join("|")+")",Td+"+"+Ns+"(?="+[_s,Tn+Os,"$"].join("|")+")",Tn+"?"+Os+"+"+Rs,Tn+"+"+Ns,Ld,Bd,Bs,Id].join("|"),"g"),Nd=RegExp("["+As+To+ys+Ss+"]"),Dd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Pd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Hd=-1,At={};At[xi]=At[Ci]=At[Ei]=At[Si]=At[Ti]=At[_i]=At[Bi]=At[Li]=At[Ii]=!0,At[Q]=At[it]=At[Jn]=At[Bt]=At[Sn]=At[It]=At[ie]=At[yt]=At[Dt]=At[tn]=At[ue]=At[Xn]=At[Ie]=At[Zn]=At[Vn]=!1;var Mt={};Mt[Q]=Mt[it]=Mt[Jn]=Mt[Sn]=Mt[Bt]=Mt[It]=Mt[xi]=Mt[Ci]=Mt[Ei]=Mt[Si]=Mt[Ti]=Mt[Dt]=Mt[tn]=Mt[ue]=Mt[Xn]=Mt[Ie]=Mt[Zn]=Mt[Eo]=Mt[_i]=Mt[Bi]=Mt[Li]=Mt[Ii]=!0,Mt[ie]=Mt[yt]=Mt[Vn]=!1;var Fd={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Ud={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Wd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$d=parseFloat,jd=parseInt,Fs=typeof go=="object"&&go&&go.Object===Object&&go,qd=typeof self=="object"&&self&&self.Object===Object&&self,qt=Fs||qd||Function("return this")(),Hi=t&&!t.nodeType&&t,pn=Hi&&!0&&c&&!c.nodeType&&c,Us=pn&&pn.exports===Hi,Fi=Us&&Fs.process,ye=function(){try{var C=pn&&pn.require&&pn.require("util").types;return C||Fi&&Fi.binding&&Fi.binding("util")}catch{}}(),zs=ye&&ye.isArrayBuffer,Ws=ye&&ye.isDate,$s=ye&&ye.isMap,js=ye&&ye.isRegExp,qs=ye&&ye.isSet,Ys=ye&&ye.isTypedArray;function he(C,D,M){switch(M.length){case 0:return C.call(D);case 1:return C.call(D,M[0]);case 2:return C.call(D,M[0],M[1]);case 3:return C.call(D,M[0],M[1],M[2])}return C.apply(D,M)}function Yd(C,D,M,Z){for(var lt=-1,xt=C==null?0:C.length;++lt<xt;){var Wt=C[lt];D(Z,Wt,M(Wt),C)}return Z}function xe(C,D){for(var M=-1,Z=C==null?0:C.length;++M<Z&&D(C[M],M,C)!==!1;);return C}function Kd(C,D){for(var M=C==null?0:C.length;M--&&D(C[M],M,C)!==!1;);return C}function Ks(C,D){for(var M=-1,Z=C==null?0:C.length;++M<Z;)if(!D(C[M],M,C))return!1;return!0}function nn(C,D){for(var M=-1,Z=C==null?0:C.length,lt=0,xt=[];++M<Z;){var Wt=C[M];D(Wt,M,C)&&(xt[lt++]=Wt)}return xt}function Bo(C,D){var M=C==null?0:C.length;return!!M&&_n(C,D,0)>-1}function Ui(C,D,M){for(var Z=-1,lt=C==null?0:C.length;++Z<lt;)if(M(D,C[Z]))return!0;return!1}function Rt(C,D){for(var M=-1,Z=C==null?0:C.length,lt=Array(Z);++M<Z;)lt[M]=D(C[M],M,C);return lt}function on(C,D){for(var M=-1,Z=D.length,lt=C.length;++M<Z;)C[lt+M]=D[M];return C}function zi(C,D,M,Z){var lt=-1,xt=C==null?0:C.length;for(Z&&xt&&(M=C[++lt]);++lt<xt;)M=D(M,C[lt],lt,C);return M}function Gd(C,D,M,Z){var lt=C==null?0:C.length;for(Z&&lt&&(M=C[--lt]);lt--;)M=D(M,C[lt],lt,C);return M}function Wi(C,D){for(var M=-1,Z=C==null?0:C.length;++M<Z;)if(D(C[M],M,C))return!0;return!1}var Xd=$i("length");function Zd(C){return C.split("")}function Vd(C){return C.match(rd)||[]}function Gs(C,D,M){var Z;return M(C,function(lt,xt,Wt){if(D(lt,xt,Wt))return Z=xt,!1}),Z}function Lo(C,D,M,Z){for(var lt=C.length,xt=M+(Z?1:-1);Z?xt--:++xt<lt;)if(D(C[xt],xt,C))return xt;return-1}function _n(C,D,M){return D===D?cu(C,D,M):Lo(C,Xs,M)}function Jd(C,D,M,Z){for(var lt=M-1,xt=C.length;++lt<xt;)if(Z(C[lt],D))return lt;return-1}function Xs(C){return C!==C}function Zs(C,D){var M=C==null?0:C.length;return M?qi(C,D)/M:mt}function $i(C){return function(D){return D==null?n:D[C]}}function ji(C){return function(D){return C==null?n:C[D]}}function Vs(C,D,M,Z,lt){return lt(C,function(xt,Wt,Lt){M=Z?(Z=!1,xt):D(M,xt,Wt,Lt)}),M}function Qd(C,D){var M=C.length;for(C.sort(D);M--;)C[M]=C[M].value;return C}function qi(C,D){for(var M,Z=-1,lt=C.length;++Z<lt;){var xt=D(C[Z]);xt!==n&&(M=M===n?xt:M+xt)}return M}function Yi(C,D){for(var M=-1,Z=Array(C);++M<C;)Z[M]=D(M);return Z}function tu(C,D){return Rt(D,function(M){return[M,C[M]]})}function Js(C){return C&&C.slice(0,na(C)+1).replace(Ai,"")}function pe(C){return function(D){return C(D)}}function Ki(C,D){return Rt(D,function(M){return C[M]})}function Qn(C,D){return C.has(D)}function Qs(C,D){for(var M=-1,Z=C.length;++M<Z&&_n(D,C[M],0)>-1;);return M}function ta(C,D){for(var M=C.length;M--&&_n(D,C[M],0)>-1;);return M}function eu(C,D){for(var M=C.length,Z=0;M--;)C[M]===D&&++Z;return Z}var nu=ji(Fd),ou=ji(Ud);function iu(C){return"\\"+Wd[C]}function ru(C,D){return C==null?n:C[D]}function Bn(C){return Nd.test(C)}function su(C){return Dd.test(C)}function au(C){for(var D,M=[];!(D=C.next()).done;)M.push(D.value);return M}function Gi(C){var D=-1,M=Array(C.size);return C.forEach(function(Z,lt){M[++D]=[lt,Z]}),M}function ea(C,D){return function(M){return C(D(M))}}function rn(C,D){for(var M=-1,Z=C.length,lt=0,xt=[];++M<Z;){var Wt=C[M];(Wt===D||Wt===x)&&(C[M]=x,xt[lt++]=M)}return xt}function Io(C){var D=-1,M=Array(C.size);return C.forEach(function(Z){M[++D]=Z}),M}function lu(C){var D=-1,M=Array(C.size);return C.forEach(function(Z){M[++D]=[Z,Z]}),M}function cu(C,D,M){for(var Z=M-1,lt=C.length;++Z<lt;)if(C[Z]===D)return Z;return-1}function du(C,D,M){for(var Z=M+1;Z--;)if(C[Z]===D)return Z;return Z}function Ln(C){return Bn(C)?hu(C):Xd(C)}function Me(C){return Bn(C)?pu(C):Zd(C)}function na(C){for(var D=C.length;D--&&ed.test(C.charAt(D)););return D}var uu=ji(zd);function hu(C){for(var D=Pi.lastIndex=0;Pi.test(C);)++D;return D}function pu(C){return C.match(Pi)||[]}function fu(C){return C.match(Rd)||[]}var gu=function C(D){D=D==null?qt:In.defaults(qt.Object(),D,In.pick(qt,Pd));var M=D.Array,Z=D.Date,lt=D.Error,xt=D.Function,Wt=D.Math,Lt=D.Object,Xi=D.RegExp,mu=D.String,Ce=D.TypeError,Mo=M.prototype,bu=xt.prototype,Mn=Lt.prototype,Ao=D["__core-js_shared__"],Oo=bu.toString,Tt=Mn.hasOwnProperty,vu=0,oa=function(){var e=/[^.]+$/.exec(Ao&&Ao.keys&&Ao.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ro=Mn.toString,wu=Oo.call(Lt),ku=qt._,yu=Xi("^"+Oo.call(Tt).replace(Mi,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),No=Us?D.Buffer:n,sn=D.Symbol,Do=D.Uint8Array,ia=No?No.allocUnsafe:n,Po=ea(Lt.getPrototypeOf,Lt),ra=Lt.create,sa=Mn.propertyIsEnumerable,Ho=Mo.splice,aa=sn?sn.isConcatSpreadable:n,to=sn?sn.iterator:n,fn=sn?sn.toStringTag:n,Fo=function(){try{var e=wn(Lt,"defineProperty");return e({},"",{}),e}catch{}}(),xu=D.clearTimeout!==qt.clearTimeout&&D.clearTimeout,Cu=Z&&Z.now!==qt.Date.now&&Z.now,Eu=D.setTimeout!==qt.setTimeout&&D.setTimeout,Uo=Wt.ceil,zo=Wt.floor,Zi=Lt.getOwnPropertySymbols,Su=No?No.isBuffer:n,la=D.isFinite,Tu=Mo.join,_u=ea(Lt.keys,Lt),$t=Wt.max,Vt=Wt.min,Bu=Z.now,Lu=D.parseInt,ca=Wt.random,Iu=Mo.reverse,Vi=wn(D,"DataView"),eo=wn(D,"Map"),Ji=wn(D,"Promise"),An=wn(D,"Set"),no=wn(D,"WeakMap"),oo=wn(Lt,"create"),Wo=no&&new no,On={},Mu=kn(Vi),Au=kn(eo),Ou=kn(Ji),Ru=kn(An),Nu=kn(no),$o=sn?sn.prototype:n,io=$o?$o.valueOf:n,da=$o?$o.toString:n;function p(e){if(Pt(e)&&!ct(e)&&!(e instanceof bt)){if(e instanceof Ee)return e;if(Tt.call(e,"__wrapped__"))return ul(e)}return new Ee(e)}var Rn=function(){function e(){}return function(o){if(!Nt(o))return{};if(ra)return ra(o);e.prototype=o;var r=new e;return e.prototype=n,r}}();function jo(){}function Ee(e,o){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=n}p.templateSettings={escape:Xc,evaluate:Zc,interpolate:ws,variable:"",imports:{_:p}},p.prototype=jo.prototype,p.prototype.constructor=p,Ee.prototype=Rn(jo.prototype),Ee.prototype.constructor=Ee;function bt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ft,this.__views__=[]}function Du(){var e=new bt(this.__wrapped__);return e.__actions__=re(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=re(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=re(this.__views__),e}function Pu(){if(this.__filtered__){var e=new bt(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Hu(){var e=this.__wrapped__.value(),o=this.__dir__,r=ct(e),l=o<0,u=r?e.length:0,g=Zh(0,u,this.__views__),b=g.start,k=g.end,S=k-b,H=l?k:b-1,F=this.__iteratees__,z=F.length,G=0,tt=Vt(S,this.__takeCount__);if(!r||!l&&u==S&&tt==S)return Ra(e,this.__actions__);var rt=[];t:for(;S--&&G<tt;){H+=o;for(var ht=-1,st=e[H];++ht<z;){var gt=F[ht],kt=gt.iteratee,me=gt.type,ne=kt(st);if(me==V)st=ne;else if(!ne){if(me==J)continue t;break t}}rt[G++]=st}return rt}bt.prototype=Rn(jo.prototype),bt.prototype.constructor=bt;function gn(e){var o=-1,r=e==null?0:e.length;for(this.clear();++o<r;){var l=e[o];this.set(l[0],l[1])}}function Fu(){this.__data__=oo?oo(null):{},this.size=0}function Uu(e){var o=this.has(e)&&delete this.__data__[e];return this.size-=o?1:0,o}function zu(e){var o=this.__data__;if(oo){var r=o[e];return r===f?n:r}return Tt.call(o,e)?o[e]:n}function Wu(e){var o=this.__data__;return oo?o[e]!==n:Tt.call(o,e)}function $u(e,o){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=oo&&o===n?f:o,this}gn.prototype.clear=Fu,gn.prototype.delete=Uu,gn.prototype.get=zu,gn.prototype.has=Wu,gn.prototype.set=$u;function We(e){var o=-1,r=e==null?0:e.length;for(this.clear();++o<r;){var l=e[o];this.set(l[0],l[1])}}function ju(){this.__data__=[],this.size=0}function qu(e){var o=this.__data__,r=qo(o,e);if(r<0)return!1;var l=o.length-1;return r==l?o.pop():Ho.call(o,r,1),--this.size,!0}function Yu(e){var o=this.__data__,r=qo(o,e);return r<0?n:o[r][1]}function Ku(e){return qo(this.__data__,e)>-1}function Gu(e,o){var r=this.__data__,l=qo(r,e);return l<0?(++this.size,r.push([e,o])):r[l][1]=o,this}We.prototype.clear=ju,We.prototype.delete=qu,We.prototype.get=Yu,We.prototype.has=Ku,We.prototype.set=Gu;function $e(e){var o=-1,r=e==null?0:e.length;for(this.clear();++o<r;){var l=e[o];this.set(l[0],l[1])}}function Xu(){this.size=0,this.__data__={hash:new gn,map:new(eo||We),string:new gn}}function Zu(e){var o=oi(this,e).delete(e);return this.size-=o?1:0,o}function Vu(e){return oi(this,e).get(e)}function Ju(e){return oi(this,e).has(e)}function Qu(e,o){var r=oi(this,e),l=r.size;return r.set(e,o),this.size+=r.size==l?0:1,this}$e.prototype.clear=Xu,$e.prototype.delete=Zu,$e.prototype.get=Vu,$e.prototype.has=Ju,$e.prototype.set=Qu;function mn(e){var o=-1,r=e==null?0:e.length;for(this.__data__=new $e;++o<r;)this.add(e[o])}function th(e){return this.__data__.set(e,f),this}function eh(e){return this.__data__.has(e)}mn.prototype.add=mn.prototype.push=th,mn.prototype.has=eh;function Ae(e){var o=this.__data__=new We(e);this.size=o.size}function nh(){this.__data__=new We,this.size=0}function oh(e){var o=this.__data__,r=o.delete(e);return this.size=o.size,r}function ih(e){return this.__data__.get(e)}function rh(e){return this.__data__.has(e)}function sh(e,o){var r=this.__data__;if(r instanceof We){var l=r.__data__;if(!eo||l.length<s-1)return l.push([e,o]),this.size=++r.size,this;r=this.__data__=new $e(l)}return r.set(e,o),this.size=r.size,this}Ae.prototype.clear=nh,Ae.prototype.delete=oh,Ae.prototype.get=ih,Ae.prototype.has=rh,Ae.prototype.set=sh;function ua(e,o){var r=ct(e),l=!r&&yn(e),u=!r&&!l&&un(e),g=!r&&!l&&!u&&Hn(e),b=r||l||u||g,k=b?Yi(e.length,mu):[],S=k.length;for(var H in e)(o||Tt.call(e,H))&&!(b&&(H=="length"||u&&(H=="offset"||H=="parent")||g&&(H=="buffer"||H=="byteLength"||H=="byteOffset")||Ke(H,S)))&&k.push(H);return k}function ha(e){var o=e.length;return o?e[cr(0,o-1)]:n}function ah(e,o){return ii(re(e),bn(o,0,e.length))}function lh(e){return ii(re(e))}function Qi(e,o,r){(r!==n&&!Oe(e[o],r)||r===n&&!(o in e))&&je(e,o,r)}function ro(e,o,r){var l=e[o];(!(Tt.call(e,o)&&Oe(l,r))||r===n&&!(o in e))&&je(e,o,r)}function qo(e,o){for(var r=e.length;r--;)if(Oe(e[r][0],o))return r;return-1}function ch(e,o,r,l){return an(e,function(u,g,b){o(l,u,r(u),b)}),l}function pa(e,o){return e&&Ue(o,jt(o),e)}function dh(e,o){return e&&Ue(o,ae(o),e)}function je(e,o,r){o=="__proto__"&&Fo?Fo(e,o,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[o]=r}function tr(e,o){for(var r=-1,l=o.length,u=M(l),g=e==null;++r<l;)u[r]=g?n:Rr(e,o[r]);return u}function bn(e,o,r){return e===e&&(r!==n&&(e=e<=r?e:r),o!==n&&(e=e>=o?e:o)),e}function Se(e,o,r,l,u,g){var b,k=o&v,S=o&_,H=o&I;if(r&&(b=u?r(e,l,u,g):r(e)),b!==n)return b;if(!Nt(e))return e;var F=ct(e);if(F){if(b=Jh(e),!k)return re(e,b)}else{var z=Jt(e),G=z==yt||z==Zt;if(un(e))return Pa(e,k);if(z==ue||z==Q||G&&!u){if(b=S||G?{}:nl(e),!k)return S?zh(e,dh(b,e)):Uh(e,pa(b,e))}else{if(!Mt[z])return u?e:{};b=Qh(e,z,k)}}g||(g=new Ae);var tt=g.get(e);if(tt)return tt;g.set(e,b),Ml(e)?e.forEach(function(st){b.add(Se(st,o,r,st,e,g))}):Ll(e)&&e.forEach(function(st,gt){b.set(gt,Se(st,o,r,gt,e,g))});var rt=H?S?kr:wr:S?ae:jt,ht=F?n:rt(e);return xe(ht||e,function(st,gt){ht&&(gt=st,st=e[gt]),ro(b,gt,Se(st,o,r,gt,e,g))}),b}function uh(e){var o=jt(e);return function(r){return fa(r,e,o)}}function fa(e,o,r){var l=r.length;if(e==null)return!l;for(e=Lt(e);l--;){var u=r[l],g=o[u],b=e[u];if(b===n&&!(u in e)||!g(b))return!1}return!0}function ga(e,o,r){if(typeof e!="function")throw new Ce(d);return po(function(){e.apply(n,r)},o)}function so(e,o,r,l){var u=-1,g=Bo,b=!0,k=e.length,S=[],H=o.length;if(!k)return S;r&&(o=Rt(o,pe(r))),l?(g=Ui,b=!1):o.length>=s&&(g=Qn,b=!1,o=new mn(o));t:for(;++u<k;){var F=e[u],z=r==null?F:r(F);if(F=l||F!==0?F:0,b&&z===z){for(var G=H;G--;)if(o[G]===z)continue t;S.push(F)}else g(o,z,l)||S.push(F)}return S}var an=Wa(Fe),ma=Wa(nr,!0);function hh(e,o){var r=!0;return an(e,function(l,u,g){return r=!!o(l,u,g),r}),r}function Yo(e,o,r){for(var l=-1,u=e.length;++l<u;){var g=e[l],b=o(g);if(b!=null&&(k===n?b===b&&!ge(b):r(b,k)))var k=b,S=g}return S}function ph(e,o,r,l){var u=e.length;for(r=dt(r),r<0&&(r=-r>u?0:u+r),l=l===n||l>u?u:dt(l),l<0&&(l+=u),l=r>l?0:Ol(l);r<l;)e[r++]=o;return e}function ba(e,o){var r=[];return an(e,function(l,u,g){o(l,u,g)&&r.push(l)}),r}function Yt(e,o,r,l,u){var g=-1,b=e.length;for(r||(r=ep),u||(u=[]);++g<b;){var k=e[g];o>0&&r(k)?o>1?Yt(k,o-1,r,l,u):on(u,k):l||(u[u.length]=k)}return u}var er=$a(),va=$a(!0);function Fe(e,o){return e&&er(e,o,jt)}function nr(e,o){return e&&va(e,o,jt)}function Ko(e,o){return nn(o,function(r){return Ge(e[r])})}function vn(e,o){o=cn(o,e);for(var r=0,l=o.length;e!=null&&r<l;)e=e[ze(o[r++])];return r&&r==l?e:n}function wa(e,o,r){var l=o(e);return ct(e)?l:on(l,r(e))}function te(e){return e==null?e===n?Wc:Co:fn&&fn in Lt(e)?Xh(e):lp(e)}function or(e,o){return e>o}function fh(e,o){return e!=null&&Tt.call(e,o)}function gh(e,o){return e!=null&&o in Lt(e)}function mh(e,o,r){return e>=Vt(o,r)&&e<$t(o,r)}function ir(e,o,r){for(var l=r?Ui:Bo,u=e[0].length,g=e.length,b=g,k=M(g),S=1/0,H=[];b--;){var F=e[b];b&&o&&(F=Rt(F,pe(o))),S=Vt(F.length,S),k[b]=!r&&(o||u>=120&&F.length>=120)?new mn(b&&F):n}F=e[0];var z=-1,G=k[0];t:for(;++z<u&&H.length<S;){var tt=F[z],rt=o?o(tt):tt;if(tt=r||tt!==0?tt:0,!(G?Qn(G,rt):l(H,rt,r))){for(b=g;--b;){var ht=k[b];if(!(ht?Qn(ht,rt):l(e[b],rt,r)))continue t}G&&G.push(rt),H.push(tt)}}return H}function bh(e,o,r,l){return Fe(e,function(u,g,b){o(l,r(u),g,b)}),l}function ao(e,o,r){o=cn(o,e),e=sl(e,o);var l=e==null?e:e[ze(_e(o))];return l==null?n:he(l,e,r)}function ka(e){return Pt(e)&&te(e)==Q}function vh(e){return Pt(e)&&te(e)==Jn}function wh(e){return Pt(e)&&te(e)==It}function lo(e,o,r,l,u){return e===o?!0:e==null||o==null||!Pt(e)&&!Pt(o)?e!==e&&o!==o:kh(e,o,r,l,lo,u)}function kh(e,o,r,l,u,g){var b=ct(e),k=ct(o),S=b?it:Jt(e),H=k?it:Jt(o);S=S==Q?ue:S,H=H==Q?ue:H;var F=S==ue,z=H==ue,G=S==H;if(G&&un(e)){if(!un(o))return!1;b=!0,F=!1}if(G&&!F)return g||(g=new Ae),b||Hn(e)?Qa(e,o,r,l,u,g):Kh(e,o,S,r,l,u,g);if(!(r&E)){var tt=F&&Tt.call(e,"__wrapped__"),rt=z&&Tt.call(o,"__wrapped__");if(tt||rt){var ht=tt?e.value():e,st=rt?o.value():o;return g||(g=new Ae),u(ht,st,r,l,g)}}return G?(g||(g=new Ae),Gh(e,o,r,l,u,g)):!1}function yh(e){return Pt(e)&&Jt(e)==Dt}function rr(e,o,r,l){var u=r.length,g=u,b=!l;if(e==null)return!g;for(e=Lt(e);u--;){var k=r[u];if(b&&k[2]?k[1]!==e[k[0]]:!(k[0]in e))return!1}for(;++u<g;){k=r[u];var S=k[0],H=e[S],F=k[1];if(b&&k[2]){if(H===n&&!(S in e))return!1}else{var z=new Ae;if(l)var G=l(H,F,S,e,o,z);if(!(G===n?lo(F,H,E|w,l,z):G))return!1}}return!0}function ya(e){if(!Nt(e)||op(e))return!1;var o=Ge(e)?yu:ud;return o.test(kn(e))}function xh(e){return Pt(e)&&te(e)==Xn}function Ch(e){return Pt(e)&&Jt(e)==Ie}function Eh(e){return Pt(e)&&di(e.length)&&!!At[te(e)]}function xa(e){return typeof e=="function"?e:e==null?le:typeof e=="object"?ct(e)?Sa(e[0],e[1]):Ea(e):jl(e)}function sr(e){if(!ho(e))return _u(e);var o=[];for(var r in Lt(e))Tt.call(e,r)&&r!="constructor"&&o.push(r);return o}function Sh(e){if(!Nt(e))return ap(e);var o=ho(e),r=[];for(var l in e)l=="constructor"&&(o||!Tt.call(e,l))||r.push(l);return r}function ar(e,o){return e<o}function Ca(e,o){var r=-1,l=se(e)?M(e.length):[];return an(e,function(u,g,b){l[++r]=o(u,g,b)}),l}function Ea(e){var o=xr(e);return o.length==1&&o[0][2]?il(o[0][0],o[0][1]):function(r){return r===e||rr(r,e,o)}}function Sa(e,o){return Er(e)&&ol(o)?il(ze(e),o):function(r){var l=Rr(r,e);return l===n&&l===o?Nr(r,e):lo(o,l,E|w)}}function Go(e,o,r,l,u){e!==o&&er(o,function(g,b){if(u||(u=new Ae),Nt(g))Th(e,o,b,r,Go,l,u);else{var k=l?l(Tr(e,b),g,b+"",e,o,u):n;k===n&&(k=g),Qi(e,b,k)}},ae)}function Th(e,o,r,l,u,g,b){var k=Tr(e,r),S=Tr(o,r),H=b.get(S);if(H){Qi(e,r,H);return}var F=g?g(k,S,r+"",e,o,b):n,z=F===n;if(z){var G=ct(S),tt=!G&&un(S),rt=!G&&!tt&&Hn(S);F=S,G||tt||rt?ct(k)?F=k:Ft(k)?F=re(k):tt?(z=!1,F=Pa(S,!0)):rt?(z=!1,F=Ha(S,!0)):F=[]:fo(S)||yn(S)?(F=k,yn(k)?F=Rl(k):(!Nt(k)||Ge(k))&&(F=nl(S))):z=!1}z&&(b.set(S,F),u(F,S,l,g,b),b.delete(S)),Qi(e,r,F)}function Ta(e,o){var r=e.length;if(r)return o+=o<0?r:0,Ke(o,r)?e[o]:n}function _a(e,o,r){o.length?o=Rt(o,function(g){return ct(g)?function(b){return vn(b,g.length===1?g[0]:g)}:g}):o=[le];var l=-1;o=Rt(o,pe(ot()));var u=Ca(e,function(g,b,k){var S=Rt(o,function(H){return H(g)});return{criteria:S,index:++l,value:g}});return Qd(u,function(g,b){return Fh(g,b,r)})}function _h(e,o){return Ba(e,o,function(r,l){return Nr(e,l)})}function Ba(e,o,r){for(var l=-1,u=o.length,g={};++l<u;){var b=o[l],k=vn(e,b);r(k,b)&&co(g,cn(b,e),k)}return g}function Bh(e){return function(o){return vn(o,e)}}function lr(e,o,r,l){var u=l?Jd:_n,g=-1,b=o.length,k=e;for(e===o&&(o=re(o)),r&&(k=Rt(e,pe(r)));++g<b;)for(var S=0,H=o[g],F=r?r(H):H;(S=u(k,F,S,l))>-1;)k!==e&&Ho.call(k,S,1),Ho.call(e,S,1);return e}function La(e,o){for(var r=e?o.length:0,l=r-1;r--;){var u=o[r];if(r==l||u!==g){var g=u;Ke(u)?Ho.call(e,u,1):hr(e,u)}}return e}function cr(e,o){return e+zo(ca()*(o-e+1))}function Lh(e,o,r,l){for(var u=-1,g=$t(Uo((o-e)/(r||1)),0),b=M(g);g--;)b[l?g:++u]=e,e+=r;return b}function dr(e,o){var r="";if(!e||o<1||o>Et)return r;do o%2&&(r+=e),o=zo(o/2),o&&(e+=e);while(o);return r}function pt(e,o){return _r(rl(e,o,le),e+"")}function Ih(e){return ha(Fn(e))}function Mh(e,o){var r=Fn(e);return ii(r,bn(o,0,r.length))}function co(e,o,r,l){if(!Nt(e))return e;o=cn(o,e);for(var u=-1,g=o.length,b=g-1,k=e;k!=null&&++u<g;){var S=ze(o[u]),H=r;if(S==="__proto__"||S==="constructor"||S==="prototype")return e;if(u!=b){var F=k[S];H=l?l(F,S,k):n,H===n&&(H=Nt(F)?F:Ke(o[u+1])?[]:{})}ro(k,S,H),k=k[S]}return e}var Ia=Wo?function(e,o){return Wo.set(e,o),e}:le,Ah=Fo?function(e,o){return Fo(e,"toString",{configurable:!0,enumerable:!1,value:Pr(o),writable:!0})}:le;function Oh(e){return ii(Fn(e))}function Te(e,o,r){var l=-1,u=e.length;o<0&&(o=-o>u?0:u+o),r=r>u?u:r,r<0&&(r+=u),u=o>r?0:r-o>>>0,o>>>=0;for(var g=M(u);++l<u;)g[l]=e[l+o];return g}function Rh(e,o){var r;return an(e,function(l,u,g){return r=o(l,u,g),!r}),!!r}function Xo(e,o,r){var l=0,u=e==null?l:e.length;if(typeof o=="number"&&o===o&&u<=$){for(;l<u;){var g=l+u>>>1,b=e[g];b!==null&&!ge(b)&&(r?b<=o:b<o)?l=g+1:u=g}return u}return ur(e,o,le,r)}function ur(e,o,r,l){var u=0,g=e==null?0:e.length;if(g===0)return 0;o=r(o);for(var b=o!==o,k=o===null,S=ge(o),H=o===n;u<g;){var F=zo((u+g)/2),z=r(e[F]),G=z!==n,tt=z===null,rt=z===z,ht=ge(z);if(b)var st=l||rt;else H?st=rt&&(l||G):k?st=rt&&G&&(l||!tt):S?st=rt&&G&&!tt&&(l||!ht):tt||ht?st=!1:st=l?z<=o:z<o;st?u=F+1:g=F}return Vt(g,oe)}function Ma(e,o){for(var r=-1,l=e.length,u=0,g=[];++r<l;){var b=e[r],k=o?o(b):b;if(!r||!Oe(k,S)){var S=k;g[u++]=b===0?0:b}}return g}function Aa(e){return typeof e=="number"?e:ge(e)?mt:+e}function fe(e){if(typeof e=="string")return e;if(ct(e))return Rt(e,fe)+"";if(ge(e))return da?da.call(e):"";var o=e+"";return o=="0"&&1/e==-ut?"-0":o}function ln(e,o,r){var l=-1,u=Bo,g=e.length,b=!0,k=[],S=k;if(r)b=!1,u=Ui;else if(g>=s){var H=o?null:qh(e);if(H)return Io(H);b=!1,u=Qn,S=new mn}else S=o?[]:k;t:for(;++l<g;){var F=e[l],z=o?o(F):F;if(F=r||F!==0?F:0,b&&z===z){for(var G=S.length;G--;)if(S[G]===z)continue t;o&&S.push(z),k.push(F)}else u(S,z,r)||(S!==k&&S.push(z),k.push(F))}return k}function hr(e,o){return o=cn(o,e),e=sl(e,o),e==null||delete e[ze(_e(o))]}function Oa(e,o,r,l){return co(e,o,r(vn(e,o)),l)}function Zo(e,o,r,l){for(var u=e.length,g=l?u:-1;(l?g--:++g<u)&&o(e[g],g,e););return r?Te(e,l?0:g,l?g+1:u):Te(e,l?g+1:0,l?u:g)}function Ra(e,o){var r=e;return r instanceof bt&&(r=r.value()),zi(o,function(l,u){return u.func.apply(u.thisArg,on([l],u.args))},r)}function pr(e,o,r){var l=e.length;if(l<2)return l?ln(e[0]):[];for(var u=-1,g=M(l);++u<l;)for(var b=e[u],k=-1;++k<l;)k!=u&&(g[u]=so(g[u]||b,e[k],o,r));return ln(Yt(g,1),o,r)}function Na(e,o,r){for(var l=-1,u=e.length,g=o.length,b={};++l<u;){var k=l<g?o[l]:n;r(b,e[l],k)}return b}function fr(e){return Ft(e)?e:[]}function gr(e){return typeof e=="function"?e:le}function cn(e,o){return ct(e)?e:Er(e,o)?[e]:dl(St(e))}var Nh=pt;function dn(e,o,r){var l=e.length;return r=r===n?l:r,!o&&r>=l?e:Te(e,o,r)}var Da=xu||function(e){return qt.clearTimeout(e)};function Pa(e,o){if(o)return e.slice();var r=e.length,l=ia?ia(r):new e.constructor(r);return e.copy(l),l}function mr(e){var o=new e.constructor(e.byteLength);return new Do(o).set(new Do(e)),o}function Dh(e,o){var r=o?mr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Ph(e){var o=new e.constructor(e.source,ks.exec(e));return o.lastIndex=e.lastIndex,o}function Hh(e){return io?Lt(io.call(e)):{}}function Ha(e,o){var r=o?mr(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Fa(e,o){if(e!==o){var r=e!==n,l=e===null,u=e===e,g=ge(e),b=o!==n,k=o===null,S=o===o,H=ge(o);if(!k&&!H&&!g&&e>o||g&&b&&S&&!k&&!H||l&&b&&S||!r&&S||!u)return 1;if(!l&&!g&&!H&&e<o||H&&r&&u&&!l&&!g||k&&r&&u||!b&&u||!S)return-1}return 0}function Fh(e,o,r){for(var l=-1,u=e.criteria,g=o.criteria,b=u.length,k=r.length;++l<b;){var S=Fa(u[l],g[l]);if(S){if(l>=k)return S;var H=r[l];return S*(H=="desc"?-1:1)}}return e.index-o.index}function Ua(e,o,r,l){for(var u=-1,g=e.length,b=r.length,k=-1,S=o.length,H=$t(g-b,0),F=M(S+H),z=!l;++k<S;)F[k]=o[k];for(;++u<b;)(z||u<g)&&(F[r[u]]=e[u]);for(;H--;)F[k++]=e[u++];return F}function za(e,o,r,l){for(var u=-1,g=e.length,b=-1,k=r.length,S=-1,H=o.length,F=$t(g-k,0),z=M(F+H),G=!l;++u<F;)z[u]=e[u];for(var tt=u;++S<H;)z[tt+S]=o[S];for(;++b<k;)(G||u<g)&&(z[tt+r[b]]=e[u++]);return z}function re(e,o){var r=-1,l=e.length;for(o||(o=M(l));++r<l;)o[r]=e[r];return o}function Ue(e,o,r,l){var u=!r;r||(r={});for(var g=-1,b=o.length;++g<b;){var k=o[g],S=l?l(r[k],e[k],k,r,e):n;S===n&&(S=e[k]),u?je(r,k,S):ro(r,k,S)}return r}function Uh(e,o){return Ue(e,Cr(e),o)}function zh(e,o){return Ue(e,tl(e),o)}function Vo(e,o){return function(r,l){var u=ct(r)?Yd:ch,g=o?o():{};return u(r,e,ot(l,2),g)}}function Nn(e){return pt(function(o,r){var l=-1,u=r.length,g=u>1?r[u-1]:n,b=u>2?r[2]:n;for(g=e.length>3&&typeof g=="function"?(u--,g):n,b&&ee(r[0],r[1],b)&&(g=u<3?n:g,u=1),o=Lt(o);++l<u;){var k=r[l];k&&e(o,k,l,g)}return o})}function Wa(e,o){return function(r,l){if(r==null)return r;if(!se(r))return e(r,l);for(var u=r.length,g=o?u:-1,b=Lt(r);(o?g--:++g<u)&&l(b[g],g,b)!==!1;);return r}}function $a(e){return function(o,r,l){for(var u=-1,g=Lt(o),b=l(o),k=b.length;k--;){var S=b[e?k:++u];if(r(g[S],S,g)===!1)break}return o}}function Wh(e,o,r){var l=o&y,u=uo(e);function g(){var b=this&&this!==qt&&this instanceof g?u:e;return b.apply(l?r:this,arguments)}return g}function ja(e){return function(o){o=St(o);var r=Bn(o)?Me(o):n,l=r?r[0]:o.charAt(0),u=r?dn(r,1).join(""):o.slice(1);return l[e]()+u}}function Dn(e){return function(o){return zi(Wl(zl(o).replace(Ad,"")),e,"")}}function uo(e){return function(){var o=arguments;switch(o.length){case 0:return new e;case 1:return new e(o[0]);case 2:return new e(o[0],o[1]);case 3:return new e(o[0],o[1],o[2]);case 4:return new e(o[0],o[1],o[2],o[3]);case 5:return new e(o[0],o[1],o[2],o[3],o[4]);case 6:return new e(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new e(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var r=Rn(e.prototype),l=e.apply(r,o);return Nt(l)?l:r}}function $h(e,o,r){var l=uo(e);function u(){for(var g=arguments.length,b=M(g),k=g,S=Pn(u);k--;)b[k]=arguments[k];var H=g<3&&b[0]!==S&&b[g-1]!==S?[]:rn(b,S);if(g-=H.length,g<r)return Xa(e,o,Jo,u.placeholder,n,b,H,n,n,r-g);var F=this&&this!==qt&&this instanceof u?l:e;return he(F,this,b)}return u}function qa(e){return function(o,r,l){var u=Lt(o);if(!se(o)){var g=ot(r,3);o=jt(o),r=function(k){return g(u[k],k,u)}}var b=e(o,r,l);return b>-1?u[g?o[b]:b]:n}}function Ya(e){return Ye(function(o){var r=o.length,l=r,u=Ee.prototype.thru;for(e&&o.reverse();l--;){var g=o[l];if(typeof g!="function")throw new Ce(d);if(u&&!b&&ni(g)=="wrapper")var b=new Ee([],!0)}for(l=b?l:r;++l<r;){g=o[l];var k=ni(g),S=k=="wrapper"?yr(g):n;S&&Sr(S[0])&&S[1]==(K|Y|P|T)&&!S[4].length&&S[9]==1?b=b[ni(S[0])].apply(b,S[3]):b=g.length==1&&Sr(g)?b[k]():b.thru(g)}return function(){var H=arguments,F=H[0];if(b&&H.length==1&&ct(F))return b.plant(F).value();for(var z=0,G=r?o[z].apply(this,H):F;++z<r;)G=o[z].call(this,G);return G}})}function Jo(e,o,r,l,u,g,b,k,S,H){var F=o&K,z=o&y,G=o&N,tt=o&(Y|U),rt=o&B,ht=G?n:uo(e);function st(){for(var gt=arguments.length,kt=M(gt),me=gt;me--;)kt[me]=arguments[me];if(tt)var ne=Pn(st),be=eu(kt,ne);if(l&&(kt=Ua(kt,l,u,tt)),g&&(kt=za(kt,g,b,tt)),gt-=be,tt&&gt<H){var Ut=rn(kt,ne);return Xa(e,o,Jo,st.placeholder,r,kt,Ut,k,S,H-gt)}var Re=z?r:this,Ze=G?Re[e]:e;return gt=kt.length,k?kt=cp(kt,k):rt&&gt>1&&kt.reverse(),F&&S<gt&&(kt.length=S),this&&this!==qt&&this instanceof st&&(Ze=ht||uo(Ze)),Ze.apply(Re,kt)}return st}function Ka(e,o){return function(r,l){return bh(r,e,o(l),{})}}function Qo(e,o){return function(r,l){var u;if(r===n&&l===n)return o;if(r!==n&&(u=r),l!==n){if(u===n)return l;typeof r=="string"||typeof l=="string"?(r=fe(r),l=fe(l)):(r=Aa(r),l=Aa(l)),u=e(r,l)}return u}}function br(e){return Ye(function(o){return o=Rt(o,pe(ot())),pt(function(r){var l=this;return e(o,function(u){return he(u,l,r)})})})}function ti(e,o){o=o===n?" ":fe(o);var r=o.length;if(r<2)return r?dr(o,e):o;var l=dr(o,Uo(e/Ln(o)));return Bn(o)?dn(Me(l),0,e).join(""):l.slice(0,e)}function jh(e,o,r,l){var u=o&y,g=uo(e);function b(){for(var k=-1,S=arguments.length,H=-1,F=l.length,z=M(F+S),G=this&&this!==qt&&this instanceof b?g:e;++H<F;)z[H]=l[H];for(;S--;)z[H++]=arguments[++k];return he(G,u?r:this,z)}return b}function Ga(e){return function(o,r,l){return l&&typeof l!="number"&&ee(o,r,l)&&(r=l=n),o=Xe(o),r===n?(r=o,o=0):r=Xe(r),l=l===n?o<r?1:-1:Xe(l),Lh(o,r,l,e)}}function ei(e){return function(o,r){return typeof o=="string"&&typeof r=="string"||(o=Be(o),r=Be(r)),e(o,r)}}function Xa(e,o,r,l,u,g,b,k,S,H){var F=o&Y,z=F?b:n,G=F?n:b,tt=F?g:n,rt=F?n:g;o|=F?P:q,o&=~(F?q:P),o&O||(o&=~(y|N));var ht=[e,o,u,tt,z,rt,G,k,S,H],st=r.apply(n,ht);return Sr(e)&&al(st,ht),st.placeholder=l,ll(st,e,o)}function vr(e){var o=Wt[e];return function(r,l){if(r=Be(r),l=l==null?0:Vt(dt(l),292),l&&la(r)){var u=(St(r)+"e").split("e"),g=o(u[0]+"e"+(+u[1]+l));return u=(St(g)+"e").split("e"),+(u[0]+"e"+(+u[1]-l))}return o(r)}}var qh=An&&1/Io(new An([,-0]))[1]==ut?function(e){return new An(e)}:Ur;function Za(e){return function(o){var r=Jt(o);return r==Dt?Gi(o):r==Ie?lu(o):tu(o,e(o))}}function qe(e,o,r,l,u,g,b,k){var S=o&N;if(!S&&typeof e!="function")throw new Ce(d);var H=l?l.length:0;if(H||(o&=~(P|q),l=u=n),b=b===n?b:$t(dt(b),0),k=k===n?k:dt(k),H-=u?u.length:0,o&q){var F=l,z=u;l=u=n}var G=S?n:yr(e),tt=[e,o,r,l,u,F,z,g,b,k];if(G&&sp(tt,G),e=tt[0],o=tt[1],r=tt[2],l=tt[3],u=tt[4],k=tt[9]=tt[9]===n?S?0:e.length:$t(tt[9]-H,0),!k&&o&(Y|U)&&(o&=~(Y|U)),!o||o==y)var rt=Wh(e,o,r);else o==Y||o==U?rt=$h(e,o,k):(o==P||o==(y|P))&&!u.length?rt=jh(e,o,r,l):rt=Jo.apply(n,tt);var ht=G?Ia:al;return ll(ht(rt,tt),e,o)}function Va(e,o,r,l){return e===n||Oe(e,Mn[r])&&!Tt.call(l,r)?o:e}function Ja(e,o,r,l,u,g){return Nt(e)&&Nt(o)&&(g.set(o,e),Go(e,o,n,Ja,g),g.delete(o)),e}function Yh(e){return fo(e)?n:e}function Qa(e,o,r,l,u,g){var b=r&E,k=e.length,S=o.length;if(k!=S&&!(b&&S>k))return!1;var H=g.get(e),F=g.get(o);if(H&&F)return H==o&&F==e;var z=-1,G=!0,tt=r&w?new mn:n;for(g.set(e,o),g.set(o,e);++z<k;){var rt=e[z],ht=o[z];if(l)var st=b?l(ht,rt,z,o,e,g):l(rt,ht,z,e,o,g);if(st!==n){if(st)continue;G=!1;break}if(tt){if(!Wi(o,function(gt,kt){if(!Qn(tt,kt)&&(rt===gt||u(rt,gt,r,l,g)))return tt.push(kt)})){G=!1;break}}else if(!(rt===ht||u(rt,ht,r,l,g))){G=!1;break}}return g.delete(e),g.delete(o),G}function Kh(e,o,r,l,u,g,b){switch(r){case Sn:if(e.byteLength!=o.byteLength||e.byteOffset!=o.byteOffset)return!1;e=e.buffer,o=o.buffer;case Jn:return!(e.byteLength!=o.byteLength||!g(new Do(e),new Do(o)));case Bt:case It:case tn:return Oe(+e,+o);case ie:return e.name==o.name&&e.message==o.message;case Xn:case Zn:return e==o+"";case Dt:var k=Gi;case Ie:var S=l&E;if(k||(k=Io),e.size!=o.size&&!S)return!1;var H=b.get(e);if(H)return H==o;l|=w,b.set(e,o);var F=Qa(k(e),k(o),l,u,g,b);return b.delete(e),F;case Eo:if(io)return io.call(e)==io.call(o)}return!1}function Gh(e,o,r,l,u,g){var b=r&E,k=wr(e),S=k.length,H=wr(o),F=H.length;if(S!=F&&!b)return!1;for(var z=S;z--;){var G=k[z];if(!(b?G in o:Tt.call(o,G)))return!1}var tt=g.get(e),rt=g.get(o);if(tt&&rt)return tt==o&&rt==e;var ht=!0;g.set(e,o),g.set(o,e);for(var st=b;++z<S;){G=k[z];var gt=e[G],kt=o[G];if(l)var me=b?l(kt,gt,G,o,e,g):l(gt,kt,G,e,o,g);if(!(me===n?gt===kt||u(gt,kt,r,l,g):me)){ht=!1;break}st||(st=G=="constructor")}if(ht&&!st){var ne=e.constructor,be=o.constructor;ne!=be&&"constructor"in e&&"constructor"in o&&!(typeof ne=="function"&&ne instanceof ne&&typeof be=="function"&&be instanceof be)&&(ht=!1)}return g.delete(e),g.delete(o),ht}function Ye(e){return _r(rl(e,n,fl),e+"")}function wr(e){return wa(e,jt,Cr)}function kr(e){return wa(e,ae,tl)}var yr=Wo?function(e){return Wo.get(e)}:Ur;function ni(e){for(var o=e.name+"",r=On[o],l=Tt.call(On,o)?r.length:0;l--;){var u=r[l],g=u.func;if(g==null||g==e)return u.name}return o}function Pn(e){var o=Tt.call(p,"placeholder")?p:e;return o.placeholder}function ot(){var e=p.iteratee||Hr;return e=e===Hr?xa:e,arguments.length?e(arguments[0],arguments[1]):e}function oi(e,o){var r=e.__data__;return np(o)?r[typeof o=="string"?"string":"hash"]:r.map}function xr(e){for(var o=jt(e),r=o.length;r--;){var l=o[r],u=e[l];o[r]=[l,u,ol(u)]}return o}function wn(e,o){var r=ru(e,o);return ya(r)?r:n}function Xh(e){var o=Tt.call(e,fn),r=e[fn];try{e[fn]=n;var l=!0}catch{}var u=Ro.call(e);return l&&(o?e[fn]=r:delete e[fn]),u}var Cr=Zi?function(e){return e==null?[]:(e=Lt(e),nn(Zi(e),function(o){return sa.call(e,o)}))}:zr,tl=Zi?function(e){for(var o=[];e;)on(o,Cr(e)),e=Po(e);return o}:zr,Jt=te;(Vi&&Jt(new Vi(new ArrayBuffer(1)))!=Sn||eo&&Jt(new eo)!=Dt||Ji&&Jt(Ji.resolve())!=en||An&&Jt(new An)!=Ie||no&&Jt(new no)!=Vn)&&(Jt=function(e){var o=te(e),r=o==ue?e.constructor:n,l=r?kn(r):"";if(l)switch(l){case Mu:return Sn;case Au:return Dt;case Ou:return en;case Ru:return Ie;case Nu:return Vn}return o});function Zh(e,o,r){for(var l=-1,u=r.length;++l<u;){var g=r[l],b=g.size;switch(g.type){case"drop":e+=b;break;case"dropRight":o-=b;break;case"take":o=Vt(o,e+b);break;case"takeRight":e=$t(e,o-b);break}}return{start:e,end:o}}function Vh(e){var o=e.match(od);return o?o[1].split(id):[]}function el(e,o,r){o=cn(o,e);for(var l=-1,u=o.length,g=!1;++l<u;){var b=ze(o[l]);if(!(g=e!=null&&r(e,b)))break;e=e[b]}return g||++l!=u?g:(u=e==null?0:e.length,!!u&&di(u)&&Ke(b,u)&&(ct(e)||yn(e)))}function Jh(e){var o=e.length,r=new e.constructor(o);return o&&typeof e[0]=="string"&&Tt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function nl(e){return typeof e.constructor=="function"&&!ho(e)?Rn(Po(e)):{}}function Qh(e,o,r){var l=e.constructor;switch(o){case Jn:return mr(e);case Bt:case It:return new l(+e);case Sn:return Dh(e,r);case xi:case Ci:case Ei:case Si:case Ti:case _i:case Bi:case Li:case Ii:return Ha(e,r);case Dt:return new l;case tn:case Zn:return new l(e);case Xn:return Ph(e);case Ie:return new l;case Eo:return Hh(e)}}function tp(e,o){var r=o.length;if(!r)return e;var l=r-1;return o[l]=(r>1?"& ":"")+o[l],o=o.join(r>2?", ":" "),e.replace(nd,`{
/* [wrapped with `+o+`] */
`)}function ep(e){return ct(e)||yn(e)||!!(aa&&e&&e[aa])}function Ke(e,o){var r=typeof e;return o=o??Et,!!o&&(r=="number"||r!="symbol"&&pd.test(e))&&e>-1&&e%1==0&&e<o}function ee(e,o,r){if(!Nt(r))return!1;var l=typeof o;return(l=="number"?se(r)&&Ke(o,r.length):l=="string"&&o in r)?Oe(r[o],e):!1}function Er(e,o){if(ct(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||ge(e)?!0:Jc.test(e)||!Vc.test(e)||o!=null&&e in Lt(o)}function np(e){var o=typeof e;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?e!=="__proto__":e===null}function Sr(e){var o=ni(e),r=p[o];if(typeof r!="function"||!(o in bt.prototype))return!1;if(e===r)return!0;var l=yr(r);return!!l&&e===l[0]}function op(e){return!!oa&&oa in e}var ip=Ao?Ge:Wr;function ho(e){var o=e&&e.constructor,r=typeof o=="function"&&o.prototype||Mn;return e===r}function ol(e){return e===e&&!Nt(e)}function il(e,o){return function(r){return r==null?!1:r[e]===o&&(o!==n||e in Lt(r))}}function rp(e){var o=li(e,function(l){return r.size===m&&r.clear(),l}),r=o.cache;return o}function sp(e,o){var r=e[1],l=o[1],u=r|l,g=u<(y|N|K),b=l==K&&r==Y||l==K&&r==T&&e[7].length<=o[8]||l==(K|T)&&o[7].length<=o[8]&&r==Y;if(!(g||b))return e;l&y&&(e[2]=o[2],u|=r&y?0:O);var k=o[3];if(k){var S=e[3];e[3]=S?Ua(S,k,o[4]):k,e[4]=S?rn(e[3],x):o[4]}return k=o[5],k&&(S=e[5],e[5]=S?za(S,k,o[6]):k,e[6]=S?rn(e[5],x):o[6]),k=o[7],k&&(e[7]=k),l&K&&(e[8]=e[8]==null?o[8]:Vt(e[8],o[8])),e[9]==null&&(e[9]=o[9]),e[0]=o[0],e[1]=u,e}function ap(e){var o=[];if(e!=null)for(var r in Lt(e))o.push(r);return o}function lp(e){return Ro.call(e)}function rl(e,o,r){return o=$t(o===n?e.length-1:o,0),function(){for(var l=arguments,u=-1,g=$t(l.length-o,0),b=M(g);++u<g;)b[u]=l[o+u];u=-1;for(var k=M(o+1);++u<o;)k[u]=l[u];return k[o]=r(b),he(e,this,k)}}function sl(e,o){return o.length<2?e:vn(e,Te(o,0,-1))}function cp(e,o){for(var r=e.length,l=Vt(o.length,r),u=re(e);l--;){var g=o[l];e[l]=Ke(g,r)?u[g]:n}return e}function Tr(e,o){if(!(o==="constructor"&&typeof e[o]=="function")&&o!="__proto__")return e[o]}var al=cl(Ia),po=Eu||function(e,o){return qt.setTimeout(e,o)},_r=cl(Ah);function ll(e,o,r){var l=o+"";return _r(e,tp(l,dp(Vh(l),r)))}function cl(e){var o=0,r=0;return function(){var l=Bu(),u=X-(l-r);if(r=l,u>0){if(++o>=j)return arguments[0]}else o=0;return e.apply(n,arguments)}}function ii(e,o){var r=-1,l=e.length,u=l-1;for(o=o===n?l:o;++r<o;){var g=cr(r,u),b=e[g];e[g]=e[r],e[r]=b}return e.length=o,e}var dl=rp(function(e){var o=[];return e.charCodeAt(0)===46&&o.push(""),e.replace(Qc,function(r,l,u,g){o.push(u?g.replace(ad,"$1"):l||r)}),o});function ze(e){if(typeof e=="string"||ge(e))return e;var o=e+"";return o=="0"&&1/e==-ut?"-0":o}function kn(e){if(e!=null){try{return Oo.call(e)}catch{}try{return e+""}catch{}}return""}function dp(e,o){return xe(W,function(r){var l="_."+r[0];o&r[1]&&!Bo(e,l)&&e.push(l)}),e.sort()}function ul(e){if(e instanceof bt)return e.clone();var o=new Ee(e.__wrapped__,e.__chain__);return o.__actions__=re(e.__actions__),o.__index__=e.__index__,o.__values__=e.__values__,o}function up(e,o,r){(r?ee(e,o,r):o===n)?o=1:o=$t(dt(o),0);var l=e==null?0:e.length;if(!l||o<1)return[];for(var u=0,g=0,b=M(Uo(l/o));u<l;)b[g++]=Te(e,u,u+=o);return b}function hp(e){for(var o=-1,r=e==null?0:e.length,l=0,u=[];++o<r;){var g=e[o];g&&(u[l++]=g)}return u}function pp(){var e=arguments.length;if(!e)return[];for(var o=M(e-1),r=arguments[0],l=e;l--;)o[l-1]=arguments[l];return on(ct(r)?re(r):[r],Yt(o,1))}var fp=pt(function(e,o){return Ft(e)?so(e,Yt(o,1,Ft,!0)):[]}),gp=pt(function(e,o){var r=_e(o);return Ft(r)&&(r=n),Ft(e)?so(e,Yt(o,1,Ft,!0),ot(r,2)):[]}),mp=pt(function(e,o){var r=_e(o);return Ft(r)&&(r=n),Ft(e)?so(e,Yt(o,1,Ft,!0),n,r):[]});function bp(e,o,r){var l=e==null?0:e.length;return l?(o=r||o===n?1:dt(o),Te(e,o<0?0:o,l)):[]}function vp(e,o,r){var l=e==null?0:e.length;return l?(o=r||o===n?1:dt(o),o=l-o,Te(e,0,o<0?0:o)):[]}function wp(e,o){return e&&e.length?Zo(e,ot(o,3),!0,!0):[]}function kp(e,o){return e&&e.length?Zo(e,ot(o,3),!0):[]}function yp(e,o,r,l){var u=e==null?0:e.length;return u?(r&&typeof r!="number"&&ee(e,o,r)&&(r=0,l=u),ph(e,o,r,l)):[]}function hl(e,o,r){var l=e==null?0:e.length;if(!l)return-1;var u=r==null?0:dt(r);return u<0&&(u=$t(l+u,0)),Lo(e,ot(o,3),u)}function pl(e,o,r){var l=e==null?0:e.length;if(!l)return-1;var u=l-1;return r!==n&&(u=dt(r),u=r<0?$t(l+u,0):Vt(u,l-1)),Lo(e,ot(o,3),u,!0)}function fl(e){var o=e==null?0:e.length;return o?Yt(e,1):[]}function xp(e){var o=e==null?0:e.length;return o?Yt(e,ut):[]}function Cp(e,o){var r=e==null?0:e.length;return r?(o=o===n?1:dt(o),Yt(e,o)):[]}function Ep(e){for(var o=-1,r=e==null?0:e.length,l={};++o<r;){var u=e[o];l[u[0]]=u[1]}return l}function gl(e){return e&&e.length?e[0]:n}function Sp(e,o,r){var l=e==null?0:e.length;if(!l)return-1;var u=r==null?0:dt(r);return u<0&&(u=$t(l+u,0)),_n(e,o,u)}function Tp(e){var o=e==null?0:e.length;return o?Te(e,0,-1):[]}var _p=pt(function(e){var o=Rt(e,fr);return o.length&&o[0]===e[0]?ir(o):[]}),Bp=pt(function(e){var o=_e(e),r=Rt(e,fr);return o===_e(r)?o=n:r.pop(),r.length&&r[0]===e[0]?ir(r,ot(o,2)):[]}),Lp=pt(function(e){var o=_e(e),r=Rt(e,fr);return o=typeof o=="function"?o:n,o&&r.pop(),r.length&&r[0]===e[0]?ir(r,n,o):[]});function Ip(e,o){return e==null?"":Tu.call(e,o)}function _e(e){var o=e==null?0:e.length;return o?e[o-1]:n}function Mp(e,o,r){var l=e==null?0:e.length;if(!l)return-1;var u=l;return r!==n&&(u=dt(r),u=u<0?$t(l+u,0):Vt(u,l-1)),o===o?du(e,o,u):Lo(e,Xs,u,!0)}function Ap(e,o){return e&&e.length?Ta(e,dt(o)):n}var Op=pt(ml);function ml(e,o){return e&&e.length&&o&&o.length?lr(e,o):e}function Rp(e,o,r){return e&&e.length&&o&&o.length?lr(e,o,ot(r,2)):e}function Np(e,o,r){return e&&e.length&&o&&o.length?lr(e,o,n,r):e}var Dp=Ye(function(e,o){var r=e==null?0:e.length,l=tr(e,o);return La(e,Rt(o,function(u){return Ke(u,r)?+u:u}).sort(Fa)),l});function Pp(e,o){var r=[];if(!(e&&e.length))return r;var l=-1,u=[],g=e.length;for(o=ot(o,3);++l<g;){var b=e[l];o(b,l,e)&&(r.push(b),u.push(l))}return La(e,u),r}function Br(e){return e==null?e:Iu.call(e)}function Hp(e,o,r){var l=e==null?0:e.length;return l?(r&&typeof r!="number"&&ee(e,o,r)?(o=0,r=l):(o=o==null?0:dt(o),r=r===n?l:dt(r)),Te(e,o,r)):[]}function Fp(e,o){return Xo(e,o)}function Up(e,o,r){return ur(e,o,ot(r,2))}function zp(e,o){var r=e==null?0:e.length;if(r){var l=Xo(e,o);if(l<r&&Oe(e[l],o))return l}return-1}function Wp(e,o){return Xo(e,o,!0)}function $p(e,o,r){return ur(e,o,ot(r,2),!0)}function jp(e,o){var r=e==null?0:e.length;if(r){var l=Xo(e,o,!0)-1;if(Oe(e[l],o))return l}return-1}function qp(e){return e&&e.length?Ma(e):[]}function Yp(e,o){return e&&e.length?Ma(e,ot(o,2)):[]}function Kp(e){var o=e==null?0:e.length;return o?Te(e,1,o):[]}function Gp(e,o,r){return e&&e.length?(o=r||o===n?1:dt(o),Te(e,0,o<0?0:o)):[]}function Xp(e,o,r){var l=e==null?0:e.length;return l?(o=r||o===n?1:dt(o),o=l-o,Te(e,o<0?0:o,l)):[]}function Zp(e,o){return e&&e.length?Zo(e,ot(o,3),!1,!0):[]}function Vp(e,o){return e&&e.length?Zo(e,ot(o,3)):[]}var Jp=pt(function(e){return ln(Yt(e,1,Ft,!0))}),Qp=pt(function(e){var o=_e(e);return Ft(o)&&(o=n),ln(Yt(e,1,Ft,!0),ot(o,2))}),tf=pt(function(e){var o=_e(e);return o=typeof o=="function"?o:n,ln(Yt(e,1,Ft,!0),n,o)});function ef(e){return e&&e.length?ln(e):[]}function nf(e,o){return e&&e.length?ln(e,ot(o,2)):[]}function of(e,o){return o=typeof o=="function"?o:n,e&&e.length?ln(e,n,o):[]}function Lr(e){if(!(e&&e.length))return[];var o=0;return e=nn(e,function(r){if(Ft(r))return o=$t(r.length,o),!0}),Yi(o,function(r){return Rt(e,$i(r))})}function bl(e,o){if(!(e&&e.length))return[];var r=Lr(e);return o==null?r:Rt(r,function(l){return he(o,n,l)})}var rf=pt(function(e,o){return Ft(e)?so(e,o):[]}),sf=pt(function(e){return pr(nn(e,Ft))}),af=pt(function(e){var o=_e(e);return Ft(o)&&(o=n),pr(nn(e,Ft),ot(o,2))}),lf=pt(function(e){var o=_e(e);return o=typeof o=="function"?o:n,pr(nn(e,Ft),n,o)}),cf=pt(Lr);function df(e,o){return Na(e||[],o||[],ro)}function uf(e,o){return Na(e||[],o||[],co)}var hf=pt(function(e){var o=e.length,r=o>1?e[o-1]:n;return r=typeof r=="function"?(e.pop(),r):n,bl(e,r)});function vl(e){var o=p(e);return o.__chain__=!0,o}function pf(e,o){return o(e),e}function ri(e,o){return o(e)}var ff=Ye(function(e){var o=e.length,r=o?e[0]:0,l=this.__wrapped__,u=function(g){return tr(g,e)};return o>1||this.__actions__.length||!(l instanceof bt)||!Ke(r)?this.thru(u):(l=l.slice(r,+r+(o?1:0)),l.__actions__.push({func:ri,args:[u],thisArg:n}),new Ee(l,this.__chain__).thru(function(g){return o&&!g.length&&g.push(n),g}))});function gf(){return vl(this)}function mf(){return new Ee(this.value(),this.__chain__)}function bf(){this.__values__===n&&(this.__values__=Al(this.value()));var e=this.__index__>=this.__values__.length,o=e?n:this.__values__[this.__index__++];return{done:e,value:o}}function vf(){return this}function wf(e){for(var o,r=this;r instanceof jo;){var l=ul(r);l.__index__=0,l.__values__=n,o?u.__wrapped__=l:o=l;var u=l;r=r.__wrapped__}return u.__wrapped__=e,o}function kf(){var e=this.__wrapped__;if(e instanceof bt){var o=e;return this.__actions__.length&&(o=new bt(this)),o=o.reverse(),o.__actions__.push({func:ri,args:[Br],thisArg:n}),new Ee(o,this.__chain__)}return this.thru(Br)}function yf(){return Ra(this.__wrapped__,this.__actions__)}var xf=Vo(function(e,o,r){Tt.call(e,r)?++e[r]:je(e,r,1)});function Cf(e,o,r){var l=ct(e)?Ks:hh;return r&&ee(e,o,r)&&(o=n),l(e,ot(o,3))}function Ef(e,o){var r=ct(e)?nn:ba;return r(e,ot(o,3))}var Sf=qa(hl),Tf=qa(pl);function _f(e,o){return Yt(si(e,o),1)}function Bf(e,o){return Yt(si(e,o),ut)}function Lf(e,o,r){return r=r===n?1:dt(r),Yt(si(e,o),r)}function wl(e,o){var r=ct(e)?xe:an;return r(e,ot(o,3))}function kl(e,o){var r=ct(e)?Kd:ma;return r(e,ot(o,3))}var If=Vo(function(e,o,r){Tt.call(e,r)?e[r].push(o):je(e,r,[o])});function Mf(e,o,r,l){e=se(e)?e:Fn(e),r=r&&!l?dt(r):0;var u=e.length;return r<0&&(r=$t(u+r,0)),ui(e)?r<=u&&e.indexOf(o,r)>-1:!!u&&_n(e,o,r)>-1}var Af=pt(function(e,o,r){var l=-1,u=typeof o=="function",g=se(e)?M(e.length):[];return an(e,function(b){g[++l]=u?he(o,b,r):ao(b,o,r)}),g}),Of=Vo(function(e,o,r){je(e,r,o)});function si(e,o){var r=ct(e)?Rt:Ca;return r(e,ot(o,3))}function Rf(e,o,r,l){return e==null?[]:(ct(o)||(o=o==null?[]:[o]),r=l?n:r,ct(r)||(r=r==null?[]:[r]),_a(e,o,r))}var Nf=Vo(function(e,o,r){e[r?0:1].push(o)},function(){return[[],[]]});function Df(e,o,r){var l=ct(e)?zi:Vs,u=arguments.length<3;return l(e,ot(o,4),r,u,an)}function Pf(e,o,r){var l=ct(e)?Gd:Vs,u=arguments.length<3;return l(e,ot(o,4),r,u,ma)}function Hf(e,o){var r=ct(e)?nn:ba;return r(e,ci(ot(o,3)))}function Ff(e){var o=ct(e)?ha:Ih;return o(e)}function Uf(e,o,r){(r?ee(e,o,r):o===n)?o=1:o=dt(o);var l=ct(e)?ah:Mh;return l(e,o)}function zf(e){var o=ct(e)?lh:Oh;return o(e)}function Wf(e){if(e==null)return 0;if(se(e))return ui(e)?Ln(e):e.length;var o=Jt(e);return o==Dt||o==Ie?e.size:sr(e).length}function $f(e,o,r){var l=ct(e)?Wi:Rh;return r&&ee(e,o,r)&&(o=n),l(e,ot(o,3))}var jf=pt(function(e,o){if(e==null)return[];var r=o.length;return r>1&&ee(e,o[0],o[1])?o=[]:r>2&&ee(o[0],o[1],o[2])&&(o=[o[0]]),_a(e,Yt(o,1),[])}),ai=Cu||function(){return qt.Date.now()};function qf(e,o){if(typeof o!="function")throw new Ce(d);return e=dt(e),function(){if(--e<1)return o.apply(this,arguments)}}function yl(e,o,r){return o=r?n:o,o=e&&o==null?e.length:o,qe(e,K,n,n,n,n,o)}function xl(e,o){var r;if(typeof o!="function")throw new Ce(d);return e=dt(e),function(){return--e>0&&(r=o.apply(this,arguments)),e<=1&&(o=n),r}}var Ir=pt(function(e,o,r){var l=y;if(r.length){var u=rn(r,Pn(Ir));l|=P}return qe(e,l,o,r,u)}),Cl=pt(function(e,o,r){var l=y|N;if(r.length){var u=rn(r,Pn(Cl));l|=P}return qe(o,l,e,r,u)});function El(e,o,r){o=r?n:o;var l=qe(e,Y,n,n,n,n,n,o);return l.placeholder=El.placeholder,l}function Sl(e,o,r){o=r?n:o;var l=qe(e,U,n,n,n,n,n,o);return l.placeholder=Sl.placeholder,l}function Tl(e,o,r){var l,u,g,b,k,S,H=0,F=!1,z=!1,G=!0;if(typeof e!="function")throw new Ce(d);o=Be(o)||0,Nt(r)&&(F=!!r.leading,z="maxWait"in r,g=z?$t(Be(r.maxWait)||0,o):g,G="trailing"in r?!!r.trailing:G);function tt(Ut){var Re=l,Ze=u;return l=u=n,H=Ut,b=e.apply(Ze,Re),b}function rt(Ut){return H=Ut,k=po(gt,o),F?tt(Ut):b}function ht(Ut){var Re=Ut-S,Ze=Ut-H,ql=o-Re;return z?Vt(ql,g-Ze):ql}function st(Ut){var Re=Ut-S,Ze=Ut-H;return S===n||Re>=o||Re<0||z&&Ze>=g}function gt(){var Ut=ai();if(st(Ut))return kt(Ut);k=po(gt,ht(Ut))}function kt(Ut){return k=n,G&&l?tt(Ut):(l=u=n,b)}function me(){k!==n&&Da(k),H=0,l=S=u=k=n}function ne(){return k===n?b:kt(ai())}function be(){var Ut=ai(),Re=st(Ut);if(l=arguments,u=this,S=Ut,Re){if(k===n)return rt(S);if(z)return Da(k),k=po(gt,o),tt(S)}return k===n&&(k=po(gt,o)),b}return be.cancel=me,be.flush=ne,be}var Yf=pt(function(e,o){return ga(e,1,o)}),Kf=pt(function(e,o,r){return ga(e,Be(o)||0,r)});function Gf(e){return qe(e,B)}function li(e,o){if(typeof e!="function"||o!=null&&typeof o!="function")throw new Ce(d);var r=function(){var l=arguments,u=o?o.apply(this,l):l[0],g=r.cache;if(g.has(u))return g.get(u);var b=e.apply(this,l);return r.cache=g.set(u,b)||g,b};return r.cache=new(li.Cache||$e),r}li.Cache=$e;function ci(e){if(typeof e!="function")throw new Ce(d);return function(){var o=arguments;switch(o.length){case 0:return!e.call(this);case 1:return!e.call(this,o[0]);case 2:return!e.call(this,o[0],o[1]);case 3:return!e.call(this,o[0],o[1],o[2])}return!e.apply(this,o)}}function Xf(e){return xl(2,e)}var Zf=Nh(function(e,o){o=o.length==1&&ct(o[0])?Rt(o[0],pe(ot())):Rt(Yt(o,1),pe(ot()));var r=o.length;return pt(function(l){for(var u=-1,g=Vt(l.length,r);++u<g;)l[u]=o[u].call(this,l[u]);return he(e,this,l)})}),Mr=pt(function(e,o){var r=rn(o,Pn(Mr));return qe(e,P,n,o,r)}),_l=pt(function(e,o){var r=rn(o,Pn(_l));return qe(e,q,n,o,r)}),Vf=Ye(function(e,o){return qe(e,T,n,n,n,o)});function Jf(e,o){if(typeof e!="function")throw new Ce(d);return o=o===n?o:dt(o),pt(e,o)}function Qf(e,o){if(typeof e!="function")throw new Ce(d);return o=o==null?0:$t(dt(o),0),pt(function(r){var l=r[o],u=dn(r,0,o);return l&&on(u,l),he(e,this,u)})}function tg(e,o,r){var l=!0,u=!0;if(typeof e!="function")throw new Ce(d);return Nt(r)&&(l="leading"in r?!!r.leading:l,u="trailing"in r?!!r.trailing:u),Tl(e,o,{leading:l,maxWait:o,trailing:u})}function eg(e){return yl(e,1)}function ng(e,o){return Mr(gr(o),e)}function og(){if(!arguments.length)return[];var e=arguments[0];return ct(e)?e:[e]}function ig(e){return Se(e,I)}function rg(e,o){return o=typeof o=="function"?o:n,Se(e,I,o)}function sg(e){return Se(e,v|I)}function ag(e,o){return o=typeof o=="function"?o:n,Se(e,v|I,o)}function lg(e,o){return o==null||fa(e,o,jt(o))}function Oe(e,o){return e===o||e!==e&&o!==o}var cg=ei(or),dg=ei(function(e,o){return e>=o}),yn=ka(function(){return arguments}())?ka:function(e){return Pt(e)&&Tt.call(e,"callee")&&!sa.call(e,"callee")},ct=M.isArray,ug=zs?pe(zs):vh;function se(e){return e!=null&&di(e.length)&&!Ge(e)}function Ft(e){return Pt(e)&&se(e)}function hg(e){return e===!0||e===!1||Pt(e)&&te(e)==Bt}var un=Su||Wr,pg=Ws?pe(Ws):wh;function fg(e){return Pt(e)&&e.nodeType===1&&!fo(e)}function gg(e){if(e==null)return!0;if(se(e)&&(ct(e)||typeof e=="string"||typeof e.splice=="function"||un(e)||Hn(e)||yn(e)))return!e.length;var o=Jt(e);if(o==Dt||o==Ie)return!e.size;if(ho(e))return!sr(e).length;for(var r in e)if(Tt.call(e,r))return!1;return!0}function mg(e,o){return lo(e,o)}function bg(e,o,r){r=typeof r=="function"?r:n;var l=r?r(e,o):n;return l===n?lo(e,o,n,r):!!l}function Ar(e){if(!Pt(e))return!1;var o=te(e);return o==ie||o==de||typeof e.message=="string"&&typeof e.name=="string"&&!fo(e)}function vg(e){return typeof e=="number"&&la(e)}function Ge(e){if(!Nt(e))return!1;var o=te(e);return o==yt||o==Zt||o==nt||o==zc}function Bl(e){return typeof e=="number"&&e==dt(e)}function di(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Et}function Nt(e){var o=typeof e;return e!=null&&(o=="object"||o=="function")}function Pt(e){return e!=null&&typeof e=="object"}var Ll=$s?pe($s):yh;function wg(e,o){return e===o||rr(e,o,xr(o))}function kg(e,o,r){return r=typeof r=="function"?r:n,rr(e,o,xr(o),r)}function yg(e){return Il(e)&&e!=+e}function xg(e){if(ip(e))throw new lt(a);return ya(e)}function Cg(e){return e===null}function Eg(e){return e==null}function Il(e){return typeof e=="number"||Pt(e)&&te(e)==tn}function fo(e){if(!Pt(e)||te(e)!=ue)return!1;var o=Po(e);if(o===null)return!0;var r=Tt.call(o,"constructor")&&o.constructor;return typeof r=="function"&&r instanceof r&&Oo.call(r)==wu}var Or=js?pe(js):xh;function Sg(e){return Bl(e)&&e>=-Et&&e<=Et}var Ml=qs?pe(qs):Ch;function ui(e){return typeof e=="string"||!ct(e)&&Pt(e)&&te(e)==Zn}function ge(e){return typeof e=="symbol"||Pt(e)&&te(e)==Eo}var Hn=Ys?pe(Ys):Eh;function Tg(e){return e===n}function _g(e){return Pt(e)&&Jt(e)==Vn}function Bg(e){return Pt(e)&&te(e)==$c}var Lg=ei(ar),Ig=ei(function(e,o){return e<=o});function Al(e){if(!e)return[];if(se(e))return ui(e)?Me(e):re(e);if(to&&e[to])return au(e[to]());var o=Jt(e),r=o==Dt?Gi:o==Ie?Io:Fn;return r(e)}function Xe(e){if(!e)return e===0?e:0;if(e=Be(e),e===ut||e===-ut){var o=e<0?-1:1;return o*Ht}return e===e?e:0}function dt(e){var o=Xe(e),r=o%1;return o===o?r?o-r:o:0}function Ol(e){return e?bn(dt(e),0,ft):0}function Be(e){if(typeof e=="number")return e;if(ge(e))return mt;if(Nt(e)){var o=typeof e.valueOf=="function"?e.valueOf():e;e=Nt(o)?o+"":o}if(typeof e!="string")return e===0?e:+e;e=Js(e);var r=dd.test(e);return r||hd.test(e)?jd(e.slice(2),r?2:8):cd.test(e)?mt:+e}function Rl(e){return Ue(e,ae(e))}function Mg(e){return e?bn(dt(e),-Et,Et):e===0?e:0}function St(e){return e==null?"":fe(e)}var Ag=Nn(function(e,o){if(ho(o)||se(o)){Ue(o,jt(o),e);return}for(var r in o)Tt.call(o,r)&&ro(e,r,o[r])}),Nl=Nn(function(e,o){Ue(o,ae(o),e)}),hi=Nn(function(e,o,r,l){Ue(o,ae(o),e,l)}),Og=Nn(function(e,o,r,l){Ue(o,jt(o),e,l)}),Rg=Ye(tr);function Ng(e,o){var r=Rn(e);return o==null?r:pa(r,o)}var Dg=pt(function(e,o){e=Lt(e);var r=-1,l=o.length,u=l>2?o[2]:n;for(u&&ee(o[0],o[1],u)&&(l=1);++r<l;)for(var g=o[r],b=ae(g),k=-1,S=b.length;++k<S;){var H=b[k],F=e[H];(F===n||Oe(F,Mn[H])&&!Tt.call(e,H))&&(e[H]=g[H])}return e}),Pg=pt(function(e){return e.push(n,Ja),he(Dl,n,e)});function Hg(e,o){return Gs(e,ot(o,3),Fe)}function Fg(e,o){return Gs(e,ot(o,3),nr)}function Ug(e,o){return e==null?e:er(e,ot(o,3),ae)}function zg(e,o){return e==null?e:va(e,ot(o,3),ae)}function Wg(e,o){return e&&Fe(e,ot(o,3))}function $g(e,o){return e&&nr(e,ot(o,3))}function jg(e){return e==null?[]:Ko(e,jt(e))}function qg(e){return e==null?[]:Ko(e,ae(e))}function Rr(e,o,r){var l=e==null?n:vn(e,o);return l===n?r:l}function Yg(e,o){return e!=null&&el(e,o,fh)}function Nr(e,o){return e!=null&&el(e,o,gh)}var Kg=Ka(function(e,o,r){o!=null&&typeof o.toString!="function"&&(o=Ro.call(o)),e[o]=r},Pr(le)),Gg=Ka(function(e,o,r){o!=null&&typeof o.toString!="function"&&(o=Ro.call(o)),Tt.call(e,o)?e[o].push(r):e[o]=[r]},ot),Xg=pt(ao);function jt(e){return se(e)?ua(e):sr(e)}function ae(e){return se(e)?ua(e,!0):Sh(e)}function Zg(e,o){var r={};return o=ot(o,3),Fe(e,function(l,u,g){je(r,o(l,u,g),l)}),r}function Vg(e,o){var r={};return o=ot(o,3),Fe(e,function(l,u,g){je(r,u,o(l,u,g))}),r}var Jg=Nn(function(e,o,r){Go(e,o,r)}),Dl=Nn(function(e,o,r,l){Go(e,o,r,l)}),Qg=Ye(function(e,o){var r={};if(e==null)return r;var l=!1;o=Rt(o,function(g){return g=cn(g,e),l||(l=g.length>1),g}),Ue(e,kr(e),r),l&&(r=Se(r,v|_|I,Yh));for(var u=o.length;u--;)hr(r,o[u]);return r});function tm(e,o){return Pl(e,ci(ot(o)))}var em=Ye(function(e,o){return e==null?{}:_h(e,o)});function Pl(e,o){if(e==null)return{};var r=Rt(kr(e),function(l){return[l]});return o=ot(o),Ba(e,r,function(l,u){return o(l,u[0])})}function nm(e,o,r){o=cn(o,e);var l=-1,u=o.length;for(u||(u=1,e=n);++l<u;){var g=e==null?n:e[ze(o[l])];g===n&&(l=u,g=r),e=Ge(g)?g.call(e):g}return e}function om(e,o,r){return e==null?e:co(e,o,r)}function im(e,o,r,l){return l=typeof l=="function"?l:n,e==null?e:co(e,o,r,l)}var Hl=Za(jt),Fl=Za(ae);function rm(e,o,r){var l=ct(e),u=l||un(e)||Hn(e);if(o=ot(o,4),r==null){var g=e&&e.constructor;u?r=l?new g:[]:Nt(e)?r=Ge(g)?Rn(Po(e)):{}:r={}}return(u?xe:Fe)(e,function(b,k,S){return o(r,b,k,S)}),r}function sm(e,o){return e==null?!0:hr(e,o)}function am(e,o,r){return e==null?e:Oa(e,o,gr(r))}function lm(e,o,r,l){return l=typeof l=="function"?l:n,e==null?e:Oa(e,o,gr(r),l)}function Fn(e){return e==null?[]:Ki(e,jt(e))}function cm(e){return e==null?[]:Ki(e,ae(e))}function dm(e,o,r){return r===n&&(r=o,o=n),r!==n&&(r=Be(r),r=r===r?r:0),o!==n&&(o=Be(o),o=o===o?o:0),bn(Be(e),o,r)}function um(e,o,r){return o=Xe(o),r===n?(r=o,o=0):r=Xe(r),e=Be(e),mh(e,o,r)}function hm(e,o,r){if(r&&typeof r!="boolean"&&ee(e,o,r)&&(o=r=n),r===n&&(typeof o=="boolean"?(r=o,o=n):typeof e=="boolean"&&(r=e,e=n)),e===n&&o===n?(e=0,o=1):(e=Xe(e),o===n?(o=e,e=0):o=Xe(o)),e>o){var l=e;e=o,o=l}if(r||e%1||o%1){var u=ca();return Vt(e+u*(o-e+$d("1e-"+((u+"").length-1))),o)}return cr(e,o)}var pm=Dn(function(e,o,r){return o=o.toLowerCase(),e+(r?Ul(o):o)});function Ul(e){return Dr(St(e).toLowerCase())}function zl(e){return e=St(e),e&&e.replace(fd,nu).replace(Od,"")}function fm(e,o,r){e=St(e),o=fe(o);var l=e.length;r=r===n?l:bn(dt(r),0,l);var u=r;return r-=o.length,r>=0&&e.slice(r,u)==o}function gm(e){return e=St(e),e&&Gc.test(e)?e.replace(vs,ou):e}function mm(e){return e=St(e),e&&td.test(e)?e.replace(Mi,"\\$&"):e}var bm=Dn(function(e,o,r){return e+(r?"-":"")+o.toLowerCase()}),vm=Dn(function(e,o,r){return e+(r?" ":"")+o.toLowerCase()}),wm=ja("toLowerCase");function km(e,o,r){e=St(e),o=dt(o);var l=o?Ln(e):0;if(!o||l>=o)return e;var u=(o-l)/2;return ti(zo(u),r)+e+ti(Uo(u),r)}function ym(e,o,r){e=St(e),o=dt(o);var l=o?Ln(e):0;return o&&l<o?e+ti(o-l,r):e}function xm(e,o,r){e=St(e),o=dt(o);var l=o?Ln(e):0;return o&&l<o?ti(o-l,r)+e:e}function Cm(e,o,r){return r||o==null?o=0:o&&(o=+o),Lu(St(e).replace(Ai,""),o||0)}function Em(e,o,r){return(r?ee(e,o,r):o===n)?o=1:o=dt(o),dr(St(e),o)}function Sm(){var e=arguments,o=St(e[0]);return e.length<3?o:o.replace(e[1],e[2])}var Tm=Dn(function(e,o,r){return e+(r?"_":"")+o.toLowerCase()});function _m(e,o,r){return r&&typeof r!="number"&&ee(e,o,r)&&(o=r=n),r=r===n?ft:r>>>0,r?(e=St(e),e&&(typeof o=="string"||o!=null&&!Or(o))&&(o=fe(o),!o&&Bn(e))?dn(Me(e),0,r):e.split(o,r)):[]}var Bm=Dn(function(e,o,r){return e+(r?" ":"")+Dr(o)});function Lm(e,o,r){return e=St(e),r=r==null?0:bn(dt(r),0,e.length),o=fe(o),e.slice(r,r+o.length)==o}function Im(e,o,r){var l=p.templateSettings;r&&ee(e,o,r)&&(o=n),e=St(e),o=hi({},o,l,Va);var u=hi({},o.imports,l.imports,Va),g=jt(u),b=Ki(u,g),k,S,H=0,F=o.interpolate||So,z="__p += '",G=Xi((o.escape||So).source+"|"+F.source+"|"+(F===ws?ld:So).source+"|"+(o.evaluate||So).source+"|$","g"),tt="//# sourceURL="+(Tt.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Hd+"]")+`
`;e.replace(G,function(st,gt,kt,me,ne,be){return kt||(kt=me),z+=e.slice(H,be).replace(gd,iu),gt&&(k=!0,z+=`' +
__e(`+gt+`) +
'`),ne&&(S=!0,z+=`';
`+ne+`;
__p += '`),kt&&(z+=`' +
((__t = (`+kt+`)) == null ? '' : __t) +
'`),H=be+st.length,st}),z+=`';
`;var rt=Tt.call(o,"variable")&&o.variable;if(!rt)z=`with (obj) {
`+z+`
}
`;else if(sd.test(rt))throw new lt(h);z=(S?z.replace(jc,""):z).replace(qc,"$1").replace(Yc,"$1;"),z="function("+(rt||"obj")+`) {
`+(rt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(k?", __e = _.escape":"")+(S?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+z+`return __p
}`;var ht=$l(function(){return xt(g,tt+"return "+z).apply(n,b)});if(ht.source=z,Ar(ht))throw ht;return ht}function Mm(e){return St(e).toLowerCase()}function Am(e){return St(e).toUpperCase()}function Om(e,o,r){if(e=St(e),e&&(r||o===n))return Js(e);if(!e||!(o=fe(o)))return e;var l=Me(e),u=Me(o),g=Qs(l,u),b=ta(l,u)+1;return dn(l,g,b).join("")}function Rm(e,o,r){if(e=St(e),e&&(r||o===n))return e.slice(0,na(e)+1);if(!e||!(o=fe(o)))return e;var l=Me(e),u=ta(l,Me(o))+1;return dn(l,0,u).join("")}function Nm(e,o,r){if(e=St(e),e&&(r||o===n))return e.replace(Ai,"");if(!e||!(o=fe(o)))return e;var l=Me(e),u=Qs(l,Me(o));return dn(l,u).join("")}function Dm(e,o){var r=R,l=A;if(Nt(o)){var u="separator"in o?o.separator:u;r="length"in o?dt(o.length):r,l="omission"in o?fe(o.omission):l}e=St(e);var g=e.length;if(Bn(e)){var b=Me(e);g=b.length}if(r>=g)return e;var k=r-Ln(l);if(k<1)return l;var S=b?dn(b,0,k).join(""):e.slice(0,k);if(u===n)return S+l;if(b&&(k+=S.length-k),Or(u)){if(e.slice(k).search(u)){var H,F=S;for(u.global||(u=Xi(u.source,St(ks.exec(u))+"g")),u.lastIndex=0;H=u.exec(F);)var z=H.index;S=S.slice(0,z===n?k:z)}}else if(e.indexOf(fe(u),k)!=k){var G=S.lastIndexOf(u);G>-1&&(S=S.slice(0,G))}return S+l}function Pm(e){return e=St(e),e&&Kc.test(e)?e.replace(bs,uu):e}var Hm=Dn(function(e,o,r){return e+(r?" ":"")+o.toUpperCase()}),Dr=ja("toUpperCase");function Wl(e,o,r){return e=St(e),o=r?n:o,o===n?su(e)?fu(e):Vd(e):e.match(o)||[]}var $l=pt(function(e,o){try{return he(e,n,o)}catch(r){return Ar(r)?r:new lt(r)}}),Fm=Ye(function(e,o){return xe(o,function(r){r=ze(r),je(e,r,Ir(e[r],e))}),e});function Um(e){var o=e==null?0:e.length,r=ot();return e=o?Rt(e,function(l){if(typeof l[1]!="function")throw new Ce(d);return[r(l[0]),l[1]]}):[],pt(function(l){for(var u=-1;++u<o;){var g=e[u];if(he(g[0],this,l))return he(g[1],this,l)}})}function zm(e){return uh(Se(e,v))}function Pr(e){return function(){return e}}function Wm(e,o){return e==null||e!==e?o:e}var $m=Ya(),jm=Ya(!0);function le(e){return e}function Hr(e){return xa(typeof e=="function"?e:Se(e,v))}function qm(e){return Ea(Se(e,v))}function Ym(e,o){return Sa(e,Se(o,v))}var Km=pt(function(e,o){return function(r){return ao(r,e,o)}}),Gm=pt(function(e,o){return function(r){return ao(e,r,o)}});function Fr(e,o,r){var l=jt(o),u=Ko(o,l);r==null&&!(Nt(o)&&(u.length||!l.length))&&(r=o,o=e,e=this,u=Ko(o,jt(o)));var g=!(Nt(r)&&"chain"in r)||!!r.chain,b=Ge(e);return xe(u,function(k){var S=o[k];e[k]=S,b&&(e.prototype[k]=function(){var H=this.__chain__;if(g||H){var F=e(this.__wrapped__),z=F.__actions__=re(this.__actions__);return z.push({func:S,args:arguments,thisArg:e}),F.__chain__=H,F}return S.apply(e,on([this.value()],arguments))})}),e}function Xm(){return qt._===this&&(qt._=ku),this}function Ur(){}function Zm(e){return e=dt(e),pt(function(o){return Ta(o,e)})}var Vm=br(Rt),Jm=br(Ks),Qm=br(Wi);function jl(e){return Er(e)?$i(ze(e)):Bh(e)}function tb(e){return function(o){return e==null?n:vn(e,o)}}var eb=Ga(),nb=Ga(!0);function zr(){return[]}function Wr(){return!1}function ob(){return{}}function ib(){return""}function rb(){return!0}function sb(e,o){if(e=dt(e),e<1||e>Et)return[];var r=ft,l=Vt(e,ft);o=ot(o),e-=ft;for(var u=Yi(l,o);++r<e;)o(r);return u}function ab(e){return ct(e)?Rt(e,ze):ge(e)?[e]:re(dl(St(e)))}function lb(e){var o=++vu;return St(e)+o}var cb=Qo(function(e,o){return e+o},0),db=vr("ceil"),ub=Qo(function(e,o){return e/o},1),hb=vr("floor");function pb(e){return e&&e.length?Yo(e,le,or):n}function fb(e,o){return e&&e.length?Yo(e,ot(o,2),or):n}function gb(e){return Zs(e,le)}function mb(e,o){return Zs(e,ot(o,2))}function bb(e){return e&&e.length?Yo(e,le,ar):n}function vb(e,o){return e&&e.length?Yo(e,ot(o,2),ar):n}var wb=Qo(function(e,o){return e*o},1),kb=vr("round"),yb=Qo(function(e,o){return e-o},0);function xb(e){return e&&e.length?qi(e,le):0}function Cb(e,o){return e&&e.length?qi(e,ot(o,2)):0}return p.after=qf,p.ary=yl,p.assign=Ag,p.assignIn=Nl,p.assignInWith=hi,p.assignWith=Og,p.at=Rg,p.before=xl,p.bind=Ir,p.bindAll=Fm,p.bindKey=Cl,p.castArray=og,p.chain=vl,p.chunk=up,p.compact=hp,p.concat=pp,p.cond=Um,p.conforms=zm,p.constant=Pr,p.countBy=xf,p.create=Ng,p.curry=El,p.curryRight=Sl,p.debounce=Tl,p.defaults=Dg,p.defaultsDeep=Pg,p.defer=Yf,p.delay=Kf,p.difference=fp,p.differenceBy=gp,p.differenceWith=mp,p.drop=bp,p.dropRight=vp,p.dropRightWhile=wp,p.dropWhile=kp,p.fill=yp,p.filter=Ef,p.flatMap=_f,p.flatMapDeep=Bf,p.flatMapDepth=Lf,p.flatten=fl,p.flattenDeep=xp,p.flattenDepth=Cp,p.flip=Gf,p.flow=$m,p.flowRight=jm,p.fromPairs=Ep,p.functions=jg,p.functionsIn=qg,p.groupBy=If,p.initial=Tp,p.intersection=_p,p.intersectionBy=Bp,p.intersectionWith=Lp,p.invert=Kg,p.invertBy=Gg,p.invokeMap=Af,p.iteratee=Hr,p.keyBy=Of,p.keys=jt,p.keysIn=ae,p.map=si,p.mapKeys=Zg,p.mapValues=Vg,p.matches=qm,p.matchesProperty=Ym,p.memoize=li,p.merge=Jg,p.mergeWith=Dl,p.method=Km,p.methodOf=Gm,p.mixin=Fr,p.negate=ci,p.nthArg=Zm,p.omit=Qg,p.omitBy=tm,p.once=Xf,p.orderBy=Rf,p.over=Vm,p.overArgs=Zf,p.overEvery=Jm,p.overSome=Qm,p.partial=Mr,p.partialRight=_l,p.partition=Nf,p.pick=em,p.pickBy=Pl,p.property=jl,p.propertyOf=tb,p.pull=Op,p.pullAll=ml,p.pullAllBy=Rp,p.pullAllWith=Np,p.pullAt=Dp,p.range=eb,p.rangeRight=nb,p.rearg=Vf,p.reject=Hf,p.remove=Pp,p.rest=Jf,p.reverse=Br,p.sampleSize=Uf,p.set=om,p.setWith=im,p.shuffle=zf,p.slice=Hp,p.sortBy=jf,p.sortedUniq=qp,p.sortedUniqBy=Yp,p.split=_m,p.spread=Qf,p.tail=Kp,p.take=Gp,p.takeRight=Xp,p.takeRightWhile=Zp,p.takeWhile=Vp,p.tap=pf,p.throttle=tg,p.thru=ri,p.toArray=Al,p.toPairs=Hl,p.toPairsIn=Fl,p.toPath=ab,p.toPlainObject=Rl,p.transform=rm,p.unary=eg,p.union=Jp,p.unionBy=Qp,p.unionWith=tf,p.uniq=ef,p.uniqBy=nf,p.uniqWith=of,p.unset=sm,p.unzip=Lr,p.unzipWith=bl,p.update=am,p.updateWith=lm,p.values=Fn,p.valuesIn=cm,p.without=rf,p.words=Wl,p.wrap=ng,p.xor=sf,p.xorBy=af,p.xorWith=lf,p.zip=cf,p.zipObject=df,p.zipObjectDeep=uf,p.zipWith=hf,p.entries=Hl,p.entriesIn=Fl,p.extend=Nl,p.extendWith=hi,Fr(p,p),p.add=cb,p.attempt=$l,p.camelCase=pm,p.capitalize=Ul,p.ceil=db,p.clamp=dm,p.clone=ig,p.cloneDeep=sg,p.cloneDeepWith=ag,p.cloneWith=rg,p.conformsTo=lg,p.deburr=zl,p.defaultTo=Wm,p.divide=ub,p.endsWith=fm,p.eq=Oe,p.escape=gm,p.escapeRegExp=mm,p.every=Cf,p.find=Sf,p.findIndex=hl,p.findKey=Hg,p.findLast=Tf,p.findLastIndex=pl,p.findLastKey=Fg,p.floor=hb,p.forEach=wl,p.forEachRight=kl,p.forIn=Ug,p.forInRight=zg,p.forOwn=Wg,p.forOwnRight=$g,p.get=Rr,p.gt=cg,p.gte=dg,p.has=Yg,p.hasIn=Nr,p.head=gl,p.identity=le,p.includes=Mf,p.indexOf=Sp,p.inRange=um,p.invoke=Xg,p.isArguments=yn,p.isArray=ct,p.isArrayBuffer=ug,p.isArrayLike=se,p.isArrayLikeObject=Ft,p.isBoolean=hg,p.isBuffer=un,p.isDate=pg,p.isElement=fg,p.isEmpty=gg,p.isEqual=mg,p.isEqualWith=bg,p.isError=Ar,p.isFinite=vg,p.isFunction=Ge,p.isInteger=Bl,p.isLength=di,p.isMap=Ll,p.isMatch=wg,p.isMatchWith=kg,p.isNaN=yg,p.isNative=xg,p.isNil=Eg,p.isNull=Cg,p.isNumber=Il,p.isObject=Nt,p.isObjectLike=Pt,p.isPlainObject=fo,p.isRegExp=Or,p.isSafeInteger=Sg,p.isSet=Ml,p.isString=ui,p.isSymbol=ge,p.isTypedArray=Hn,p.isUndefined=Tg,p.isWeakMap=_g,p.isWeakSet=Bg,p.join=Ip,p.kebabCase=bm,p.last=_e,p.lastIndexOf=Mp,p.lowerCase=vm,p.lowerFirst=wm,p.lt=Lg,p.lte=Ig,p.max=pb,p.maxBy=fb,p.mean=gb,p.meanBy=mb,p.min=bb,p.minBy=vb,p.stubArray=zr,p.stubFalse=Wr,p.stubObject=ob,p.stubString=ib,p.stubTrue=rb,p.multiply=wb,p.nth=Ap,p.noConflict=Xm,p.noop=Ur,p.now=ai,p.pad=km,p.padEnd=ym,p.padStart=xm,p.parseInt=Cm,p.random=hm,p.reduce=Df,p.reduceRight=Pf,p.repeat=Em,p.replace=Sm,p.result=nm,p.round=kb,p.runInContext=C,p.sample=Ff,p.size=Wf,p.snakeCase=Tm,p.some=$f,p.sortedIndex=Fp,p.sortedIndexBy=Up,p.sortedIndexOf=zp,p.sortedLastIndex=Wp,p.sortedLastIndexBy=$p,p.sortedLastIndexOf=jp,p.startCase=Bm,p.startsWith=Lm,p.subtract=yb,p.sum=xb,p.sumBy=Cb,p.template=Im,p.times=sb,p.toFinite=Xe,p.toInteger=dt,p.toLength=Ol,p.toLower=Mm,p.toNumber=Be,p.toSafeInteger=Mg,p.toString=St,p.toUpper=Am,p.trim=Om,p.trimEnd=Rm,p.trimStart=Nm,p.truncate=Dm,p.unescape=Pm,p.uniqueId=lb,p.upperCase=Hm,p.upperFirst=Dr,p.each=wl,p.eachRight=kl,p.first=gl,Fr(p,function(){var e={};return Fe(p,function(o,r){Tt.call(p.prototype,r)||(e[r]=o)}),e}(),{chain:!1}),p.VERSION=i,xe(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),xe(["drop","take"],function(e,o){bt.prototype[e]=function(r){r=r===n?1:$t(dt(r),0);var l=this.__filtered__&&!o?new bt(this):this.clone();return l.__filtered__?l.__takeCount__=Vt(r,l.__takeCount__):l.__views__.push({size:Vt(r,ft),type:e+(l.__dir__<0?"Right":"")}),l},bt.prototype[e+"Right"]=function(r){return this.reverse()[e](r).reverse()}}),xe(["filter","map","takeWhile"],function(e,o){var r=o+1,l=r==J||r==wt;bt.prototype[e]=function(u){var g=this.clone();return g.__iteratees__.push({iteratee:ot(u,3),type:r}),g.__filtered__=g.__filtered__||l,g}}),xe(["head","last"],function(e,o){var r="take"+(o?"Right":"");bt.prototype[e]=function(){return this[r](1).value()[0]}}),xe(["initial","tail"],function(e,o){var r="drop"+(o?"":"Right");bt.prototype[e]=function(){return this.__filtered__?new bt(this):this[r](1)}}),bt.prototype.compact=function(){return this.filter(le)},bt.prototype.find=function(e){return this.filter(e).head()},bt.prototype.findLast=function(e){return this.reverse().find(e)},bt.prototype.invokeMap=pt(function(e,o){return typeof e=="function"?new bt(this):this.map(function(r){return ao(r,e,o)})}),bt.prototype.reject=function(e){return this.filter(ci(ot(e)))},bt.prototype.slice=function(e,o){e=dt(e);var r=this;return r.__filtered__&&(e>0||o<0)?new bt(r):(e<0?r=r.takeRight(-e):e&&(r=r.drop(e)),o!==n&&(o=dt(o),r=o<0?r.dropRight(-o):r.take(o-e)),r)},bt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},bt.prototype.toArray=function(){return this.take(ft)},Fe(bt.prototype,function(e,o){var r=/^(?:filter|find|map|reject)|While$/.test(o),l=/^(?:head|last)$/.test(o),u=p[l?"take"+(o=="last"?"Right":""):o],g=l||/^find/.test(o);u&&(p.prototype[o]=function(){var b=this.__wrapped__,k=l?[1]:arguments,S=b instanceof bt,H=k[0],F=S||ct(b),z=function(gt){var kt=u.apply(p,on([gt],k));return l&&G?kt[0]:kt};F&&r&&typeof H=="function"&&H.length!=1&&(S=F=!1);var G=this.__chain__,tt=!!this.__actions__.length,rt=g&&!G,ht=S&&!tt;if(!g&&F){b=ht?b:new bt(this);var st=e.apply(b,k);return st.__actions__.push({func:ri,args:[z],thisArg:n}),new Ee(st,G)}return rt&&ht?e.apply(this,k):(st=this.thru(z),rt?l?st.value()[0]:st.value():st)})}),xe(["pop","push","shift","sort","splice","unshift"],function(e){var o=Mo[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",l=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var u=arguments;if(l&&!this.__chain__){var g=this.value();return o.apply(ct(g)?g:[],u)}return this[r](function(b){return o.apply(ct(b)?b:[],u)})}}),Fe(bt.prototype,function(e,o){var r=p[o];if(r){var l=r.name+"";Tt.call(On,l)||(On[l]=[]),On[l].push({name:o,func:r})}}),On[Jo(n,N).name]=[{name:"wrapper",func:n}],bt.prototype.clone=Du,bt.prototype.reverse=Pu,bt.prototype.value=Hu,p.prototype.at=ff,p.prototype.chain=gf,p.prototype.commit=mf,p.prototype.next=bf,p.prototype.plant=wf,p.prototype.reverse=kf,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=yf,p.prototype.first=p.prototype.head,to&&(p.prototype[to]=vf),p},In=gu();pn?((pn.exports=In)._=In,Hi._=In):qt._=In}).call(go)})(gi,gi.exports);var Eb=gi.exports;const dc=ns(Eb);var uc={exports:{}};(function(c,t){(function(n,i){c.exports=i()})(self,()=>(()=>{var n={757:(d,h,f)=>{d.exports=f(666)},666:d=>{var h=function(f){var m,x=Object.prototype,v=x.hasOwnProperty,_=typeof Symbol=="function"?Symbol:{},I=_.iterator||"@@iterator",E=_.asyncIterator||"@@asyncIterator",w=_.toStringTag||"@@toStringTag";function y($,W,Q){return Object.defineProperty($,W,{value:Q,enumerable:!0,configurable:!0,writable:!0}),$[W]}try{y({},"")}catch{y=function(W,Q,it){return W[Q]=it}}function N($,W,Q,it){var nt=W&&W.prototype instanceof T?W:T,Bt=Object.create(nt.prototype),It=new mt(it||[]);return Bt._invoke=function(de,ie,yt){var Zt=Y;return function(Dt,tn){if(Zt===P)throw new Error("Generator is already running");if(Zt===q){if(Dt==="throw")throw tn;return oe()}for(yt.method=Dt,yt.arg=tn;;){var Co=yt.delegate;if(Co){var ue=ut(Co,yt);if(ue){if(ue===K)continue;return ue}}if(yt.method==="next")yt.sent=yt._sent=yt.arg;else if(yt.method==="throw"){if(Zt===Y)throw Zt=q,yt.arg;yt.dispatchException(yt.arg)}else yt.method==="return"&&yt.abrupt("return",yt.arg);Zt=P;var en=O(de,ie,yt);if(en.type==="normal"){if(Zt=yt.done?q:U,en.arg===K)continue;return{value:en.arg,done:yt.done}}en.type==="throw"&&(Zt=q,yt.method="throw",yt.arg=en.arg)}}}($,Q,It),Bt}function O($,W,Q){try{return{type:"normal",arg:$.call(W,Q)}}catch(it){return{type:"throw",arg:it}}}f.wrap=N;var Y="suspendedStart",U="suspendedYield",P="executing",q="completed",K={};function T(){}function B(){}function R(){}var A={};y(A,I,function(){return this});var j=Object.getPrototypeOf,X=j&&j(j(ft([])));X&&X!==x&&v.call(X,I)&&(A=X);var J=R.prototype=T.prototype=Object.create(A);function V($){["next","throw","return"].forEach(function(W){y($,W,function(Q){return this._invoke(W,Q)})})}function wt($,W){function Q(nt,Bt,It,de){var ie=O($[nt],$,Bt);if(ie.type!=="throw"){var yt=ie.arg,Zt=yt.value;return Zt&&typeof Zt=="object"&&v.call(Zt,"__await")?W.resolve(Zt.__await).then(function(Dt){Q("next",Dt,It,de)},function(Dt){Q("throw",Dt,It,de)}):W.resolve(Zt).then(function(Dt){yt.value=Dt,It(yt)},function(Dt){return Q("throw",Dt,It,de)})}de(ie.arg)}var it;this._invoke=function(nt,Bt){function It(){return new W(function(de,ie){Q(nt,Bt,de,ie)})}return it=it?it.then(It,It):It()}}function ut($,W){var Q=$.iterator[W.method];if(Q===m){if(W.delegate=null,W.method==="throw"){if($.iterator.return&&(W.method="return",W.arg=m,ut($,W),W.method==="throw"))return K;W.method="throw",W.arg=new TypeError("The iterator does not provide a 'throw' method")}return K}var it=O(Q,$.iterator,W.arg);if(it.type==="throw")return W.method="throw",W.arg=it.arg,W.delegate=null,K;var nt=it.arg;return nt?nt.done?(W[$.resultName]=nt.value,W.next=$.nextLoc,W.method!=="return"&&(W.method="next",W.arg=m),W.delegate=null,K):nt:(W.method="throw",W.arg=new TypeError("iterator result is not an object"),W.delegate=null,K)}function Et($){var W={tryLoc:$[0]};1 in $&&(W.catchLoc=$[1]),2 in $&&(W.finallyLoc=$[2],W.afterLoc=$[3]),this.tryEntries.push(W)}function Ht($){var W=$.completion||{};W.type="normal",delete W.arg,$.completion=W}function mt($){this.tryEntries=[{tryLoc:"root"}],$.forEach(Et,this),this.reset(!0)}function ft($){if($){var W=$[I];if(W)return W.call($);if(typeof $.next=="function")return $;if(!isNaN($.length)){var Q=-1,it=function nt(){for(;++Q<$.length;)if(v.call($,Q))return nt.value=$[Q],nt.done=!1,nt;return nt.value=m,nt.done=!0,nt};return it.next=it}}return{next:oe}}function oe(){return{value:m,done:!0}}return B.prototype=R,y(J,"constructor",R),y(R,"constructor",B),B.displayName=y(R,w,"GeneratorFunction"),f.isGeneratorFunction=function($){var W=typeof $=="function"&&$.constructor;return!!W&&(W===B||(W.displayName||W.name)==="GeneratorFunction")},f.mark=function($){return Object.setPrototypeOf?Object.setPrototypeOf($,R):($.__proto__=R,y($,w,"GeneratorFunction")),$.prototype=Object.create(J),$},f.awrap=function($){return{__await:$}},V(wt.prototype),y(wt.prototype,E,function(){return this}),f.AsyncIterator=wt,f.async=function($,W,Q,it,nt){nt===void 0&&(nt=Promise);var Bt=new wt(N($,W,Q,it),nt);return f.isGeneratorFunction(W)?Bt:Bt.next().then(function(It){return It.done?It.value:Bt.next()})},V(J),y(J,w,"Generator"),y(J,I,function(){return this}),y(J,"toString",function(){return"[object Generator]"}),f.keys=function($){var W=[];for(var Q in $)W.push(Q);return W.reverse(),function it(){for(;W.length;){var nt=W.pop();if(nt in $)return it.value=nt,it.done=!1,it}return it.done=!0,it}},f.values=ft,mt.prototype={constructor:mt,reset:function($){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(Ht),!$)for(var W in this)W.charAt(0)==="t"&&v.call(this,W)&&!isNaN(+W.slice(1))&&(this[W]=m)},stop:function(){this.done=!0;var $=this.tryEntries[0].completion;if($.type==="throw")throw $.arg;return this.rval},dispatchException:function($){if(this.done)throw $;var W=this;function Q(ie,yt){return Bt.type="throw",Bt.arg=$,W.next=ie,yt&&(W.method="next",W.arg=m),!!yt}for(var it=this.tryEntries.length-1;it>=0;--it){var nt=this.tryEntries[it],Bt=nt.completion;if(nt.tryLoc==="root")return Q("end");if(nt.tryLoc<=this.prev){var It=v.call(nt,"catchLoc"),de=v.call(nt,"finallyLoc");if(It&&de){if(this.prev<nt.catchLoc)return Q(nt.catchLoc,!0);if(this.prev<nt.finallyLoc)return Q(nt.finallyLoc)}else if(It){if(this.prev<nt.catchLoc)return Q(nt.catchLoc,!0)}else{if(!de)throw new Error("try statement without catch or finally");if(this.prev<nt.finallyLoc)return Q(nt.finallyLoc)}}}},abrupt:function($,W){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var it=this.tryEntries[Q];if(it.tryLoc<=this.prev&&v.call(it,"finallyLoc")&&this.prev<it.finallyLoc){var nt=it;break}}nt&&($==="break"||$==="continue")&&nt.tryLoc<=W&&W<=nt.finallyLoc&&(nt=null);var Bt=nt?nt.completion:{};return Bt.type=$,Bt.arg=W,nt?(this.method="next",this.next=nt.finallyLoc,K):this.complete(Bt)},complete:function($,W){if($.type==="throw")throw $.arg;return $.type==="break"||$.type==="continue"?this.next=$.arg:$.type==="return"?(this.rval=this.arg=$.arg,this.method="return",this.next="end"):$.type==="normal"&&W&&(this.next=W),K},finish:function($){for(var W=this.tryEntries.length-1;W>=0;--W){var Q=this.tryEntries[W];if(Q.finallyLoc===$)return this.complete(Q.completion,Q.afterLoc),Ht(Q),K}},catch:function($){for(var W=this.tryEntries.length-1;W>=0;--W){var Q=this.tryEntries[W];if(Q.tryLoc===$){var it=Q.completion;if(it.type==="throw"){var nt=it.arg;Ht(Q)}return nt}}throw new Error("illegal catch attempt")},delegateYield:function($,W,Q){return this.delegate={iterator:ft($),resultName:W,nextLoc:Q},this.method==="next"&&(this.arg=m),K}},f}(d.exports);try{regeneratorRuntime=h}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=h:Function("r","regeneratorRuntime = r")(h)}},571:function(d,h){var f,m;f=function(x){var v=function(){function I(E,w){for(var y=0;y<w.length;y++){var N=w[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(E,N.key,N)}}return function(E,w,y){return w&&I(E.prototype,w),y&&I(E,y),E}}(),_=function(){function I(E){(function(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")})(this,I),this.target=E,this.isContentEditable=E&&E.contentEditable}return v(I,[{key:"getPos",value:function(){if(document.activeElement!==this.target)return-1;if(this.isContentEditable){this.target.focus();var E=document.getSelection().getRangeAt(0),w=E.cloneRange();return w.selectNodeContents(this.target),w.setEnd(E.endContainer,E.endOffset),w.toString().length}return this.target.selectionStart}},{key:"setPos",value:function(E){if(this.isContentEditable){if(E>=0){var w=window.getSelection(),y=this.createRange(this.target,{count:E});y&&(y.collapse(!1),w.removeAllRanges(),w.addRange(y))}}else this.target.setSelectionRange(E,E)}},{key:"createRange",value:function(E,w,y){if(y||((y=document.createRange()).selectNode(E),y.setStart(E,0)),w.count===0)y.setEnd(E,w.count);else if(E&&w.count>0)if(E.nodeType===Node.TEXT_NODE)E.textContent.length<w.count?w.count-=E.textContent.length:(y.setEnd(E,w.count),w.count=0);else for(var N=0;N<E.childNodes.length&&(y=this.createRange(E.childNodes[N],w,y),w.count!==0);N++);return y}}]),I}();x.exports=_},(m=f.apply(h,[d]))===void 0||(d.exports=m)},334:(d,h,f)=>{d.exports=f(571)}},i={};function s(d){var h=i[d];if(h!==void 0)return h.exports;var f=i[d]={exports:{}};return n[d].call(f.exports,f,f.exports,s),f.exports}s.n=d=>{var h=d&&d.__esModule?()=>d.default:()=>d;return s.d(h,{a:h}),h},s.d=(d,h)=>{for(var f in h)s.o(h,f)&&!s.o(d,f)&&Object.defineProperty(d,f,{enumerable:!0,get:h[f]})},s.o=(d,h)=>Object.prototype.hasOwnProperty.call(d,h);var a={};return(()=>{function d(U,P,q,K,T,B,R){try{var A=U[B](R),j=A.value}catch(X){return void q(X)}A.done?P(j):Promise.resolve(j).then(K,T)}function h(U){return function(){var P=this,q=arguments;return new Promise(function(K,T){var B=U.apply(P,q);function R(j){d(B,K,T,R,A,"next",j)}function A(j){d(B,K,T,R,A,"throw",j)}R(void 0)})}}function f(U,P,q){return P in U?Object.defineProperty(U,P,{value:q,enumerable:!0,configurable:!0,writable:!0}):U[P]=q,U}function m(U,P){if(!(U instanceof P))throw new TypeError("Cannot call a class as a function")}function x(U,P){for(var q=0;q<P.length;q++){var K=P[q];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(U,K.key,K)}}function v(U,P,q){return P&&x(U.prototype,P),q&&x(U,q),Object.defineProperty(U,"prototype",{writable:!1}),U}s.d(a,{default:()=>Y});var _=s(757),I=s.n(_),E=s(334),w=s.n(E),y=function(){function U(P,q,K){m(this,U),this.holder=q,this.observer=null,this.debounceTimer=K,this.mutationDebouncer=this.debounce(function(){P()},this.debounceTimer)}return v(U,[{key:"setMutationObserver",value:function(){var P=this,q=this.holder.querySelector(".codex-editor__redactor");this.observer=new MutationObserver(function(K){P.mutationHandler(K)}),this.observer.observe(q,{childList:!0,attributes:!0,subtree:!0,characterData:!0,characterDataOldValue:!0})}},{key:"mutationHandler",value:function(P){var q=this,K=!1;P.forEach(function(T){switch(T.type){case"childList":T.target===q.holder?q.onDestroy():K=!0;break;case"characterData":K=!0;break;case"attributes":T.target.classList.contains("ce-block")||T.target.classList.contains("tc-toolbox")||(K=!0)}}),K&&this.mutationDebouncer()}},{key:"debounce",value:function(P,q){var K,T=this;return function(){for(var B=arguments.length,R=new Array(B),A=0;A<B;A++)R[A]=arguments[A];var j=T;clearTimeout(K),K=setTimeout(function(){return P.apply(j,R)},q)}}},{key:"onDestroy",value:function(){var P=new CustomEvent("destroy");document.dispatchEvent(P),this.observer.disconnect()}}]),U}();function N(U,P){var q=Object.keys(U);if(Object.getOwnPropertySymbols){var K=Object.getOwnPropertySymbols(U);P&&(K=K.filter(function(T){return Object.getOwnPropertyDescriptor(U,T).enumerable})),q.push.apply(q,K)}return q}function O(U){for(var P=1;P<arguments.length;P++){var q=arguments[P]!=null?arguments[P]:{};P%2?N(Object(q),!0).forEach(function(K){f(U,K,q[K])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(q)):N(Object(q)).forEach(function(K){Object.defineProperty(U,K,Object.getOwnPropertyDescriptor(q,K))})}return U}var Y=function(){function U(T){var B=this,R=T.editor,A=T.config,j=A===void 0?{}:A,X=T.onUpdate,J=T.maxLength;m(this,U);var V={maxLength:30,onUpdate:function(){},config:{debounceTimer:200,shortcuts:{undo:["CMD+Z"],redo:["CMD+Y","CMD+SHIFT+Z"]}}},wt=R.blocks,ut=R.caret,Et=R.configuration,Ht=Et.holder,mt=Et.defaultBlock,ft=V.config.shortcuts,oe=j.shortcuts,$=O(O({},ft),oe),W=Array.isArray($.undo)?$.undo:[$.undo],Q=Array.isArray($.redo)?$.redo:[$.redo],it=V.config.debounceTimer,nt=j.debounceTimer,Bt=nt===void 0?it:nt;this.holder=typeof Ht=="string"?document.getElementById(Ht):Ht,this.editor=R,this.defaultBlock=mt,this.blocks=wt,this.caret=ut,this.shouldSaveHistory=!0,this.readOnly=Et.readOnly,this.maxLength=J||V.maxLength,this.onUpdate=X||V.onUpdate,this.config={debounceTimer:Bt,shortcuts:{undo:W,redo:Q}},new y(function(){return B.registerChange()},this.holder,this.config.debounceTimer).setMutationObserver(),this.setEventListeners(),this.initialItem=null,this.clear()}var P,q,K;return v(U,[{key:"truncate",value:function(T,B){for(;T.length>B;)T.shift()}},{key:"initialize",value:function(T){var B="blocks"in T?T.blocks:T,R={index:B.length-1,state:B};this.stack[0]=R,this.initialItem=R}},{key:"clear",value:function(){this.stack=this.initialItem?[this.initialItem]:[{index:0,state:[{type:this.defaultBlock,data:{}}]}],this.position=0,this.onUpdate()}},{key:"setReadOnly",value:function(){var T=this.holder.querySelector(".ce-toolbox");this.readOnly=!T}},{key:"registerChange",value:function(){var T=this;this.setReadOnly(),this.readOnly||(this.editor&&this.editor.save&&this.shouldSaveHistory&&this.editor.save().then(function(B){T.editorDidUpdate(B.blocks)&&T.save(B.blocks)}),this.shouldSaveHistory=!0)}},{key:"editorDidUpdate",value:function(T){var B=this.stack[this.position].state;return!!T.length&&(T.length!==B.length||JSON.stringify(B)!==JSON.stringify(T))}},{key:"save",value:function(T){this.position>=this.maxLength&&this.truncate(this.stack,this.maxLength),this.position=Math.min(this.position,this.stack.length-1),this.stack=this.stack.slice(0,this.position+1);var B=this.blocks.getCurrentBlockIndex(),R=this.blocks.getBlocksCount(),A=B;T[B]||(A-=R-T.length);var j=!T[A]||T[A].type!=="paragraph"&&T[A].type!=="header"?null:this.getCaretIndex(B);this.stack.push({index:A,state:T,caretIndex:j}),this.position+=1,this.onUpdate()}},{key:"getCaretIndex",value:function(T){var B=this.holder.getElementsByClassName("ce-block__content");return new(w())(B[T].firstChild).getPos()}},{key:"insertDeletedBlock",value:function(T,B,R){for(var A=0;A<T.length;A+=1)if(!B[A]||T[A].id!==B[A].id){this.blocks.insert(T[A].type,T[A].data,{},A,!0),this.caret.setToBlock(R,"end");break}}},{key:"blockWasDropped",value:function(T,B){return T.length===B.length&&T.some(function(R,A){return R.id!==B[A].id})}},{key:"blockWasSkipped",value:function(T,B,R,A){return T<B&&R.length!==A.length}},{key:"contentChangedInNoFocusBlock",value:function(T,B){return T!==B}},{key:"blockWasDeleted",value:function(T,B){return T.length>B.length}},{key:"undo",value:(K=h(I().mark(function T(){var B,R,A,j,X,J,V,wt,ut,Et,Ht;return I().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(!this.canUndo()){mt.next=43;break}if(B=this.stack[this.position],R=B.index,A=B.state,this.position-=1,this.shouldSaveHistory=!1,j=this.stack[this.position].index,X=this.stack[this.position],J=X.state,V=X.caretIndex,this.onUpdate(),wt=this.blocks.getBlocksCount(),J[j]||(j-=1,this.stack[this.position].index=j),!this.blockWasDeleted(J,A)){mt.next=13;break}this.insertDeletedBlock(J,A,j),mt.next=38;break;case 13:if(!this.blockWasSkipped(j,R,J,A)){mt.next=19;break}return mt.next=16,this.blocks.delete(R);case 16:this.caret.setToBlock(j,"end"),mt.next=38;break;case 19:if(!(wt>J.length)){mt.next=27;break}return mt.next=22,this.blocks.render({blocks:J});case 22:return mt.next=24,this.editor.blocks.insert(this.defaultBlock,{});case 24:this.setCaretIndex(j,V),mt.next=38;break;case 27:if(!this.blockWasDropped(J,A)){mt.next=33;break}return mt.next=30,this.blocks.render({blocks:J});case 30:this.caret.setToBlock(j,"end"),mt.next=38;break;case 33:if(!this.contentChangedInNoFocusBlock(j,R)){mt.next=38;break}return ut=this.blocks.getBlockByIndex(R),Et=ut.id,mt.next=37,this.blocks.update(Et,J[R].data);case 37:this.setCaretIndex(j,V);case 38:if(!(Ht=this.blocks.getBlockByIndex(j))){mt.next=43;break}return mt.next=42,this.blocks.update(Ht.id,J[j].data);case 42:this.setCaretIndex(j,V);case 43:case"end":return mt.stop()}},T,this)})),function(){return K.apply(this,arguments)})},{key:"setCaretIndex",value:function(T,B){if(B&&B!==-1){var R=this.holder.getElementsByClassName("ce-block__content"),A=new(w())(R[T].firstChild);setTimeout(function(){return A.setPos(B)},50)}else this.caret.setToBlock(T,"end")}},{key:"insertBlock",value:(q=h(I().mark(function T(B,R){return I().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,this.blocks.insert(B[R].type,B[R].data,{},R,!0);case 2:case"end":return A.stop()}},T,this)})),function(T,B){return q.apply(this,arguments)})},{key:"insertSkippedBlocks",value:function(T,B){for(var R=T;R<B.length;R+=1)this.insertBlock(B,R)}},{key:"redo",value:(P=h(I().mark(function T(){var B,R,A,j,X,J,V,wt;return I().wrap(function(ut){for(;;)switch(ut.prev=ut.next){case 0:if(!this.canRedo()){ut.next=26;break}if(this.position+=1,this.shouldSaveHistory=!1,B=this.stack[this.position],R=B.index,A=B.state,j=B.caretIndex,X=this.stack[this.position-1],J=X.index,V=X.state,!this.blockWasDeleted(V,A)){ut.next=11;break}return ut.next=8,this.blocks.delete();case 8:this.caret.setToBlock(R,"end"),ut.next=20;break;case 11:if(!this.blockWasSkipped(J,R,A,V)){ut.next=16;break}this.insertSkippedBlocks(V.length,A),this.caret.setToBlock(R,"end"),ut.next=20;break;case 16:if(!this.blockWasDropped(A,V)||this.position===1){ut.next=20;break}return ut.next=19,this.blocks.render({blocks:A});case 19:this.caret.setToBlock(R,"end");case 20:if(this.onUpdate(),!(wt=this.blocks.getBlockByIndex(R))){ut.next=26;break}return ut.next=25,this.blocks.update(wt.id,A[R].data);case 25:this.setCaretIndex(R,j);case 26:case"end":return ut.stop()}},T,this)})),function(){return P.apply(this,arguments)})},{key:"canUndo",value:function(){return!this.readOnly&&this.position>0}},{key:"canRedo",value:function(){return!this.readOnly&&this.position<this.count()}},{key:"count",value:function(){return this.stack.length-1}},{key:"parseKeys",value:function(T){var B={CMD:/(Mac)/i.test(navigator.platform)?"metaKey":"ctrlKey",ALT:"altKey",SHIFT:"shiftKey"},R=T.slice(0,-1).map(function(j){return B[j]}),A=R.includes("shiftKey")&&T.length===2?T[T.length-1].toUpperCase():T[T.length-1].toLowerCase();return R.push(A),R}},{key:"setEventListeners",value:function(){var T=this,B=this.holder,R=this.config.shortcuts,A=R.undo,j=R.redo,X=A.map(function(ft){return ft.replace(/ /g,"").split("+")}),J=j.map(function(ft){return ft.replace(/ /g,"").split("+")}),V=X.map(function(ft){return T.parseKeys(ft)}),wt=J.map(function(ft){return T.parseKeys(ft)}),ut=function(ft,oe){return oe.reduce(function($,W){return $||function(Q,it){return it.length===3&&Q[it[0]]&&Q[it[1]]&&Q.key.toLowerCase()===it[2]}(ft,W)},!1)},Et=function(ft,oe,$){return!(!function(W,Q){return Q.reduce(function(it,nt){return it||function(Bt,It){return It.length===2&&Bt[It[0]]&&Bt.key.toLowerCase()===It[1]}(W,nt)},!1)}(ft,oe)||ut(ft,$))||!!ut(ft,oe)},Ht=function(ft){Et(ft,V,wt)&&(ft.preventDefault(),T.undo())},mt=function(ft){Et(ft,wt,V)&&(ft.preventDefault(),T.redo())};B.addEventListener("keydown",Ht),B.addEventListener("keydown",mt),B.addEventListener("destroy",function(){B.removeEventListener("keydown",Ht),B.removeEventListener("keydown",mt)})}}],[{key:"isReadOnlySupported",get:function(){return!0}}]),U}()})(),a.default})())})(uc);var Sb=uc.exports;const Tb=ns(Sb);(function(){try{if(typeof document<"u"){var c=document.createElement("style");c.appendChild(document.createTextNode(".cdx-list{margin:0;padding-left:40px;outline:none}.cdx-list__item{padding:5.5px 0 5.5px 3px;line-height:1.6em}.cdx-list--unordered{list-style:disc}.cdx-list--ordered{list-style:decimal}.cdx-list-settings{display:flex}.cdx-list-settings .cdx-settings-button{width:50%}")),document.head.appendChild(c)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const Yl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',_b='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>';let Bb=class{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:Yl,title:"List"}}constructor({data:t,config:n,api:i,readOnly:s}){this._elements={wrapper:null},this.api=i,this.readOnly=s,this.settings=[{name:"unordered",label:this.api.i18n.t("Unordered"),icon:Yl,default:n.defaultStyle==="unordered"||!1},{name:"ordered",label:this.api.i18n.t("Ordered"),icon:_b,default:n.defaultStyle==="ordered"||!0}],this._data={style:this.settings.find(a=>a.default===!0).name,items:[]},this.data=t}render(){return this._elements.wrapper=this.makeMainTag(this._data.style),this._data.items.length?this._data.items.forEach(t=>{this._elements.wrapper.appendChild(this._make("li",this.CSS.item,{innerHTML:t}))}):this._elements.wrapper.appendChild(this._make("li",this.CSS.item)),this.readOnly||this._elements.wrapper.addEventListener("keydown",t=>{const[n,i]=[13,8];switch(t.keyCode){case n:this.getOutofList(t);break;case i:this.backspace(t);break}},!1),this._elements.wrapper}save(){return this.data}static get conversionConfig(){return{export:t=>t.items.join(". "),import:t=>({items:[t],style:"unordered"})}}static get sanitize(){return{style:{},items:{br:!0}}}renderSettings(){return this.settings.map(t=>({...t,isActive:this._data.style===t.name,closeOnActivate:!0,onActivate:()=>this.toggleTune(t.name)}))}onPaste(t){const n=t.detail.data;this.data=this.pasteHandler(n)}static get pasteConfig(){return{tags:["OL","UL","LI"]}}makeMainTag(t){const n=t==="ordered"?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered,i=t==="ordered"?"ol":"ul";return this._make(i,[this.CSS.baseBlock,this.CSS.wrapper,n],{contentEditable:!this.readOnly})}toggleTune(t){const n=this.makeMainTag(t);for(;this._elements.wrapper.hasChildNodes();)n.appendChild(this._elements.wrapper.firstChild);this._elements.wrapper.replaceWith(n),this._elements.wrapper=n,this._data.style=t}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-list",wrapperOrdered:"cdx-list--ordered",wrapperUnordered:"cdx-list--unordered",item:"cdx-list__item"}}set data(t){t||(t={}),this._data.style=t.style||this.settings.find(i=>i.default===!0).name,this._data.items=t.items||[];const n=this._elements.wrapper;n&&n.parentNode.replaceChild(this.render(),n)}get data(){this._data.items=[];const t=this._elements.wrapper.querySelectorAll(`.${this.CSS.item}`);for(let n=0;n<t.length;n++)t[n].innerHTML.replace("<br>"," ").trim()&&this._data.items.push(t[n].innerHTML);return this._data}_make(t,n=null,i={}){const s=document.createElement(t);Array.isArray(n)?s.classList.add(...n):n&&s.classList.add(n);for(const a in i)s[a]=i[a];return s}get currentItem(){let t=window.getSelection().anchorNode;return t.nodeType!==Node.ELEMENT_NODE&&(t=t.parentNode),t.closest(`.${this.CSS.item}`)}getOutofList(t){const n=this._elements.wrapper.querySelectorAll("."+this.CSS.item);if(n.length<2)return;const i=n[n.length-1],s=this.currentItem;s===i&&!i.textContent.trim().length&&(s.parentElement.removeChild(s),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex()),t.preventDefault(),t.stopPropagation())}backspace(t){const n=this._elements.wrapper.querySelectorAll("."+this.CSS.item),i=n[0];i&&n.length<2&&!i.innerHTML.replace("<br>"," ").trim()&&t.preventDefault()}selectItem(t){t.preventDefault();const n=window.getSelection(),i=n.anchorNode.parentNode,s=i.closest("."+this.CSS.item),a=new Range;a.selectNodeContents(s),n.removeAllRanges(),n.addRange(a)}pasteHandler(t){const{tagName:n}=t;let i;switch(n){case"OL":i="ordered";break;case"UL":case"LI":i="unordered"}const s={style:i,items:[]};if(n==="LI")s.items=[t.innerHTML];else{const a=Array.from(t.querySelectorAll("LI"));s.items=a.map(d=>d.innerHTML).filter(d=>!!d.trim())}return s}};(function(){try{if(typeof document<"u"){var c=document.createElement("style");c.appendChild(document.createTextNode('.tc-wrap{--color-background:#f9f9fb;--color-text-secondary:#7b7e89;--color-border:#e8e8eb;--cell-size:34px;--toolbox-icon-size:18px;--toolbox-padding:6px;--toolbox-aiming-field-size:calc(var(--toolbox-icon-size) + var(--toolbox-padding)*2);border-left:0;position:relative;height:100%;width:100%;margin-top:var(--toolbox-icon-size);box-sizing:border-box;display:grid;grid-template-columns:calc(100% - var(--cell-size)) var(--cell-size)}.tc-wrap--readonly{grid-template-columns:100% var(--cell-size)}.tc-wrap svg{vertical-align:top}@media print{.tc-wrap{border-left-color:var(--color-border);border-left-style:solid;border-left-width:1px;grid-template-columns:100% var(--cell-size)}}@media print{.tc-wrap .tc-row:after{display:none}}.tc-table{position:relative;width:100%;height:100%;display:grid;font-size:14px;border-top:1px solid var(--color-border);line-height:1.4}.tc-table:after{width:calc(var(--cell-size));height:100%;left:calc(var(--cell-size)*-1);top:0}.tc-table:after,.tc-table:before{position:absolute;content:""}.tc-table:before{width:100%;height:var(--toolbox-aiming-field-size);top:calc(var(--toolbox-aiming-field-size)*-1);left:0}.tc-table--heading .tc-row:first-child{font-weight:600;border-bottom:2px solid var(--color-border)}.tc-table--heading .tc-row:first-child [contenteditable]:empty:before{content:attr(heading);color:var(--color-text-secondary)}.tc-table--heading .tc-row:first-child:after{bottom:-2px;border-bottom:2px solid var(--color-border)}.tc-add-column,.tc-add-row{display:flex;color:var(--color-text-secondary)}@media print{.tc-add{display:none}}.tc-add-column{padding:4px 0;justify-content:center;border-top:1px solid var(--color-border)}@media print{.tc-add-column{display:none}}.tc-add-row{height:var(--cell-size);align-items:center;padding-left:4px;position:relative}.tc-add-row:before{content:"";position:absolute;right:calc(var(--cell-size)*-1);width:var(--cell-size);height:100%}@media print{.tc-add-row{display:none}}.tc-add-column,.tc-add-row{transition:0s;cursor:pointer;will-change:background-color}.tc-add-column:hover,.tc-add-row:hover{transition:background-color .1s ease;background-color:var(--color-background)}.tc-add-row{margin-top:1px}.tc-add-row:hover:before{transition:.1s;background-color:var(--color-background)}.tc-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(10px,1fr));position:relative;border-bottom:1px solid var(--color-border)}.tc-row:after{content:"";pointer-events:none;position:absolute;width:var(--cell-size);height:100%;bottom:-1px;right:calc(var(--cell-size)*-1);border-bottom:1px solid var(--color-border)}.tc-row--selected{background:var(--color-background)}.tc-row--selected:after{background:var(--color-background)}.tc-cell{border-right:1px solid var(--color-border);padding:6px 12px;overflow:hidden;outline:none;line-break:normal}.tc-cell--selected{background:var(--color-background)}.tc-wrap--readonly .tc-row:after{display:none}.tc-toolbox{--toolbox-padding:6px;--popover-margin:30px;--toggler-click-zone-size:30px;--toggler-dots-color:#7b7e89;--toggler-dots-color-hovered:#1d202b;position:absolute;cursor:pointer;z-index:1;opacity:0;transition:opacity .1s;will-change:left,opacity}.tc-toolbox--column{top:calc(var(--toggler-click-zone-size)*-1);transform:translate(calc(var(--toggler-click-zone-size)*-1/2));will-change:left,opacity}.tc-toolbox--row{left:calc(var(--popover-margin)*-1);transform:translateY(calc(var(--toggler-click-zone-size)*-1/2));margin-top:-1px;will-change:top,opacity}.tc-toolbox--showed{opacity:1}.tc-toolbox .tc-popover{position:absolute;top:0;left:var(--popover-margin)}.tc-toolbox__toggler{display:flex;align-items:center;justify-content:center;width:var(--toggler-click-zone-size);height:var(--toggler-click-zone-size);color:var(--toggler-dots-color);opacity:0;transition:opacity .15s ease;will-change:opacity}.tc-toolbox__toggler:hover{color:var(--toggler-dots-color-hovered)}.tc-toolbox__toggler svg{fill:currentColor}.tc-wrap:hover .tc-toolbox__toggler{opacity:1}.tc-settings .cdx-settings-button{width:50%;margin:0}.tc-popover{--color-border:#eaeaea;--color-background:#fff;--color-background-hover:rgba(232,232,235,.49);--color-background-confirm:#e24a4a;--color-background-confirm-hover:#d54040;--color-text-confirm:#fff;background:var(--color-background);border:1px solid var(--color-border);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;padding:6px;display:none;will-change:opacity,transform}.tc-popover--opened{display:block;animation:menuShowing .1s cubic-bezier(.215,.61,.355,1) forwards}.tc-popover__item{display:flex;align-items:center;padding:2px 14px 2px 2px;border-radius:5px;cursor:pointer;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tc-popover__item:hover{background:var(--color-background-hover)}.tc-popover__item:not(:last-of-type){margin-bottom:2px}.tc-popover__item-icon{display:inline-flex;width:26px;height:26px;align-items:center;justify-content:center;background:var(--color-background);border-radius:5px;border:1px solid var(--color-border);margin-right:8px}.tc-popover__item-label{line-height:22px;font-size:14px;font-weight:500}.tc-popover__item--confirm{background:var(--color-background-confirm);color:var(--color-text-confirm)}.tc-popover__item--confirm:hover{background-color:var(--color-background-confirm-hover)}.tc-popover__item--confirm .tc-popover__item-icon{background:var(--color-background-confirm);border-color:#0000001a}.tc-popover__item--confirm .tc-popover__item-icon svg{transition:transform .2s ease-in;transform:rotate(90deg) scale(1.2)}.tc-popover__item--hidden{display:none}@keyframes menuShowing{0%{opacity:0;transform:translateY(-8px) scale(.9)}70%{opacity:1;transform:translateY(2px)}to{transform:translateY(0)}}')),document.head.appendChild(c)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();function ke(c,t,n={}){const i=document.createElement(c);Array.isArray(t)?i.classList.add(...t):t&&i.classList.add(t);for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s]);return i}function Kl(c){const t=c.getBoundingClientRect();return{y1:Math.floor(t.top+window.pageYOffset),x1:Math.floor(t.left+window.pageXOffset),x2:Math.floor(t.right+window.pageXOffset),y2:Math.floor(t.bottom+window.pageYOffset)}}function Gl(c,t){const n=Kl(c),i=Kl(t);return{fromTopBorder:i.y1-n.y1,fromLeftBorder:i.x1-n.x1,fromRightBorder:n.x2-i.x2,fromBottomBorder:n.y2-i.y2}}function Lb(c,t){const n=c.getBoundingClientRect(),{width:i,height:s,x:a,y:d}=n,{clientX:h,clientY:f}=t;return{width:i,height:s,x:h-a,y:f-d}}function Xl(c,t){return t.parentNode.insertBefore(c,t)}function Zl(c,t=!0){const n=document.createRange(),i=window.getSelection();n.selectNodeContents(c),n.collapse(t),i.removeAllRanges(),i.addRange(n)}let Ib=class ve{constructor({items:t}){this.items=t,this.wrapper=void 0,this.itemEls=[]}static get CSS(){return{popover:"tc-popover",popoverOpened:"tc-popover--opened",item:"tc-popover__item",itemHidden:"tc-popover__item--hidden",itemConfirmState:"tc-popover__item--confirm",itemIcon:"tc-popover__item-icon",itemLabel:"tc-popover__item-label"}}render(){return this.wrapper=ke("div",ve.CSS.popover),this.items.forEach((t,n)=>{const i=ke("div",ve.CSS.item),s=ke("div",ve.CSS.itemIcon,{innerHTML:t.icon}),a=ke("div",ve.CSS.itemLabel,{textContent:t.label});i.dataset.index=n,i.appendChild(s),i.appendChild(a),this.wrapper.appendChild(i),this.itemEls.push(i)}),this.wrapper.addEventListener("click",t=>{this.popoverClicked(t)}),this.wrapper}popoverClicked(t){const n=t.target.closest(`.${ve.CSS.item}`);if(!n)return;const i=n.dataset.index,s=this.items[i];if(s.confirmationRequired&&!this.hasConfirmationState(n)){this.setConfirmationState(n);return}s.onClick()}setConfirmationState(t){t.classList.add(ve.CSS.itemConfirmState)}clearConfirmationState(t){t.classList.remove(ve.CSS.itemConfirmState)}hasConfirmationState(t){return t.classList.contains(ve.CSS.itemConfirmState)}get opened(){return this.wrapper.classList.contains(ve.CSS.popoverOpened)}open(){this.items.forEach((t,n)=>{typeof t.hideIf=="function"&&this.itemEls[n].classList.toggle(ve.CSS.itemHidden,t.hideIf())}),this.wrapper.classList.add(ve.CSS.popoverOpened)}close(){this.wrapper.classList.remove(ve.CSS.popoverOpened),this.itemEls.forEach(t=>{this.clearConfirmationState(t)})}};const Vl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',Mb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',Ab='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',Ob='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',Rb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',Nb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.41 9.66H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 9.66H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.31 14.36H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 14.36H14.59"/></svg>',Jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',Db='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Pb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',Hb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';let Ql=class Wn{constructor({api:t,items:n,onOpen:i,onClose:s,cssModifier:a=""}){this.api=t,this.items=n,this.onOpen=i,this.onClose=s,this.cssModifier=a,this.popover=null,this.wrapper=this.createToolbox()}static get CSS(){return{toolbox:"tc-toolbox",toolboxShowed:"tc-toolbox--showed",toggler:"tc-toolbox__toggler"}}get element(){return this.wrapper}createToolbox(){const t=ke("div",[Wn.CSS.toolbox,this.cssModifier?`${Wn.CSS.toolbox}--${this.cssModifier}`:""]);t.dataset.mutationFree="true";const n=this.createPopover(),i=this.createToggler();return t.appendChild(i),t.appendChild(n),t}createToggler(){const t=ke("div",Wn.CSS.toggler,{innerHTML:Nb});return t.addEventListener("click",()=>{this.togglerClicked()}),t}createPopover(){return this.popover=new Ib({items:this.items}),this.popover.render()}togglerClicked(){this.popover.opened?(this.popover.close(),this.onClose()):(this.popover.open(),this.onOpen())}show(t){const n=t();Object.entries(n).forEach(([i,s])=>{this.wrapper.style[i]=s}),this.wrapper.classList.add(Wn.CSS.toolboxShowed)}hide(){this.popover.close(),this.wrapper.classList.remove(Wn.CSS.toolboxShowed)}};function Fb(c,t){let n=0;return function(...i){const s=new Date().getTime();if(!(s-n<c))return n=s,t(...i)}}const _t={wrapper:"tc-wrap",wrapperReadOnly:"tc-wrap--readonly",table:"tc-table",row:"tc-row",withHeadings:"tc-table--heading",rowSelected:"tc-row--selected",cell:"tc-cell",cellSelected:"tc-cell--selected",addRow:"tc-add-row",addColumn:"tc-add-column"};class Ub{constructor(t,n,i,s){this.readOnly=t,this.api=n,this.data=i,this.config=s,this.wrapper=null,this.table=null,this.toolboxColumn=this.createColumnToolbox(),this.toolboxRow=this.createRowToolbox(),this.createTableWrapper(),this.hoveredRow=0,this.hoveredColumn=0,this.selectedRow=0,this.selectedColumn=0,this.tunes={withHeadings:!1},this.resize(),this.fill(),this.focusedCell={row:0,column:0},this.documentClicked=a=>{const d=a.target.closest(`.${_t.table}`)!==null,h=a.target.closest(`.${_t.wrapper}`)===null;(d||h)&&this.hideToolboxes();const f=a.target.closest(`.${_t.addRow}`),m=a.target.closest(`.${_t.addColumn}`);f&&f.parentNode===this.wrapper?(this.addRow(void 0,!0),this.hideToolboxes()):m&&m.parentNode===this.wrapper&&(this.addColumn(void 0,!0),this.hideToolboxes())},this.readOnly||this.bindEvents()}getWrapper(){return this.wrapper}bindEvents(){document.addEventListener("click",this.documentClicked),this.table.addEventListener("mousemove",Fb(150,t=>this.onMouseMoveInTable(t)),{passive:!0}),this.table.onkeypress=t=>this.onKeyPressListener(t),this.table.addEventListener("keydown",t=>this.onKeyDownListener(t)),this.table.addEventListener("focusin",t=>this.focusInTableListener(t))}createColumnToolbox(){return new Ql({api:this.api,cssModifier:"column",items:[{label:this.api.i18n.t("Add column to left"),icon:Ab,onClick:()=>{this.addColumn(this.selectedColumn,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add column to right"),icon:Ob,onClick:()=>{this.addColumn(this.selectedColumn+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete column"),icon:Vl,hideIf:()=>this.numberOfColumns===1,confirmationRequired:!0,onClick:()=>{this.deleteColumn(this.selectedColumn),this.hideToolboxes()}}],onOpen:()=>{this.selectColumn(this.hoveredColumn),this.hideRowToolbox()},onClose:()=>{this.unselectColumn()}})}createRowToolbox(){return new Ql({api:this.api,cssModifier:"row",items:[{label:this.api.i18n.t("Add row above"),icon:Rb,onClick:()=>{this.addRow(this.selectedRow,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add row below"),icon:Mb,onClick:()=>{this.addRow(this.selectedRow+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete row"),icon:Vl,hideIf:()=>this.numberOfRows===1,confirmationRequired:!0,onClick:()=>{this.deleteRow(this.selectedRow),this.hideToolboxes()}}],onOpen:()=>{this.selectRow(this.hoveredRow),this.hideColumnToolbox()},onClose:()=>{this.unselectRow()}})}moveCursorToNextRow(){this.focusedCell.row!==this.numberOfRows?(this.focusedCell.row+=1,this.focusCell(this.focusedCell)):(this.addRow(),this.focusedCell.row+=1,this.focusCell(this.focusedCell),this.updateToolboxesPosition(0,0))}getCell(t,n){return this.table.querySelectorAll(`.${_t.row}:nth-child(${t}) .${_t.cell}`)[n-1]}getRow(t){return this.table.querySelector(`.${_t.row}:nth-child(${t})`)}getRowByCell(t){return t.parentElement}getRowFirstCell(t){return t.querySelector(`.${_t.cell}:first-child`)}setCellContent(t,n,i){const s=this.getCell(t,n);s.innerHTML=i}addColumn(t=-1,n=!1){let i=this.numberOfColumns;for(let s=1;s<=this.numberOfRows;s++){let a;const d=this.createCell();if(t>0&&t<=i?(a=this.getCell(s,t),Xl(d,a)):a=this.getRow(s).appendChild(d),s===1){const h=this.getCell(s,t>0?t:i+1);h&&n&&Zl(h)}}this.addHeadingAttrToFirstRow()}addRow(t=-1,n=!1){let i,s=ke("div",_t.row);this.tunes.withHeadings&&this.removeHeadingAttrFromFirstRow();let a=this.numberOfColumns;if(t>0&&t<=this.numberOfRows){let h=this.getRow(t);i=Xl(s,h)}else i=this.table.appendChild(s);this.fillRow(i,a),this.tunes.withHeadings&&this.addHeadingAttrToFirstRow();const d=this.getRowFirstCell(i);return d&&n&&Zl(d),i}deleteColumn(t){for(let n=1;n<=this.numberOfRows;n++){const i=this.getCell(n,t);if(!i)return;i.remove()}}deleteRow(t){this.getRow(t).remove(),this.addHeadingAttrToFirstRow()}createTableWrapper(){if(this.wrapper=ke("div",_t.wrapper),this.table=ke("div",_t.table),this.readOnly&&this.wrapper.classList.add(_t.wrapperReadOnly),this.wrapper.appendChild(this.toolboxRow.element),this.wrapper.appendChild(this.toolboxColumn.element),this.wrapper.appendChild(this.table),!this.readOnly){const t=ke("div",_t.addColumn,{innerHTML:Jl}),n=ke("div",_t.addRow,{innerHTML:Jl});this.wrapper.appendChild(t),this.wrapper.appendChild(n)}}computeInitialSize(){const t=this.data&&this.data.content,n=Array.isArray(t),i=n?t.length:!1,s=n?t.length:void 0,a=i?t[0].length:void 0,d=Number.parseInt(this.config&&this.config.rows),h=Number.parseInt(this.config&&this.config.cols),f=!isNaN(d)&&d>0?d:void 0,m=!isNaN(h)&&h>0?h:void 0;return{rows:s||f||2,cols:a||m||2}}resize(){const{rows:t,cols:n}=this.computeInitialSize();for(let i=0;i<t;i++)this.addRow();for(let i=0;i<n;i++)this.addColumn()}fill(){const t=this.data;if(t&&t.content)for(let n=0;n<t.content.length;n++)for(let i=0;i<t.content[n].length;i++)this.setCellContent(n+1,i+1,t.content[n][i])}fillRow(t,n){for(let i=1;i<=n;i++){const s=this.createCell();t.appendChild(s)}}createCell(){return ke("div",_t.cell,{contentEditable:!this.readOnly})}get numberOfRows(){return this.table.childElementCount}get numberOfColumns(){return this.numberOfRows?this.table.querySelectorAll(`.${_t.row}:first-child .${_t.cell}`).length:0}get isColumnMenuShowing(){return this.selectedColumn!==0}get isRowMenuShowing(){return this.selectedRow!==0}onMouseMoveInTable(t){const{row:n,column:i}=this.getHoveredCell(t);this.hoveredColumn=i,this.hoveredRow=n,this.updateToolboxesPosition()}onKeyPressListener(t){if(t.key==="Enter"){if(t.shiftKey)return!0;this.moveCursorToNextRow()}return t.key!=="Enter"}onKeyDownListener(t){t.key==="Tab"&&t.stopPropagation()}focusInTableListener(t){const n=t.target,i=this.getRowByCell(n);this.focusedCell={row:Array.from(this.table.querySelectorAll(`.${_t.row}`)).indexOf(i)+1,column:Array.from(i.querySelectorAll(`.${_t.cell}`)).indexOf(n)+1}}hideToolboxes(){this.hideRowToolbox(),this.hideColumnToolbox(),this.updateToolboxesPosition()}hideRowToolbox(){this.unselectRow(),this.toolboxRow.hide()}hideColumnToolbox(){this.unselectColumn(),this.toolboxColumn.hide()}focusCell(){this.focusedCellElem.focus()}get focusedCellElem(){const{row:t,column:n}=this.focusedCell;return this.getCell(t,n)}updateToolboxesPosition(t=this.hoveredRow,n=this.hoveredColumn){this.isColumnMenuShowing||n>0&&n<=this.numberOfColumns&&this.toolboxColumn.show(()=>({left:`calc((100% - var(--cell-size)) / (${this.numberOfColumns} * 2) * (1 + (${n} - 1) * 2))`})),this.isRowMenuShowing||t>0&&t<=this.numberOfRows&&this.toolboxRow.show(()=>{const i=this.getRow(t),{fromTopBorder:s}=Gl(this.table,i),{height:a}=i.getBoundingClientRect();return{top:`${Math.ceil(s+a/2)}px`}})}setHeadingsSetting(t){this.tunes.withHeadings=t,t?(this.table.classList.add(_t.withHeadings),this.addHeadingAttrToFirstRow()):(this.table.classList.remove(_t.withHeadings),this.removeHeadingAttrFromFirstRow())}addHeadingAttrToFirstRow(){for(let t=1;t<=this.numberOfColumns;t++){let n=this.getCell(1,t);n&&n.setAttribute("heading",this.api.i18n.t("Heading"))}}removeHeadingAttrFromFirstRow(){for(let t=1;t<=this.numberOfColumns;t++){let n=this.getCell(1,t);n&&n.removeAttribute("heading")}}selectRow(t){const n=this.getRow(t);n&&(this.selectedRow=t,n.classList.add(_t.rowSelected))}unselectRow(){if(this.selectedRow<=0)return;const t=this.table.querySelector(`.${_t.rowSelected}`);t&&t.classList.remove(_t.rowSelected),this.selectedRow=0}selectColumn(t){for(let n=1;n<=this.numberOfRows;n++){const i=this.getCell(n,t);i&&i.classList.add(_t.cellSelected)}this.selectedColumn=t}unselectColumn(){if(this.selectedColumn<=0)return;let t=this.table.querySelectorAll(`.${_t.cellSelected}`);Array.from(t).forEach(n=>{n.classList.remove(_t.cellSelected)}),this.selectedColumn=0}getHoveredCell(t){let n=this.hoveredRow,i=this.hoveredColumn;const{width:s,height:a,x:d,y:h}=Lb(this.table,t);return d>=0&&(i=this.binSearch(this.numberOfColumns,f=>this.getCell(1,f),({fromLeftBorder:f})=>d<f,({fromRightBorder:f})=>d>s-f)),h>=0&&(n=this.binSearch(this.numberOfRows,f=>this.getCell(f,1),({fromTopBorder:f})=>h<f,({fromBottomBorder:f})=>h>a-f)),{row:n||this.hoveredRow,column:i||this.hoveredColumn}}binSearch(t,n,i,s){let a=0,d=t+1,h=0,f;for(;a<d-1&&h<10;){f=Math.ceil((a+d)/2);const m=n(f),x=Gl(this.table,m);if(i(x))d=f;else if(s(x))a=f;else break;h++}return f}getData(){const t=[];for(let n=1;n<=this.numberOfRows;n++){const i=this.table.querySelector(`.${_t.row}:nth-child(${n})`),s=Array.from(i.querySelectorAll(`.${_t.cell}`));s.every(a=>!a.textContent.trim())||t.push(s.map(a=>a.innerHTML))}return t}destroy(){document.removeEventListener("click",this.documentClicked)}}let zb=class{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:t,config:n,api:i,readOnly:s}){this.api=i,this.readOnly=s,this.config=n,this.data={withHeadings:this.getConfig("withHeadings",!1,t),content:t&&t.content?t.content:[]},this.table=null}static get toolbox(){return{icon:Hb,title:"Table"}}render(){return this.table=new Ub(this.readOnly,this.api,this.data,this.config),this.container=ke("div",this.api.styles.block),this.container.appendChild(this.table.getWrapper()),this.table.setHeadingsSetting(this.data.withHeadings),this.container}renderSettings(){return[{label:this.api.i18n.t("With headings"),icon:Db,isActive:this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!0,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.api.i18n.t("Without headings"),icon:Pb,isActive:!this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!1,this.table.setHeadingsSetting(this.data.withHeadings)}}]}save(){const t=this.table.getData();return{withHeadings:this.data.withHeadings,content:t}}destroy(){this.table.destroy()}getConfig(t,n=void 0,i=void 0){const s=this.data||i;return s?s[t]?s[t]:n:this.config&&this.config[t]?this.config[t]:n}static get pasteConfig(){return{tags:["TABLE","TR","TH","TD"]}}onPaste(t){const n=t.detail.data,i=n.querySelector(":scope > thead, tr:first-of-type th"),s=Array.from(n.querySelectorAll("tr")).map(a=>Array.from(a.querySelectorAll("th, td")).map(d=>d.innerHTML));this.data={withHeadings:i!==null,content:s},this.table.wrapper&&this.table.wrapper.replaceWith(this.render())}};class Wb{static get isInline(){return!0}get state(){return this._state}constructor({config:t,api:n}){this.api=n,this.button=null,this.optionButtons=[],this._state=!0,this.selectedText=null,this.range=null,this._settings=t,this.aiDrawer=document.getElementById("ai-drawer"),this.CSS={actions:"change-case-action",toolbarLabel:"change-case-toolbar__label",tool:"change-case-tool",toolbarBtnActive:this.api.styles.settingsButtonActive,inlineButton:this.api.styles.inlineToolButton},this.caseOptions={shorten:"Shorten",expand:"Expand",suggest:"Suggestions",prompt:"Prompt AI"}}set state(t){this._state=t,this.button.classList.toggle(this.CSS.toolbarBtnActive,t)}get title(){return"AI Assistant"}render(){const t=this.api.blocks.getCurrentBlockIndex();if(this.api.blocks.getBlockByIndex(t).name!="list")return this.button=document.createElement("button"),this.button.type="button",this.button.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sparkles"><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/><path d="M5 3v4"/><path d="M19 17v4"/><path d="M3 5h4"/><path d="M17 19h4"/></svg>
    `,this.button.classList.add(this.CSS.inlineButton),this.button}checkState(t){t.anchorNode}extractAllText(){let t=this.api.blocks.getBlocksCount();const n=[];for(let i=0;i<t;i++){const s=this.api.blocks.getBlockByIndex(i);if(!s.holder.textContent)continue;let d=s.holder.children[0].children[0].cloneNode(!0);const h=m=>{Array.from(m.attributes).forEach(x=>m.removeAttribute(x.name)),Array.from(m.children).forEach(x=>h(x))};if(h(d),s.name==="paragraph"){let m=document.createElement("p");m.innerHTML=d.innerHTML,d=m}let f=d.outerHTML;n.push(f)}return n.join(`

`)}handleClick(t,n){if(!t)return;const i=t.cloneContents();i&&(i.childNodes.forEach(s=>{s.nodeName}),!(n=="prompt"&&(n=prompt("Enter your prompt"),!n))&&(Livewire.dispatch("showDrawer"),this.aiDrawer.innerHTML='<div class="flex min-h-screen justify-center items-center"><span class="loading loading-spinner loading-lg"></span></div>',this.getCompletions(n).then(s=>{if(n=="shorten"&&(t.deleteContents(),t.insertNode(document.createTextNode(s.suggestions[0]))),n=="expand"&&(t.collapse(!1),t.insertNode(document.createTextNode(" "+s.suggestions[0]))),n=="expand"||n=="shorten"){Livewire.dispatch("hideDrawer");return}this.aiDrawer.innerHTML="",s.suggestions.forEach(a=>{const d=document.createElement("div");d.textContent=a,d.classList.add("cursor-pointer","p-2","hover:bg-gray-100","mb-2","mx-2","border","border-gray-200","rounded","text-lg"),d.onclick=()=>{t.deleteContents(),t.insertNode(document.createTextNode(a)),Livewire.dispatch("hideDrawer"),this.aiDrawer.innerHTML=""},this.aiDrawer.appendChild(d)})}),this.api.inlineToolbar.close()))}getCompletions(t){return new Promise((n,i)=>{const s=this.selectedText.textContent,a=this._settings.assistantUrl,d={articleHTML:this.extractAllText(),selectedText:s,prompt:t};fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":this._settings.csrfToken},body:JSON.stringify(d)}).then(h=>h.json()).then(h=>n(h)).catch(h=>i(h))})}surround(t){this.selectedText=t.cloneContents(),this.actions.hidden=!this.actions.hidden,this.range=this.actions.hidden?null:t,this.state=!this.actions.hidden}renderActions(){this.actions=document.createElement("div"),this.actions.classList.add(this.CSS.actions);const t=document.createElement("div");t.classList.add(this.CSS.toolbarLabel),t.innerHTML=this.title,this.actions.appendChild(t),this.optionButtons=Object.keys(this.caseOptions).map(n=>{const i=document.createElement("div");return i.classList.add(this.CSS.tool),i.dataset.mode=n,i.innerHTML=this.caseOptions[n],i});for(const n of this.optionButtons)this.actions.appendChild(n),this.api.listeners.on(n,"click",()=>{this.handleClick(this.range,n.dataset.mode)});return this.actions.hidden=!0,this.actions}destroy(){for(const t of this.optionButtons)this.api.listeners.off(t,"click")}}(function(){try{if(typeof document<"u"){var c=document.createElement("style");c.appendChild(document.createTextNode(".ce-header{padding:.6em 0 3px;margin:0;line-height:1.25em;outline:none}.ce-header p,.ce-header div{padding:0!important;margin:0!important}.ce-header[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;display:none;cursor:text}.ce-header[contentEditable=true][data-placeholder]:empty:before{display:block}.ce-header[contentEditable=true][data-placeholder]:empty:focus:before{display:none}")),document.head.appendChild(c)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const $b='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>',jb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>',qb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>',Yb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>',Kb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>',Gb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>',Xb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>';/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */let Zb=class{constructor({data:t,config:n,api:i,readOnly:s}){this.api=i,this.readOnly=s,this._CSS={block:this.api.styles.block,wrapper:"ce-header"},this._settings=n,this._data=this.normalizeData(t),this._element=this.getTag()}normalizeData(t){const n={};return typeof t!="object"&&(t={}),n.text=t.text||"",n.level=parseInt(t.level)||this.defaultLevel.number,n}render(){return this._element}renderSettings(){return this.levels.map(t=>({icon:t.svg,label:this.api.i18n.t(`Heading ${t.number}`),onActivate:()=>this.setLevel(t.number),closeOnActivate:!0,isActive:this.currentLevel.number===t.number}))}setLevel(t){this.data={level:t,text:this.data.text}}merge(t){const n={text:this.data.text+t.text,level:this.data.level};this.data=n}validate(t){return t.text.trim()!==""}save(t){return{text:t.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:!1,text:{}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(t){if(this._data=this.normalizeData(t),t.level!==void 0&&this._element.parentNode){const n=this.getTag();n.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(n,this._element),this._element=n}t.text!==void 0&&(this._element.innerHTML=this._data.text||"")}getTag(){const t=document.createElement(this.currentLevel.tag);return t.innerHTML=this._data.text||"",t.classList.add(this._CSS.wrapper),t.contentEditable=this.readOnly?"false":"true",t.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),t}get currentLevel(){let t=this.levels.find(n=>n.number===this._data.level);return t||(t=this.defaultLevel),t}get defaultLevel(){if(this._settings.defaultLevel){const t=this.levels.find(n=>n.number===this._settings.defaultLevel);if(t)return t;console.warn("(ง'̀-'́)ง Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}get levels(){const t=[{number:1,tag:"H1",svg:$b},{number:2,tag:"H2",svg:jb},{number:3,tag:"H3",svg:qb},{number:4,tag:"H4",svg:Yb},{number:5,tag:"H5",svg:Kb},{number:6,tag:"H6",svg:Gb}];return this._settings.levels?t.filter(n=>this._settings.levels.includes(n.number)):t}onPaste(t){const n=t.detail.data;let i=this.defaultLevel.number;switch(n.tagName){case"H1":i=1;break;case"H2":i=2;break;case"H3":i=3;break;case"H4":i=4;break;case"H5":i=5;break;case"H6":i=6;break}this._settings.levels&&(i=this._settings.levels.reduce((s,a)=>Math.abs(a-i)<Math.abs(s-i)?a:s)),this.data={level:i,text:n.innerHTML}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:Xb,title:"Heading"}}};(function(){try{if(typeof document<"u"){var c=document.createElement("style");c.appendChild(document.createTextNode('.image-tool{--bg-color: #cdd1e0;--front-color: #388ae5;--border-color: #e8e8eb}.image-tool__image{border-radius:3px;overflow:hidden;margin-bottom:10px}.image-tool__image-picture{max-width:100%;vertical-align:bottom;display:block}.image-tool__image-preloader{width:50px;height:50px;border-radius:50%;background-size:cover;margin:auto;position:relative;background-color:var(--bg-color);background-position:center center}.image-tool__image-preloader:after{content:"";position:absolute;z-index:3;width:60px;height:60px;border-radius:50%;border:2px solid var(--bg-color);border-top-color:var(--front-color);left:50%;top:50%;margin-top:-30px;margin-left:-30px;animation:image-preloader-spin 2s infinite linear;box-sizing:border-box}.image-tool__caption[contentEditable=true][data-placeholder]:before{position:absolute!important;content:attr(data-placeholder);color:#707684;font-weight:400;display:none}.image-tool__caption[contentEditable=true][data-placeholder]:empty:before{display:block}.image-tool__caption[contentEditable=true][data-placeholder]:empty:focus:before{display:none}.image-tool--empty .image-tool__image,.image-tool--empty .image-tool__caption,.image-tool--loading .image-tool__caption{display:none}.image-tool .cdx-button{display:flex;align-items:center;justify-content:center}.image-tool .cdx-button svg{height:auto;margin:0 6px 0 0}.image-tool--filled .cdx-button,.image-tool--filled .image-tool__image-preloader{display:none}.image-tool--loading .image-tool__image{min-height:200px;display:flex;border:1px solid var(--border-color);background-color:#fff}.image-tool--loading .image-tool__image-picture,.image-tool--loading .cdx-button{display:none}.image-tool--withBorder .image-tool__image{border:1px solid var(--border-color)}.image-tool--withBackground .image-tool__image{padding:15px;background:var(--bg-color)}.image-tool--withBackground .image-tool__image-picture{max-width:60%;margin:0 auto}.image-tool--stretched .image-tool__image-picture{width:100%}@keyframes image-preloader-spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}')),document.head.appendChild(c)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const Vb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19V19C9.13623 19 8.20435 19 7.46927 18.6955C6.48915 18.2895 5.71046 17.5108 5.30448 16.5307C5 15.7956 5 14.8638 5 13V12C5 9.19108 5 7.78661 5.67412 6.77772C5.96596 6.34096 6.34096 5.96596 6.77772 5.67412C7.78661 5 9.19108 5 12 5H13.5C14.8956 5 15.5933 5 16.1611 5.17224C17.4395 5.56004 18.44 6.56046 18.8278 7.83886C19 8.40666 19 9.10444 19 10.5V10.5"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6.5 17.5L17.5 6.5"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 10.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.9919 19H11.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13L13 5"/></svg>',Jb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.9919 9.5H19.0015"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.5 5H14.5096"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.625 5H15C17.2091 5 19 6.79086 19 9V9.375"/><path stroke="currentColor" stroke-width="2" d="M9.375 5L9 5C6.79086 5 5 6.79086 5 9V9.375"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 5H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 9.5H5.00957"/><path stroke="currentColor" stroke-width="2" d="M9.375 19H9C6.79086 19 5 17.2091 5 15V14.625"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.3725 19H9.38207"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 14.55H5.00957"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 13V16M16 19V16M19 16H16M16 16H13"/></svg>',hc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.13968 15.32L8.69058 11.5661C9.02934 11.2036 9.48873 11 9.96774 11C10.4467 11 10.9061 11.2036 11.2449 11.5661L15.3871 16M13.5806 14.0664L15.0132 12.533C15.3519 12.1705 15.8113 11.9668 16.2903 11.9668C16.7693 11.9668 17.2287 12.1705 17.5675 12.533L18.841 13.9634"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.7778 9.33331H13.7867"/></svg>',Qb='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9L20 12L17 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 12H20"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 9L4 12L7 15"/><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12H10"/></svg>';function Un(c,t=null,n={}){const i=document.createElement(c);Array.isArray(t)?i.classList.add(...t):t&&i.classList.add(t);for(const s in n)i[s]=n[s];return i}class Ne{constructor({api:t,config:n,onSelectFile:i,readOnly:s}){this.api=t,this.config=n,this.onSelectFile=i,this.readOnly=s,this.nodes={wrapper:Un("div",[this.CSS.baseClass,this.CSS.wrapper]),imageContainer:Un("div",[this.CSS.imageContainer]),fileButton:this.createFileButton(),imageEl:void 0,imagePreloader:Un("div",this.CSS.imagePreloader),caption:Un("div",[this.CSS.input,this.CSS.caption],{contentEditable:!this.readOnly})},this.nodes.caption.dataset.placeholder=this.config.captionPlaceholder,this.nodes.imageContainer.appendChild(this.nodes.imagePreloader),this.nodes.wrapper.appendChild(this.nodes.imageContainer),this.nodes.wrapper.appendChild(this.nodes.caption),this.nodes.wrapper.appendChild(this.nodes.fileButton)}get CSS(){return{baseClass:this.api.styles.block,loading:this.api.styles.loader,input:this.api.styles.input,button:this.api.styles.button,wrapper:"image-tool",imageContainer:"image-tool__image",imagePreloader:"image-tool__image-preloader",imageEl:"image-tool__image-picture",caption:"image-tool__caption"}}static get status(){return{EMPTY:"empty",UPLOADING:"loading",FILLED:"filled"}}render(t){return!t.file||Object.keys(t.file).length===0?this.toggleStatus(Ne.status.EMPTY):this.toggleStatus(Ne.status.UPLOADING),this.nodes.wrapper}createFileButton(){const t=Un("div",[this.CSS.button]);return t.innerHTML=this.config.buttonContent||`${hc} ${this.api.i18n.t("Select an Image")}`,t.addEventListener("click",()=>{this.onSelectFile()}),t}showPreloader(t){this.nodes.imagePreloader.style.backgroundImage=`url(${t})`,this.toggleStatus(Ne.status.UPLOADING)}hidePreloader(){this.nodes.imagePreloader.style.backgroundImage="",this.toggleStatus(Ne.status.EMPTY)}fillImage(t){const n=/\.mp4$/.test(t)?"VIDEO":"IMG",i={src:t};let s="load";n==="VIDEO"&&(i.autoplay=!0,i.loop=!0,i.muted=!0,i.playsinline=!0,s="loadeddata"),this.nodes.imageEl=Un(n,this.CSS.imageEl,i),this.nodes.imageEl.addEventListener(s,()=>{this.toggleStatus(Ne.status.FILLED),this.nodes.imagePreloader&&(this.nodes.imagePreloader.style.backgroundImage="")}),this.nodes.imageContainer.appendChild(this.nodes.imageEl)}fillCaption(t){this.nodes.caption&&(this.nodes.caption.innerHTML=t)}toggleStatus(t){for(const n in Ne.status)Object.prototype.hasOwnProperty.call(Ne.status,n)&&this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${Ne.status[n]}`,t===Ne.status[n])}applyTune(t,n){this.nodes.wrapper.classList.toggle(`${this.CSS.wrapper}--${t}`,n)}}function tv(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var pc={exports:{}};(function(c,t){(function(n,i){c.exports=i()})(window,function(){return function(n){var i={};function s(a){if(i[a])return i[a].exports;var d=i[a]={i:a,l:!1,exports:{}};return n[a].call(d.exports,d,d.exports,s),d.l=!0,d.exports}return s.m=n,s.c=i,s.d=function(a,d,h){s.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:h})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,d){if(1&d&&(a=s(a)),8&d||4&d&&typeof a=="object"&&a&&a.__esModule)return a;var h=Object.create(null);if(s.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),2&d&&typeof a!="string")for(var f in a)s.d(h,f,(function(m){return a[m]}).bind(null,f));return h},s.n=function(a){var d=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(d,"a",d),d},s.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)},s.p="",s(s.s=3)}([function(n,i){var s;s=function(){return this}();try{s=s||new Function("return this")()}catch{typeof window=="object"&&(s=window)}n.exports=s},function(n,i,s){(function(a){var d=s(2),h=setTimeout;function f(){}function m(y){if(!(this instanceof m))throw new TypeError("Promises must be constructed via new");if(typeof y!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],w(y,this)}function x(y,N){for(;y._state===3;)y=y._value;y._state!==0?(y._handled=!0,m._immediateFn(function(){var O=y._state===1?N.onFulfilled:N.onRejected;if(O!==null){var Y;try{Y=O(y._value)}catch(U){return void _(N.promise,U)}v(N.promise,Y)}else(y._state===1?v:_)(N.promise,y._value)})):y._deferreds.push(N)}function v(y,N){try{if(N===y)throw new TypeError("A promise cannot be resolved with itself.");if(N&&(typeof N=="object"||typeof N=="function")){var O=N.then;if(N instanceof m)return y._state=3,y._value=N,void I(y);if(typeof O=="function")return void w((Y=O,U=N,function(){Y.apply(U,arguments)}),y)}y._state=1,y._value=N,I(y)}catch(P){_(y,P)}var Y,U}function _(y,N){y._state=2,y._value=N,I(y)}function I(y){y._state===2&&y._deferreds.length===0&&m._immediateFn(function(){y._handled||m._unhandledRejectionFn(y._value)});for(var N=0,O=y._deferreds.length;N<O;N++)x(y,y._deferreds[N]);y._deferreds=null}function E(y,N,O){this.onFulfilled=typeof y=="function"?y:null,this.onRejected=typeof N=="function"?N:null,this.promise=O}function w(y,N){var O=!1;try{y(function(Y){O||(O=!0,v(N,Y))},function(Y){O||(O=!0,_(N,Y))})}catch(Y){if(O)return;O=!0,_(N,Y)}}m.prototype.catch=function(y){return this.then(null,y)},m.prototype.then=function(y,N){var O=new this.constructor(f);return x(this,new E(y,N,O)),O},m.prototype.finally=d.a,m.all=function(y){return new m(function(N,O){if(!y||y.length===void 0)throw new TypeError("Promise.all accepts an array");var Y=Array.prototype.slice.call(y);if(Y.length===0)return N([]);var U=Y.length;function P(K,T){try{if(T&&(typeof T=="object"||typeof T=="function")){var B=T.then;if(typeof B=="function")return void B.call(T,function(R){P(K,R)},O)}Y[K]=T,--U==0&&N(Y)}catch(R){O(R)}}for(var q=0;q<Y.length;q++)P(q,Y[q])})},m.resolve=function(y){return y&&typeof y=="object"&&y.constructor===m?y:new m(function(N){N(y)})},m.reject=function(y){return new m(function(N,O){O(y)})},m.race=function(y){return new m(function(N,O){for(var Y=0,U=y.length;Y<U;Y++)y[Y].then(N,O)})},m._immediateFn=typeof a=="function"&&function(y){a(y)}||function(y){h(y,0)},m._unhandledRejectionFn=function(y){typeof console<"u"&&console&&console.warn("Possible Unhandled Promise Rejection:",y)},i.a=m}).call(this,s(5).setImmediate)},function(n,i,s){i.a=function(a){var d=this.constructor;return this.then(function(h){return d.resolve(a()).then(function(){return h})},function(h){return d.resolve(a()).then(function(){return d.reject(h)})})}},function(n,i,s){function a(w){return(a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y})(w)}s(4);var d,h,f,m,x,v,_,I=s(8),E=(h=function(w){return new Promise(function(y,N){w=m(w),(w=x(w)).beforeSend&&w.beforeSend();var O=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");O.open(w.method,w.url),O.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(w.headers).forEach(function(U){var P=w.headers[U];O.setRequestHeader(U,P)});var Y=w.ratio;O.upload.addEventListener("progress",function(U){var P=Math.round(U.loaded/U.total*100),q=Math.ceil(P*Y/100);w.progress(Math.min(q,100))},!1),O.addEventListener("progress",function(U){var P=Math.round(U.loaded/U.total*100),q=Math.ceil(P*(100-Y)/100)+Y;w.progress(Math.min(q,100))},!1),O.onreadystatechange=function(){if(O.readyState===4){var U=O.response;try{U=JSON.parse(U)}catch{}var P=I.parseHeaders(O.getAllResponseHeaders()),q={body:U,code:O.status,headers:P};_(O.status)?y(q):N(q)}},O.send(w.data)})},f=function(w){return w.method="POST",h(w)},m=function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(w.url&&typeof w.url!="string")throw new Error("Url must be a string");if(w.url=w.url||"",w.method&&typeof w.method!="string")throw new Error("`method` must be a string or null");if(w.method=w.method?w.method.toUpperCase():"GET",w.headers&&a(w.headers)!=="object")throw new Error("`headers` must be an object or null");if(w.headers=w.headers||{},w.type&&(typeof w.type!="string"||!Object.values(d).includes(w.type)))throw new Error("`type` must be taken from module's «contentType» library");if(w.progress&&typeof w.progress!="function")throw new Error("`progress` must be a function or null");if(w.progress=w.progress||function(y){},w.beforeSend=w.beforeSend||function(y){},w.ratio&&typeof w.ratio!="number")throw new Error("`ratio` must be a number");if(w.ratio<0||w.ratio>100)throw new Error("`ratio` must be in a 0-100 interval");if(w.ratio=w.ratio||90,w.accept&&typeof w.accept!="string")throw new Error("`accept` must be a string with a list of allowed mime-types");if(w.accept=w.accept||"*/*",w.multiple&&typeof w.multiple!="boolean")throw new Error("`multiple` must be a true or false");if(w.multiple=w.multiple||!1,w.fieldName&&typeof w.fieldName!="string")throw new Error("`fieldName` must be a string");return w.fieldName=w.fieldName||"files",w},x=function(w){switch(w.method){case"GET":var y=v(w.data,d.URLENCODED);delete w.data,w.url=/\?/.test(w.url)?w.url+"&"+y:w.url+"?"+y;break;case"POST":case"PUT":case"DELETE":case"UPDATE":var N=function(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}).type||d.JSON}(w);(I.isFormData(w.data)||I.isFormElement(w.data))&&(N=d.FORM),w.data=v(w.data,N),N!==E.contentType.FORM&&(w.headers["content-type"]=N)}return w},v=function(){var w=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};switch(arguments.length>1?arguments[1]:void 0){case d.URLENCODED:return I.urlEncode(w);case d.JSON:return I.jsonEncode(w);case d.FORM:return I.formEncode(w);default:return w}},_=function(w){return w>=200&&w<300},{contentType:d={URLENCODED:"application/x-www-form-urlencoded; charset=utf-8",FORM:"multipart/form-data",JSON:"application/json; charset=utf-8"},request:h,get:function(w){return w.method="GET",h(w)},post:f,transport:function(w){return w=m(w),I.selectFiles(w).then(function(y){for(var N=new FormData,O=0;O<y.length;O++)N.append(w.fieldName,y[O],y[O].name);I.isObject(w.data)&&Object.keys(w.data).forEach(function(U){var P=w.data[U];N.append(U,P)});var Y=w.beforeSend;return w.beforeSend=function(){return Y(y)},w.data=N,f(w)})},selectFiles:function(w){return delete(w=m(w)).beforeSend,I.selectFiles(w)}});n.exports=E},function(n,i,s){s.r(i);var a=s(1);window.Promise=window.Promise||a.a},function(n,i,s){(function(a){var d=a!==void 0&&a||typeof self<"u"&&self||window,h=Function.prototype.apply;function f(m,x){this._id=m,this._clearFn=x}i.setTimeout=function(){return new f(h.call(setTimeout,d,arguments),clearTimeout)},i.setInterval=function(){return new f(h.call(setInterval,d,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(m){m&&m.close()},f.prototype.unref=f.prototype.ref=function(){},f.prototype.close=function(){this._clearFn.call(d,this._id)},i.enroll=function(m,x){clearTimeout(m._idleTimeoutId),m._idleTimeout=x},i.unenroll=function(m){clearTimeout(m._idleTimeoutId),m._idleTimeout=-1},i._unrefActive=i.active=function(m){clearTimeout(m._idleTimeoutId);var x=m._idleTimeout;x>=0&&(m._idleTimeoutId=setTimeout(function(){m._onTimeout&&m._onTimeout()},x))},s(6),i.setImmediate=typeof self<"u"&&self.setImmediate||a!==void 0&&a.setImmediate||this&&this.setImmediate,i.clearImmediate=typeof self<"u"&&self.clearImmediate||a!==void 0&&a.clearImmediate||this&&this.clearImmediate}).call(this,s(0))},function(n,i,s){(function(a,d){(function(h,f){if(!h.setImmediate){var m,x,v,_,I,E=1,w={},y=!1,N=h.document,O=Object.getPrototypeOf&&Object.getPrototypeOf(h);O=O&&O.setTimeout?O:h,{}.toString.call(h.process)==="[object process]"?m=function(P){d.nextTick(function(){U(P)})}:function(){if(h.postMessage&&!h.importScripts){var P=!0,q=h.onmessage;return h.onmessage=function(){P=!1},h.postMessage("","*"),h.onmessage=q,P}}()?(_="setImmediate$"+Math.random()+"$",I=function(P){P.source===h&&typeof P.data=="string"&&P.data.indexOf(_)===0&&U(+P.data.slice(_.length))},h.addEventListener?h.addEventListener("message",I,!1):h.attachEvent("onmessage",I),m=function(P){h.postMessage(_+P,"*")}):h.MessageChannel?((v=new MessageChannel).port1.onmessage=function(P){U(P.data)},m=function(P){v.port2.postMessage(P)}):N&&"onreadystatechange"in N.createElement("script")?(x=N.documentElement,m=function(P){var q=N.createElement("script");q.onreadystatechange=function(){U(P),q.onreadystatechange=null,x.removeChild(q),q=null},x.appendChild(q)}):m=function(P){setTimeout(U,0,P)},O.setImmediate=function(P){typeof P!="function"&&(P=new Function(""+P));for(var q=new Array(arguments.length-1),K=0;K<q.length;K++)q[K]=arguments[K+1];var T={callback:P,args:q};return w[E]=T,m(E),E++},O.clearImmediate=Y}function Y(P){delete w[P]}function U(P){if(y)setTimeout(U,0,P);else{var q=w[P];if(q){y=!0;try{(function(K){var T=K.callback,B=K.args;switch(B.length){case 0:T();break;case 1:T(B[0]);break;case 2:T(B[0],B[1]);break;case 3:T(B[0],B[1],B[2]);break;default:T.apply(f,B)}})(q)}finally{Y(P),y=!1}}}}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,s(0),s(7))},function(n,i){var s,a,d=n.exports={};function h(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function m(O){if(s===setTimeout)return setTimeout(O,0);if((s===h||!s)&&setTimeout)return s=setTimeout,setTimeout(O,0);try{return s(O,0)}catch{try{return s.call(null,O,0)}catch{return s.call(this,O,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:h}catch{s=h}try{a=typeof clearTimeout=="function"?clearTimeout:f}catch{a=f}})();var x,v=[],_=!1,I=-1;function E(){_&&x&&(_=!1,x.length?v=x.concat(v):I=-1,v.length&&w())}function w(){if(!_){var O=m(E);_=!0;for(var Y=v.length;Y;){for(x=v,v=[];++I<Y;)x&&x[I].run();I=-1,Y=v.length}x=null,_=!1,function(U){if(a===clearTimeout)return clearTimeout(U);if((a===f||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(U);try{a(U)}catch{try{return a.call(null,U)}catch{return a.call(this,U)}}}(O)}}function y(O,Y){this.fun=O,this.array=Y}function N(){}d.nextTick=function(O){var Y=new Array(arguments.length-1);if(arguments.length>1)for(var U=1;U<arguments.length;U++)Y[U-1]=arguments[U];v.push(new y(O,Y)),v.length!==1||_||m(w)},y.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=N,d.addListener=N,d.once=N,d.off=N,d.removeListener=N,d.removeAllListeners=N,d.emit=N,d.prependListener=N,d.prependOnceListener=N,d.listeners=function(O){return[]},d.binding=function(O){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(O){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(n,i,s){function a(h,f){for(var m=0;m<f.length;m++){var x=f[m];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(h,x.key,x)}}var d=s(9);n.exports=function(){function h(){(function(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")})(this,h)}var f,m,x;return f=h,x=[{key:"urlEncode",value:function(v){return d(v)}},{key:"jsonEncode",value:function(v){return JSON.stringify(v)}},{key:"formEncode",value:function(v){if(this.isFormData(v))return v;if(this.isFormElement(v))return new FormData(v);if(this.isObject(v)){var _=new FormData;return Object.keys(v).forEach(function(I){var E=v[I];_.append(I,E)}),_}throw new Error("`data` must be an instance of Object, FormData or <FORM> HTMLElement")}},{key:"isObject",value:function(v){return Object.prototype.toString.call(v)==="[object Object]"}},{key:"isFormData",value:function(v){return v instanceof FormData}},{key:"isFormElement",value:function(v){return v instanceof HTMLFormElement}},{key:"selectFiles",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Promise(function(_,I){var E=document.createElement("INPUT");E.type="file",v.multiple&&E.setAttribute("multiple","multiple"),v.accept&&E.setAttribute("accept",v.accept),E.style.display="none",document.body.appendChild(E),E.addEventListener("change",function(w){var y=w.target.files;_(y),document.body.removeChild(E)},!1),E.click()})}},{key:"parseHeaders",value:function(v){var _=v.trim().split(/[\r\n]+/),I={};return _.forEach(function(E){var w=E.split(": "),y=w.shift(),N=w.join(": ");y&&(I[y]=N)}),I}}],(m=null)&&a(f.prototype,m),x&&a(f,x),h}()},function(n,i){var s=function(d){return encodeURIComponent(d).replace(/[!'()*]/g,escape).replace(/%20/g,"+")},a=function(d,h,f,m){return h=h||null,f=f||"&",m=m||null,d?function(x){for(var v=new Array,_=0;_<x.length;_++)x[_]&&v.push(x[_]);return v}(Object.keys(d).map(function(x){var v,_,I=x;if(m&&(I=m+"["+I+"]"),typeof d[x]=="object"&&d[x]!==null)v=a(d[x],null,f,I);else{h&&(_=I,I=!isNaN(parseFloat(_))&&isFinite(_)?h+Number(I):I);var E=d[x];E=(E=(E=(E=E===!0?"1":E)===!1?"0":E)===0?"0":E)||"",v=s(I)+"="+s(E)}return v})).join(f).replace(/[!'()*]/g,""):""};n.exports=a}])})})(pc);var ev=pc.exports;const zn=tv(ev);function $r(c){return c&&typeof c.then=="function"}class nv{constructor({config:t,onUpload:n,onError:i}){this.config=t,this.onUpload=n,this.onError=i}uploadSelectedFile({onPreview:t}){const n=function(s){const a=new FileReader;a.readAsDataURL(s),a.onload=d=>{t(d.target.result)}};let i;this.config.uploader&&typeof this.config.uploader.uploadByFile=="function"?i=zn.selectFiles({accept:this.config.types}).then(s=>{n(s[0]);const a=this.config.uploader.uploadByFile(s[0]);return $r(a)||console.warn("Custom uploader method uploadByFile should return a Promise"),a}):i=zn.transport({url:this.config.endpoints.byFile,data:this.config.additionalRequestData,accept:this.config.types,headers:this.config.additionalRequestHeaders,beforeSend:s=>{n(s[0])},fieldName:this.config.field}).then(s=>s.body),i.then(s=>{this.onUpload(s)}).catch(s=>{this.onError(s)})}uploadByUrl(t){let n;this.config.uploader&&typeof this.config.uploader.uploadByUrl=="function"?(n=this.config.uploader.uploadByUrl(t),$r(n)||console.warn("Custom uploader method uploadByUrl should return a Promise")):n=zn.post({url:this.config.endpoints.byUrl,data:Object.assign({url:t},this.config.additionalRequestData),type:zn.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(i=>i.body),n.then(i=>{this.onUpload(i)}).catch(i=>{this.onError(i)})}uploadByFile(t,{onPreview:n}){const i=new FileReader;i.readAsDataURL(t),i.onload=a=>{n(a.target.result)};let s;if(this.config.uploader&&typeof this.config.uploader.uploadByFile=="function")s=this.config.uploader.uploadByFile(t),$r(s)||console.warn("Custom uploader method uploadByFile should return a Promise");else{const a=new FormData;a.append(this.config.field,t),this.config.additionalRequestData&&Object.keys(this.config.additionalRequestData).length&&Object.entries(this.config.additionalRequestData).forEach(([d,h])=>{a.append(d,h)}),s=zn.post({url:this.config.endpoints.byFile,data:a,type:zn.contentType.JSON,headers:this.config.additionalRequestHeaders}).then(d=>d.body)}s.then(a=>{this.onUpload(a)}).catch(a=>{this.onError(a)})}}/**
 * Image Tool for the Editor.js
 *
 * @author CodeX <team@codex.so>
 * @license MIT
 * @see {@link https://github.com/editor-js/image}
 *
 * To developers.
 * To simplify Tool structure, we split it to 4 parts:
 *  1) index.js — main Tool's interface, public API and methods for working with data
 *  2) uploader.js — module that has methods for sending files via AJAX: from device, by URL or File pasting
 *  3) ui.js — module for UI manipulations: render, showing preloader, etc
 *  4) tunes.js — working with Block Tunes: render buttons, handle clicks
 *
 * For debug purposes there is a testing server
 * that can save uploaded files and return a Response {@link UploadResponseFormat}
 *
 *       $ node dev/server.js
 *
 * It will expose 8008 port, so you can pass http://localhost:8008 with the Tools config:
 *
 * image: {
 *   class: ImageTool,
 *   config: {
 *     endpoints: {
 *       byFile: 'http://localhost:8008/uploadFile',
 *       byUrl: 'http://localhost:8008/fetchUrl',
 *     }
 *   },
 * },
 */let ov=class Yr{static get isReadOnlySupported(){return!0}static get toolbox(){return{icon:hc,title:"Image"}}static get tunes(){return[{name:"withBorder",icon:Jb,title:"With border",toggle:!0},{name:"stretched",icon:Qb,title:"Stretch image",toggle:!0},{name:"withBackground",icon:Vb,title:"With background",toggle:!0}]}constructor({data:t,config:n,api:i,readOnly:s,block:a}){this.api=i,this.readOnly=s,this.block=a,this.config={endpoints:n.endpoints||"",additionalRequestData:n.additionalRequestData||{},additionalRequestHeaders:n.additionalRequestHeaders||{},field:n.field||"image",types:n.types||"image/*",captionPlaceholder:this.api.i18n.t(n.captionPlaceholder||"Caption"),buttonContent:n.buttonContent||"",uploader:n.uploader||void 0,actions:n.actions||[]},this.uploader=new nv({config:this.config,onUpload:d=>this.onUpload(d),onError:d=>this.uploadingFailed(d)}),this.ui=new Ne({api:i,config:this.config,onSelectFile:()=>{this.uploader.uploadSelectedFile({onPreview:d=>{this.ui.showPreloader(d)}})},readOnly:s}),this._data={},this.data=t}render(){return this.ui.render(this.data)}validate(t){return t.file&&t.file.url}save(){const t=this.ui.nodes.caption;return this._data.caption=t.innerHTML,this.data}renderSettings(){return Yr.tunes.concat(this.config.actions).map(t=>({icon:t.icon,label:this.api.i18n.t(t.title),name:t.name,toggle:t.toggle,isActive:this.data[t.name],onActivate:()=>{if(typeof t.action=="function"){t.action(t.name);return}this.tuneToggled(t.name)}}))}appendCallback(){this.ui.nodes.fileButton.click()}static get pasteConfig(){return{tags:[{img:{src:!0}}],patterns:{image:/https?:\/\/\S+\.(gif|jpe?g|tiff|png|svg|webp)(\?[a-z0-9=]*)?$/i},files:{mimeTypes:["image/*"]}}}async onPaste(t){switch(t.type){case"tag":{const n=t.detail.data;if(/^blob:/.test(n.src)){const i=await(await fetch(n.src)).blob();this.uploadFile(i);break}this.uploadUrl(n.src);break}case"pattern":{const n=t.detail.data;this.uploadUrl(n);break}case"file":{const n=t.detail.file;this.uploadFile(n);break}}}set data(t){this.image=t.file,this._data.caption=t.caption||"",this.ui.fillCaption(this._data.caption),Yr.tunes.forEach(({name:n})=>{const i=typeof t[n]<"u"?t[n]===!0||t[n]==="true":!1;this.setTune(n,i)})}get data(){return this._data}set image(t){this._data.file=t||{},t&&t.url&&this.ui.fillImage(t.url)}onUpload(t){t.success&&t.file?this.image=t.file:this.uploadingFailed("incorrect response: "+JSON.stringify(t))}uploadingFailed(t){console.log("Image Tool: uploading failed because of",t),this.api.notifier.show({message:this.api.i18n.t("Couldn’t upload image. Please try another."),style:"error"}),this.ui.hidePreloader()}tuneToggled(t){this.setTune(t,!this._data[t])}setTune(t,n){this._data[t]=n,this.ui.applyTune(t,n),t==="stretched"&&Promise.resolve().then(()=>{this.block.stretched=n}).catch(i=>{console.error(i)})}uploadFile(t){this.uploader.uploadByFile(t,{onPreview:n=>{this.ui.showPreloader(n)}})}uploadUrl(t){this.ui.showPreloader(t),this.uploader.uploadByUrl(t)}};var iv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function os(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}function jr(){}Object.assign(jr,{default:jr,register:jr,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(c){const t=(this.document||this.ownerDocument).querySelectorAll(c);let n=t.length;for(;--n>=0&&t.item(n)!==this;);return n>-1});Element.prototype.closest||(Element.prototype.closest=function(c){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(c))return t;t=t.parentElement||t.parentNode}while(t!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(c){const t=document.createDocumentFragment();Array.isArray(c)||(c=[c]),c.forEach(n=>{const i=n instanceof Node;t.appendChild(i?n:document.createTextNode(n))}),this.insertBefore(t,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(c){c=arguments.length===0?!0:!!c;const t=this.parentNode,n=window.getComputedStyle(t,null),i=parseInt(n.getPropertyValue("border-top-width")),s=parseInt(n.getPropertyValue("border-left-width")),a=this.offsetTop-t.offsetTop<t.scrollTop,d=this.offsetTop-t.offsetTop+this.clientHeight-i>t.scrollTop+t.clientHeight,h=this.offsetLeft-t.offsetLeft<t.scrollLeft,f=this.offsetLeft-t.offsetLeft+this.clientWidth-s>t.scrollLeft+t.clientWidth,m=a&&!d;(a||d)&&c&&(t.scrollTop=this.offsetTop-t.offsetTop-t.clientHeight/2-i+this.clientHeight/2),(h||f)&&c&&(t.scrollLeft=this.offsetLeft-t.offsetLeft-t.clientWidth/2-s+this.clientWidth/2),(a||d||h||f)&&!c&&this.scrollIntoView(m)});window.requestIdleCallback=window.requestIdleCallback||function(c){const t=Date.now();return setTimeout(function(){c({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(c){clearTimeout(c)};let rv=(c=21)=>crypto.getRandomValues(new Uint8Array(c)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");var fc=(c=>(c.VERBOSE="VERBOSE",c.INFO="INFO",c.WARN="WARN",c.ERROR="ERROR",c))(fc||{});const at={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},sv={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};function xo(c,t,n="log",i,s="color: inherit"){if(!("console"in window)||!window.console[n])return;const a=["info","log","warn","error"].includes(n),d=[];switch(xo.logLevel){case"ERROR":if(n!=="error")return;break;case"WARN":if(!["error","warn"].includes(n))return;break;case"INFO":if(!a||c)return;break}i&&d.push(i);const h="Editor.js 2.29.0",f=`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`;c&&(a?(d.unshift(f,s),t=`%c${h}%c ${t}`):t=`( ${h} )${t}`);try{a?i?console[n](`${t} %o`,...d):console[n](t,...d):console[n](t)}catch{}}xo.logLevel="VERBOSE";function av(c){xo.logLevel=c}const Ct=xo.bind(window,!1),De=xo.bind(window,!0);function En(c){return Object.prototype.toString.call(c).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function Ot(c){return En(c)==="function"||En(c)==="asyncfunction"}function Xt(c){return En(c)==="object"}function hn(c){return En(c)==="string"}function lv(c){return En(c)==="boolean"}function tc(c){return En(c)==="number"}function ec(c){return En(c)==="undefined"}function Le(c){return c?Object.keys(c).length===0&&c.constructor===Object:!0}function gc(c){return c>47&&c<58||c===32||c===13||c===229||c>64&&c<91||c>95&&c<112||c>185&&c<193||c>218&&c<223}async function cv(c,t=()=>{},n=()=>{}){async function i(s,a,d){try{await s.function(s.data),await a(ec(s.data)?{}:s.data)}catch{d(ec(s.data)?{}:s.data)}}return c.reduce(async(s,a)=>(await s,i(a,t,n)),Promise.resolve())}function mc(c){return Array.prototype.slice.call(c)}function mi(c,t){return function(){const n=this,i=arguments;window.setTimeout(()=>c.apply(n,i),t)}}function dv(c){return c.name.split(".").pop()}function uv(c){return/^[-\w]+\/([-+\w]+|\*)$/.test(c)}function nc(c,t,n){let i;return(...s)=>{const a=this,d=()=>{i=null,n||c.apply(a,s)},h=n&&!i;window.clearTimeout(i),i=window.setTimeout(d,t),h&&c.apply(a,s)}}function Kr(c,t,n=void 0){let i,s,a,d=null,h=0;n||(n={});const f=function(){h=n.leading===!1?0:Date.now(),d=null,a=c.apply(i,s),d||(i=s=null)};return function(){const m=Date.now();!h&&n.leading===!1&&(h=m);const x=t-(m-h);return i=this,s=arguments,x<=0||x>t?(d&&(clearTimeout(d),d=null),h=m,a=c.apply(i,s),d||(i=s=null)):!d&&n.trailing!==!1&&(d=setTimeout(f,x)),a}}function hv(){const c={win:!1,mac:!1,x11:!1,linux:!1},t=Object.keys(c).find(n=>window.navigator.appVersion.toLowerCase().indexOf(n)!==-1);return t&&(c[t]=!0),c}function Yn(c){return c[0].toUpperCase()+c.slice(1)}function Gr(c,...t){if(!t.length)return c;const n=t.shift();if(Xt(c)&&Xt(n))for(const i in n)Xt(n[i])?(c[i]||Object.assign(c,{[i]:{}}),Gr(c[i],n[i])):Object.assign(c,{[i]:n[i]});return Gr(c,...t)}function vi(c){const t=hv();return c=c.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),t.mac?c=c.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):c=c.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),c}function pv(c){try{return new URL(c).href}catch{}return c.substring(0,2)==="//"?window.location.protocol+c:window.location.origin+c}function fv(){return rv(10)}function gv(c){window.open(c,"_blank")}function mv(c=""){return`${c}${Math.floor(Math.random()*1e8).toString(16)}`}function Xr(c,t,n){const i=`«${t}» is deprecated and will be removed in the next major release. Please use the «${n}» instead.`;c&&De(i,"warn")}function Gn(c,t,n){const i=n.value?"value":"get",s=n[i],a=`#${t}Cache`;if(n[i]=function(...d){return this[a]===void 0&&(this[a]=s.apply(this,...d)),this[a]},i==="get"&&n.set){const d=n.set;n.set=function(h){delete c[a],d.apply(this,h)}}return n}const bc=650;function Cn(){return window.matchMedia(`(max-width: ${bc}px)`).matches}const oc=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function bv(c,t){const n=Array.isArray(c)||Xt(c),i=Array.isArray(t)||Xt(t);return n||i?JSON.stringify(c)===JSON.stringify(t):c===t}class L{static isSingleTag(t){return t.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(t.tagName)}static isLineBreakTag(t){return t&&t.tagName&&["BR","WBR"].includes(t.tagName)}static make(t,n=null,i={}){const s=document.createElement(t);Array.isArray(n)?s.classList.add(...n):n&&s.classList.add(n);for(const a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=i[a]);return s}static text(t){return document.createTextNode(t)}static append(t,n){Array.isArray(n)?n.forEach(i=>t.appendChild(i)):t.appendChild(n)}static prepend(t,n){Array.isArray(n)?(n=n.reverse(),n.forEach(i=>t.prepend(i))):t.prepend(n)}static swap(t,n){const i=document.createElement("div"),s=t.parentNode;s.insertBefore(i,t),s.insertBefore(t,n),s.insertBefore(n,i),s.removeChild(i)}static find(t=document,n){return t.querySelector(n)}static get(t){return document.getElementById(t)}static findAll(t=document,n){return t.querySelectorAll(n)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(t=>`input[type="${t}"]`).join(", ")}static findAllInputs(t){return mc(t.querySelectorAll(L.allInputsSelector)).reduce((n,i)=>L.isNativeInput(i)||L.containsOnlyInlineElements(i)?[...n,i]:[...n,...L.getDeepestBlockElements(i)],[])}static getDeepestNode(t,n=!1){const i=n?"lastChild":"firstChild",s=n?"previousSibling":"nextSibling";if(t&&t.nodeType===Node.ELEMENT_NODE&&t[i]){let a=t[i];if(L.isSingleTag(a)&&!L.isNativeInput(a)&&!L.isLineBreakTag(a))if(a[s])a=a[s];else if(a.parentNode[s])a=a.parentNode[s];else return a.parentNode;return this.getDeepestNode(a,n)}return t}static isElement(t){return tc(t)?!1:t&&t.nodeType&&t.nodeType===Node.ELEMENT_NODE}static isFragment(t){return tc(t)?!1:t&&t.nodeType&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(t){return t.contentEditable==="true"}static isNativeInput(t){const n=["INPUT","TEXTAREA"];return t&&t.tagName?n.includes(t.tagName):!1}static canSetCaret(t){let n=!0;if(L.isNativeInput(t))switch(t.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":n=!1;break}else n=L.isContentEditable(t);return n}static isNodeEmpty(t,n){let i;return this.isSingleTag(t)&&!this.isLineBreakTag(t)?!1:(this.isElement(t)&&this.isNativeInput(t)?i=t.value:i=t.textContent.replace("​",""),n&&(i=i.replace(new RegExp(n,"g"),"")),i.trim().length===0)}static isLeaf(t){return t?t.childNodes.length===0:!1}static isEmpty(t,n){t.normalize();const i=[t];for(;i.length>0;)if(t=i.shift(),!!t){if(this.isLeaf(t)&&!this.isNodeEmpty(t,n))return!1;t.childNodes&&i.push(...Array.from(t.childNodes))}return!0}static isHTMLString(t){const n=L.make("div");return n.innerHTML=t,n.childElementCount>0}static getContentLength(t){return L.isNativeInput(t)?t.value.length:t.nodeType===Node.TEXT_NODE?t.length:t.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(t){let n;hn(t)?(n=document.createElement("div"),n.innerHTML=t):n=t;const i=s=>!L.blockElements.includes(s.tagName.toLowerCase())&&Array.from(s.children).every(i);return Array.from(n.children).every(i)}static getDeepestBlockElements(t){return L.containsOnlyInlineElements(t)?[t]:Array.from(t.children).reduce((n,i)=>[...n,...L.getDeepestBlockElements(i)],[])}static getHolder(t){return hn(t)?document.getElementById(t):t}static isAnchor(t){return t.tagName.toLowerCase()==="a"}static offset(t){const n=t.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft,s=window.pageYOffset||document.documentElement.scrollTop,a=n.top+s,d=n.left+i;return{top:a,left:d,bottom:a+n.height,right:d+n.width}}}const vv={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},wv={Text:"",Link:"",Bold:"",Italic:""},kv={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},yv={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},vc={ui:vv,toolNames:wv,tools:kv,blockTunes:yv},$n=class{static ui(c,t){return $n._t(c,t)}static t(c,t){return $n._t(c,t)}static setDictionary(c){$n.currentDictionary=c}static _t(c,t){const n=$n.getNamespace(c);return!n||!n[t]?t:n[t]}static getNamespace(c){return c.split(".").reduce((t,n)=>!t||!Object.keys(t).length?{}:t[n],$n.currentDictionary)}};let ce=$n;ce.currentDictionary=vc;class wc extends Error{}class wi{constructor(){this.subscribers={}}on(t,n){t in this.subscribers||(this.subscribers[t]=[]),this.subscribers[t].push(n)}once(t,n){t in this.subscribers||(this.subscribers[t]=[]);const i=s=>{const a=n(s),d=this.subscribers[t].indexOf(i);return d!==-1&&this.subscribers[t].splice(d,1),a};this.subscribers[t].push(i)}emit(t,n){Le(this.subscribers)||!this.subscribers[t]||this.subscribers[t].reduce((i,s)=>{const a=s(i);return a!==void 0?a:i},n)}off(t,n){if(this.subscribers[t]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${t.toString()}". Probably, .off() called before .on()`);return}for(let i=0;i<this.subscribers[t].length;i++)if(this.subscribers[t][i]===n){delete this.subscribers[t][i];break}}destroy(){this.subscribers={}}}function xn(c){Object.setPrototypeOf(this,{get id(){return c.id},get name(){return c.name},get config(){return c.config},get holder(){return c.holder},get isEmpty(){return c.isEmpty},get selected(){return c.selected},set stretched(t){c.stretched=t},get stretched(){return c.stretched},get focusable(){return c.focusable},call(t,n){return c.call(t,n)},save(){return c.save()},validate(t){return c.validate(t)},dispatchChange(){c.dispatchChange()}})}class is{constructor(){this.allListeners=[]}on(t,n,i,s=!1){const a=mv("l"),d={id:a,element:t,eventType:n,handler:i,options:s};if(!this.findOne(t,n,i))return this.allListeners.push(d),t.addEventListener(n,i,s),a}off(t,n,i,s){const a=this.findAll(t,n,i);a.forEach((d,h)=>{const f=this.allListeners.indexOf(a[h]);f>-1&&(this.allListeners.splice(f,1),d.element.removeEventListener(d.eventType,d.handler,d.options))})}offById(t){const n=this.findById(t);n&&n.element.removeEventListener(n.eventType,n.handler,n.options)}findOne(t,n,i){const s=this.findAll(t,n,i);return s.length>0?s[0]:null}findAll(t,n,i){let s;const a=t?this.findByEventTarget(t):[];return t&&n&&i?s=a.filter(d=>d.eventType===n&&d.handler===i):t&&n?s=a.filter(d=>d.eventType===n):s=a,s}removeAll(){this.allListeners.map(t=>{t.element.removeEventListener(t.eventType,t.handler,t.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(t){return this.allListeners.filter(n=>{if(n.element===t)return n})}findByType(t){return this.allListeners.filter(n=>{if(n.eventType===t)return n})}findByHandler(t){return this.allListeners.filter(n=>{if(n.handler===t)return n})}findById(t){return this.allListeners.find(n=>n.id===t)}}class vt{constructor({config:t,eventsDispatcher:n}){if(this.nodes={},this.listeners=new is,this.readOnlyMutableListeners={on:(i,s,a,d=!1)=>{this.mutableListenerIds.push(this.listeners.on(i,s,a,d))},clearAll:()=>{for(const i of this.mutableListenerIds)this.listeners.offById(i);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===vt)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=t,this.eventsDispatcher=n}set state(t){this.Editor=t}removeAllNodes(){for(const t in this.nodes){const n=this.nodes[t];n instanceof HTMLElement&&n.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}}class et{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const t=window.getSelection();return t?t.anchorNode:null}static get anchorElement(){const t=window.getSelection();if(!t)return null;const n=t.anchorNode;return n?L.isElement(n)?n:n.parentElement:null}static get anchorOffset(){const t=window.getSelection();return t?t.anchorOffset:null}static get isCollapsed(){const t=window.getSelection();return t?t.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(et.get())}static isSelectionAtEditor(t){if(!t)return!1;let n=t.anchorNode||t.focusNode;n&&n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);let i=null;return n&&n instanceof Element&&(i=n.closest(`.${et.CSS.editorZone}`)),i?i.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(t){if(!t)return;let n=t.startContainer;n&&n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);let i=null;return n&&n instanceof Element&&(i=n.closest(`.${et.CSS.editorZone}`)),i?i.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!et.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(t){return t&&t.rangeCount?t.getRangeAt(0):null}static get rect(){let t=document.selection,n,i={x:0,y:0,width:0,height:0};if(t&&t.type!=="Control")return t=t,n=t.createRange(),i.x=n.boundingLeft,i.y=n.boundingTop,i.width=n.boundingWidth,i.height=n.boundingHeight,i;if(!window.getSelection)return Ct("Method window.getSelection is not supported","warn"),i;if(t=window.getSelection(),t.rangeCount===null||isNaN(t.rangeCount))return Ct("Method SelectionUtils.rangeCount is not supported","warn"),i;if(t.rangeCount===0)return i;if(n=t.getRangeAt(0).cloneRange(),n.getBoundingClientRect&&(i=n.getBoundingClientRect()),i.x===0&&i.y===0){const s=document.createElement("span");if(s.getBoundingClientRect){s.appendChild(document.createTextNode("​")),n.insertNode(s),i=s.getBoundingClientRect();const a=s.parentNode;a.removeChild(s),a.normalize()}}return i}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(t,n=0){const i=document.createRange(),s=window.getSelection();return L.isNativeInput(t)?L.canSetCaret(t)?(t.focus(),t.selectionStart=t.selectionEnd=n,t.getBoundingClientRect()):void 0:(i.setStart(t,n),i.setEnd(t,n),s.removeAllRanges(),s.addRange(i),i.getBoundingClientRect())}static isRangeInsideContainer(t){const n=et.range;return n===null?!1:t.contains(n.startContainer)}static addFakeCursor(){const t=et.range;if(t===null)return;const n=L.make("span","codex-editor__fake-cursor");n.dataset.mutationFree="true",t.collapse(),t.insertNode(n)}static isFakeCursorInsideContainer(t){return L.find(t,".codex-editor__fake-cursor")!==null}static removeFakeCursor(t=document.body){const n=L.find(t,".codex-editor__fake-cursor");n&&n.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=et.range}restore(){if(!this.savedSelectionRange)return;const t=window.getSelection();t.removeAllRanges(),t.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(t.focusNode),n.collapse(!1),t.removeAllRanges(),t.addRange(n)}findParentTag(t,n,i=10){const s=window.getSelection();let a=null;return!s||!s.anchorNode||!s.focusNode?null:([s.anchorNode,s.focusNode].forEach(d=>{let h=i;for(;h>0&&d.parentNode&&!(d.tagName===t&&(a=d,n&&d.classList&&!d.classList.contains(n)&&(a=null),a));)d=d.parentNode,h--}),a)}expandToTag(t){const n=window.getSelection();n.removeAllRanges();const i=document.createRange();i.selectNodeContents(t),n.addRange(i)}}function xv(c,t){const{type:n,target:i,addedNodes:s,removedNodes:a}=c;if(i===t)return!0;if(["characterData","attributes"].includes(n)){const f=i.nodeType===Node.TEXT_NODE?i.parentNode:i;return t.contains(f)}const d=Array.from(s).some(f=>t.contains(f)),h=Array.from(a).some(f=>t.contains(f));return d||h}const Zr="redactor dom changed",kc="block changed",yc="fake cursor is about to be toggled",xc="fake cursor have been set";function ic(c,t){return c.mergeable&&c.name===t.name}function Cv(c,t){const n=t==null?void 0:t.export;return Ot(n)?n(c):hn(n)?c[n]:(n!==void 0&&Ct("Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function Ev(c,t){const n=t==null?void 0:t.import;return Ot(n)?n(c):hn(n)?{[n]:c}:(n!==void 0&&Ct("Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var Ve=(c=>(c.APPEND_CALLBACK="appendCallback",c.RENDERED="rendered",c.MOVED="moved",c.UPDATED="updated",c.REMOVED="removed",c.ON_PASTE="onPaste",c))(Ve||{});class Gt extends wi{constructor({id:t=fv(),data:n,tool:i,api:s,readOnly:a,tunesData:d},h){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(f=void 0)=>{const m=f===void 0,x=f instanceof InputEvent;!m&&!x&&this.detectToolRootChange(f);let v;m||x?v=!0:v=!(f.length>0&&f.every(_=>{const{addedNodes:I,removedNodes:E,target:w}=_;return[...Array.from(I),...Array.from(E),w].some(y=>(L.isElement(y)||(y=y.parentElement),y&&y.closest('[data-mutation-free="true"]')!==null))})),v&&(this.dropInputsCache(),this.updateCurrentInput(),this.call("updated"),this.emit("didMutated",this))},this.name=i.name,this.id=t,this.settings=i.settings,this.config=i.settings.config||{},this.api=s,this.editorEventBus=h||null,this.blockAPI=new xn(this),this.tool=i,this.toolInstance=i.create(n,this.blockAPI,a),this.tunes=i.tunes,this.composeTunes(d),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const t=L.findAllInputs(this.holder);return this.inputIndex>t.length-1&&(this.inputIndex=t.length-1),this.cachedInputs=t,t}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(t){const n=this.inputs.findIndex(i=>i===t||i.contains(t));n!==-1&&(this.inputIndex=n)}get firstInput(){return this.inputs[0]}get lastInput(){const t=this.inputs;return t[t.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(t=>t&&!Le(t.data)?t.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return Ot(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const t=L.isEmpty(this.pluginsContent,"/"),n=!this.hasMedia;return t&&n}get hasMedia(){const t=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(t.join(","))}set selected(t){var n,i;this.holder.classList.toggle(Gt.CSS.selected,t);const s=t===!0&&et.isRangeInsideContainer(this.holder),a=t===!1&&et.isFakeCursorInsideContainer(this.holder);(s||a)&&((n=this.editorEventBus)==null||n.emit(yc,{state:t}),s?et.addFakeCursor():et.removeFakeCursor(this.holder),(i=this.editorEventBus)==null||i.emit(xc,{state:t}))}get selected(){return this.holder.classList.contains(Gt.CSS.selected)}set stretched(t){this.holder.classList.toggle(Gt.CSS.wrapperStretched,t)}get stretched(){return this.holder.classList.contains(Gt.CSS.wrapperStretched)}set dropTarget(t){this.holder.classList.toggle(Gt.CSS.dropTarget,t)}get pluginsContent(){return this.toolRenderedElement}call(t,n){if(Ot(this.toolInstance[t])){t==="appendCallback"&&Ct("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[t].call(this.toolInstance,n)}catch(i){Ct(`Error during '${t}' call: ${i.message}`,"error")}}}async mergeWith(t){await this.toolInstance.merge(t)}async save(){const t=await this.toolInstance.save(this.pluginsContent),n=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([a,d])=>{if(Ot(d.save))try{n[a]=d.save()}catch(h){Ct(`Tune ${d.constructor.name} save method throws an Error %o`,"warn",h)}});const i=window.performance.now();let s;return Promise.resolve(t).then(a=>(s=window.performance.now(),{id:this.id,tool:this.name,data:a,tunes:n,time:s-i})).catch(a=>{Ct(`Saving process for ${this.name} tool failed due to the ${a}`,"log","red")})}async validate(t){let n=!0;return this.toolInstance.validate instanceof Function&&(n=await this.toolInstance.validate(t)),n}getTunes(){const t=document.createElement("div"),n=[],i=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[],s=[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(a=>a.render());return[i,s].flat().forEach(a=>{L.isElement(a)?t.appendChild(a):Array.isArray(a)?n.push(...a):n.push(a)}),[n,t]}updateCurrentInput(){this.currentInput=L.isNativeInput(document.activeElement)||!et.anchorNode?document.activeElement:et.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),Ot(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const t=this.tool.toolbox;if(t.length===1)return Promise.resolve(this.tool.toolbox[0]);const n=await this.data;return t.find(i=>Object.entries(i.data).some(([s,a])=>n[s]&&bv(n[s],a)))}async exportDataAsString(){const t=await this.data;return Cv(t,this.tool.conversionConfig)}compose(){const t=L.make("div",Gt.CSS.wrapper),n=L.make("div",Gt.CSS.content),i=this.toolInstance.render();t.dataset.id=this.id,this.toolRenderedElement=i,n.appendChild(this.toolRenderedElement);let s=n;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(a=>{if(Ot(a.wrap))try{s=a.wrap(s)}catch(d){Ct(`Tune ${a.constructor.name} wrap method throws an Error %o`,"warn",d)}}),t.appendChild(s),t}composeTunes(t){Array.from(this.tunes.values()).forEach(n=>{(n.isInternal?this.defaultTunesInstances:this.tunesInstances).set(n.name,n.create(t[n.name],this.blockAPI))}),Object.entries(t).forEach(([n,i])=>{this.tunesInstances.has(n)||(this.unavailableTunesData[n]=i)})}addInputEvents(){this.inputs.forEach(t=>{t.addEventListener("focus",this.handleFocus),L.isNativeInput(t)&&t.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(t=>{t.removeEventListener("focus",this.handleFocus),L.isNativeInput(t)&&t.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var t;this.redactorDomChangedCallback=n=>{const{mutations:i}=n;i.some(s=>xv(s,this.toolRenderedElement))&&this.didMutated(i)},(t=this.editorEventBus)==null||t.on(Zr,this.redactorDomChangedCallback)}unwatchBlockMutations(){var t;(t=this.editorEventBus)==null||t.off(Zr,this.redactorDomChangedCallback)}detectToolRootChange(t){t.forEach(n=>{if(Array.from(n.removedNodes).includes(this.toolRenderedElement)){const i=n.addedNodes[n.addedNodes.length-1];this.toolRenderedElement=i}})}dropInputsCache(){this.cachedInputs=[]}}class Sv extends vt{constructor(){super(...arguments),this.insert=(t=this.config.defaultBlock,n={},i={},s,a,d,h)=>{const f=this.Editor.BlockManager.insert({id:h,tool:t,data:n,index:s,needToFocus:a,replace:d});return new xn(f)},this.composeBlockData=async t=>{const n=this.Editor.Tools.blockTools.get(t);return new Gt({tool:n,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(t,n)=>{const{BlockManager:i}=this.Editor,s=i.getBlockById(t);if(s===void 0)throw new Error(`Block with id "${t}" not found`);const a=await i.update(s,n);return new xn(a)},this.convert=(t,n,i)=>{var s,a;const{BlockManager:d,Tools:h}=this.Editor,f=d.getBlockById(t);if(!f)throw new Error(`Block with id "${t}" not found`);const m=h.blockTools.get(f.name),x=h.blockTools.get(n);if(!x)throw new Error(`Block Tool with type "${n}" not found`);const v=((s=m==null?void 0:m.conversionConfig)==null?void 0:s.export)!==void 0,_=((a=x.conversionConfig)==null?void 0:a.import)!==void 0;if(v&&_)d.convert(f,n,i);else{const I=[v?!1:Yn(f.name),_?!1:Yn(n)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${f.name}" to "${n}" is not possible. ${I} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(t,n=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(n);const i=t.map(({id:s,type:a,data:d})=>this.Editor.BlockManager.composeBlock({id:s,tool:a||this.config.defaultBlock,data:d}));return this.Editor.BlockManager.insertMany(i,n),i.map(s=>new xn(s))}}get methods(){return{clear:()=>this.clear(),render:t=>this.render(t),renderFromHTML:t=>this.renderFromHTML(t),delete:t=>this.delete(t),swap:(t,n)=>this.swap(t,n),move:(t,n)=>this.move(t,n),getBlockByIndex:t=>this.getBlockByIndex(t),getById:t=>this.getById(t),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:t=>this.getBlockIndex(t),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:(t,n=!0)=>this.stretchBlock(t,n),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(t){const n=this.Editor.BlockManager.getBlockById(t);if(!n){De("There is no block with id `"+t+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(n)}getBlockByIndex(t){const n=this.Editor.BlockManager.getBlockByIndex(t);if(n===void 0){De("There is no block at index `"+t+"`","warn");return}return new xn(n)}getById(t){const n=this.Editor.BlockManager.getBlockById(t);return n===void 0?(De("There is no block with id `"+t+"`","warn"),null):new xn(n)}swap(t,n){Ct("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(t,n)}move(t,n){this.Editor.BlockManager.move(t,n)}delete(t=this.Editor.BlockManager.currentBlockIndex){try{const n=this.Editor.BlockManager.getBlockByIndex(t);this.Editor.BlockManager.removeBlock(n)}catch(n){De(n,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(t){if(t===void 0||t.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(t.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(t){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(t,!0)}stretchBlock(t,n=!0){Xr(!0,"blocks.stretchBlock()","BlockAPI");const i=this.Editor.BlockManager.getBlockByIndex(t);i&&(i.stretched=n)}insertNewBlock(){Ct("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(t){if(typeof t!="number")throw new Error("Index should be a number");if(t<0)throw new Error("Index should be greater than or equal to 0");if(t===null)throw new Error("Index should be greater than or equal to 0")}}class Tv extends vt{constructor(){super(...arguments),this.setToFirstBlock=(t=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,t,n),!0):!1,this.setToLastBlock=(t=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,t,n),!0):!1,this.setToPreviousBlock=(t=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,t,n),!0):!1,this.setToNextBlock=(t=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,t,n),!0):!1,this.setToBlock=(t,n=this.Editor.Caret.positions.DEFAULT,i=0)=>this.Editor.BlockManager.blocks[t]?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[t],n,i),!0):!1,this.focus=(t=!1)=>t?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class _v extends vt{get methods(){return{emit:(t,n)=>this.emit(t,n),off:(t,n)=>this.off(t,n),on:(t,n)=>this.on(t,n)}}on(t,n){this.eventsDispatcher.on(t,n)}emit(t,n){this.eventsDispatcher.emit(t,n)}off(t,n){this.eventsDispatcher.off(t,n)}}class rs extends vt{static getNamespace(t){return t.isTune()?`blockTunes.${t.name}`:`tools.${t.name}`}get methods(){return{t:()=>{De("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(t){return Object.assign(this.methods,{t:n=>ce.t(rs.getNamespace(t),n)})}}class Bv extends vt{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(t){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(t)})}}class Lv extends vt{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class Iv extends vt{get methods(){return{on:(t,n,i,s)=>this.on(t,n,i,s),off:(t,n,i,s)=>this.off(t,n,i,s),offById:t=>this.offById(t)}}on(t,n,i,s){return this.listeners.on(t,n,i,s)}off(t,n,i,s){this.listeners.off(t,n,i,s)}offById(t){this.listeners.offById(t)}}var Vr={},Mv={get exports(){return Vr},set exports(c){Vr=c}};(function(c,t){(function(n,i){c.exports=i()})(window,function(){return function(n){var i={};function s(a){if(i[a])return i[a].exports;var d=i[a]={i:a,l:!1,exports:{}};return n[a].call(d.exports,d,d.exports,s),d.l=!0,d.exports}return s.m=n,s.c=i,s.d=function(a,d,h){s.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:h})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,d){if(1&d&&(a=s(a)),8&d||4&d&&typeof a=="object"&&a&&a.__esModule)return a;var h=Object.create(null);if(s.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),2&d&&typeof a!="string")for(var f in a)s.d(h,f,(function(m){return a[m]}).bind(null,f));return h},s.n=function(a){var d=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(d,"a",d),d},s.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)},s.p="/",s(s.s=0)}([function(n,i,s){s(1),n.exports=function(){var a=s(6),d="cdx-notify--bounce-in",h=null;return{show:function(f){if(f.message){(function(){if(h)return!0;h=a.getWrapper(),document.body.appendChild(h)})();var m=null,x=f.time||8e3;switch(f.type){case"confirm":m=a.confirm(f);break;case"prompt":m=a.prompt(f);break;default:m=a.alert(f),window.setTimeout(function(){m.remove()},x)}h.appendChild(m),m.classList.add(d)}}}}()},function(n,i,s){var a=s(2);typeof a=="string"&&(a=[[n.i,a,""]]);var d={hmr:!0,transform:void 0,insertInto:void 0};s(4)(a,d),a.locals&&(n.exports=a.locals)},function(n,i,s){(n.exports=s(3)(!1)).push([n.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(n,i){n.exports=function(s){var a=[];return a.toString=function(){return this.map(function(d){var h=function(f,m){var x=f[1]||"",v=f[3];if(!v)return x;if(m&&typeof btoa=="function"){var _=(E=v,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(E))))+" */"),I=v.sources.map(function(w){return"/*# sourceURL="+v.sourceRoot+w+" */"});return[x].concat(I).concat([_]).join(`
`)}var E;return[x].join(`
`)}(d,s);return d[2]?"@media "+d[2]+"{"+h+"}":h}).join("")},a.i=function(d,h){typeof d=="string"&&(d=[[null,d,""]]);for(var f={},m=0;m<this.length;m++){var x=this[m][0];typeof x=="number"&&(f[x]=!0)}for(m=0;m<d.length;m++){var v=d[m];typeof v[0]=="number"&&f[v[0]]||(h&&!v[2]?v[2]=h:h&&(v[2]="("+v[2]+") and ("+h+")"),a.push(v))}},a}},function(n,i,s){var a,d,h={},f=(a=function(){return window&&document&&document.all&&!window.atob},function(){return d===void 0&&(d=a.apply(this,arguments)),d}),m=function(T){var B={};return function(R){if(typeof R=="function")return R();if(B[R]===void 0){var A=(function(j){return document.querySelector(j)}).call(this,R);if(window.HTMLIFrameElement&&A instanceof window.HTMLIFrameElement)try{A=A.contentDocument.head}catch{A=null}B[R]=A}return B[R]}}(),x=null,v=0,_=[],I=s(5);function E(T,B){for(var R=0;R<T.length;R++){var A=T[R],j=h[A.id];if(j){j.refs++;for(var X=0;X<j.parts.length;X++)j.parts[X](A.parts[X]);for(;X<A.parts.length;X++)j.parts.push(U(A.parts[X],B))}else{var J=[];for(X=0;X<A.parts.length;X++)J.push(U(A.parts[X],B));h[A.id]={id:A.id,refs:1,parts:J}}}}function w(T,B){for(var R=[],A={},j=0;j<T.length;j++){var X=T[j],J=B.base?X[0]+B.base:X[0],V={css:X[1],media:X[2],sourceMap:X[3]};A[J]?A[J].parts.push(V):R.push(A[J]={id:J,parts:[V]})}return R}function y(T,B){var R=m(T.insertInto);if(!R)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var A=_[_.length-1];if(T.insertAt==="top")A?A.nextSibling?R.insertBefore(B,A.nextSibling):R.appendChild(B):R.insertBefore(B,R.firstChild),_.push(B);else if(T.insertAt==="bottom")R.appendChild(B);else{if(typeof T.insertAt!="object"||!T.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var j=m(T.insertInto+" "+T.insertAt.before);R.insertBefore(B,j)}}function N(T){if(T.parentNode===null)return!1;T.parentNode.removeChild(T);var B=_.indexOf(T);B>=0&&_.splice(B,1)}function O(T){var B=document.createElement("style");return T.attrs.type===void 0&&(T.attrs.type="text/css"),Y(B,T.attrs),y(T,B),B}function Y(T,B){Object.keys(B).forEach(function(R){T.setAttribute(R,B[R])})}function U(T,B){var R,A,j,X;if(B.transform&&T.css){if(!(X=B.transform(T.css)))return function(){};T.css=X}if(B.singleton){var J=v++;R=x||(x=O(B)),A=K.bind(null,R,J,!1),j=K.bind(null,R,J,!0)}else T.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(R=function(V){var wt=document.createElement("link");return V.attrs.type===void 0&&(V.attrs.type="text/css"),V.attrs.rel="stylesheet",Y(wt,V.attrs),y(V,wt),wt}(B),A=(function(V,wt,ut){var Et=ut.css,Ht=ut.sourceMap,mt=wt.convertToAbsoluteUrls===void 0&&Ht;(wt.convertToAbsoluteUrls||mt)&&(Et=I(Et)),Ht&&(Et+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Ht))))+" */");var ft=new Blob([Et],{type:"text/css"}),oe=V.href;V.href=URL.createObjectURL(ft),oe&&URL.revokeObjectURL(oe)}).bind(null,R,B),j=function(){N(R),R.href&&URL.revokeObjectURL(R.href)}):(R=O(B),A=(function(V,wt){var ut=wt.css,Et=wt.media;if(Et&&V.setAttribute("media",Et),V.styleSheet)V.styleSheet.cssText=ut;else{for(;V.firstChild;)V.removeChild(V.firstChild);V.appendChild(document.createTextNode(ut))}}).bind(null,R),j=function(){N(R)});return A(T),function(V){if(V){if(V.css===T.css&&V.media===T.media&&V.sourceMap===T.sourceMap)return;A(T=V)}else j()}}n.exports=function(T,B){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(B=B||{}).attrs=typeof B.attrs=="object"?B.attrs:{},B.singleton||typeof B.singleton=="boolean"||(B.singleton=f()),B.insertInto||(B.insertInto="head"),B.insertAt||(B.insertAt="bottom");var R=w(T,B);return E(R,B),function(A){for(var j=[],X=0;X<R.length;X++){var J=R[X];(V=h[J.id]).refs--,j.push(V)}for(A&&E(w(A,B),B),X=0;X<j.length;X++){var V;if((V=j[X]).refs===0){for(var wt=0;wt<V.parts.length;wt++)V.parts[wt]();delete h[V.id]}}}};var P,q=(P=[],function(T,B){return P[T]=B,P.filter(Boolean).join(`
`)});function K(T,B,R,A){var j=R?"":A.css;if(T.styleSheet)T.styleSheet.cssText=q(B,j);else{var X=document.createTextNode(j),J=T.childNodes;J[B]&&T.removeChild(J[B]),J.length?T.insertBefore(X,J[B]):T.appendChild(X)}}},function(n,i){n.exports=function(s){var a=typeof window<"u"&&window.location;if(!a)throw new Error("fixUrls requires window.location");if(!s||typeof s!="string")return s;var d=a.protocol+"//"+a.host,h=d+a.pathname.replace(/\/[^\/]*$/,"/");return s.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(f,m){var x,v=m.trim().replace(/^"(.*)"$/,function(_,I){return I}).replace(/^'(.*)'$/,function(_,I){return I});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(v)?f:(x=v.indexOf("//")===0?v:v.indexOf("/")===0?d+v:h+v.replace(/^\.\//,""),"url("+JSON.stringify(x)+")")})}},function(n,i,s){var a,d,h,f,m,x,v,_,I;n.exports=(a="cdx-notifies",d="cdx-notify",h="cdx-notify__cross",f="cdx-notify__button--confirm",m="cdx-notify__button--cancel",x="cdx-notify__input",v="cdx-notify__button",_="cdx-notify__btns-wrapper",{alert:I=function(E){var w=document.createElement("DIV"),y=document.createElement("DIV"),N=E.message,O=E.style;return w.classList.add(d),O&&w.classList.add(d+"--"+O),w.innerHTML=N,y.classList.add(h),y.addEventListener("click",w.remove.bind(w)),w.appendChild(y),w},confirm:function(E){var w=I(E),y=document.createElement("div"),N=document.createElement("button"),O=document.createElement("button"),Y=w.querySelector("."+h),U=E.cancelHandler,P=E.okHandler;return y.classList.add(_),N.innerHTML=E.okText||"Confirm",O.innerHTML=E.cancelText||"Cancel",N.classList.add(v),O.classList.add(v),N.classList.add(f),O.classList.add(m),U&&typeof U=="function"&&(O.addEventListener("click",U),Y.addEventListener("click",U)),P&&typeof P=="function"&&N.addEventListener("click",P),N.addEventListener("click",w.remove.bind(w)),O.addEventListener("click",w.remove.bind(w)),y.appendChild(N),y.appendChild(O),w.appendChild(y),w},prompt:function(E){var w=I(E),y=document.createElement("div"),N=document.createElement("button"),O=document.createElement("input"),Y=w.querySelector("."+h),U=E.cancelHandler,P=E.okHandler;return y.classList.add(_),N.innerHTML=E.okText||"Ok",N.classList.add(v),N.classList.add(f),O.classList.add(x),E.placeholder&&O.setAttribute("placeholder",E.placeholder),E.default&&(O.value=E.default),E.inputType&&(O.type=E.inputType),U&&typeof U=="function"&&Y.addEventListener("click",U),P&&typeof P=="function"&&N.addEventListener("click",function(){P(O.value)}),N.addEventListener("click",w.remove.bind(w)),y.appendChild(O),y.appendChild(N),w.appendChild(y),w},getWrapper:function(){var E=document.createElement("DIV");return E.classList.add(a),E}})}])})})(Mv);const Av=os(Vr);class Ov{show(t){Av.show(t)}}class Rv extends vt{constructor({config:t,eventsDispatcher:n}){super({config:t,eventsDispatcher:n}),this.notifier=new Ov}get methods(){return{show:t=>this.show(t)}}show(t){return this.notifier.show(t)}}class Nv extends vt{get methods(){const t=()=>this.isEnabled;return{toggle:n=>this.toggle(n),get isEnabled(){return t()}}}toggle(t){return this.Editor.ReadOnly.toggle(t)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var Jr={},Dv={get exports(){return Jr},set exports(c){Jr=c}};(function(c,t){(function(n,i){c.exports=i()})(iv,function(){function n(v){var _=v.tags,I=Object.keys(_),E=I.map(function(w){return typeof _[w]}).every(function(w){return w==="object"||w==="boolean"||w==="function"});if(!E)throw new Error("The configuration was invalid");this.config=v}var i=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function s(v){return i.indexOf(v.nodeName)!==-1}var a=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function d(v){return a.indexOf(v.nodeName)!==-1}n.prototype.clean=function(v){const _=document.implementation.createHTMLDocument(),I=_.createElement("div");return I.innerHTML=v,this._sanitize(_,I),I.innerHTML},n.prototype._sanitize=function(v,_){var I=h(v,_),E=I.firstChild();if(E)do{if(E.nodeType===Node.TEXT_NODE)if(E.data.trim()===""&&(E.previousElementSibling&&s(E.previousElementSibling)||E.nextElementSibling&&s(E.nextElementSibling))){_.removeChild(E),this._sanitize(v,_);break}else continue;if(E.nodeType===Node.COMMENT_NODE){_.removeChild(E),this._sanitize(v,_);break}var w=d(E),y;w&&(y=Array.prototype.some.call(E.childNodes,s));var N=!!_.parentNode,O=s(_)&&s(E)&&N,Y=E.nodeName.toLowerCase(),U=f(this.config,Y,E),P=w&&y;if(P||m(E,U)||!this.config.keepNestedBlockElements&&O){if(!(E.nodeName==="SCRIPT"||E.nodeName==="STYLE"))for(;E.childNodes.length>0;)_.insertBefore(E.childNodes[0],E);_.removeChild(E),this._sanitize(v,_);break}for(var q=0;q<E.attributes.length;q+=1){var K=E.attributes[q];x(K,U,E)&&(E.removeAttribute(K.name),q=q-1)}this._sanitize(v,E)}while(E=I.nextSibling())};function h(v,_){return v.createTreeWalker(_,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function f(v,_,I){return typeof v.tags[_]=="function"?v.tags[_](I):v.tags[_]}function m(v,_){return typeof _>"u"?!0:typeof _=="boolean"?!_:!1}function x(v,_,I){var E=v.name.toLowerCase();return _===!0?!1:typeof _[E]=="function"?!_[E](v.value,I):typeof _[E]>"u"||_[E]===!1?!0:typeof _[E]=="string"?_[E]!==v.value:!1}return n})})(Dv);const Pv=Jr;function Cc(c,t){return c.map(n=>{const i=Ot(t)?t(n.tool):t;return Le(i)||(n.data=ss(n.data,i)),n})}function Je(c,t={}){const n={tags:t};return new Pv(n).clean(c)}function ss(c,t){return Array.isArray(c)?Hv(c,t):Xt(c)?Fv(c,t):hn(c)?Uv(c,t):c}function Hv(c,t){return c.map(n=>ss(n,t))}function Fv(c,t){const n={};for(const i in c){if(!Object.prototype.hasOwnProperty.call(c,i))continue;const s=c[i],a=zv(t[i])?t[i]:t;n[i]=ss(s,a)}return n}function Uv(c,t){return Xt(t)?Je(c,t):t===!1?Je(c,{}):c}function zv(c){return Xt(c)||lv(c)||Ot(c)}class Wv extends vt{get methods(){return{clean:(t,n)=>this.clean(t,n)}}clean(t,n){return Je(t,n)}}class $v extends vt{get methods(){return{save:()=>this.save()}}save(){const t="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(De(t,"warn"),Promise.reject(new Error(t))):this.Editor.Saver.save()}}class jv extends vt{get methods(){return{findParentTag:(t,n)=>this.findParentTag(t,n),expandToTag:t=>this.expandToTag(t)}}findParentTag(t,n){return new et().findParentTag(t,n)}expandToTag(t){new et().expandToTag(t)}}class qv extends vt{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class Yv extends vt{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:t=>this.toggleBlockSettings(t),toggleToolbox:t=>this.toggleToolbox(t)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(t){if(this.Editor.BlockManager.currentBlockIndex===-1){De("Could't toggle the Toolbar because there is no block selected ","warn");return}t??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(t){if(this.Editor.BlockManager.currentBlockIndex===-1){De("Could't toggle the Toolbox because there is no block selected ","warn");return}t??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var Qr={},Kv={get exports(){return Qr},set exports(c){Qr=c}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(c,t){(function(n,i){c.exports=i()})(window,function(){return function(n){var i={};function s(a){if(i[a])return i[a].exports;var d=i[a]={i:a,l:!1,exports:{}};return n[a].call(d.exports,d,d.exports,s),d.l=!0,d.exports}return s.m=n,s.c=i,s.d=function(a,d,h){s.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:h})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,d){if(1&d&&(a=s(a)),8&d||4&d&&typeof a=="object"&&a&&a.__esModule)return a;var h=Object.create(null);if(s.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),2&d&&typeof a!="string")for(var f in a)s.d(h,f,(function(m){return a[m]}).bind(null,f));return h},s.n=function(a){var d=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(d,"a",d),d},s.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)},s.p="",s(s.s=0)}([function(n,i,s){n.exports=s(1)},function(n,i,s){s.r(i),s.d(i,"default",function(){return a});class a{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(h,f,m){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const x=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},m);if(x.hidingDelay&&(this.hidingDelay=x.hidingDelay),this.nodes.content.innerHTML="",typeof f=="string")this.nodes.content.appendChild(document.createTextNode(f));else{if(!(f instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof f+" given.");this.nodes.content.appendChild(f)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),x.placement){case"top":this.placeTop(h,x);break;case"left":this.placeLeft(h,x);break;case"right":this.placeRight(h,x);break;case"bottom":default:this.placeBottom(h,x)}x&&x.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},x.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(h=!1){if(this.hidingDelay&&!h)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(h,f,m){h.addEventListener("mouseenter",()=>{this.show(h,f,m)}),h.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const h="codex-tooltips-style";if(document.getElementById(h))return;const f=s(2),m=this.make("style",null,{textContent:f.toString(),id:h});this.prepend(document.head,m)}placeBottom(h,f){const m=h.getBoundingClientRect(),x=m.left+h.clientWidth/2-this.nodes.wrapper.offsetWidth/2,v=m.bottom+window.pageYOffset+this.offsetTop+f.marginTop;this.applyPlacement("bottom",x,v)}placeTop(h,f){const m=h.getBoundingClientRect(),x=m.left+h.clientWidth/2-this.nodes.wrapper.offsetWidth/2,v=m.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",x,v)}placeLeft(h,f){const m=h.getBoundingClientRect(),x=m.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-f.marginLeft,v=m.top+window.pageYOffset+h.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",x,v)}placeRight(h,f){const m=h.getBoundingClientRect(),x=m.right+this.offsetRight+f.marginRight,v=m.top+window.pageYOffset+h.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",x,v)}applyPlacement(h,f,m){this.nodes.wrapper.classList.add(this.CSS.placement[h]),this.nodes.wrapper.style.left=f+"px",this.nodes.wrapper.style.top=m+"px"}make(h,f=null,m={}){const x=document.createElement(h);Array.isArray(f)?x.classList.add(...f):f&&x.classList.add(f);for(const v in m)m.hasOwnProperty(v)&&(x[v]=m[v]);return x}append(h,f){Array.isArray(f)?f.forEach(m=>h.appendChild(m)):h.appendChild(f)}prepend(h,f){Array.isArray(f)?(f=f.reverse()).forEach(m=>h.prepend(m)):h.prepend(f)}}},function(n,i){n.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(Kv);const Gv=os(Qr);let He=null;function as(){He||(He=new Gv)}function Xv(c,t,n){as(),He==null||He.show(c,t,n)}function ts(c=!1){as(),He==null||He.hide(c)}function ko(c,t,n){as(),He==null||He.onHover(c,t,n)}function Zv(){He==null||He.destroy(),He=null}class Vv extends vt{constructor({config:t,eventsDispatcher:n}){super({config:t,eventsDispatcher:n})}get methods(){return{show:(t,n,i)=>this.show(t,n,i),hide:()=>this.hide(),onHover:(t,n,i)=>this.onHover(t,n,i)}}show(t,n,i){Xv(t,n,i)}hide(){ts()}onHover(t,n,i){ko(t,n,i)}}class Jv extends vt{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function Ec(c,t){const n={};return Object.entries(c).forEach(([i,s])=>{if(Xt(s)){const a=t?`${t}.${i}`:i;Object.values(s).every(d=>hn(d))?n[i]=a:n[i]=Ec(s,a);return}n[i]=s}),n}const Pe=Ec(vc);function Qv(c,t){const n={};return Object.keys(c).forEach(i=>{const s=t[i];s!==void 0?n[s]=c[i]:n[i]=c[i]}),n}const t1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',Sc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',e1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',n1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',o1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',i1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',rc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',r1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',s1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',a1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',l1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',c1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>';class zt{constructor(t){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(zt.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(zt.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(zt.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=t,this.nodes.root=this.make(t)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root.classList.contains(zt.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(t){this.nodes.root.classList.toggle(zt.CSS.active,t)}toggleHidden(t){this.nodes.root.classList.toggle(zt.CSS.hidden,t)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(t){const n=L.make("div",zt.CSS.container);return t.name&&(n.dataset.itemName=t.name),this.nodes.icon=L.make("div",zt.CSS.icon,{innerHTML:t.icon||o1}),n.appendChild(this.nodes.icon),n.appendChild(L.make("div",zt.CSS.title,{innerHTML:t.title||""})),t.secondaryLabel&&n.appendChild(L.make("div",zt.CSS.secondaryTitle,{textContent:t.secondaryLabel})),t.isActive&&n.classList.add(zt.CSS.active),t.isDisabled&&n.classList.add(zt.CSS.disabled),n}enableConfirmationMode(t){const n={...this.params,...t,confirmation:t.confirmation},i=this.make(n);this.nodes.root.innerHTML=i.innerHTML,this.nodes.root.classList.add(zt.CSS.confirmationState),this.confirmationState=t,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){const t=this.make(this.params);this.nodes.root.innerHTML=t.innerHTML,this.nodes.root.classList.remove(zt.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(zt.CSS.noHover),this.nodes.root.classList.add(zt.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(t){if(t.confirmation===void 0)try{t.onActivate(t),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(t.confirmation)}animateError(){this.nodes.icon.classList.contains(zt.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(zt.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}}const mo=class{constructor(c,t){this.cursor=-1,this.items=[],this.items=c||[],this.focusedCssClass=t}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(c){c<this.items.length&&c>=-1&&(this.dropCursor(),this.cursor=c,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(c){this.items=c}next(){this.cursor=this.leafNodesAndReturnIndex(mo.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(mo.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(c){if(this.items.length===0)return this.cursor;let t=this.cursor;return t===-1?t=c===mo.directions.RIGHT?-1:0:this.items[t].classList.remove(this.focusedCssClass),c===mo.directions.RIGHT?t=(t+1)%this.items.length:t=(this.items.length+t-1)%this.items.length,L.canSetCaret(this.items[t])&&mi(()=>et.setCursor(this.items[t]),50)(),this.items[t].classList.add(this.focusedCssClass),t}};let jn=mo;jn.directions={RIGHT:"right",LEFT:"left"};class Qe{constructor(t){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=n=>{if(this.isEventReadyForHandling(n))switch(Qe.usedKeys.includes(n.keyCode)&&n.preventDefault(),n.keyCode){case at.TAB:this.handleTabPress(n);break;case at.LEFT:case at.UP:this.flipLeft();break;case at.RIGHT:case at.DOWN:this.flipRight();break;case at.ENTER:this.handleEnterPress(n);break}},this.iterator=new jn(t.items,t.focusedItemClass),this.activateCallback=t.activateCallback,this.allowedKeys=t.allowedKeys||Qe.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[at.TAB,at.LEFT,at.RIGHT,at.ENTER,at.UP,at.DOWN]}activate(t,n){this.activated=!0,t&&this.iterator.setItems(t),n!==void 0&&this.iterator.setCursor(n),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(t){this.flipCallbacks.push(t)}removeOnFlip(t){this.flipCallbacks=this.flipCallbacks.filter(n=>n!==t)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(t){return this.activated&&this.allowedKeys.includes(t.keyCode)}handleTabPress(t){switch(t.shiftKey?jn.directions.LEFT:jn.directions.RIGHT){case jn.directions.RIGHT:this.flipRight();break;case jn.directions.LEFT:this.flipLeft();break}}handleEnterPress(t){this.activated&&(this.iterator.currentItem&&(t.stopPropagation(),t.preventDefault(),this.iterator.currentItem.click()),Ot(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(t=>t())}}class vo{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor({items:t,onSearch:n,placeholder:i}){this.listeners=new is,this.items=t,this.onSearch=n,this.render(i)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(t){this.wrapper=L.make("div",vo.CSS.wrapper);const n=L.make("div",vo.CSS.icon,{innerHTML:a1});this.input=L.make("input",vo.CSS.input,{placeholder:t,tabIndex:-1}),this.wrapper.appendChild(n),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)})}get foundItems(){return this.items.filter(t=>this.checkItem(t))}checkItem(t){var n;const i=((n=t.title)==null?void 0:n.toLowerCase())||"",s=this.searchQuery.toLowerCase();return i.includes(s)}}const bo=class{lock(){oc?this.lockHard():document.body.classList.add(bo.CSS.scrollLocked)}unlock(){oc?this.unlockHard():document.body.classList.remove(bo.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(bo.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(bo.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};let Tc=bo;Tc.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var d1=Object.defineProperty,u1=Object.getOwnPropertyDescriptor,h1=(c,t,n,i)=>{for(var s=i>1?void 0:i?u1(t,n):t,a=c.length-1,d;a>=0;a--)(d=c[a])&&(s=(i?d(t,n,s):d(s))||s);return i&&s&&d1(t,n,s),s},yo=(c=>(c.Close="close",c))(yo||{});const Kt=class extends wi{constructor(c){super(),this.scopeElement=document.body,this.listeners=new is,this.scrollLocker=new Tc,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find(t=>t.isFocused).onFocus()},this.items=c.items.map(t=>new zt(t)),c.scopeElement!==void 0&&(this.scopeElement=c.scopeElement),c.messages&&(this.messages={...this.messages,...c.messages}),c.customContentFlippableItems&&(this.customContentFlippableItems=c.customContentFlippableItems),this.make(),c.customContent&&this.addCustomContent(c.customContent),c.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(Kt.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(Kt.CSS.overlayHidden),this.nodes.popover.classList.add(Kt.CSS.popoverOpened),this.flipper.activate(this.flippableElements),this.search!==void 0&&requestAnimationFrame(()=>{var c;(c=this.search)==null||c.focus()}),Cn()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(Kt.CSS.popoverOpened),this.nodes.popover.classList.remove(Kt.CSS.popoverOpenTop),this.nodes.overlay.classList.add(Kt.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach(c=>c.reset()),this.search!==void 0&&this.search.clear(),Cn()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),Cn()&&this.scrollLocker.unlock()}make(){this.nodes.popover=L.make("div",[Kt.CSS.popover]),this.nodes.nothingFoundMessage=L.make("div",[Kt.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=L.make("div",[Kt.CSS.items]),this.items.forEach(c=>{this.nodes.items.appendChild(c.getElement())}),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",c=>{const t=this.getTargetItem(c);t!==void 0&&this.handleItemClick(t)}),this.nodes.wrapper=L.make("div"),this.nodes.overlay=L.make("div",[Kt.CSS.overlay,Kt.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new vo({items:this.items,placeholder:this.messages.search,onSearch:(t,n)=>{this.items.forEach(s=>{const a=!n.includes(s);s.toggleHidden(a)}),this.toggleNothingFoundMessage(n.length===0),this.toggleCustomContent(t!=="");const i=t===""?this.flippableElements:n.map(s=>s.getElement());this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(i))}});const c=this.search.getElement();c.classList.add(Kt.CSS.search),this.nodes.popover.insertBefore(c,this.nodes.popover.firstChild)}addCustomContent(c){this.nodes.customContent=c,this.nodes.customContent.classList.add(Kt.CSS.customContent),this.nodes.popover.insertBefore(c,this.nodes.popover.firstChild)}getTargetItem(c){return this.items.find(t=>c.composedPath().includes(t.getElement()))}handleItemClick(c){c.isDisabled||(this.items.filter(t=>t!==c).forEach(t=>t.reset()),c.handleClick(),this.toggleItemActivenessIfNeeded(c),c.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new Qe({items:this.flippableElements,focusedItemClass:zt.CSS.focused,allowedKeys:[at.TAB,at.UP,at.DOWN,at.ENTER]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){const c=this.items.map(t=>t.getElement());return(this.customContentFlippableItems||[]).concat(c)}get height(){let c=0;if(this.nodes.popover===null)return c;const t=this.nodes.popover.cloneNode(!0);return t.style.visibility="hidden",t.style.position="absolute",t.style.top="-1000px",t.classList.add(Kt.CSS.popoverOpened),document.body.appendChild(t),c=t.offsetHeight,t.remove(),c}get shouldOpenBottom(){const c=this.nodes.popover.getBoundingClientRect(),t=this.scopeElement.getBoundingClientRect(),n=this.height,i=c.top+n,s=c.top-n,a=Math.min(window.innerHeight,t.bottom);return s<t.top||i<=a}toggleNothingFoundMessage(c){this.nodes.nothingFoundMessage.classList.toggle(Kt.CSS.nothingFoundMessageDisplayed,c)}toggleCustomContent(c){var t;(t=this.nodes.customContent)==null||t.classList.toggle(Kt.CSS.customContentHidden,c)}toggleItemActivenessIfNeeded(c){if(c.toggle===!0&&c.toggleActive(),typeof c.toggle=="string"){const t=this.items.filter(n=>n.toggle===c.toggle);if(t.length===1){c.toggleActive();return}t.forEach(n=>{n.toggleActive(n===c)})}}};let ls=Kt;h1([Gn],ls.prototype,"height",1);class p1 extends vt{constructor(){super(...arguments),this.opened=!1,this.selection=new et,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var t;return(t=this.popover)==null?void 0:t.flipper}make(){this.nodes.wrapper=L.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(t=this.Editor.BlockManager.currentBlock){this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(t),this.Editor.BlockSelection.clearCache();const[n,i]=t.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new ls({searchable:!0,items:n.map(s=>this.resolveTuneAliases(s)),customContent:i,customContentFlippableItems:this.getControls(i),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:ce.ui(Pe.ui.popover,"Nothing found"),search:ce.ui(Pe.ui.popover,"Filter")}}),this.popover.on(yo.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened&&(this.opened=!1,et.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(yo.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))}getControls(t){const{StylesAPI:n}=this.Editor,i=t.querySelectorAll(`.${n.classes.settingsButton}, ${L.allInputsSelector}`);return Array.from(i)}resolveTuneAliases(t){const n=Qv(t,{label:"title"});return t.confirmation&&(n.confirmation=this.resolveTuneAliases(t.confirmation)),n}}class we extends vt{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=L.make("div",[we.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=L.make("div",we.CSS.conversionToolbarTools);const t=L.make("div",we.CSS.conversionToolbarLabel,{textContent:ce.ui(Pe.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),L.append(this.nodes.wrapper,t),L.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(t){this.opened?this.close():this.open(),Ot(t)&&(this.togglingCallback=t)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(we.CSS.conversionToolbarShowed),window.requestAnimationFrame(()=>{this.flipper.activate(this.tools.map(t=>t.button).filter(t=>!t.classList.contains(we.CSS.conversionToolHidden))),this.flipper.focusFirst(),Ot(this.togglingCallback)&&this.togglingCallback(!0)})}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(we.CSS.conversionToolbarShowed),Ot(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return this.tools.length===1?this.tools[0].name!==this.config.defaultBlock:!0}async replaceWithBlock(t,n){const{BlockManager:i,BlockSelection:s,InlineToolbar:a,Caret:d}=this.Editor;i.convert(this.Editor.BlockManager.currentBlock,t,n),s.clearSelection(),this.close(),a.close(),window.requestAnimationFrame(()=>{d.setToBlock(this.Editor.BlockManager.currentBlock,d.positions.END)})}addTools(){const t=this.Editor.Tools.blockTools;Array.from(t.entries()).forEach(([n,i])=>{var s;const a=i.conversionConfig;!a||!a.import||(s=i.toolbox)==null||s.forEach(d=>this.addToolIfValid(n,d))})}addToolIfValid(t,n){Le(n)||!n.icon||this.addTool(t,n)}addTool(t,n){var i;const s=L.make("div",[we.CSS.conversionTool]),a=L.make("div",[we.CSS.conversionToolIcon]);s.dataset.tool=t,a.innerHTML=n.icon,L.append(s,a),L.append(s,L.text(ce.t(Pe.toolNames,n.title||Yn(t))));const d=(i=this.Editor.Tools.blockTools.get(t))==null?void 0:i.shortcut;if(d){const h=L.make("span",we.CSS.conversionToolSecondaryLabel,{innerText:vi(d)});L.append(s,h)}L.append(this.nodes.tools,s),this.tools.push({name:t,button:s,toolboxItem:n}),this.listeners.on(s,"click",async()=>{await this.replaceWithBlock(t,n.data)})}async filterTools(){const{currentBlock:t}=this.Editor.BlockManager,n=await t.getActiveToolboxEntry();function i(s,a){return s.icon===a.icon&&s.title===a.title}this.tools.forEach(s=>{let a=!1;if(n){const d=i(n,s.toolboxItem);a=s.button.dataset.tool===t.name&&d}s.button.hidden=a,s.button.classList.toggle(we.CSS.conversionToolHidden,a)})}enableFlipper(){this.flipper=new Qe({focusedItemClass:we.CSS.conversionToolFocused})}}var es={},f1={get exports(){return es},set exports(c){es=c}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(c,t){(function(n,i){c.exports=i()})(window,function(){return function(n){var i={};function s(a){if(i[a])return i[a].exports;var d=i[a]={i:a,l:!1,exports:{}};return n[a].call(d.exports,d,d.exports,s),d.l=!0,d.exports}return s.m=n,s.c=i,s.d=function(a,d,h){s.o(a,d)||Object.defineProperty(a,d,{enumerable:!0,get:h})},s.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},s.t=function(a,d){if(1&d&&(a=s(a)),8&d||4&d&&typeof a=="object"&&a&&a.__esModule)return a;var h=Object.create(null);if(s.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:a}),2&d&&typeof a!="string")for(var f in a)s.d(h,f,(function(m){return a[m]}).bind(null,f));return h},s.n=function(a){var d=a&&a.__esModule?function(){return a.default}:function(){return a};return s.d(d,"a",d),d},s.o=function(a,d){return Object.prototype.hasOwnProperty.call(a,d)},s.p="",s(s.s=0)}([function(n,i,s){function a(f,m){for(var x=0;x<m.length;x++){var v=m[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(f,v.key,v)}}function d(f,m,x){return m&&a(f.prototype,m),x&&a(f,x),f}s.r(i);var h=function(){function f(m){var x=this;(function(v,_){if(!(v instanceof _))throw new TypeError("Cannot call a class as a function")})(this,f),this.commands={},this.keys={},this.name=m.name,this.parseShortcutName(m.name),this.element=m.on,this.callback=m.callback,this.executeShortcut=function(v){x.execute(v)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return d(f,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),d(f,[{key:"parseShortcutName",value:function(m){m=m.split("+");for(var x=0;x<m.length;x++){m[x]=m[x].toUpperCase();var v=!1;for(var _ in f.supportedCommands)if(f.supportedCommands[_].includes(m[x])){v=this.commands[_]=!0;break}v||(this.keys[m[x]]=!0)}for(var I in f.supportedCommands)this.commands[I]||(this.commands[I]=!1)}},{key:"execute",value:function(m){var x,v={CMD:m.ctrlKey||m.metaKey,SHIFT:m.shiftKey,ALT:m.altKey},_=!0;for(x in this.commands)this.commands[x]!==v[x]&&(_=!1);var I,E=!0;for(I in this.keys)E=E&&m.keyCode===f.keyCodes[I];_&&E&&this.callback(m)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),f}();i.default=h}]).default})})(f1);const g1=os(es);class m1{constructor(){this.registeredShortcuts=new Map}add(t){if(this.findShortcut(t.on,t.name))throw Error(`Shortcut ${t.name} is already registered for ${t.on}. Please remove it before add a new handler.`);const n=new g1({name:t.name,on:t.on,callback:t.handler}),i=this.registeredShortcuts.get(t.on)||[];this.registeredShortcuts.set(t.on,[...i,n])}remove(t,n){const i=this.findShortcut(t,n);if(!i)return;i.remove();const s=this.registeredShortcuts.get(t);this.registeredShortcuts.set(t,s.filter(a=>a!==i))}findShortcut(t,n){return(this.registeredShortcuts.get(t)||[]).find(({name:i})=>i===n)}}const Kn=new m1;var b1=Object.defineProperty,v1=Object.getOwnPropertyDescriptor,_c=(c,t,n,i)=>{for(var s=i>1?void 0:i?v1(t,n):t,a=c.length-1,d;a>=0;a--)(d=c[a])&&(s=(i?d(t,n,s):d(s))||s);return i&&s&&b1(t,n,s),s},pi=(c=>(c.Opened="toolbox-opened",c.Closed="toolbox-closed",c.BlockAdded="toolbox-block-added",c))(pi||{});const Bc=class extends wi{constructor({api:c,tools:t,i18nLabels:n}){super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=c,this.tools=t,this.i18nLabels=n}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new ls({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(yo.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(Bc.CSS.toolbox),this.nodes.toolbox}hasFocus(){var c;return(c=this.popover)==null?void 0:c.hasFocus()}destroy(){var c;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),(c=this.popover)==null||c.off(yo.Close,this.onPopoverClose)}toolButtonActivated(c,t){this.insertNewBlock(c,t)}open(){var c;this.isEmpty||((c=this.popover)==null||c.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var c;(c=this.popover)==null||c.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){const c=[];return this.tools.forEach(t=>{t.toolbox&&c.push(t)}),c}get toolboxItemsToBeDisplayed(){const c=(t,n)=>({icon:t.icon,title:ce.t(Pe.toolNames,t.title||Yn(n.name)),name:n.name,onActivate:()=>{this.toolButtonActivated(n.name,t.data)},secondaryLabel:n.shortcut?vi(n.shortcut):""});return this.toolsToBeDisplayed.reduce((t,n)=>(Array.isArray(n.toolbox)?n.toolbox.forEach(i=>{t.push(c(i,n))}):n.toolbox!==void 0&&t.push(c(n.toolbox,n)),t),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(c=>{const t=c.shortcut;t&&this.enableShortcutForTool(c.name,t)})}enableShortcutForTool(c,t){Kn.add({name:t,on:this.api.ui.nodes.redactor,handler:n=>{n.preventDefault();const i=this.api.blocks.getCurrentBlockIndex(),s=this.api.blocks.getBlockByIndex(i);if(s)try{this.api.blocks.convert(s.id,c),window.requestAnimationFrame(()=>{this.api.caret.setToBlock(i,"end")});return}catch{}this.insertNewBlock(c)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(c=>{const t=c.shortcut;t&&Kn.remove(this.api.ui.nodes.redactor,t)})}async insertNewBlock(c,t){const n=this.api.blocks.getCurrentBlockIndex(),i=this.api.blocks.getBlockByIndex(n);if(!i)return;const s=i.isEmpty?n:n+1;let a;if(t){const h=await this.api.blocks.composeBlockData(c);a=Object.assign(h,t)}const d=this.api.blocks.insert(c,a,void 0,s,void 0,i.isEmpty);d.call(Ve.APPEND_CALLBACK),this.api.caret.setToBlock(s),this.emit("toolbox-block-added",{block:d}),this.api.toolbar.close()}};let cs=Bc;_c([Gn],cs.prototype,"toolsToBeDisplayed",1);_c([Gn],cs.prototype,"toolboxItemsToBeDisplayed",1);const Lc="block hovered";class w1 extends vt{constructor({config:t,eventsDispatcher:n}){super({config:t,eventsDispatcher:n}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var t;return{opened:(t=this.toolboxInstance)==null?void 0:t.opened,close:()=>{var n;(n=this.toolboxInstance)==null||n.close()},open:()=>{if(this.toolboxInstance===null){Ct("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){Ct("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var n;return(n=this.toolboxInstance)==null?void 0:n.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(t){t?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(t=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){Ct("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!t)return;this.hoveredBlock=t;const n=t.holder,{isMobile:i}=this.Editor.UI,s=t.pluginsContent,a=window.getComputedStyle(s),d=parseInt(a.paddingTop,10),h=n.offsetHeight;let f;i?f=n.offsetTop+h:f=n.offsetTop+d,this.nodes.wrapper.style.top=`${Math.floor(f)}px`,this.Editor.BlockManager.blocks.length===1&&t.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var t,n;this.Editor.ReadOnly.isEnabled||((t=this.nodes.wrapper)==null||t.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(n=this.toolboxInstance)==null||n.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(t=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),t?this.blockActions.show():this.blockActions.hide()}make(){this.nodes.wrapper=L.make("div",this.CSS.toolbar),["content","actions"].forEach(s=>{this.nodes[s]=L.make("div",this.CSS[s])}),L.append(this.nodes.wrapper,this.nodes.content),L.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=L.make("div",this.CSS.plusButton,{innerHTML:s1}),L.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{ts(!0),this.plusButtonClicked()},!1);const t=L.make("div");t.appendChild(document.createTextNode(ce.ui(Pe.ui.toolbar.toolbox,"Add"))),t.appendChild(L.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),ko(this.nodes.plusButton,t,{hidingDelay:400}),this.nodes.settingsToggler=L.make("span",this.CSS.settingsToggler,{innerHTML:r1}),L.append(this.nodes.actions,this.nodes.settingsToggler);const n=L.make("div"),i=L.text(ce.ui(Pe.ui.blockTunes.toggler,"Click to tune"));n.appendChild(i),n.appendChild(L.make("div",this.CSS.plusButtonShortcut,{textContent:vi("CMD + /")})),ko(this.nodes.settingsToggler,n,{hidingDelay:400}),L.append(this.nodes.actions,this.makeToolbox()),L.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),L.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new cs({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:ce.ui(Pe.ui.popover,"Filter"),nothingFound:ce.ui(Pe.ui.popover,"Nothing found")}}),this.toolboxInstance.on(pi.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(pi.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(pi.BlockAdded,({block:t})=>{const{BlockManager:n,Caret:i}=this.Editor,s=n.getBlockById(t.id);s.inputs.length===0&&(s===n.lastBlock?(n.insertAtEnd(),i.setToBlock(n.lastBlock)):i.setToBlock(n.nextBlock))}),this.toolboxInstance.make()}plusButtonClicked(){var t;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(t=this.toolboxInstance)==null||t.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",t=>{var n;t.stopPropagation(),this.settingsTogglerClicked(),(n=this.toolboxInstance)!=null&&n.opened&&this.toolboxInstance.close(),ts(!0)},!0),Cn()||this.eventsDispatcher.on(Lc,t=>{var n;this.Editor.BlockSettings.opened||(n=this.toolboxInstance)!=null&&n.opened||this.moveAndOpen(t.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}}var ki=(c=>(c[c.Block=0]="Block",c[c.Inline=1]="Inline",c[c.Tune=2]="Tune",c))(ki||{}),fi=(c=>(c.Shortcut="shortcut",c.Toolbox="toolbox",c.EnabledInlineTools="inlineToolbar",c.EnabledBlockTunes="tunes",c.Config="config",c))(fi||{}),Ic=(c=>(c.Shortcut="shortcut",c.SanitizeConfig="sanitize",c))(Ic||{}),qn=(c=>(c.IsEnabledLineBreaks="enableLineBreaks",c.Toolbox="toolbox",c.ConversionConfig="conversionConfig",c.IsReadOnlySupported="isReadOnlySupported",c.PasteConfig="pasteConfig",c))(qn||{}),ds=(c=>(c.IsInline="isInline",c.Title="title",c))(ds||{}),Mc=(c=>(c.IsTune="isTune",c))(Mc||{});class us{constructor({name:t,constructable:n,config:i,api:s,isDefault:a,isInternal:d=!1,defaultPlaceholder:h}){this.api=s,this.name=t,this.constructable=n,this.config=i,this.isDefault=a,this.isInternal=d,this.defaultPlaceholder=h}get settings(){const t=this.config.config||{};return this.isDefault&&!("placeholder"in t)&&this.defaultPlaceholder&&(t.placeholder=this.defaultPlaceholder),t}reset(){if(Ot(this.constructable.reset))return this.constructable.reset()}prepare(){if(Ot(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const t=this.constructable.shortcut;return this.config.shortcut||t}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===1}isBlock(){return this.type===0}isTune(){return this.type===2}}class k1 extends vt{constructor({config:t,eventsDispatcher:n}){super({config:t,eventsDispatcher:n}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=Cn()?20:6,this.buttonsList=null,this.width=0,this.flipper=null}toggleReadOnly(t){t?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(t=!1,n=!0){t&&this.close(),this.allowedToShow()&&(await this.addToolsFiltered(n),this.move(),this.open(n),this.Editor.Toolbar.close())}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(([t,n])=>{const i=this.getToolShortcut(t);i&&Kn.remove(this.Editor.UI.nodes.redactor,i),Ot(n.clear)&&n.clear()}),this.reset(),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}containsNode(t){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(t)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}make(){this.nodes.wrapper=L.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=L.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=L.make("div",this.CSS.buttonsWrapper),this.nodes.actions=L.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",t=>{t.target.closest(`.${this.CSS.actionsWrapper}`)||t.preventDefault()}),L.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),L.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),L.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame(()=>{this.recalculateWidth()}),this.enableFlipper()}open(){if(this.opened)return;this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`),this.opened=!0;let t=Array.from(this.buttonsList);t.unshift(this.nodes.conversionToggler),t=t.filter(n=>!n.hidden),this.flipper.activate(t)}move(){const t=et.rect,n=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),i={x:t.x-n.x,y:t.y+t.height-n.top+this.toolbarVerticalMargin};i.x+this.width+n.x>this.Editor.UI.contentRect.right&&(i.x=this.Editor.UI.contentRect.right-this.width-n.x),this.nodes.wrapper.style.left=Math.floor(i.x)+"px",this.nodes.wrapper.style.top=Math.floor(i.y)+"px"}reset(){this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarLeftOriented,this.CSS.inlineToolbarRightOriented),this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const t=["IMG","INPUT"],n=et.get(),i=et.text;if(!n||!n.anchorNode||n.isCollapsed||i.length<1)return!1;const s=L.isElement(n.anchorNode)?n.anchorNode:n.anchorNode.parentElement;if(n&&t.includes(s.tagName)||s.closest('[contenteditable="true"]')===null)return!1;const a=this.Editor.BlockManager.getBlock(n.anchorNode);return a?a.tool.inlineTools.size!==0:!1}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=L.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=L.make("div",this.CSS.conversionTogglerContent);const t=L.make("div",this.CSS.conversionTogglerArrow,{innerHTML:Sc});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(t),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",()=>{this.Editor.ConversionToolbar.toggle(n=>{!n&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()})}),Cn()===!1&&ko(this.nodes.conversionToggler,ce.ui(Pe.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){const{BlockManager:t}=this.Editor,{currentBlock:n}=t,i=n.name,s=n.tool.conversionConfig,a=s&&s.export;this.nodes.conversionToggler.hidden=!a,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!a);const d=await n.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=d.icon||d.title||Yn(i)}prepareConversionToolbar(){const t=this.Editor.ConversionToolbar.make();L.append(this.nodes.wrapper,t)}async addToolsFiltered(t=!0){const n=et.get(),i=this.Editor.BlockManager.getBlock(n.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(i.tool.inlineTools.values()).forEach(s=>{this.addTool(s)}),t&&this.Editor.ConversionToolbar.hasTools()?await this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0,this.recalculateWidth()}addTool(t){const n=t.create(),i=n.render();if(!i){Ct("Render method must return an instance of Node","warn",t.name);return}if(i.dataset.tool=t.name,this.nodes.buttons.appendChild(i),this.toolsInstances.set(t.name,n),Ot(n.renderActions)){const h=n.renderActions();this.nodes.actions.appendChild(h)}this.listeners.on(i,"click",h=>{this.toolClicked(n),h.preventDefault()});const s=this.getToolShortcut(t.name);if(s)try{this.enableShortcuts(n,s)}catch{}const a=L.make("div"),d=ce.t(Pe.toolNames,t.title||Yn(t.name));a.appendChild(L.text(d)),s&&a.appendChild(L.make("div",this.CSS.inlineToolbarShortcut,{textContent:vi(s)})),Cn()===!1&&ko(i,a,{placement:"top",hidingDelay:100}),n.checkState(et.get())}getToolShortcut(t){const{Tools:n}=this.Editor,i=n.inlineTools.get(t),s=n.internal.inlineTools;return Array.from(s.keys()).includes(t)?this.inlineTools[t][Ic.Shortcut]:i.shortcut}enableShortcuts(t,n){Kn.add({name:n,handler:i=>{const{currentBlock:s}=this.Editor.BlockManager;s&&s.tool.enabledInlineTools&&(i.preventDefault(),this.toolClicked(t))},on:this.Editor.UI.nodes.redactor})}toolClicked(t){const n=et.range;t.surround(n),this.checkToolsState(),t.renderActions!==void 0&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach(t=>{t.checkState(et.get())})}get inlineTools(){const t={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([n,i])=>{t[n]=i.create()}),t}enableFlipper(){this.flipper=new Qe({focusedItemClass:this.CSS.focusedButton,allowedKeys:[at.ENTER,at.TAB]})}}class y1 extends vt{keydown(t){switch(this.beforeKeydownProcessing(t),t.keyCode){case at.BACKSPACE:this.backspace(t);break;case at.DELETE:this.delete(t);break;case at.ENTER:this.enter(t);break;case at.DOWN:case at.RIGHT:this.arrowRightAndDown(t);break;case at.UP:case at.LEFT:this.arrowLeftAndUp(t);break;case at.TAB:this.tabPressed(t);break;case at.SLASH:t.ctrlKey||t.metaKey?this.commandSlashPressed():this.slashPressed();break}}beforeKeydownProcessing(t){this.needToolbarClosing(t)&&gc(t.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||this.Editor.BlockSelection.clearSelection(t))}keyup(t){t.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(t){const n=this.Editor.BlockManager.getBlockByChildNode(t.target);n.dropTarget=!0}dragLeave(t){const n=this.Editor.BlockManager.getBlockByChildNode(t.target);n.dropTarget=!1}handleCommandC(t){const{BlockSelection:n}=this.Editor;n.anyBlockSelected&&n.copySelectedBlocks(t)}handleCommandX(t){const{BlockSelection:n,BlockManager:i,Caret:s}=this.Editor;n.anyBlockSelected&&n.copySelectedBlocks(t).then(()=>{const a=i.removeSelectedBlocks(),d=i.insertDefaultBlockAtIndex(a,!0);s.setToBlock(d,s.positions.START),n.clearSelection(t)})}tabPressed(t){const{InlineToolbar:n,ConversionToolbar:i,Caret:s}=this.Editor;i.opened||n.opened||(t.shiftKey?s.navigatePrevious(!0):s.navigateNext(!0))&&t.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(){this.Editor.BlockManager.currentBlock.isEmpty&&this.activateToolbox()}enter(t){const{BlockManager:n,UI:i}=this.Editor;if(n.currentBlock.tool.isLineBreaksEnabled||i.someToolbarOpened&&i.someFlipperButtonFocused||t.shiftKey)return;let s=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):this.Editor.Caret.isAtEnd?s=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):s=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(s),this.Editor.Toolbar.moveAndOpen(s),t.preventDefault()}backspace(t){const{BlockManager:n,Caret:i}=this.Editor,{currentBlock:s,previousBlock:a}=n;if(!(!et.isCollapsed||!i.isAtStart)){if(t.preventDefault(),this.Editor.Toolbar.close(),s.currentInput!==s.firstInput){i.navigatePrevious();return}if(a!==null){if(a.isEmpty){n.removeBlock(a);return}if(s.isEmpty){n.removeBlock(s);const d=n.currentBlock;i.setToBlock(d,i.positions.END);return}ic(s,a)?this.mergeBlocks(a,s):i.setToBlock(a,i.positions.END)}}}delete(t){const{BlockManager:n,Caret:i}=this.Editor,{currentBlock:s,nextBlock:a}=n;if(!(!et.isCollapsed||!i.isAtEnd)){if(t.preventDefault(),this.Editor.Toolbar.close(),s.currentInput!==s.lastInput){i.navigateNext();return}if(a!==null){if(a.isEmpty){n.removeBlock(a);return}if(s.isEmpty){n.removeBlock(s),i.setToBlock(a,i.positions.START);return}ic(s,a)?this.mergeBlocks(s,a):i.setToBlock(a,i.positions.START)}}}mergeBlocks(t,n){const{BlockManager:i,Caret:s,Toolbar:a}=this.Editor;s.createShadow(t.pluginsContent),i.mergeBlocks(t,n).then(()=>{window.requestAnimationFrame(()=>{s.restoreCaret(t.pluginsContent),t.pluginsContent.normalize(),a.close()})})}arrowRightAndDown(t){const n=Qe.usedKeys.includes(t.keyCode)&&(!t.shiftKey||t.keyCode===at.TAB);if(this.Editor.UI.someToolbarOpened&&n)return;this.Editor.Toolbar.close();const i=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;if(t.shiftKey&&t.keyCode===at.DOWN&&i){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(t.keyCode===at.DOWN||t.keyCode===at.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){t.preventDefault();return}mi(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(t)}arrowLeftAndUp(t){if(this.Editor.UI.someToolbarOpened){if(Qe.usedKeys.includes(t.keyCode)&&(!t.shiftKey||t.keyCode===at.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const n=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;if(t.shiftKey&&t.keyCode===at.UP&&n){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(t.keyCode===at.UP||t.keyCode===at.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){t.preventDefault();return}mi(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(t)}needToolbarClosing(t){const n=t.keyCode===at.ENTER&&this.Editor.Toolbar.toolbox.opened,i=t.keyCode===at.ENTER&&this.Editor.BlockSettings.opened,s=t.keyCode===at.ENTER&&this.Editor.InlineToolbar.opened,a=t.keyCode===at.ENTER&&this.Editor.ConversionToolbar.opened,d=t.keyCode===at.TAB;return!(t.shiftKey||d||n||i||s||a)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}class qr{constructor(t){this.blocks=[],this.workingArea=t}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return mc(this.workingArea.children)}static set(t,n,i){return isNaN(Number(n))?(Reflect.set(t,n,i),!0):(t.insert(+n,i),!0)}static get(t,n){return isNaN(Number(n))?Reflect.get(t,n):t.get(+n)}push(t){this.blocks.push(t),this.insertToDOM(t)}swap(t,n){const i=this.blocks[n];L.swap(this.blocks[t].holder,i.holder),this.blocks[n]=this.blocks[t],this.blocks[t]=i}move(t,n){const i=this.blocks.splice(n,1)[0],s=t-1,a=Math.max(0,s),d=this.blocks[a];t>0?this.insertToDOM(i,"afterend",d):this.insertToDOM(i,"beforebegin",d),this.blocks.splice(t,0,i);const h=this.composeBlockEvent("move",{fromIndex:n,toIndex:t});i.call(Ve.MOVED,h)}insert(t,n,i=!1){if(!this.length){this.push(n);return}t>this.length&&(t=this.length),i&&(this.blocks[t].holder.remove(),this.blocks[t].call(Ve.REMOVED));const s=i?1:0;if(this.blocks.splice(t,s,n),t>0){const a=this.blocks[t-1];this.insertToDOM(n,"afterend",a)}else{const a=this.blocks[t+1];a?this.insertToDOM(n,"beforebegin",a):this.insertToDOM(n)}}replace(t,n){if(this.blocks[t]===void 0)throw Error("Incorrect index");this.blocks[t].holder.replaceWith(n.holder),this.blocks[t]=n}insertMany(t,n){const i=new DocumentFragment;for(const s of t)i.appendChild(s.holder);if(this.length>0){if(n>0){const s=Math.min(n-1,this.length-1);this.blocks[s].holder.after(i)}else n===0&&this.workingArea.prepend(i);this.blocks.splice(n,0,...t)}else this.blocks.push(...t),this.workingArea.appendChild(i);t.forEach(s=>s.call(Ve.RENDERED))}remove(t){isNaN(t)&&(t=this.length-1),this.blocks[t].holder.remove(),this.blocks[t].call(Ve.REMOVED),this.blocks.splice(t,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(t=>t.call(Ve.REMOVED)),this.blocks.length=0}insertAfter(t,n){const i=this.blocks.indexOf(t);this.insert(i+1,n)}get(t){return this.blocks[t]}indexOf(t){return this.blocks.indexOf(t)}insertToDOM(t,n,i){n?i.holder.insertAdjacentElement(n,t.holder):this.workingArea.appendChild(t.holder),t.call(Ve.RENDERED)}composeBlockEvent(t,n){return new CustomEvent(t,{detail:n})}}const sc="block-removed",ac="block-added",x1="block-moved",lc="block-changed";class C1{constructor(){this.completed=Promise.resolve()}add(t){return new Promise((n,i)=>{this.completed=this.completed.then(t).then(n).catch(i)})}}class E1 extends vt{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(t){this._currentBlockIndex=t}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(t){this.currentBlockIndex=this.getBlockIndex(t)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(t=>!!t.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(t=>!!t.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(t=>t.isEmpty)}prepare(){const t=new qr(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(t,{set:qr.set,get:qr.get}),this.listeners.on(document,"copy",n=>this.Editor.BlockEvents.handleCommandC(n))}toggleReadOnly(t){t?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:t,data:n={},id:i=void 0,tunes:s={}}){const a=this.Editor.ReadOnly.isEnabled,d=this.Editor.Tools.blockTools.get(t),h=new Gt({id:i,data:n,tool:d,api:this.Editor.API,readOnly:a,tunesData:s},this.eventsDispatcher);return a||window.requestIdleCallback(()=>{this.bindBlockEvents(h)},{timeout:2e3}),h}insert({id:t=void 0,tool:n=this.config.defaultBlock,data:i={},index:s,needToFocus:a=!0,replace:d=!1,tunes:h={}}={}){let f=s;f===void 0&&(f=this.currentBlockIndex+(d?0:1));const m=this.composeBlock({id:t,tool:n,data:i,tunes:h});return d&&this.blockDidMutated(sc,this.getBlockByIndex(f),{index:f}),this._blocks.insert(f,m,d),this.blockDidMutated(ac,m,{index:f}),a?this.currentBlockIndex=f:f<=this.currentBlockIndex&&this.currentBlockIndex++,m}insertMany(t,n=0){this._blocks.insertMany(t,n)}async update(t,n){const i=await t.data,s=this.composeBlock({id:t.id,tool:t.name,data:Object.assign({},i,n),tunes:t.tunes}),a=this.getBlockIndex(t);return this._blocks.replace(a,s),this.blockDidMutated(lc,s,{index:a}),s}replace(t,n,i){const s=this.getBlockIndex(t);this.insert({tool:n,data:i,index:s,replace:!0})}paste(t,n,i=!1){const s=this.insert({tool:t,replace:i});try{window.requestIdleCallback(()=>{s.call(Ve.ON_PASTE,n)})}catch(a){Ct(`${t}: onPaste callback call is failed`,"error",a)}return s}insertDefaultBlockAtIndex(t,n=!1){const i=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[t]=i,this.blockDidMutated(ac,i,{index:t}),n?this.currentBlockIndex=t:t<=this.currentBlockIndex&&this.currentBlockIndex++,i}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(t,n){const i=await n.data;Le(i)||await t.mergeWith(i),this.removeBlock(n),this.currentBlockIndex=this._blocks.indexOf(t)}removeBlock(t,n=!0){return new Promise(i=>{const s=this._blocks.indexOf(t);if(!this.validateIndex(s))throw new Error("Can't find a Block to remove");t.destroy(),this._blocks.remove(s),this.blockDidMutated(sc,t,{index:s}),this.currentBlockIndex>=s&&this.currentBlockIndex--,this.blocks.length?s===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,n&&this.insert()),i()})}removeSelectedBlocks(){let t;for(let n=this.blocks.length-1;n>=0;n--)this.blocks[n].selected&&(this.removeBlock(this.blocks[n]),t=n);return t}removeAllBlocks(){for(let t=this.blocks.length-1;t>=0;t--)this._blocks.remove(t);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){const t=this.Editor.Caret.extractFragmentFromCaretPosition(),n=L.make("div");n.appendChild(t);const i={text:L.isEmpty(n)?"":n.innerHTML};return this.insert({data:i})}getBlockByIndex(t){return t===-1&&(t=this._blocks.length-1),this._blocks[t]}getBlockIndex(t){return this._blocks.indexOf(t)}getBlockById(t){return this._blocks.array.find(n=>n.id===t)}getBlock(t){L.isElement(t)||(t=t.parentNode);const n=this._blocks.nodes,i=t.closest(`.${Gt.CSS.wrapper}`),s=n.indexOf(i);if(s>=0)return this._blocks[s]}setCurrentBlockByChildNode(t){L.isElement(t)||(t=t.parentNode);const n=t.closest(`.${Gt.CSS.wrapper}`);if(!n)return;const i=n.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(i!=null&&i.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(n),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(t){if(!t||!(t instanceof Node))return;L.isElement(t)||(t=t.parentNode);const n=t.closest(`.${Gt.CSS.wrapper}`);return this.blocks.find(i=>i.holder===n)}swap(t,n){this._blocks.swap(t,n),this.currentBlockIndex=n}move(t,n=this.currentBlockIndex){if(isNaN(t)||isNaN(n)){Ct("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(t)||!this.validateIndex(n)){Ct("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(t,n),this.currentBlockIndex=t,this.blockDidMutated(x1,this.currentBlock,{fromIndex:n,toIndex:t})}async convert(t,n,i){if(!await t.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const s=this.Editor.Tools.blockTools.get(n);if(!s)throw new Error(`Could not convert Block. Tool «${n}» not found.`);const a=await t.exportDataAsString(),d=Je(a,s.sanitizeConfig);let h=Ev(d,s.conversionConfig);i&&(h=Object.assign(h,i)),this.replace(t,s.name,h)}dropPointer(){this.currentBlockIndex=-1}async clear(t=!1){const n=new C1;this.blocks.forEach(i=>{n.add(async()=>{await this.removeBlock(i,!1)})}),await n.completed,this.dropPointer(),t&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(t=>t.destroy()))}bindBlockEvents(t){const{BlockEvents:n}=this.Editor;this.readOnlyMutableListeners.on(t.holder,"keydown",i=>{n.keydown(i)}),this.readOnlyMutableListeners.on(t.holder,"keyup",i=>{n.keyup(i)}),this.readOnlyMutableListeners.on(t.holder,"dragover",i=>{n.dragOver(i)}),this.readOnlyMutableListeners.on(t.holder,"dragleave",i=>{n.dragLeave(i)}),t.on("didMutated",i=>this.blockDidMutated(lc,i,{index:this.getBlockIndex(i)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",t=>this.Editor.BlockEvents.handleCommandX(t)),this.blocks.forEach(t=>{this.bindBlockEvents(t)})}validateIndex(t){return!(t<0||t>=this._blocks.length)}blockDidMutated(t,n,i){const s=new CustomEvent(t,{detail:{target:new xn(n),...i}});return this.eventsDispatcher.emit(kc,{event:s}),n}}class S1 extends vt{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:t}=this.Editor;return t.blocks.every(n=>n.selected===!0)}set allBlocksSelected(t){const{BlockManager:n}=this.Editor;n.blocks.forEach(i=>{i.selected=t}),this.clearCache()}get anyBlockSelected(){const{BlockManager:t}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=t.blocks.some(n=>n.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(t=>t.selected)}prepare(){this.selection=new et,Kn.add({name:"CMD+A",handler:t=>{const{BlockManager:n,ReadOnly:i}=this.Editor;if(i.isEnabled){t.preventDefault(),this.selectAllBlocks();return}n.currentBlock&&this.handleCommandA(t)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){et.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(t){const{BlockManager:n}=this.Editor;let i;isNaN(t)?i=n.currentBlock:i=n.getBlockByIndex(t),i.selected=!1,this.clearCache()}clearSelection(t,n=!1){const{BlockManager:i,Caret:s,RectangleSelection:a}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const d=t&&t instanceof KeyboardEvent,h=d&&gc(t.keyCode);if(this.anyBlockSelected&&d&&h&&!et.isSelectionExists){const f=i.removeSelectedBlocks();i.insertDefaultBlockAtIndex(f,!0),s.setToBlock(i.currentBlock),mi(()=>{const m=t.key;s.insertContentAtCaretPosition(m.length>1?"":m)},20)()}if(this.Editor.CrossBlockSelection.clear(t),!this.anyBlockSelected||a.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}n&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(t){t.preventDefault();const n=L.make("div");this.selectedBlocks.forEach(a=>{const d=Je(a.holder.innerHTML,this.sanitizerConfig),h=L.make("p");h.innerHTML=d,n.appendChild(h)});const i=Array.from(n.childNodes).map(a=>a.textContent).join(`

`),s=n.innerHTML;return t.clipboardData.setData("text/plain",i),t.clipboardData.setData("text/html",s),Promise.all(this.selectedBlocks.map(a=>a.save())).then(a=>{try{t.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(a))}catch{}})}selectBlockByIndex(t){const{BlockManager:n}=this.Editor,i=n.getBlockByIndex(t);i!==void 0&&this.selectBlock(i)}selectBlock(t){this.selection.save(),et.get().removeAllRanges(),t.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(t){t.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){Kn.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(t){if(this.Editor.RectangleSelection.clearSelection(),L.isNativeInput(t.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const n=this.Editor.BlockManager.getBlock(t.target),i=n.inputs;if(i.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(i.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(t.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(t.preventDefault(),this.selectBlock(n),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),et.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}class bi extends vt{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){const{currentBlock:t}=this.Editor.BlockManager;if(!t.focusable)return!0;const n=et.get(),i=L.getDeepestNode(t.currentInput);let s=n.focusNode;if(L.isNativeInput(i))return i.selectionEnd===0;if(!n.anchorNode)return!1;let a=s.textContent.search(/\S/);a===-1&&(a=0);let d=n.focusOffset;return s.nodeType!==Node.TEXT_NODE&&s.childNodes.length&&(s.childNodes[d]?(s=s.childNodes[d],d=0):(s=s.childNodes[d-1],d=s.textContent.length)),(L.isLineBreakTag(i)||L.isEmpty(i))&&this.getHigherLevelSiblings(s,"left").every(h=>{const f=L.isLineBreakTag(h),m=h.children.length===1&&L.isLineBreakTag(h.children[0]),x=f||m;return L.isEmpty(h)&&!x})&&d===a?!0:i===null||s===i&&d<=a}get isAtEnd(){const{currentBlock:t}=this.Editor.BlockManager;if(!t.focusable)return!0;const n=et.get();let i=n.focusNode;const s=L.getDeepestNode(t.currentInput,!0);if(L.isNativeInput(s))return s.selectionEnd===s.value.length;if(!n.focusNode)return!1;let a=n.focusOffset;if(i.nodeType!==Node.TEXT_NODE&&i.childNodes.length&&(i.childNodes[a-1]?(i=i.childNodes[a-1],a=i.textContent.length):(i=i.childNodes[0],a=0)),L.isLineBreakTag(s)||L.isEmpty(s)){const h=this.getHigherLevelSiblings(i,"right");if(h.every((f,m)=>m===h.length-1&&L.isLineBreakTag(f)||L.isEmpty(f)&&!L.isLineBreakTag(f))&&a===i.textContent.length)return!0}const d=s.textContent.replace(/\s+$/,"");return i===s&&a>=d.length}setToBlock(t,n=this.positions.DEFAULT,i=0){var s;const{BlockManager:a,BlockSelection:d}=this.Editor;if(d.clearSelection(),!t.focusable){(s=window.getSelection())==null||s.removeAllRanges(),d.selectBlock(t),a.currentBlock=t;return}let h;switch(n){case this.positions.START:h=t.firstInput;break;case this.positions.END:h=t.lastInput;break;default:h=t.currentInput}if(!h)return;const f=L.getDeepestNode(h,n===this.positions.END),m=L.getContentLength(f);switch(!0){case n===this.positions.START:i=0;break;case n===this.positions.END:case i>m:i=m;break}this.set(f,i),a.setCurrentBlockByChildNode(t.holder),a.currentBlock.currentInput=h}setToInput(t,n=this.positions.DEFAULT,i=0){const{currentBlock:s}=this.Editor.BlockManager,a=L.getDeepestNode(t);switch(n){case this.positions.START:this.set(a,0);break;case this.positions.END:this.set(a,L.getContentLength(a));break;default:i&&this.set(a,i)}s.currentInput=t}set(t,n=0){const{top:i,bottom:s}=et.setCursor(t,n),{innerHeight:a}=window;i<0?window.scrollBy(0,i-30):s>a&&window.scrollBy(0,s-a+30)}setToTheLastBlock(){const t=this.Editor.BlockManager.lastBlock;if(t)if(t.tool.isDefault&&t.isEmpty)this.setToBlock(t);else{const n=this.Editor.BlockManager.insertAtEnd();this.setToBlock(n)}}extractFragmentFromCaretPosition(){const t=et.get();if(t.rangeCount){const n=t.getRangeAt(0),i=this.Editor.BlockManager.currentBlock.currentInput;if(n.deleteContents(),i)if(L.isNativeInput(i)){const s=i,a=document.createDocumentFragment(),d=s.value.substring(0,s.selectionStart),h=s.value.substring(s.selectionStart);return a.textContent=h,s.value=d,a}else{const s=n.cloneRange();return s.selectNodeContents(i),s.setStart(n.endContainer,n.endOffset),s.extractContents()}}}navigateNext(t=!1){const{BlockManager:n}=this.Editor,{currentBlock:i,nextBlock:s}=n,{nextInput:a}=i,d=this.isAtEnd;let h=s;const f=t||d;if(a&&f)return this.setToInput(a,this.positions.START),!0;if(h===null){if(i.tool.isDefault||!f)return!1;h=n.insertAtEnd()}return f?(this.setToBlock(h,this.positions.START),!0):!1}navigatePrevious(t=!1){const{currentBlock:n,previousBlock:i}=this.Editor.BlockManager;if(!n)return!1;const{previousInput:s}=n,a=t||this.isAtStart;return s&&a?(this.setToInput(s,this.positions.END),!0):i!==null&&a?(this.setToBlock(i,this.positions.END),!0):!1}createShadow(t){const n=document.createElement("span");n.classList.add(bi.CSS.shadowCaret),t.insertAdjacentElement("beforeend",n)}restoreCaret(t){const n=t.querySelector(`.${bi.CSS.shadowCaret}`);if(!n)return;new et().expandToTag(n);const i=document.createRange();i.selectNode(n),i.extractContents()}insertContentAtCaretPosition(t){const n=document.createDocumentFragment(),i=document.createElement("div"),s=et.get(),a=et.range;i.innerHTML=t,Array.from(i.childNodes).forEach(m=>n.appendChild(m)),n.childNodes.length===0&&n.appendChild(new Text);const d=n.lastChild;a.deleteContents(),a.insertNode(n);const h=document.createRange(),f=d.nodeType===Node.TEXT_NODE?d:d.firstChild;f!==null&&f.textContent!==null&&h.setStart(f,f.textContent.length),s.removeAllRanges(),s.addRange(h)}getHigherLevelSiblings(t,n){let i=t;const s=[];for(;i.parentNode&&i.parentNode.contentEditable!=="true";)i=i.parentNode;const a=n==="left"?"previousSibling":"nextSibling";for(;i[a];)i=i[a],s.push(i);return s}}class T1 extends vt{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=t=>{const{BlockManager:n,BlockSelection:i}=this.Editor;if(t.relatedTarget===null&&t.target===null)return;const s=n.getBlockByChildNode(t.relatedTarget)||this.lastSelectedBlock,a=n.getBlockByChildNode(t.target);if(!(!s||!a)&&a!==s){if(s===this.firstSelectedBlock){et.get().removeAllRanges(),s.selected=!0,a.selected=!0,i.clearCache();return}if(a===this.firstSelectedBlock){s.selected=!1,a.selected=!1,i.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(s,a),this.lastSelectedBlock=a}}}async prepare(){this.listeners.on(document,"mousedown",t=>{this.enableCrossBlockSelection(t)})}watchSelection(t){if(t.button!==sv.LEFT)return;const{BlockManager:n}=this.Editor;this.firstSelectedBlock=n.getBlock(t.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(t=!0){const{BlockManager:n,BlockSelection:i}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=n.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,i.clearCache(),et.get().removeAllRanges());const s=n.blocks.indexOf(this.lastSelectedBlock)+(t?1:-1),a=n.blocks[s];a&&(this.lastSelectedBlock.selected!==a.selected?(a.selected=!0,i.clearCache()):(this.lastSelectedBlock.selected=!1,i.clearCache()),this.lastSelectedBlock=a,this.Editor.InlineToolbar.close(),a.holder.scrollIntoView({block:"nearest"}))}clear(t){const{BlockManager:n,BlockSelection:i,Caret:s}=this.Editor,a=n.blocks.indexOf(this.firstSelectedBlock),d=n.blocks.indexOf(this.lastSelectedBlock);if(i.anyBlockSelected&&a>-1&&d>-1&&t&&t instanceof KeyboardEvent)switch(t.keyCode){case at.DOWN:case at.RIGHT:s.setToBlock(n.blocks[Math.max(a,d)],s.positions.END);break;case at.UP:case at.LEFT:s.setToBlock(n.blocks[Math.min(a,d)],s.positions.START);break;default:s.setToBlock(n.blocks[Math.max(a,d)],s.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(t){const{UI:n}=this.Editor;et.isCollapsed||this.Editor.BlockSelection.clearSelection(t),n.nodes.redactor.contains(t.target)?this.watchSelection(t):this.Editor.BlockSelection.clearSelection(t)}toggleBlocksSelectedState(t,n){const{BlockManager:i,BlockSelection:s}=this.Editor,a=i.blocks.indexOf(t),d=i.blocks.indexOf(n),h=t.selected!==n.selected;for(let f=Math.min(a,d);f<=Math.max(a,d);f++){const m=i.blocks[f];m!==this.firstSelectedBlock&&m!==(h?t:n)&&(i.blocks[f].selected=!i.blocks[f].selected,s.clearCache())}}}class _1 extends vt{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(t){t?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:t}=this.Editor;this.readOnlyMutableListeners.on(t.nodes.holder,"drop",async n=>{await this.processDrop(n)},!0),this.readOnlyMutableListeners.on(t.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(t.nodes.holder,"dragover",n=>{this.processDragOver(n)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(t){const{BlockManager:n,Caret:i,Paste:s}=this.Editor;t.preventDefault(),n.blocks.forEach(d=>{d.dropTarget=!1}),et.isAtEditor&&!et.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const a=n.setCurrentBlockByChildNode(t.target);if(a)this.Editor.Caret.setToBlock(a,i.positions.END);else{const d=n.setCurrentBlockByChildNode(n.lastBlock.holder);this.Editor.Caret.setToBlock(d,i.positions.END)}await s.processDataTransfer(t.dataTransfer,!0)}processDragStart(){et.isAtEditor&&!et.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(t){t.preventDefault()}}class B1 extends vt{constructor({config:t,eventsDispatcher:n}){super({config:t,eventsDispatcher:n}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver(i=>{this.redactorChanged(i)}),this.eventsDispatcher.on(kc,i=>{this.particularBlockChanged(i.event)}),this.eventsDispatcher.on(yc,()=>{this.disable()}),this.eventsDispatcher.on(xc,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(t){this.disabled||!Ot(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${t.detail.target.id}:event:${t.type}`,t),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let n;this.batchingOnChangeQueue.size===1?n=this.batchingOnChangeQueue.values().next().value:n=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,n),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(t){this.eventsDispatcher.emit(Zr,{mutations:t})}}const Ac=class extends vt{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=c=>{try{const t=c.create({},{},!1);if(c.pasteConfig===!1){this.exceptionList.push(c.name);return}if(!Ot(t.onPaste))return;this.getTagsConfig(c),this.getFilesConfig(c),this.getPatternsConfig(c)}catch(t){Ct(`Paste handling for «${c.name}» Tool hasn't been set up because of the error`,"warn",t)}},this.handlePasteEvent=async c=>{const{BlockManager:t,Toolbar:n}=this.Editor,i=t.setCurrentBlockByChildNode(c.target);!i||this.isNativeBehaviour(c.target)&&!c.clipboardData.types.includes("Files")||i&&this.exceptionList.includes(i.name)||(c.preventDefault(),this.processDataTransfer(c.clipboardData),n.close())}}async prepare(){this.processTools()}toggleReadOnly(c){c?this.unsetCallback():this.setCallback()}async processDataTransfer(c,t=!1){const{Tools:n}=this.Editor,i=c.types;if((i.includes?i.includes("Files"):i.contains("Files"))&&!Le(this.toolsFiles)){await this.processFiles(c.files);return}const s=c.getData(this.MIME_TYPE),a=c.getData("text/plain");let d=c.getData("text/html");if(s)try{this.insertEditorJSData(JSON.parse(s));return}catch{}t&&a.trim()&&d.trim()&&(d="<p>"+(d.trim()?d:a)+"</p>");const h=Object.keys(this.toolsTags).reduce((x,v)=>(x[v.toLowerCase()]=this.toolsTags[v].sanitizationConfig??{},x),{}),f=Object.assign({},h,n.getAllInlineToolsSanitizeConfig(),{br:{}}),m=Je(d,f);!m.trim()||m.trim()===a||!L.isHTMLString(m)?await this.processText(a):await this.processText(m,!0)}async processText(c,t=!1){const{Caret:n,BlockManager:i}=this.Editor,s=t?this.processHTML(c):this.processPlain(c);if(!s.length)return;if(s.length===1){s[0].isBlock?this.processSingleBlock(s.pop()):this.processInlinePaste(s.pop());return}const a=i.currentBlock&&i.currentBlock.tool.isDefault&&i.currentBlock.isEmpty;s.map(async(d,h)=>this.insertBlock(d,h===0&&a)),i.currentBlock&&n.setToBlock(i.currentBlock,n.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const c=this.Editor.Tools.blockTools;Array.from(c.values()).forEach(this.processTool)}collectTagNames(c){return hn(c)?[c]:Xt(c)?Object.keys(c):[]}getTagsConfig(c){if(c.pasteConfig===!1)return;const t=c.pasteConfig.tags||[],n=[];t.forEach(i=>{const s=this.collectTagNames(i);n.push(...s),s.forEach(a=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,a)){Ct(`Paste handler for «${c.name}» Tool on «${a}» tag is skipped because it is already used by «${this.toolsTags[a].tool.name}» Tool.`,"warn");return}const d=Xt(i)?i[a]:null;this.toolsTags[a.toUpperCase()]={tool:c,sanitizationConfig:d}})}),this.tagsByTool[c.name]=n.map(i=>i.toUpperCase())}getFilesConfig(c){if(c.pasteConfig===!1)return;const{files:t={}}=c.pasteConfig;let{extensions:n,mimeTypes:i}=t;!n&&!i||(n&&!Array.isArray(n)&&(Ct(`«extensions» property of the onDrop config for «${c.name}» Tool should be an array`),n=[]),i&&!Array.isArray(i)&&(Ct(`«mimeTypes» property of the onDrop config for «${c.name}» Tool should be an array`),i=[]),i&&(i=i.filter(s=>uv(s)?!0:(Ct(`MIME type value «${s}» for the «${c.name}» Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[c.name]={extensions:n||[],mimeTypes:i||[]})}getPatternsConfig(c){c.pasteConfig===!1||!c.pasteConfig.patterns||Le(c.pasteConfig.patterns)||Object.entries(c.pasteConfig.patterns).forEach(([t,n])=>{n instanceof RegExp||Ct(`Pattern ${n} for «${c.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:t,pattern:n,tool:c})})}isNativeBehaviour(c){return L.isNativeInput(c)}async processFiles(c){const{BlockManager:t}=this.Editor;let n;n=await Promise.all(Array.from(c).map(s=>this.processFile(s))),n=n.filter(s=>!!s);const i=t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty;n.forEach((s,a)=>{t.paste(s.type,s.event,a===0&&i)})}async processFile(c){const t=dv(c),n=Object.entries(this.toolsFiles).find(([s,{mimeTypes:a,extensions:d}])=>{const[h,f]=c.type.split("/"),m=d.find(v=>v.toLowerCase()===t.toLowerCase()),x=a.find(v=>{const[_,I]=v.split("/");return _===h&&(I===f||I==="*")});return!!m||!!x});if(!n)return;const[i]=n;return{event:this.composePasteEvent("file",{file:c}),type:i}}processHTML(c){const{Tools:t}=this.Editor,n=L.make("DIV");return n.innerHTML=c,this.getNodes(n).map(i=>{let s,a=t.defaultTool,d=!1;switch(i.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:s=L.make("div"),s.appendChild(i);break;case Node.ELEMENT_NODE:s=i,d=!0,this.toolsTags[s.tagName]&&(a=this.toolsTags[s.tagName].tool);break}const{tags:h}=a.pasteConfig||{tags:[]},f=h.reduce((v,_)=>(this.collectTagNames(_).forEach(I=>{const E=Xt(_)?_[I]:null;v[I.toLowerCase()]=E||{}}),v),{}),m=Object.assign({},f,a.baseSanitizeConfig);if(s.tagName.toLowerCase()==="table"){const v=Je(s.outerHTML,m);s=L.make("div",void 0,{innerHTML:v}).firstChild}else s.innerHTML=Je(s.innerHTML,m);const x=this.composePasteEvent("tag",{data:s});return{content:s,isBlock:d,tool:a.name,event:x}}).filter(i=>{const s=L.isEmpty(i.content),a=L.isSingleTag(i.content);return!s||a})}processPlain(c){const{defaultBlock:t}=this.config;if(!c)return[];const n=t;return c.split(/\r?\n/).filter(i=>i.trim()).map(i=>{const s=L.make("div");s.textContent=i;const a=this.composePasteEvent("tag",{data:s});return{content:s,tool:n,isBlock:!1,event:a}})}async processSingleBlock(c){const{Caret:t,BlockManager:n}=this.Editor,{currentBlock:i}=n;if(!i||c.tool!==i.name||!L.containsOnlyInlineElements(c.content.innerHTML)){this.insertBlock(c,(i==null?void 0:i.tool.isDefault)&&i.isEmpty);return}t.insertContentAtCaretPosition(c.content.innerHTML)}async processInlinePaste(c){const{BlockManager:t,Caret:n}=this.Editor,{content:i}=c;if(t.currentBlock&&t.currentBlock.tool.isDefault&&i.textContent.length<Ac.PATTERN_PROCESSING_MAX_LENGTH){const s=await this.processPattern(i.textContent);if(s){const a=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty,d=t.paste(s.tool,s.event,a);n.setToBlock(d,n.positions.END);return}}if(t.currentBlock&&t.currentBlock.currentInput){const s=t.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,Je(i.innerHTML,s))}else this.insertBlock(c)}async processPattern(c){const t=this.toolsPatterns.find(n=>{const i=n.pattern.exec(c);return i?c===i.shift():!1});return t?{event:this.composePasteEvent("pattern",{key:t.key,data:c}),tool:t.tool.name}:void 0}insertBlock(c,t=!1){const{BlockManager:n,Caret:i}=this.Editor,{currentBlock:s}=n;let a;if(t&&s&&s.isEmpty){a=n.paste(c.tool,c.event,!0),i.setToBlock(a,i.positions.END);return}a=n.paste(c.tool,c.event),i.setToBlock(a,i.positions.END)}insertEditorJSData(c){const{BlockManager:t,Caret:n,Tools:i}=this.Editor;Cc(c,s=>i.blockTools.get(s).sanitizeConfig).forEach(({tool:s,data:a},d)=>{let h=!1;d===0&&(h=t.currentBlock&&t.currentBlock.tool.isDefault&&t.currentBlock.isEmpty);const f=t.insert({tool:s,data:a,replace:h});n.setToBlock(f,n.positions.END)})}processElementNode(c,t,n){const i=Object.keys(this.toolsTags),s=c,{tool:a}=this.toolsTags[s.tagName]||{},d=this.tagsByTool[a==null?void 0:a.name]||[],h=i.includes(s.tagName),f=L.blockElements.includes(s.tagName.toLowerCase()),m=Array.from(s.children).some(({tagName:v})=>i.includes(v)&&!d.includes(v)),x=Array.from(s.children).some(({tagName:v})=>L.blockElements.includes(v.toLowerCase()));if(!f&&!h&&!m)return n.appendChild(s),[...t,n];if(h&&!m||f&&!x&&!m)return[...t,n,s]}getNodes(c){const t=Array.from(c.childNodes);let n;const i=(s,a)=>{if(L.isEmpty(a)&&!L.isSingleTag(a))return s;const d=s[s.length-1];let h=new DocumentFragment;switch(d&&L.isFragment(d)&&(h=s.pop()),a.nodeType){case Node.ELEMENT_NODE:if(n=this.processElementNode(a,s,h),n)return n;break;case Node.TEXT_NODE:return h.appendChild(a),[...s,h];default:return[...s,h]}return[...s,...Array.from(a.childNodes).reduce(i,[])]};return t.reduce(i,[])}composePasteEvent(c,t){return new CustomEvent(c,{detail:t})}};let Oc=Ac;Oc.PATTERN_PROCESSING_MAX_LENGTH=450;class L1 extends vt{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:t}=this.Editor,{blockTools:n}=t,i=[];Array.from(n.entries()).forEach(([s,a])=>{a.isReadOnlySupported||i.push(s)}),this.toolsDontSupportReadOnly=i,this.config.readOnly&&i.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(t=!this.readOnlyEnabled){t&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const n=this.readOnlyEnabled;this.readOnlyEnabled=t;for(const s in this.Editor)this.Editor[s].toggleReadOnly&&this.Editor[s].toggleReadOnly(t);if(n===t)return this.readOnlyEnabled;const i=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(i.blocks),this.readOnlyEnabled}throwCriticalError(){throw new wc(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}class wo extends vt{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(t,n){const i=document.elementFromPoint(t-window.pageXOffset,n-window.pageYOffset);i.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const s=[`.${Gt.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],a=i.closest("."+this.Editor.UI.CSS.editorWrapper),d=s.some(h=>!!i.closest(h));!a||d||(this.mousedown=!0,this.startX=t,this.startY=n)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:t}=this.genHTML();this.listeners.on(t,"mousedown",n=>{this.processMouseDown(n)},!1),this.listeners.on(document.body,"mousemove",Kr(n=>{this.processMouseMove(n)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",Kr(n=>{this.processScroll(n)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(t){t.button===this.MAIN_MOUSE_BUTTON&&(t.target.closest(L.allInputsSelector)!==null||this.startSelection(t.pageX,t.pageY))}processMouseMove(t){this.changingRectangle(t),this.scrollByZones(t.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(t){this.changingRectangle(t)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(t){if(this.inScrollZone=null,t<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-t<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:t}=this.Editor,n=t.nodes.holder.querySelector("."+t.CSS.editorWrapper),i=L.make("div",wo.CSS.overlay,{}),s=L.make("div",wo.CSS.overlayContainer,{}),a=L.make("div",wo.CSS.rect,{});return s.appendChild(a),i.appendChild(s),n.appendChild(i),this.overlayRectangle=a,{container:n,overlay:i}}scrollVertical(t){if(!(this.inScrollZone&&this.mousedown))return;const n=window.pageYOffset;window.scrollBy(0,t),this.mouseY+=window.pageYOffset-n,setTimeout(()=>{this.scrollVertical(t)},0)}changingRectangle(t){if(!this.mousedown)return;t.pageY!==void 0&&(this.mouseX=t.pageX,this.mouseY=t.pageY);const{rightPos:n,leftPos:i,index:s}=this.genInfoForMouseSelection(),a=this.startX>n&&this.mouseX>n,d=this.startX<i&&this.mouseX<i;this.rectCrossesBlocks=!(a||d),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),s!==void 0&&(this.trySelectNextBlock(s),this.inverseSelection(),et.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const t=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!t)for(const n of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(n);if(!this.rectCrossesBlocks&&t)for(const n of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(n)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const t=document.body.offsetWidth/2,n=this.mouseY-window.pageYOffset,i=document.elementFromPoint(t,n),s=this.Editor.BlockManager.getBlockByChildNode(i);let a;s!==void 0&&(a=this.Editor.BlockManager.blocks.findIndex(x=>x.holder===s.holder));const d=this.Editor.BlockManager.lastBlock.holder.querySelector("."+Gt.CSS.content),h=Number.parseInt(window.getComputedStyle(d).width,10)/2,f=t-h,m=t+h;return{index:a,leftPos:f,rightPos:m}}addBlockInSelection(t){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(t),this.stackOfSelected.push(t)}trySelectNextBlock(t){const n=this.stackOfSelected[this.stackOfSelected.length-1]===t,i=this.stackOfSelected.length,s=1,a=-1,d=0;if(n)return;const h=this.stackOfSelected[i-1]-this.stackOfSelected[i-2]>0;let f=d;i>1&&(f=h?s:a);const m=t>this.stackOfSelected[i-1]&&f===s,x=t<this.stackOfSelected[i-1]&&f===a,v=!(m||x||f===d);if(!v&&(t>this.stackOfSelected[i-1]||this.stackOfSelected[i-1]===void 0)){let E=this.stackOfSelected[i-1]+1||t;for(E;E<=t;E++)this.addBlockInSelection(E);return}if(!v&&t<this.stackOfSelected[i-1]){for(let E=this.stackOfSelected[i-1]-1;E>=t;E--)this.addBlockInSelection(E);return}if(!v)return;let _=i-1,I;for(t>this.stackOfSelected[i-1]?I=()=>t>this.stackOfSelected[_]:I=()=>t<this.stackOfSelected[_];I();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[_]),this.stackOfSelected.pop(),_--}}class I1 extends vt{async render(t){return new Promise(n=>{const{Tools:i,BlockManager:s}=this.Editor;if(t.length===0)s.insert();else{const a=t.map(({type:d,data:h,tunes:f,id:m})=>{i.available.has(d)===!1&&(De(`Tool «${d}» is not found. Check 'tools' property at the Editor.js config.`,"warn"),h=this.composeStubDataForTool(d,h,m),d=i.stubTool);let x;try{x=s.composeBlock({id:m,tool:d,data:h,tunes:f})}catch(v){Ct(`Block «${d}» skipped because of plugins error`,"error",{data:h,error:v}),h=this.composeStubDataForTool(d,h,m),d=i.stubTool,x=s.composeBlock({id:m,tool:d,data:h,tunes:f})}return x});s.insertMany(a)}window.requestIdleCallback(()=>{n()},{timeout:2e3})})}composeStubDataForTool(t,n,i){const{Tools:s}=this.Editor;let a=t;if(s.unavailable.has(t)){const d=s.unavailable.get(t).toolbox;d!==void 0&&d[0].title!==void 0&&(a=d[0].title)}return{savedData:{id:i,type:t,data:n},title:a}}}class M1 extends vt{async save(){const{BlockManager:t,Tools:n}=this.Editor,i=t.blocks,s=[];try{i.forEach(h=>{s.push(this.getSavedData(h))});const a=await Promise.all(s),d=await Cc(a,h=>n.blockTools.get(h).sanitizeConfig);return this.makeOutput(d)}catch(a){De("Saving failed due to the Error %o","error",a)}}async getSavedData(t){const n=await t.save(),i=n&&await t.validate(n.data);return{...n,isValid:i}}makeOutput(t){const n=[];return t.forEach(({id:i,tool:s,data:a,tunes:d,isValid:h})=>{if(!h){Ct(`Block «${s}» skipped because saved data is invalid`);return}if(s===this.Editor.Tools.stubTool){n.push(a);return}const f={id:i,type:s,data:a,...!Le(d)&&{tunes:d}};n.push(f)}),{time:+new Date,blocks:n,version:"2.29.0"}}}(function(){try{if(typeof document<"u"){var c=document.createElement("style");c.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-paragraph[data-placeholder]:empty:before{content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before{opacity:1}.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before,.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus:before{opacity:0}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(c)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const A1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class hs{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:t,config:n,api:i,readOnly:s}){this.api=i,this.readOnly=s,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=n.placeholder?n.placeholder:hs.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=n.preserveBlank!==void 0?n.preserveBlank:!1,this.data=t}onKeyUp(t){if(t.code!=="Backspace"&&t.code!=="Delete")return;const{textContent:n}=this._element;n===""&&(this._element.innerHTML="")}drawView(){const t=document.createElement("DIV");return t.classList.add(this._CSS.wrapper,this._CSS.block),t.contentEditable=!1,t.dataset.placeholder=this.api.i18n.t(this._placeholder),this._data.text&&(t.innerHTML=this._data.text),this.readOnly||(t.contentEditable=!0,t.addEventListener("keyup",this.onKeyUp)),t}render(){return this._element=this.drawView(),this._element}merge(t){const n={text:this.data.text+t.text};this.data=n}validate(t){return!(t.text.trim()===""&&!this._preserveBlank)}save(t){return{text:t.innerHTML}}onPaste(t){const n={text:t.detail.data.innerHTML};this.data=n}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}get data(){if(this._element!==null){const t=this._element.innerHTML;this._data.text=t}return this._data}set data(t){this._data=t||{},this._element!==null&&this.hydrate()}hydrate(){window.requestAnimationFrame(()=>{this._element.innerHTML=this._data.text||""})}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:A1,title:"Text"}}}class ps{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=t1,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const t=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,t),t}get shortcut(){return"CMD+B"}}ps.isInline=!0;ps.title="Bold";class fs{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=i1,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const t=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,t),t}get shortcut(){return"CMD+I"}}fs.isInline=!0;fs.title="Italic";class gs{constructor({api:t}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=t.toolbar,this.inlineToolbar=t.inlineToolbar,this.notifier=t.notifier,this.i18n=t.i18n,this.selection=new et}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=rc,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",t=>{t.keyCode===this.ENTER_KEY&&this.enterPressed(t)}),this.nodes.input}surround(t){if(t){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const n=this.selection.findParentTag("A");if(n){this.selection.expandToTag(n),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const t=this.selection.findParentTag("A");if(t){this.nodes.button.innerHTML=l1,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const n=t.getAttribute("href");this.nodes.input.value=n!=="null"?n:"",this.selection.save()}else this.nodes.button.innerHTML=rc,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!t}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(t=!1){this.nodes.input.classList.add(this.CSS.inputShowed),t&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(t=!0){if(this.selection.isFakeBackgroundEnabled){const n=new et;n.save(),this.selection.restore(),this.selection.removeFakeBackground(),n.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",t&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(t){let n=this.nodes.input.value||"";if(!n.trim()){this.selection.restore(),this.unlink(),t.preventDefault(),this.closeActions();return}if(!this.validateURL(n)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),Ct("Incorrect Link pasted","warn",n);return}n=this.prepareLink(n),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(n),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(t){return!/\s/.test(t)}prepareLink(t){return t=t.trim(),t=this.addProtocol(t),t}addProtocol(t){if(/^(\w+):(\/\/)?/.test(t))return t;const n=/^\/[^/\s]/.test(t),i=t.substring(0,1)==="#",s=/^\/\/[^/\s]/.test(t);return!n&&!i&&!s&&(t="http://"+t),t}insertLink(t){const n=this.selection.findParentTag("A");n&&this.selection.expandToTag(n),document.execCommand(this.commandLink,!1,t)}unlink(){document.execCommand(this.commandUnlink)}}gs.isInline=!0;gs.title="Link";class Rc{constructor({data:t,api:n}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=n,this.title=t.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=t.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const t=L.make("div",this.CSS.wrapper),n=c1,i=L.make("div",this.CSS.info),s=L.make("div",this.CSS.title,{textContent:this.title}),a=L.make("div",this.CSS.subtitle,{textContent:this.subtitle});return t.innerHTML=n,i.appendChild(s),i.appendChild(a),t.appendChild(i),t}}Rc.isReadOnlySupported=!0;class O1 extends us{constructor(){super(...arguments),this.type=ki.Inline}get title(){return this.constructable[ds.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}class R1 extends us{constructor(){super(...arguments),this.type=ki.Tune}create(t,n){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:n,data:t})}}class Qt extends Map{get blockTools(){const t=Array.from(this.entries()).filter(([,n])=>n.isBlock());return new Qt(t)}get inlineTools(){const t=Array.from(this.entries()).filter(([,n])=>n.isInline());return new Qt(t)}get blockTunes(){const t=Array.from(this.entries()).filter(([,n])=>n.isTune());return new Qt(t)}get internalTools(){const t=Array.from(this.entries()).filter(([,n])=>n.isInternal);return new Qt(t)}get externalTools(){const t=Array.from(this.entries()).filter(([,n])=>!n.isInternal);return new Qt(t)}}var N1=Object.defineProperty,D1=Object.getOwnPropertyDescriptor,Nc=(c,t,n,i)=>{for(var s=i>1?void 0:i?D1(t,n):t,a=c.length-1,d;a>=0;a--)(d=c[a])&&(s=(i?d(t,n,s):d(s))||s);return i&&s&&N1(t,n,s),s};class ms extends us{constructor(){super(...arguments),this.type=ki.Block,this.inlineTools=new Qt,this.tunes=new Qt}create(t,n,i){return new this.constructable({data:t,block:n,readOnly:i,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return this.constructable[qn.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[qn.IsEnabledLineBreaks]}get toolbox(){const t=this.constructable[qn.Toolbox],n=this.config[fi.Toolbox];if(!Le(t)&&n!==!1)return n?Array.isArray(t)?Array.isArray(n)?n.map((i,s)=>{const a=t[s];return a?{...a,...i}:i}):[n]:Array.isArray(n)?n:[{...t,...n}]:Array.isArray(t)?t:[t]}get conversionConfig(){return this.constructable[qn.ConversionConfig]}get enabledInlineTools(){return this.config[fi.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[fi.EnabledBlockTunes]}get pasteConfig(){return this.constructable[qn.PasteConfig]??{}}get sanitizeConfig(){const t=super.sanitizeConfig,n=this.baseSanitizeConfig;if(Le(t))return n;const i={};for(const s in t)if(Object.prototype.hasOwnProperty.call(t,s)){const a=t[s];Xt(a)?i[s]=Object.assign({},n,a):i[s]=a}return i}get baseSanitizeConfig(){const t={};return Array.from(this.inlineTools.values()).forEach(n=>Object.assign(t,n.sanitizeConfig)),Array.from(this.tunes.values()).forEach(n=>Object.assign(t,n.sanitizeConfig)),t}}Nc([Gn],ms.prototype,"sanitizeConfig",1);Nc([Gn],ms.prototype,"baseSanitizeConfig",1);class P1{constructor(t,n,i){this.api=i,this.config=t,this.editorConfig=n}get(t){const{class:n,isInternal:i=!1,...s}=this.config[t],a=this.getConstructor(n);return new a({name:t,constructable:n,config:s,api:this.api,isDefault:t===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:i})}getConstructor(t){switch(!0){case t[ds.IsInline]:return O1;case t[Mc.IsTune]:return R1;default:return ms}}}class Dc{constructor({api:t}){this.CSS={animation:"wobble"},this.api=t}render(){return{icon:Sc,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const t=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(t+1);if(!n)throw new Error("Unable to move Block down since it is already the last");const i=n.holder,s=i.getBoundingClientRect();let a=Math.abs(window.innerHeight-i.offsetHeight);s.top<window.innerHeight&&(a=window.scrollY+i.offsetHeight),window.scrollTo(0,a),this.api.blocks.move(t+1),this.api.toolbar.toggleBlockSettings(!0)}}Dc.isTune=!0;class Pc{constructor({api:t}){this.api=t}render(){return{icon:n1,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}Pc.isTune=!0;class Hc{constructor({api:t}){this.CSS={animation:"wobble"},this.api=t}render(){return{icon:e1,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const t=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(t),i=this.api.blocks.getBlockByIndex(t-1);if(t===0||!n||!i)throw new Error("Unable to move Block up since it is already the first");const s=n.holder,a=i.holder,d=s.getBoundingClientRect(),h=a.getBoundingClientRect();let f;h.top>0?f=Math.abs(d.top)-Math.abs(h.top):f=Math.abs(d.top)+h.height,window.scrollBy(0,-1*f),this.api.blocks.move(t-1),this.api.toolbar.toggleBlockSettings(!0)}}Hc.isTune=!0;var H1=Object.defineProperty,F1=Object.getOwnPropertyDescriptor,U1=(c,t,n,i)=>{for(var s=i>1?void 0:i?F1(t,n):t,a=c.length-1,d;a>=0;a--)(d=c[a])&&(s=(i?d(t,n,s):d(s))||s);return i&&s&&H1(t,n,s),s};class Fc extends vt{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new Qt,this.toolsUnavailable=new Qt}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=Gr({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const t=this.prepareConfig();this.factory=new P1(t,this.config,this.Editor.API);const n=this.getListOfPrepareFunctions(t);if(n.length===0)return Promise.resolve();await cv(n,i=>{this.toolPrepareMethodSuccess(i)},i=>{this.toolPrepareMethodFallback(i)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const t={};return Array.from(this.inlineTools.values()).forEach(n=>{Object.assign(t,n.sanitizeConfig)}),t}destroy(){Object.values(this.available).forEach(async t=>{Ot(t.reset)&&await t.reset()})}get internalTools(){return{bold:{class:ps,isInternal:!0},italic:{class:fs,isInternal:!0},link:{class:gs,isInternal:!0},paragraph:{class:hs,inlineToolbar:!0,isInternal:!0},stub:{class:Rc,isInternal:!0},moveUp:{class:Hc,isInternal:!0},delete:{class:Pc,isInternal:!0},moveDown:{class:Dc,isInternal:!0}}}toolPrepareMethodSuccess(t){const n=this.factory.get(t.toolName);if(n.isInline()){const i=["render","surround","checkState"].filter(s=>!n.create()[s]);if(i.length){Ct(`Incorrect Inline Tool: ${n.name}. Some of required methods is not implemented %o`,"warn",i),this.toolsUnavailable.set(n.name,n);return}}this.toolsAvailable.set(n.name,n)}toolPrepareMethodFallback(t){this.toolsUnavailable.set(t.toolName,this.factory.get(t.toolName))}getListOfPrepareFunctions(t){const n=[];return Object.entries(t).forEach(([i,s])=>{n.push({function:Ot(s.class.prepare)?s.class.prepare:()=>{},data:{toolName:i,config:s.config}})}),n}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(t=>{this.assignInlineToolsToBlockTool(t),this.assignBlockTunesToBlockTool(t)})}assignInlineToolsToBlockTool(t){if(this.config.inlineToolbar!==!1){if(t.enabledInlineTools===!0){t.inlineTools=new Qt(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(n=>[n,this.inlineTools.get(n)]):Array.from(this.inlineTools.entries()));return}Array.isArray(t.enabledInlineTools)&&(t.inlineTools=new Qt(t.enabledInlineTools.map(n=>[n,this.inlineTools.get(n)])))}}assignBlockTunesToBlockTool(t){if(t.enabledBlockTunes!==!1){if(Array.isArray(t.enabledBlockTunes)){const n=new Qt(t.enabledBlockTunes.map(i=>[i,this.blockTunes.get(i)]));t.tunes=new Qt([...n,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const n=new Qt(this.config.tunes.map(i=>[i,this.blockTunes.get(i)]));t.tunes=new Qt([...n,...this.blockTunes.internalTools]);return}t.tunes=this.blockTunes.internalTools}}validateTools(){for(const t in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,t)){if(t in this.internalTools)return;const n=this.config.tools[t];if(!Ot(n)&&!Ot(n.class))throw Error(`Tool «${t}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const t={};for(const n in this.config.tools)Xt(this.config.tools[n])?t[n]=this.config.tools[n]:t[n]={class:this.config.tools[n]};return t}}U1([Gn],Fc.prototype,"getAllInlineToolsSanitizeConfig",1);const z1=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}
`;class W1 extends vt{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=nc(()=>{this.windowResize()},200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const t=this.nodes.wrapper.querySelector(`.${Gt.CSS.content}`);return t?(this.contentRectCache=t.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(t){t?this.disableModuleBindings():window.requestIdleCallback(()=>{this.enableModuleBindings()},{timeout:2e3})}checkEmptiness(){const{BlockManager:t}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,t.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:t,BlockSettings:n,InlineToolbar:i,ConversionToolbar:s}=this.Editor;return n.opened||i.opened||s.opened||t.toolbox.opened}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([t,n])=>n.flipper instanceof Qe).some(([t,n])=>n.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:t,BlockSettings:n,InlineToolbar:i,ConversionToolbar:s}=this.Editor;n.close(),i.close(),s.close(),t.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<bc}make(){this.nodes.holder=L.getHolder(this.config.holder),this.nodes.wrapper=L.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=L.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const t="editor-js-styles";if(L.get(t))return;const n=L.make("style",null,{id:t,textContent:z1.toString()});this.config.style&&!Le(this.config.style)&&this.config.style.nonce&&n.setAttribute("nonce",this.config.style.nonce),L.prepend(document.head,n)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",n=>{this.redactorClicked(n)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",n=>{this.documentTouched(n)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",n=>{this.documentTouched(n)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(document,"keydown",n=>{this.documentKeydown(n)},!0),this.readOnlyMutableListeners.on(document,"mousedown",n=>{this.documentClicked(n)},!0);const t=nc(()=>{this.selectionChanged()},180);this.readOnlyMutableListeners.on(document,"selectionchange",t,!0),this.readOnlyMutableListeners.on(window,"resize",()=>{this.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let t;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",Kr(n=>{const i=n.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||i&&t!==i&&(t=i,this.eventsDispatcher.emit(Lc,{block:this.Editor.BlockManager.getBlockByChildNode(i)}))},20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(t){switch(t.keyCode){case at.ENTER:this.enterPressed(t);break;case at.BACKSPACE:case at.DELETE:this.backspacePressed(t);break;case at.ESC:this.escapePressed(t);break;default:this.defaultBehaviour(t);break}}defaultBehaviour(t){const{currentBlock:n}=this.Editor.BlockManager,i=t.target.closest(`.${this.CSS.editorWrapper}`),s=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey;if(n!==void 0&&i===null){this.Editor.BlockEvents.keydown(t);return}i||n&&s||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close())}backspacePressed(t){const{BlockManager:n,BlockSelection:i,Caret:s}=this.Editor;if(i.anyBlockSelected&&!et.isSelectionExists){const a=n.removeSelectedBlocks(),d=n.insertDefaultBlockAtIndex(a,!0);s.setToBlock(d,s.positions.START),i.clearSelection(t),t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()}}escapePressed(t){this.Editor.BlockSelection.clearSelection(t),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(t){const{BlockManager:n,BlockSelection:i}=this.Editor,s=n.currentBlockIndex>=0;if(i.anyBlockSelected&&!et.isSelectionExists){i.clearSelection(t),t.preventDefault(),t.stopImmediatePropagation(),t.stopPropagation();return}if(!this.someToolbarOpened&&s&&t.target.tagName==="BODY"){const a=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(a),this.Editor.Toolbar.moveAndOpen(a)}this.Editor.BlockSelection.clearSelection(t)}documentClicked(t){var n,i;if(!t.isTrusted)return;const s=t.target;this.nodes.holder.contains(s)||et.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());const a=(n=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:n.contains(s),d=(i=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:i.contains(s),h=a||d;if(this.Editor.BlockSettings.opened&&!h){this.Editor.BlockSettings.close();const f=this.Editor.BlockManager.getBlockByChildNode(s);this.Editor.Toolbar.moveAndOpen(f)}this.Editor.BlockSelection.clearSelection(t)}documentTouched(t){let n=t.target;if(n===this.nodes.redactor){const i=t instanceof MouseEvent?t.clientX:t.touches[0].clientX,s=t instanceof MouseEvent?t.clientY:t.touches[0].clientY;n=document.elementFromPoint(i,s)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(n)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(t){if(!et.isCollapsed)return;const n=t.target,i=t.metaKey||t.ctrlKey;if(L.isAnchor(n)&&i){t.stopImmediatePropagation(),t.stopPropagation();const s=n.getAttribute("href"),a=pv(s);gv(a);return}this.processBottomZoneClick(t)}processBottomZoneClick(t){const n=this.Editor.BlockManager.getBlockByIndex(-1),i=L.offset(n.holder).bottom,s=t.pageY,{BlockSelection:a}=this.Editor;if(t.target instanceof Element&&t.target.isEqualNode(this.nodes.redactor)&&!a.anyBlockSelected&&i<s){t.stopImmediatePropagation(),t.stopPropagation();const{BlockManager:d,Caret:h,Toolbar:f}=this.Editor;(!d.lastBlock.tool.isDefault||!d.lastBlock.isEmpty)&&d.insertAtEnd(),h.setToTheLastBlock(),f.moveAndOpen(d.lastBlock)}}selectionChanged(){const{CrossBlockSelection:t,BlockSelection:n}=this.Editor,i=et.anchorElement;if(t.isCrossBlockSelectionStarted&&n.anyBlockSelected&&et.get().removeAllRanges(),!i){et.range||this.Editor.InlineToolbar.close();return}const s=i.closest(`.${Gt.CSS.content}`)===null;if(s&&(this.Editor.InlineToolbar.containsNode(i)||this.Editor.InlineToolbar.close(),i.dataset.inlineToolbar!=="true"))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(i);const a=s!==!0;this.Editor.InlineToolbar.tryToShow(!0,a)}}const $1={BlocksAPI:Sv,CaretAPI:Tv,EventsAPI:_v,I18nAPI:rs,API:Bv,InlineToolbarAPI:Lv,ListenersAPI:Iv,NotifierAPI:Rv,ReadOnlyAPI:Nv,SanitizerAPI:Wv,SaverAPI:$v,SelectionAPI:jv,StylesAPI:qv,ToolbarAPI:Yv,TooltipAPI:Vv,UiAPI:Jv,BlockSettings:p1,ConversionToolbar:we,Toolbar:w1,InlineToolbar:k1,BlockEvents:y1,BlockManager:E1,BlockSelection:S1,Caret:bi,CrossBlockSelection:T1,DragNDrop:_1,ModificationsObserver:B1,Paste:Oc,ReadOnly:L1,RectangleSelection:wo,Renderer:I1,Saver:M1,Tools:Fc,UI:W1};class j1{constructor(t){this.moduleInstances={},this.eventsDispatcher=new wi;let n,i;this.isReady=new Promise((s,a)=>{n=s,i=a}),Promise.resolve().then(async()=>{this.configuration=t,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:s,Caret:a,UI:d,ModificationsObserver:h}=this.moduleInstances;d.checkEmptiness(),h.enable(),this.configuration.autofocus&&a.setToBlock(s.blocks[0],a.positions.START),n()}).catch(s=>{Ct(`Editor.js is not ready because of ${s}`,"error"),i(s)})}set configuration(t){var n,i;Xt(t)?this.config={...t}:this.config={holder:t},Xr(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=fc.VERBOSE),av(this.config.logLevel),Xr(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const s={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(Le(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[s]}),this.config.readOnly=this.config.readOnly||!1,(n=this.config.i18n)!=null&&n.messages&&ce.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((i=this.config.i18n)==null?void 0:i.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:t,holder:n}=this.config;if(t&&n)throw Error("«holderId» and «holder» param can't assign at the same time.");if(hn(n)&&!L.get(n))throw Error(`element with ID «${n}» is missing. Pass correct holder's ID.`);if(n&&Xt(n)&&!L.isElement(n))throw Error("«holder» value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((t,n)=>t.then(async()=>{try{await this.moduleInstances[n].prepare()}catch(i){if(i instanceof wc)throw new Error(i.message);Ct(`Module ${n} was skipped because of %o`,"warn",i)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries($1).forEach(([t,n])=>{try{this.moduleInstances[t]=new n({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(i){Ct("[constructModules]",`Module ${t} skipped because`,"error",i)}})}configureModules(){for(const t in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,t)&&(this.moduleInstances[t].state=this.getModulesDiff(t))}getModulesDiff(t){const n={};for(const i in this.moduleInstances)i!==t&&(n[i]=this.moduleInstances[i]);return n}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class q1{static get version(){return"2.29.0"}constructor(t){let n=()=>{};Xt(t)&&Ot(t.onReady)&&(n=t.onReady);const i=new j1(t);this.isReady=i.isReady.then(()=>{this.exportAPI(i),n()})}exportAPI(t){const n=["configuration"],i=()=>{Object.values(t.moduleInstances).forEach(s=>{Ot(s.destroy)&&s.destroy(),s.listeners.removeAll()}),Zv(),t=null;for(const s in this)Object.prototype.hasOwnProperty.call(this,s)&&delete this[s];Object.setPrototypeOf(this,null)};n.forEach(s=>{this[s]=t[s]}),this.destroy=i,Object.setPrototypeOf(this,t.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([s,a])=>{Object.entries(a).forEach(([d,h])=>{this[h]=t.moduleInstances.API.methods[s][d]})})}}var Uc={exports:{}};(function(c,t){(function(n,i){c.exports=i()})(self,()=>(()=>{var n={523:(d,h,f)=>{f.d(h,{A:()=>I});var m=f(601),x=f.n(m),v=f(314),_=f.n(v)()(x());_.push([d.id,`.ce-block--drop-target .ce-block__content:before {
  content: "";
  position: absolute;
  top: 50%;
  left: -20px;
  margin-top: -1px;
  height: 8px;
  width: 8px;
  border: solid #a0a0a0;
  border-width: 1px 1px 0 0;
  -webkit-transform-origin: right;
  transform-origin: right;
  -webkit-transform: rotate(45deg);
  transform: rotate(45deg);
}

.ce-block--drop-target .ce-block__content:after {
  background: none;
}
`,""]);const I=_},314:d=>{d.exports=function(h){var f=[];return f.toString=function(){return this.map(function(m){var x="",v=m[5]!==void 0;return m[4]&&(x+="@supports (".concat(m[4],") {")),m[2]&&(x+="@media ".concat(m[2]," {")),v&&(x+="@layer".concat(m[5].length>0?" ".concat(m[5]):""," {")),x+=h(m),v&&(x+="}"),m[2]&&(x+="}"),m[4]&&(x+="}"),x}).join("")},f.i=function(m,x,v,_,I){typeof m=="string"&&(m=[[null,m,void 0]]);var E={};if(v)for(var w=0;w<this.length;w++){var y=this[w][0];y!=null&&(E[y]=!0)}for(var N=0;N<m.length;N++){var O=[].concat(m[N]);v&&E[O[0]]||(I!==void 0&&(O[5]===void 0||(O[1]="@layer".concat(O[5].length>0?" ".concat(O[5]):""," {").concat(O[1],"}")),O[5]=I),x&&(O[2]&&(O[1]="@media ".concat(O[2]," {").concat(O[1],"}")),O[2]=x),_&&(O[4]?(O[1]="@supports (".concat(O[4],") {").concat(O[1],"}"),O[4]=_):O[4]="".concat(_)),f.push(O))}},f}},601:d=>{d.exports=function(h){return h[1]}},72:d=>{var h=[];function f(v){for(var _=-1,I=0;I<h.length;I++)if(h[I].identifier===v){_=I;break}return _}function m(v,_){for(var I={},E=[],w=0;w<v.length;w++){var y=v[w],N=_.base?y[0]+_.base:y[0],O=I[N]||0,Y="".concat(N," ").concat(O);I[N]=O+1;var U=f(Y),P={css:y[1],media:y[2],sourceMap:y[3],supports:y[4],layer:y[5]};if(U!==-1)h[U].references++,h[U].updater(P);else{var q=x(P,_);_.byIndex=w,h.splice(w,0,{identifier:Y,updater:q,references:1})}E.push(Y)}return E}function x(v,_){var I=_.domAPI(_);return I.update(v),function(E){if(E){if(E.css===v.css&&E.media===v.media&&E.sourceMap===v.sourceMap&&E.supports===v.supports&&E.layer===v.layer)return;I.update(v=E)}else I.remove()}}d.exports=function(v,_){var I=m(v=v||[],_=_||{});return function(E){E=E||[];for(var w=0;w<I.length;w++){var y=f(I[w]);h[y].references--}for(var N=m(E,_),O=0;O<I.length;O++){var Y=f(I[O]);h[Y].references===0&&(h[Y].updater(),h.splice(Y,1))}I=N}}},659:d=>{var h={};d.exports=function(f,m){var x=function(v){if(h[v]===void 0){var _=document.querySelector(v);if(window.HTMLIFrameElement&&_ instanceof window.HTMLIFrameElement)try{_=_.contentDocument.head}catch{_=null}h[v]=_}return h[v]}(f);if(!x)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");x.appendChild(m)}},540:d=>{d.exports=function(h){var f=document.createElement("style");return h.setAttributes(f,h.attributes),h.insert(f,h.options),f}},56:(d,h,f)=>{d.exports=function(m){var x=f.nc;x&&m.setAttribute("nonce",x)}},825:d=>{d.exports=function(h){if(typeof document>"u")return{update:function(){},remove:function(){}};var f=h.insertStyleElement(h);return{update:function(m){(function(x,v,_){var I="";_.supports&&(I+="@supports (".concat(_.supports,") {")),_.media&&(I+="@media ".concat(_.media," {"));var E=_.layer!==void 0;E&&(I+="@layer".concat(_.layer.length>0?" ".concat(_.layer):""," {")),I+=_.css,E&&(I+="}"),_.media&&(I+="}"),_.supports&&(I+="}");var w=_.sourceMap;w&&typeof btoa<"u"&&(I+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(w))))," */")),v.styleTagTransform(I,x,v.options)})(f,h,m)},remove:function(){(function(m){if(m.parentNode===null)return!1;m.parentNode.removeChild(m)})(f)}}}},113:d=>{d.exports=function(h,f){if(f.styleSheet)f.styleSheet.cssText=h;else{for(;f.firstChild;)f.removeChild(f.firstChild);f.appendChild(document.createTextNode(h))}}}},i={};function s(d){var h=i[d];if(h!==void 0)return h.exports;var f=i[d]={id:d,exports:{}};return n[d](f,f.exports,s),f.exports}s.n=d=>{var h=d&&d.__esModule?()=>d.default:()=>d;return s.d(h,{a:h}),h},s.d=(d,h)=>{for(var f in h)s.o(h,f)&&!s.o(d,f)&&Object.defineProperty(d,f,{enumerable:!0,get:h[f]})},s.o=(d,h)=>Object.prototype.hasOwnProperty.call(d,h),s.nc=void 0;var a={};return(()=>{s.d(a,{default:()=>K});var d=s(72),h=s.n(d),f=s(825),m=s.n(f),x=s(659),v=s.n(x),_=s(56),I=s.n(_),E=s(540),w=s.n(E),y=s(113),N=s.n(y),O=s(523),Y={};function U(T){return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(B){return typeof B}:function(B){return B&&typeof Symbol=="function"&&B.constructor===Symbol&&B!==Symbol.prototype?"symbol":typeof B},U(T)}function P(T,B){for(var R=0;R<B.length;R++){var A=B[R];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(T,q(A.key),A)}}function q(T){var B=function(R,A){if(U(R)!="object"||!R)return R;var j=R[Symbol.toPrimitive];if(j!==void 0){var X=j.call(R,"string");if(U(X)!="object")return X;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(R)}(T);return U(B)=="symbol"?B:B+""}Y.styleTagTransform=N(),Y.setAttributes=I(),Y.insert=v().bind(null,"head"),Y.domAPI=m(),Y.insertStyleElement=w(),h()(O.A,Y),O.A&&O.A.locals&&O.A.locals;var K=function(){return T=function A(j,X){var J=j.configuration,V=j.blocks,wt=j.toolbar,ut=j.save;(function(Et,Ht){if(!(Et instanceof Ht))throw new TypeError("Cannot call a class as a function")})(this,A),this.toolbar=wt,this.borderStyle=X||"1px dashed #aaa",this.api=V,this.holder=typeof J.holder=="string"?document.getElementById(J.holder):J.holder,this.readOnly=J.readOnly,this.startBlock=null,this.endBlock=null,this.save=ut,this.setDragListener(),this.setDropListener()},R=[{key:"isReadOnlySupported",get:function(){return!0}}],(B=[{key:"setElementCursor",value:function(A){if(A){var j=document.createRange(),X=window.getSelection();j.setStart(A.childNodes[0],0),j.collapse(!0),X.removeAllRanges(),X.addRange(j),A.focus()}}},{key:"setDragListener",value:function(){var A=this;if(!this.readOnly){var j=this.holder.querySelector(".ce-toolbar__settings-btn");j.setAttribute("draggable","true"),j.addEventListener("dragstart",function(){A.startBlock=A.api.getCurrentBlockIndex()}),j.addEventListener("drag",function(){if(A.toolbar.close(),!A.isTheOnlyBlock()){var X=A.holder.querySelectorAll(".ce-block"),J=A.holder.querySelector(".ce-block--drop-target");A.setElementCursor(J),A.setBorderBlocks(X,J)}})}}},{key:"setBorderBlocks",value:function(A,j){var X=this;Object.values(A).forEach(function(J){var V=J.querySelector(".ce-block__content");J!==j?(V.style.removeProperty("border-top"),V.style.removeProperty("border-bottom")):Object.keys(A).find(function(wt){return A[wt]===j})>X.startBlock?V.style.borderBottom=X.borderStyle:V.style.borderTop=X.borderStyle})}},{key:"setDropListener",value:function(){var A=this;document.addEventListener("drop",function(j){var X=j.target;if(A.holder.contains(X)&&A.startBlock!==null){var J=A.getDropTarget(X);if(J){var V=J.querySelector(".ce-block__content");V.style.removeProperty("border-top"),V.style.removeProperty("border-bottom"),A.endBlock=A.getTargetPosition(J),A.moveBlocks()}}A.startBlock=null})}},{key:"getDropTarget",value:function(A){return A.classList.contains("ce-block")?A:A.closest(".ce-block")}},{key:"getTargetPosition",value:function(A){return Array.from(A.parentNode.children).indexOf(A)}},{key:"isTheOnlyBlock",value:function(){return this.api.getBlocksCount()===1}},{key:"moveBlocks",value:function(){this.isTheOnlyBlock()||this.api.move(this.endBlock,this.startBlock)}}])&&P(T.prototype,B),R&&P(T,R),Object.defineProperty(T,"prototype",{writable:!1}),T;var T,B,R}()})(),a.default})())})(Uc);var Y1=Uc.exports;const K1=ns(Y1);var cc=null;let yi=dc.debounce(G1,200);setTimeout(()=>yi(),500);Livewire.hook("morph.added",yi);Livewire.hook("morph.updated",yi);Livewire.hook("morph.removed",yi);function G1(){const c=document.getElementById("editorjs");if(c){if(c.dataset.articleId===cc&&c.children.length>0){console.log("Article ID same as last article ID");return}cc=c.dataset.articleId,X1(c)}}function X1(c){console.log(c.dataset.saveArticleUrl),console.log(c.dataset.uploadImageByUrlUrl),console.log(c.dataset.uploadImageUrl);const t=JSON.parse(c.dataset.editorjsData),n=new q1({holder:"editorjs",data:t,tools:{header:{class:Zb,inlineToolbar:!0},list:{class:Bb,inlineToolbar:!0},table:zb,assistant:{class:Wb,config:{assistantUrl:c.dataset.assistantUrl,csrfToken:document.querySelector('input[name="_token"]').value},shortcut:"CTRL+M"},image:{class:ov,config:{endpoints:{byFile:c.dataset.uploadImageUrl,byUrl:c.dataset.uploadImageByUrlUrl},additionalRequestHeaders:{"X-CSRF-Token":document.querySelector('input[name="_token"]').value}}}},onReady:()=>{new K1(n),new Tb({editor:n,config:{shortcuts:{undo:"CMD+Z",redo:"CMD+SHIFT+Z"}}}).initialize(t)},onChange:dc.debounce(()=>Z1(n,c),200)})}function Z1(c,t){c.save().then(n=>{fetch(t.dataset.saveArticleUrl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-Token":document.querySelector('input[name="_token"]').value},body:JSON.stringify({data:n})}).then(i=>i.json()).then(i=>{console.log("Success:",i)}).catch(i=>{console.error("Error:",i)})})}
