var mb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qr(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function Nr(){}Object.assign(Nr,{default:Nr,register:Nr,revert:function(){},__esModule:!0});Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(l){const e=(this.document||this.ownerDocument).querySelectorAll(l);let n=e.length;for(;--n>=0&&e.item(n)!==this;);return n>-1});Element.prototype.closest||(Element.prototype.closest=function(l){let e=this;if(!document.documentElement.contains(e))return null;do{if(e.matches(l))return e;e=e.parentElement||e.parentNode}while(e!==null);return null});Element.prototype.prepend||(Element.prototype.prepend=function(l){const e=document.createDocumentFragment();Array.isArray(l)||(l=[l]),l.forEach(n=>{const r=n instanceof Node;e.appendChild(r?n:document.createTextNode(n))}),this.insertBefore(e,this.firstChild)});Element.prototype.scrollIntoViewIfNeeded||(Element.prototype.scrollIntoViewIfNeeded=function(l){l=arguments.length===0?!0:!!l;const e=this.parentNode,n=window.getComputedStyle(e,null),r=parseInt(n.getPropertyValue("border-top-width")),s=parseInt(n.getPropertyValue("border-left-width")),c=this.offsetTop-e.offsetTop<e.scrollTop,h=this.offsetTop-e.offsetTop+this.clientHeight-r>e.scrollTop+e.clientHeight,f=this.offsetLeft-e.offsetLeft<e.scrollLeft,m=this.offsetLeft-e.offsetLeft+this.clientWidth-s>e.scrollLeft+e.clientWidth,k=c&&!h;(c||h)&&l&&(e.scrollTop=this.offsetTop-e.offsetTop-e.clientHeight/2-r+this.clientHeight/2),(f||m)&&l&&(e.scrollLeft=this.offsetLeft-e.offsetLeft-e.clientWidth/2-s+this.clientWidth/2),(c||h||f||m)&&!l&&this.scrollIntoView(k)});window.requestIdleCallback=window.requestIdleCallback||function(l){const e=Date.now();return setTimeout(function(){l({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};window.cancelIdleCallback=window.cancelIdleCallback||function(l){clearTimeout(l)};let bb=(l=21)=>crypto.getRandomValues(new Uint8Array(l)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");var ec=(l=>(l.VERBOSE="VERBOSE",l.INFO="INFO",l.WARN="WARN",l.ERROR="ERROR",l))(ec||{});const z={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,LEFT:37,UP:38,DOWN:40,RIGHT:39,DELETE:46,META:91,SLASH:191},vb={LEFT:0,WHEEL:1,RIGHT:2,BACKWARD:3,FORWARD:4};function uo(l,e,n="log",r,s="color: inherit"){if(!("console"in window)||!window.console[n])return;const c=["info","log","warn","error"].includes(n),h=[];switch(uo.logLevel){case"ERROR":if(n!=="error")return;break;case"WARN":if(!["error","warn"].includes(n))return;break;case"INFO":if(!c||l)return;break}r&&h.push(r);const f="Editor.js 2.29.0",m=`line-height: 1em;
            color: #006FEA;
            display: inline-block;
            font-size: 11px;
            line-height: 1em;
            background-color: #fff;
            padding: 4px 9px;
            border-radius: 30px;
            border: 1px solid rgba(56, 138, 229, 0.16);
            margin: 4px 5px 4px 0;`;l&&(c?(h.unshift(m,s),e=`%c${f}%c ${e}`):e=`( ${f} )${e}`);try{c?r?console[n](`${e} %o`,...h):console[n](e,...h):console[n](e)}catch{}}uo.logLevel="VERBOSE";function wb(l){uo.logLevel=l}const it=uo.bind(window,!1),ke=uo.bind(window,!0);function hn(l){return Object.prototype.toString.call(l).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function pt(l){return hn(l)==="function"||hn(l)==="asyncfunction"}function At(l){return hn(l)==="object"}function Je(l){return hn(l)==="string"}function kb(l){return hn(l)==="boolean"}function Pl(l){return hn(l)==="number"}function Hl(l){return hn(l)==="undefined"}function pe(l){return l?Object.keys(l).length===0&&l.constructor===Object:!0}function nc(l){return l>47&&l<58||l===32||l===13||l===229||l>64&&l<91||l>95&&l<112||l>185&&l<193||l>218&&l<223}async function xb(l,e=()=>{},n=()=>{}){async function r(s,c,h){try{await s.function(s.data),await c(Hl(s.data)?{}:s.data)}catch{h(Hl(s.data)?{}:s.data)}}return l.reduce(async(s,c)=>(await s,r(c,e,n)),Promise.resolve())}function oc(l){return Array.prototype.slice.call(l)}function li(l,e){return function(){const n=this,r=arguments;window.setTimeout(()=>l.apply(n,r),e)}}function yb(l){return l.name.split(".").pop()}function Cb(l){return/^[-\w]+\/([-+\w]+|\*)$/.test(l)}function Fl(l,e,n){let r;return(...s)=>{const c=this,h=()=>{r=null,n||l.apply(c,s)},f=n&&!r;window.clearTimeout(r),r=window.setTimeout(h,e),f&&l.apply(c,s)}}function Pr(l,e,n=void 0){let r,s,c,h=null,f=0;n||(n={});const m=function(){f=n.leading===!1?0:Date.now(),h=null,c=l.apply(r,s),h||(r=s=null)};return function(){const k=Date.now();!f&&n.leading===!1&&(f=k);const B=e-(k-f);return r=this,s=arguments,B<=0||B>e?(h&&(clearTimeout(h),h=null),f=k,c=l.apply(r,s),h||(r=s=null)):!h&&n.trailing!==!1&&(h=setTimeout(m,B)),c}}function Sb(){const l={win:!1,mac:!1,x11:!1,linux:!1},e=Object.keys(l).find(n=>window.navigator.appVersion.toLowerCase().indexOf(n)!==-1);return e&&(l[e]=!0),l}function Mn(l){return l[0].toUpperCase()+l.slice(1)}function Hr(l,...e){if(!e.length)return l;const n=e.shift();if(At(l)&&At(n))for(const r in n)At(n[r])?(l[r]||Object.assign(l,{[r]:{}}),Hr(l[r],n[r])):Object.assign(l,{[r]:n[r]});return Hr(l,...e)}function hi(l){const e=Sb();return l=l.replace(/shift/gi,"⇧").replace(/backspace/gi,"⌫").replace(/enter/gi,"⏎").replace(/up/gi,"↑").replace(/left/gi,"→").replace(/down/gi,"↓").replace(/right/gi,"←").replace(/escape/gi,"⎋").replace(/insert/gi,"Ins").replace(/delete/gi,"␡").replace(/\+/gi," + "),e.mac?l=l.replace(/ctrl|cmd/gi,"⌘").replace(/alt/gi,"⌥"):l=l.replace(/cmd/gi,"Ctrl").replace(/windows/gi,"WIN"),l}function Eb(l){try{return new URL(l).href}catch{}return l.substring(0,2)==="//"?window.location.protocol+l:window.location.origin+l}function Tb(){return bb(10)}function _b(l){window.open(l,"_blank")}function Bb(l=""){return`${l}${Math.floor(Math.random()*1e8).toString(16)}`}function Fr(l,e,n){const r=`«${e}» is deprecated and will be removed in the next major release. Please use the «${n}» instead.`;l&&ke(r,"warn")}function Rn(l,e,n){const r=n.value?"value":"get",s=n[r],c=`#${e}Cache`;if(n[r]=function(...h){return this[c]===void 0&&(this[c]=s.apply(this,...h)),this[c]},r==="get"&&n.set){const h=n.set;n.set=function(f){delete l[c],h.apply(this,f)}}return n}const ic=650;function dn(){return window.matchMedia(`(max-width: ${ic}px)`).matches}const Ul=typeof window<"u"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1);function Ib(l,e){const n=Array.isArray(l)||At(l),r=Array.isArray(e)||At(e);return n||r?JSON.stringify(l)===JSON.stringify(e):l===e}let y=class zt{static isSingleTag(e){return e.tagName&&["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"].includes(e.tagName)}static isLineBreakTag(e){return e&&e.tagName&&["BR","WBR"].includes(e.tagName)}static make(e,n=null,r={}){const s=document.createElement(e);Array.isArray(n)?s.classList.add(...n):n&&s.classList.add(n);for(const c in r)Object.prototype.hasOwnProperty.call(r,c)&&(s[c]=r[c]);return s}static text(e){return document.createTextNode(e)}static append(e,n){Array.isArray(n)?n.forEach(r=>e.appendChild(r)):e.appendChild(n)}static prepend(e,n){Array.isArray(n)?(n=n.reverse(),n.forEach(r=>e.prepend(r))):e.prepend(n)}static swap(e,n){const r=document.createElement("div"),s=e.parentNode;s.insertBefore(r,e),s.insertBefore(e,n),s.insertBefore(n,r),s.removeChild(r)}static find(e=document,n){return e.querySelector(n)}static get(e){return document.getElementById(e)}static findAll(e=document,n){return e.querySelectorAll(n)}static get allInputsSelector(){return"[contenteditable=true], textarea, input:not([type]), "+["text","password","email","number","search","tel","url"].map(e=>`input[type="${e}"]`).join(", ")}static findAllInputs(e){return oc(e.querySelectorAll(zt.allInputsSelector)).reduce((n,r)=>zt.isNativeInput(r)||zt.containsOnlyInlineElements(r)?[...n,r]:[...n,...zt.getDeepestBlockElements(r)],[])}static getDeepestNode(e,n=!1){const r=n?"lastChild":"firstChild",s=n?"previousSibling":"nextSibling";if(e&&e.nodeType===Node.ELEMENT_NODE&&e[r]){let c=e[r];if(zt.isSingleTag(c)&&!zt.isNativeInput(c)&&!zt.isLineBreakTag(c))if(c[s])c=c[s];else if(c.parentNode[s])c=c.parentNode[s];else return c.parentNode;return this.getDeepestNode(c,n)}return e}static isElement(e){return Pl(e)?!1:e&&e.nodeType&&e.nodeType===Node.ELEMENT_NODE}static isFragment(e){return Pl(e)?!1:e&&e.nodeType&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE}static isContentEditable(e){return e.contentEditable==="true"}static isNativeInput(e){const n=["INPUT","TEXTAREA"];return e&&e.tagName?n.includes(e.tagName):!1}static canSetCaret(e){let n=!0;if(zt.isNativeInput(e))switch(e.type){case"file":case"checkbox":case"radio":case"hidden":case"submit":case"button":case"image":case"reset":n=!1;break}else n=zt.isContentEditable(e);return n}static isNodeEmpty(e,n){let r;return this.isSingleTag(e)&&!this.isLineBreakTag(e)?!1:(this.isElement(e)&&this.isNativeInput(e)?r=e.value:r=e.textContent.replace("​",""),n&&(r=r.replace(new RegExp(n,"g"),"")),r.trim().length===0)}static isLeaf(e){return e?e.childNodes.length===0:!1}static isEmpty(e,n){e.normalize();const r=[e];for(;r.length>0;)if(e=r.shift(),!!e){if(this.isLeaf(e)&&!this.isNodeEmpty(e,n))return!1;e.childNodes&&r.push(...Array.from(e.childNodes))}return!0}static isHTMLString(e){const n=zt.make("div");return n.innerHTML=e,n.childElementCount>0}static getContentLength(e){return zt.isNativeInput(e)?e.value.length:e.nodeType===Node.TEXT_NODE?e.length:e.textContent.length}static get blockElements(){return["address","article","aside","blockquote","canvas","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","noscript","ol","output","p","pre","ruby","section","table","tbody","thead","tr","tfoot","ul","video"]}static containsOnlyInlineElements(e){let n;Je(e)?(n=document.createElement("div"),n.innerHTML=e):n=e;const r=s=>!zt.blockElements.includes(s.tagName.toLowerCase())&&Array.from(s.children).every(r);return Array.from(n.children).every(r)}static getDeepestBlockElements(e){return zt.containsOnlyInlineElements(e)?[e]:Array.from(e.children).reduce((n,r)=>[...n,...zt.getDeepestBlockElements(r)],[])}static getHolder(e){return Je(e)?document.getElementById(e):e}static isAnchor(e){return e.tagName.toLowerCase()==="a"}static offset(e){const n=e.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,s=window.pageYOffset||document.documentElement.scrollTop,c=n.top+s,h=n.left+r;return{top:c,left:h,bottom:c+n.height,right:h+n.width}}};const Lb={blockTunes:{toggler:{"Click to tune":"","or drag to move":""}},inlineToolbar:{converter:{"Convert to":""}},toolbar:{toolbox:{Add:""}},popover:{Filter:"","Nothing found":""}},Ab={Text:"",Link:"",Bold:"",Italic:""},Mb={link:{"Add a link":""},stub:{"The block can not be displayed correctly.":""}},Ob={delete:{Delete:"","Click to delete":""},moveUp:{"Move up":""},moveDown:{"Move down":""}},rc={ui:Lb,toolNames:Ab,tools:Mb,blockTunes:Ob},In=class{static ui(l,e){return In._t(l,e)}static t(l,e){return In._t(l,e)}static setDictionary(l){In.currentDictionary=l}static _t(l,e){const n=In.getNamespace(l);return!n||!n[e]?e:n[e]}static getNamespace(l){return l.split(".").reduce((e,n)=>!e||!Object.keys(e).length?{}:e[n],In.currentDictionary)}};let Xt=In;Xt.currentDictionary=rc;class sc extends Error{}class ui{constructor(){this.subscribers={}}on(e,n){e in this.subscribers||(this.subscribers[e]=[]),this.subscribers[e].push(n)}once(e,n){e in this.subscribers||(this.subscribers[e]=[]);const r=s=>{const c=n(s),h=this.subscribers[e].indexOf(r);return h!==-1&&this.subscribers[e].splice(h,1),c};this.subscribers[e].push(r)}emit(e,n){pe(this.subscribers)||!this.subscribers[e]||this.subscribers[e].reduce((r,s)=>{const c=s(r);return c!==void 0?c:r},n)}off(e,n){if(this.subscribers[e]===void 0){console.warn(`EventDispatcher .off(): there is no subscribers for event "${e.toString()}". Probably, .off() called before .on()`);return}for(let r=0;r<this.subscribers[e].length;r++)if(this.subscribers[e][r]===n){delete this.subscribers[e][r];break}}destroy(){this.subscribers={}}}function cn(l){Object.setPrototypeOf(this,{get id(){return l.id},get name(){return l.name},get config(){return l.config},get holder(){return l.holder},get isEmpty(){return l.isEmpty},get selected(){return l.selected},set stretched(e){l.stretched=e},get stretched(){return l.stretched},get focusable(){return l.focusable},call(e,n){return l.call(e,n)},save(){return l.save()},validate(e){return l.validate(e)},dispatchChange(){l.dispatchChange()}})}class Gr{constructor(){this.allListeners=[]}on(e,n,r,s=!1){const c=Bb("l"),h={id:c,element:e,eventType:n,handler:r,options:s};if(!this.findOne(e,n,r))return this.allListeners.push(h),e.addEventListener(n,r,s),c}off(e,n,r,s){const c=this.findAll(e,n,r);c.forEach((h,f)=>{const m=this.allListeners.indexOf(c[f]);m>-1&&(this.allListeners.splice(m,1),h.element.removeEventListener(h.eventType,h.handler,h.options))})}offById(e){const n=this.findById(e);n&&n.element.removeEventListener(n.eventType,n.handler,n.options)}findOne(e,n,r){const s=this.findAll(e,n,r);return s.length>0?s[0]:null}findAll(e,n,r){let s;const c=e?this.findByEventTarget(e):[];return e&&n&&r?s=c.filter(h=>h.eventType===n&&h.handler===r):e&&n?s=c.filter(h=>h.eventType===n):s=c,s}removeAll(){this.allListeners.map(e=>{e.element.removeEventListener(e.eventType,e.handler,e.options)}),this.allListeners=[]}destroy(){this.removeAll()}findByEventTarget(e){return this.allListeners.filter(n=>{if(n.element===e)return n})}findByType(e){return this.allListeners.filter(n=>{if(n.eventType===e)return n})}findByHandler(e){return this.allListeners.filter(n=>{if(n.handler===e)return n})}findById(e){return this.allListeners.find(n=>n.id===e)}}let et=class ac{constructor({config:e,eventsDispatcher:n}){if(this.nodes={},this.listeners=new Gr,this.readOnlyMutableListeners={on:(r,s,c,h=!1)=>{this.mutableListenerIds.push(this.listeners.on(r,s,c,h))},clearAll:()=>{for(const r of this.mutableListenerIds)this.listeners.offById(r);this.mutableListenerIds=[]}},this.mutableListenerIds=[],new.target===ac)throw new TypeError("Constructors for abstract class Module are not allowed.");this.config=e,this.eventsDispatcher=n}set state(e){this.Editor=e}removeAllNodes(){for(const e in this.nodes){const n=this.nodes[e];n instanceof HTMLElement&&n.remove()}}get isRtl(){return this.config.i18n.direction==="rtl"}},U=class Ze{constructor(){this.instance=null,this.selection=null,this.savedSelectionRange=null,this.isFakeBackgroundEnabled=!1,this.commandBackground="backColor",this.commandRemoveFormat="removeFormat"}static get CSS(){return{editorWrapper:"codex-editor",editorZone:"codex-editor__redactor"}}static get anchorNode(){const e=window.getSelection();return e?e.anchorNode:null}static get anchorElement(){const e=window.getSelection();if(!e)return null;const n=e.anchorNode;return n?y.isElement(n)?n:n.parentElement:null}static get anchorOffset(){const e=window.getSelection();return e?e.anchorOffset:null}static get isCollapsed(){const e=window.getSelection();return e?e.isCollapsed:null}static get isAtEditor(){return this.isSelectionAtEditor(Ze.get())}static isSelectionAtEditor(e){if(!e)return!1;let n=e.anchorNode||e.focusNode;n&&n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);let r=null;return n&&n instanceof Element&&(r=n.closest(`.${Ze.CSS.editorZone}`)),r?r.nodeType===Node.ELEMENT_NODE:!1}static isRangeAtEditor(e){if(!e)return;let n=e.startContainer;n&&n.nodeType===Node.TEXT_NODE&&(n=n.parentNode);let r=null;return n&&n instanceof Element&&(r=n.closest(`.${Ze.CSS.editorZone}`)),r?r.nodeType===Node.ELEMENT_NODE:!1}static get isSelectionExists(){return!!Ze.get().anchorNode}static get range(){return this.getRangeFromSelection(this.get())}static getRangeFromSelection(e){return e&&e.rangeCount?e.getRangeAt(0):null}static get rect(){let e=document.selection,n,r={x:0,y:0,width:0,height:0};if(e&&e.type!=="Control")return e=e,n=e.createRange(),r.x=n.boundingLeft,r.y=n.boundingTop,r.width=n.boundingWidth,r.height=n.boundingHeight,r;if(!window.getSelection)return it("Method window.getSelection is not supported","warn"),r;if(e=window.getSelection(),e.rangeCount===null||isNaN(e.rangeCount))return it("Method SelectionUtils.rangeCount is not supported","warn"),r;if(e.rangeCount===0)return r;if(n=e.getRangeAt(0).cloneRange(),n.getBoundingClientRect&&(r=n.getBoundingClientRect()),r.x===0&&r.y===0){const s=document.createElement("span");if(s.getBoundingClientRect){s.appendChild(document.createTextNode("​")),n.insertNode(s),r=s.getBoundingClientRect();const c=s.parentNode;c.removeChild(s),c.normalize()}}return r}static get text(){return window.getSelection?window.getSelection().toString():""}static get(){return window.getSelection()}static setCursor(e,n=0){const r=document.createRange(),s=window.getSelection();return y.isNativeInput(e)?y.canSetCaret(e)?(e.focus(),e.selectionStart=e.selectionEnd=n,e.getBoundingClientRect()):void 0:(r.setStart(e,n),r.setEnd(e,n),s.removeAllRanges(),s.addRange(r),r.getBoundingClientRect())}static isRangeInsideContainer(e){const n=Ze.range;return n===null?!1:e.contains(n.startContainer)}static addFakeCursor(){const e=Ze.range;if(e===null)return;const n=y.make("span","codex-editor__fake-cursor");n.dataset.mutationFree="true",e.collapse(),e.insertNode(n)}static isFakeCursorInsideContainer(e){return y.find(e,".codex-editor__fake-cursor")!==null}static removeFakeCursor(e=document.body){const n=y.find(e,".codex-editor__fake-cursor");n&&n.remove()}removeFakeBackground(){this.isFakeBackgroundEnabled&&(this.isFakeBackgroundEnabled=!1,document.execCommand(this.commandRemoveFormat))}setFakeBackground(){document.execCommand(this.commandBackground,!1,"#a8d6ff"),this.isFakeBackgroundEnabled=!0}save(){this.savedSelectionRange=Ze.range}restore(){if(!this.savedSelectionRange)return;const e=window.getSelection();e.removeAllRanges(),e.addRange(this.savedSelectionRange)}clearSaved(){this.savedSelectionRange=null}collapseToEnd(){const e=window.getSelection(),n=document.createRange();n.selectNodeContents(e.focusNode),n.collapse(!1),e.removeAllRanges(),e.addRange(n)}findParentTag(e,n,r=10){const s=window.getSelection();let c=null;return!s||!s.anchorNode||!s.focusNode?null:([s.anchorNode,s.focusNode].forEach(h=>{let f=r;for(;f>0&&h.parentNode&&!(h.tagName===e&&(c=h,n&&h.classList&&!h.classList.contains(n)&&(c=null),c));)h=h.parentNode,f--}),c)}expandToTag(e){const n=window.getSelection();n.removeAllRanges();const r=document.createRange();r.selectNodeContents(e),n.addRange(r)}};function Rb(l,e){const{type:n,target:r,addedNodes:s,removedNodes:c}=l;if(r===e)return!0;if(["characterData","attributes"].includes(n)){const m=r.nodeType===Node.TEXT_NODE?r.parentNode:r;return e.contains(m)}const h=Array.from(s).some(m=>e.contains(m)),f=Array.from(c).some(m=>e.contains(m));return h||f}const Ur="redactor dom changed",lc="block changed",cc="fake cursor is about to be toggled",dc="fake cursor have been set";function zl(l,e){return l.mergeable&&l.name===e.name}function Nb(l,e){const n=e==null?void 0:e.export;return pt(n)?n(l):Je(n)?l[n]:(n!==void 0&&it("Conversion «export» property must be a string or function. String means key of saved data object to export. Function should export processed string to export."),"")}function Db(l,e){const n=e==null?void 0:e.import;return pt(n)?n(l):Je(n)?{[n]:l}:(n!==void 0&&it("Conversion «import» property must be a string or function. String means key of tool data to import. Function accepts a imported string and return composed tool data."),{})}var De=(l=>(l.APPEND_CALLBACK="appendCallback",l.RENDERED="rendered",l.MOVED="moved",l.UPDATED="updated",l.REMOVED="removed",l.ON_PASTE="onPaste",l))(De||{});let Pe=class Ve extends ui{constructor({id:e=Tb(),data:n,tool:r,api:s,readOnly:c,tunesData:h},f){super(),this.cachedInputs=[],this.toolRenderedElement=null,this.tunesInstances=new Map,this.defaultTunesInstances=new Map,this.unavailableTunesData={},this.inputIndex=0,this.editorEventBus=null,this.handleFocus=()=>{this.dropInputsCache(),this.updateCurrentInput()},this.didMutated=(m=void 0)=>{const k=m===void 0,B=m instanceof InputEvent;!k&&!B&&this.detectToolRootChange(m);let S;k||B?S=!0:S=!(m.length>0&&m.every(L=>{const{addedNodes:D,removedNodes:I,target:K}=L;return[...Array.from(D),...Array.from(I),K].some(Z=>(y.isElement(Z)||(Z=Z.parentElement),Z&&Z.closest('[data-mutation-free="true"]')!==null))})),S&&(this.dropInputsCache(),this.updateCurrentInput(),this.call("updated"),this.emit("didMutated",this))},this.name=r.name,this.id=e,this.settings=r.settings,this.config=r.settings.config||{},this.api=s,this.editorEventBus=f||null,this.blockAPI=new cn(this),this.tool=r,this.toolInstance=r.create(n,this.blockAPI,c),this.tunes=r.tunes,this.composeTunes(h),this.holder=this.compose(),window.requestIdleCallback(()=>{this.watchBlockMutations(),this.addInputEvents()})}static get CSS(){return{wrapper:"ce-block",wrapperStretched:"ce-block--stretched",content:"ce-block__content",selected:"ce-block--selected",dropTarget:"ce-block--drop-target"}}get inputs(){if(this.cachedInputs.length!==0)return this.cachedInputs;const e=y.findAllInputs(this.holder);return this.inputIndex>e.length-1&&(this.inputIndex=e.length-1),this.cachedInputs=e,e}get currentInput(){return this.inputs[this.inputIndex]}set currentInput(e){const n=this.inputs.findIndex(r=>r===e||r.contains(e));n!==-1&&(this.inputIndex=n)}get firstInput(){return this.inputs[0]}get lastInput(){const e=this.inputs;return e[e.length-1]}get nextInput(){return this.inputs[this.inputIndex+1]}get previousInput(){return this.inputs[this.inputIndex-1]}get data(){return this.save().then(e=>e&&!pe(e.data)?e.data:{})}get sanitize(){return this.tool.sanitizeConfig}get mergeable(){return pt(this.toolInstance.merge)}get focusable(){return this.inputs.length!==0}get isEmpty(){const e=y.isEmpty(this.pluginsContent,"/"),n=!this.hasMedia;return e&&n}get hasMedia(){const e=["img","iframe","video","audio","source","input","textarea","twitterwidget"];return!!this.holder.querySelector(e.join(","))}set selected(e){var n,r;this.holder.classList.toggle(Ve.CSS.selected,e);const s=e===!0&&U.isRangeInsideContainer(this.holder),c=e===!1&&U.isFakeCursorInsideContainer(this.holder);(s||c)&&((n=this.editorEventBus)==null||n.emit(cc,{state:e}),s?U.addFakeCursor():U.removeFakeCursor(this.holder),(r=this.editorEventBus)==null||r.emit(dc,{state:e}))}get selected(){return this.holder.classList.contains(Ve.CSS.selected)}set stretched(e){this.holder.classList.toggle(Ve.CSS.wrapperStretched,e)}get stretched(){return this.holder.classList.contains(Ve.CSS.wrapperStretched)}set dropTarget(e){this.holder.classList.toggle(Ve.CSS.dropTarget,e)}get pluginsContent(){return this.toolRenderedElement}call(e,n){if(pt(this.toolInstance[e])){e==="appendCallback"&&it("`appendCallback` hook is deprecated and will be removed in the next major release. Use `rendered` hook instead","warn");try{this.toolInstance[e].call(this.toolInstance,n)}catch(r){it(`Error during '${e}' call: ${r.message}`,"error")}}}async mergeWith(e){await this.toolInstance.merge(e)}async save(){const e=await this.toolInstance.save(this.pluginsContent),n=this.unavailableTunesData;[...this.tunesInstances.entries(),...this.defaultTunesInstances.entries()].forEach(([c,h])=>{if(pt(h.save))try{n[c]=h.save()}catch(f){it(`Tune ${h.constructor.name} save method throws an Error %o`,"warn",f)}});const r=window.performance.now();let s;return Promise.resolve(e).then(c=>(s=window.performance.now(),{id:this.id,tool:this.name,data:c,tunes:n,time:s-r})).catch(c=>{it(`Saving process for ${this.name} tool failed due to the ${c}`,"log","red")})}async validate(e){let n=!0;return this.toolInstance.validate instanceof Function&&(n=await this.toolInstance.validate(e)),n}getTunes(){const e=document.createElement("div"),n=[],r=typeof this.toolInstance.renderSettings=="function"?this.toolInstance.renderSettings():[],s=[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].map(c=>c.render());return[r,s].flat().forEach(c=>{y.isElement(c)?e.appendChild(c):Array.isArray(c)?n.push(...c):n.push(c)}),[n,e]}updateCurrentInput(){this.currentInput=y.isNativeInput(document.activeElement)||!U.anchorNode?document.activeElement:U.anchorNode}dispatchChange(){this.didMutated()}destroy(){this.unwatchBlockMutations(),this.removeInputEvents(),super.destroy(),pt(this.toolInstance.destroy)&&this.toolInstance.destroy()}async getActiveToolboxEntry(){const e=this.tool.toolbox;if(e.length===1)return Promise.resolve(this.tool.toolbox[0]);const n=await this.data;return e.find(r=>Object.entries(r.data).some(([s,c])=>n[s]&&Ib(n[s],c)))}async exportDataAsString(){const e=await this.data;return Nb(e,this.tool.conversionConfig)}compose(){const e=y.make("div",Ve.CSS.wrapper),n=y.make("div",Ve.CSS.content),r=this.toolInstance.render();e.dataset.id=this.id,this.toolRenderedElement=r,n.appendChild(this.toolRenderedElement);let s=n;return[...this.tunesInstances.values(),...this.defaultTunesInstances.values()].forEach(c=>{if(pt(c.wrap))try{s=c.wrap(s)}catch(h){it(`Tune ${c.constructor.name} wrap method throws an Error %o`,"warn",h)}}),e.appendChild(s),e}composeTunes(e){Array.from(this.tunes.values()).forEach(n=>{(n.isInternal?this.defaultTunesInstances:this.tunesInstances).set(n.name,n.create(e[n.name],this.blockAPI))}),Object.entries(e).forEach(([n,r])=>{this.tunesInstances.has(n)||(this.unavailableTunesData[n]=r)})}addInputEvents(){this.inputs.forEach(e=>{e.addEventListener("focus",this.handleFocus),y.isNativeInput(e)&&e.addEventListener("input",this.didMutated)})}removeInputEvents(){this.inputs.forEach(e=>{e.removeEventListener("focus",this.handleFocus),y.isNativeInput(e)&&e.removeEventListener("input",this.didMutated)})}watchBlockMutations(){var e;this.redactorDomChangedCallback=n=>{const{mutations:r}=n;r.some(s=>Rb(s,this.toolRenderedElement))&&this.didMutated(r)},(e=this.editorEventBus)==null||e.on(Ur,this.redactorDomChangedCallback)}unwatchBlockMutations(){var e;(e=this.editorEventBus)==null||e.off(Ur,this.redactorDomChangedCallback)}detectToolRootChange(e){e.forEach(n=>{if(Array.from(n.removedNodes).includes(this.toolRenderedElement)){const r=n.addedNodes[n.addedNodes.length-1];this.toolRenderedElement=r}})}dropInputsCache(){this.cachedInputs=[]}};class Pb extends et{constructor(){super(...arguments),this.insert=(e=this.config.defaultBlock,n={},r={},s,c,h,f)=>{const m=this.Editor.BlockManager.insert({id:f,tool:e,data:n,index:s,needToFocus:c,replace:h});return new cn(m)},this.composeBlockData=async e=>{const n=this.Editor.Tools.blockTools.get(e);return new Pe({tool:n,api:this.Editor.API,readOnly:!0,data:{},tunesData:{}}).data},this.update=async(e,n)=>{const{BlockManager:r}=this.Editor,s=r.getBlockById(e);if(s===void 0)throw new Error(`Block with id "${e}" not found`);const c=await r.update(s,n);return new cn(c)},this.convert=(e,n,r)=>{var s,c;const{BlockManager:h,Tools:f}=this.Editor,m=h.getBlockById(e);if(!m)throw new Error(`Block with id "${e}" not found`);const k=f.blockTools.get(m.name),B=f.blockTools.get(n);if(!B)throw new Error(`Block Tool with type "${n}" not found`);const S=((s=k==null?void 0:k.conversionConfig)==null?void 0:s.export)!==void 0,L=((c=B.conversionConfig)==null?void 0:c.import)!==void 0;if(S&&L)h.convert(m,n,r);else{const D=[S?!1:Mn(m.name),L?!1:Mn(n)].filter(Boolean).join(" and ");throw new Error(`Conversion from "${m.name}" to "${n}" is not possible. ${D} tool(s) should provide a "conversionConfig"`)}},this.insertMany=(e,n=this.Editor.BlockManager.blocks.length-1)=>{this.validateIndex(n);const r=e.map(({id:s,type:c,data:h})=>this.Editor.BlockManager.composeBlock({id:s,tool:c||this.config.defaultBlock,data:h}));return this.Editor.BlockManager.insertMany(r,n),r.map(s=>new cn(s))}}get methods(){return{clear:()=>this.clear(),render:e=>this.render(e),renderFromHTML:e=>this.renderFromHTML(e),delete:e=>this.delete(e),swap:(e,n)=>this.swap(e,n),move:(e,n)=>this.move(e,n),getBlockByIndex:e=>this.getBlockByIndex(e),getById:e=>this.getById(e),getCurrentBlockIndex:()=>this.getCurrentBlockIndex(),getBlockIndex:e=>this.getBlockIndex(e),getBlocksCount:()=>this.getBlocksCount(),stretchBlock:(e,n=!0)=>this.stretchBlock(e,n),insertNewBlock:()=>this.insertNewBlock(),insert:this.insert,insertMany:this.insertMany,update:this.update,composeBlockData:this.composeBlockData,convert:this.convert}}getBlocksCount(){return this.Editor.BlockManager.blocks.length}getCurrentBlockIndex(){return this.Editor.BlockManager.currentBlockIndex}getBlockIndex(e){const n=this.Editor.BlockManager.getBlockById(e);if(!n){ke("There is no block with id `"+e+"`","warn");return}return this.Editor.BlockManager.getBlockIndex(n)}getBlockByIndex(e){const n=this.Editor.BlockManager.getBlockByIndex(e);if(n===void 0){ke("There is no block at index `"+e+"`","warn");return}return new cn(n)}getById(e){const n=this.Editor.BlockManager.getBlockById(e);return n===void 0?(ke("There is no block with id `"+e+"`","warn"),null):new cn(n)}swap(e,n){it("`blocks.swap()` method is deprecated and will be removed in the next major release. Use `block.move()` method instead","info"),this.Editor.BlockManager.swap(e,n)}move(e,n){this.Editor.BlockManager.move(e,n)}delete(e=this.Editor.BlockManager.currentBlockIndex){try{const n=this.Editor.BlockManager.getBlockByIndex(e);this.Editor.BlockManager.removeBlock(n)}catch(n){ke(n,"warn");return}this.Editor.BlockManager.blocks.length===0&&this.Editor.BlockManager.insert(),this.Editor.BlockManager.currentBlock&&this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END),this.Editor.Toolbar.close()}async clear(){await this.Editor.BlockManager.clear(!0),this.Editor.InlineToolbar.close()}async render(e){if(e===void 0||e.blocks===void 0)throw new Error("Incorrect data passed to the render() method");this.Editor.ModificationsObserver.disable(),await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(e.blocks),this.Editor.ModificationsObserver.enable()}renderFromHTML(e){return this.Editor.BlockManager.clear(),this.Editor.Paste.processText(e,!0)}stretchBlock(e,n=!0){Fr(!0,"blocks.stretchBlock()","BlockAPI");const r=this.Editor.BlockManager.getBlockByIndex(e);r&&(r.stretched=n)}insertNewBlock(){it("Method blocks.insertNewBlock() is deprecated and it will be removed in the next major release. Use blocks.insert() instead.","warn"),this.insert()}validateIndex(e){if(typeof e!="number")throw new Error("Index should be a number");if(e<0)throw new Error("Index should be greater than or equal to 0");if(e===null)throw new Error("Index should be greater than or equal to 0")}}class Hb extends et{constructor(){super(...arguments),this.setToFirstBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.firstBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.firstBlock,e,n),!0):!1,this.setToLastBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.lastBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.lastBlock,e,n),!0):!1,this.setToPreviousBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.previousBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.previousBlock,e,n),!0):!1,this.setToNextBlock=(e=this.Editor.Caret.positions.DEFAULT,n=0)=>this.Editor.BlockManager.nextBlock?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.nextBlock,e,n),!0):!1,this.setToBlock=(e,n=this.Editor.Caret.positions.DEFAULT,r=0)=>this.Editor.BlockManager.blocks[e]?(this.Editor.Caret.setToBlock(this.Editor.BlockManager.blocks[e],n,r),!0):!1,this.focus=(e=!1)=>e?this.setToLastBlock(this.Editor.Caret.positions.END):this.setToFirstBlock(this.Editor.Caret.positions.START)}get methods(){return{setToFirstBlock:this.setToFirstBlock,setToLastBlock:this.setToLastBlock,setToPreviousBlock:this.setToPreviousBlock,setToNextBlock:this.setToNextBlock,setToBlock:this.setToBlock,focus:this.focus}}}class Fb extends et{get methods(){return{emit:(e,n)=>this.emit(e,n),off:(e,n)=>this.off(e,n),on:(e,n)=>this.on(e,n)}}on(e,n){this.eventsDispatcher.on(e,n)}emit(e,n){this.eventsDispatcher.emit(e,n)}off(e,n){this.eventsDispatcher.off(e,n)}}class Xr extends et{static getNamespace(e){return e.isTune()?`blockTunes.${e.name}`:`tools.${e.name}`}get methods(){return{t:()=>{ke("I18n.t() method can be accessed only from Tools","warn")}}}getMethodsForTool(e){return Object.assign(this.methods,{t:n=>Xt.t(Xr.getNamespace(e),n)})}}class Ub extends et{get methods(){return{blocks:this.Editor.BlocksAPI.methods,caret:this.Editor.CaretAPI.methods,events:this.Editor.EventsAPI.methods,listeners:this.Editor.ListenersAPI.methods,notifier:this.Editor.NotifierAPI.methods,sanitizer:this.Editor.SanitizerAPI.methods,saver:this.Editor.SaverAPI.methods,selection:this.Editor.SelectionAPI.methods,styles:this.Editor.StylesAPI.classes,toolbar:this.Editor.ToolbarAPI.methods,inlineToolbar:this.Editor.InlineToolbarAPI.methods,tooltip:this.Editor.TooltipAPI.methods,i18n:this.Editor.I18nAPI.methods,readOnly:this.Editor.ReadOnlyAPI.methods,ui:this.Editor.UiAPI.methods}}getMethodsForTool(e){return Object.assign(this.methods,{i18n:this.Editor.I18nAPI.getMethodsForTool(e)})}}class zb extends et{get methods(){return{close:()=>this.close(),open:()=>this.open()}}open(){this.Editor.InlineToolbar.tryToShow()}close(){this.Editor.InlineToolbar.close()}}class Wb extends et{get methods(){return{on:(e,n,r,s)=>this.on(e,n,r,s),off:(e,n,r,s)=>this.off(e,n,r,s),offById:e=>this.offById(e)}}on(e,n,r,s){return this.listeners.on(e,n,r,s)}off(e,n,r,s){this.listeners.off(e,n,r,s)}offById(e){this.listeners.offById(e)}}var zr={},$b={get exports(){return zr},set exports(l){zr=l}};(function(l,e){(function(n,r){l.exports=r()})(window,function(){return function(n){var r={};function s(c){if(r[c])return r[c].exports;var h=r[c]={i:c,l:!1,exports:{}};return n[c].call(h.exports,h,h.exports,s),h.l=!0,h.exports}return s.m=n,s.c=r,s.d=function(c,h,f){s.o(c,h)||Object.defineProperty(c,h,{enumerable:!0,get:f})},s.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},s.t=function(c,h){if(1&h&&(c=s(c)),8&h||4&h&&typeof c=="object"&&c&&c.__esModule)return c;var f=Object.create(null);if(s.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:c}),2&h&&typeof c!="string")for(var m in c)s.d(f,m,(function(k){return c[k]}).bind(null,m));return f},s.n=function(c){var h=c&&c.__esModule?function(){return c.default}:function(){return c};return s.d(h,"a",h),h},s.o=function(c,h){return Object.prototype.hasOwnProperty.call(c,h)},s.p="/",s(s.s=0)}([function(n,r,s){s(1),n.exports=function(){var c=s(6),h="cdx-notify--bounce-in",f=null;return{show:function(m){if(m.message){(function(){if(f)return!0;f=c.getWrapper(),document.body.appendChild(f)})();var k=null,B=m.time||8e3;switch(m.type){case"confirm":k=c.confirm(m);break;case"prompt":k=c.prompt(m);break;default:k=c.alert(m),window.setTimeout(function(){k.remove()},B)}f.appendChild(k),k.classList.add(h)}}}}()},function(n,r,s){var c=s(2);typeof c=="string"&&(c=[[n.i,c,""]]);var h={hmr:!0,transform:void 0,insertInto:void 0};s(4)(c,h),c.locals&&(n.exports=c.locals)},function(n,r,s){(n.exports=s(3)(!1)).push([n.i,`.cdx-notify--error{background:#fffbfb!important}.cdx-notify--error::before{background:#fb5d5d!important}.cdx-notify__input{max-width:130px;padding:5px 10px;background:#f7f7f7;border:0;border-radius:3px;font-size:13px;color:#656b7c;outline:0}.cdx-notify__input:-ms-input-placeholder{color:#656b7c}.cdx-notify__input::placeholder{color:#656b7c}.cdx-notify__input:focus:-ms-input-placeholder{color:rgba(101,107,124,.3)}.cdx-notify__input:focus::placeholder{color:rgba(101,107,124,.3)}.cdx-notify__button{border:none;border-radius:3px;font-size:13px;padding:5px 10px;cursor:pointer}.cdx-notify__button:last-child{margin-left:10px}.cdx-notify__button--cancel{background:#f2f5f7;box-shadow:0 2px 1px 0 rgba(16,19,29,0);color:#656b7c}.cdx-notify__button--cancel:hover{background:#eee}.cdx-notify__button--confirm{background:#34c992;box-shadow:0 1px 1px 0 rgba(18,49,35,.05);color:#fff}.cdx-notify__button--confirm:hover{background:#33b082}.cdx-notify__btns-wrapper{display:-ms-flexbox;display:flex;-ms-flex-flow:row nowrap;flex-flow:row nowrap;margin-top:5px}.cdx-notify__cross{position:absolute;top:5px;right:5px;width:10px;height:10px;padding:5px;opacity:.54;cursor:pointer}.cdx-notify__cross::after,.cdx-notify__cross::before{content:'';position:absolute;left:9px;top:5px;height:12px;width:2px;background:#575d67}.cdx-notify__cross::before{transform:rotate(-45deg)}.cdx-notify__cross::after{transform:rotate(45deg)}.cdx-notify__cross:hover{opacity:1}.cdx-notifies{position:fixed;z-index:2;bottom:20px;left:20px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif}.cdx-notify{position:relative;width:220px;margin-top:15px;padding:13px 16px;background:#fff;box-shadow:0 11px 17px 0 rgba(23,32,61,.13);border-radius:5px;font-size:14px;line-height:1.4em;word-wrap:break-word}.cdx-notify::before{content:'';position:absolute;display:block;top:0;left:0;width:3px;height:calc(100% - 6px);margin:3px;border-radius:5px;background:0 0}@keyframes bounceIn{0%{opacity:0;transform:scale(.3)}50%{opacity:1;transform:scale(1.05)}70%{transform:scale(.9)}100%{transform:scale(1)}}.cdx-notify--bounce-in{animation-name:bounceIn;animation-duration:.6s;animation-iteration-count:1}.cdx-notify--success{background:#fafffe!important}.cdx-notify--success::before{background:#41ffb1!important}`,""])},function(n,r){n.exports=function(s){var c=[];return c.toString=function(){return this.map(function(h){var f=function(m,k){var B=m[1]||"",S=m[3];if(!S)return B;if(k&&typeof btoa=="function"){var L=(I=S,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(I))))+" */"),D=S.sources.map(function(K){return"/*# sourceURL="+S.sourceRoot+K+" */"});return[B].concat(D).concat([L]).join(`
`)}var I;return[B].join(`
`)}(h,s);return h[2]?"@media "+h[2]+"{"+f+"}":f}).join("")},c.i=function(h,f){typeof h=="string"&&(h=[[null,h,""]]);for(var m={},k=0;k<this.length;k++){var B=this[k][0];typeof B=="number"&&(m[B]=!0)}for(k=0;k<h.length;k++){var S=h[k];typeof S[0]=="number"&&m[S[0]]||(f&&!S[2]?S[2]=f:f&&(S[2]="("+S[2]+") and ("+f+")"),c.push(S))}},c}},function(n,r,s){var c,h,f={},m=(c=function(){return window&&document&&document.all&&!window.atob},function(){return h===void 0&&(h=c.apply(this,arguments)),h}),k=function(N){var O={};return function(W){if(typeof W=="function")return W();if(O[W]===void 0){var J=(function(ct){return document.querySelector(ct)}).call(this,W);if(window.HTMLIFrameElement&&J instanceof window.HTMLIFrameElement)try{J=J.contentDocument.head}catch{J=null}O[W]=J}return O[W]}}(),B=null,S=0,L=[],D=s(5);function I(N,O){for(var W=0;W<N.length;W++){var J=N[W],ct=f[J.id];if(ct){ct.refs++;for(var nt=0;nt<ct.parts.length;nt++)ct.parts[nt](J.parts[nt]);for(;nt<J.parts.length;nt++)ct.parts.push(wt(J.parts[nt],O))}else{var yt=[];for(nt=0;nt<J.parts.length;nt++)yt.push(wt(J.parts[nt],O));f[J.id]={id:J.id,refs:1,parts:yt}}}}function K(N,O){for(var W=[],J={},ct=0;ct<N.length;ct++){var nt=N[ct],yt=O.base?nt[0]+O.base:nt[0],tt={css:nt[1],media:nt[2],sourceMap:nt[3]};J[yt]?J[yt].parts.push(tt):W.push(J[yt]={id:yt,parts:[tt]})}return W}function Z(N,O){var W=k(N.insertInto);if(!W)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var J=L[L.length-1];if(N.insertAt==="top")J?J.nextSibling?W.insertBefore(O,J.nextSibling):W.appendChild(O):W.insertBefore(O,W.firstChild),L.push(O);else if(N.insertAt==="bottom")W.appendChild(O);else{if(typeof N.insertAt!="object"||!N.insertAt.before)throw new Error(`[Style Loader]

 Invalid value for parameter 'insertAt' ('options.insertAt') found.
 Must be 'top', 'bottom', or Object.
 (https://github.com/webpack-contrib/style-loader#insertat)
`);var ct=k(N.insertInto+" "+N.insertAt.before);W.insertBefore(O,ct)}}function lt(N){if(N.parentNode===null)return!1;N.parentNode.removeChild(N);var O=L.indexOf(N);O>=0&&L.splice(O,1)}function ft(N){var O=document.createElement("style");return N.attrs.type===void 0&&(N.attrs.type="text/css"),Ct(O,N.attrs),Z(N,O),O}function Ct(N,O){Object.keys(O).forEach(function(W){N.setAttribute(W,O[W])})}function wt(N,O){var W,J,ct,nt;if(O.transform&&N.css){if(!(nt=O.transform(N.css)))return function(){};N.css=nt}if(O.singleton){var yt=S++;W=B||(B=ft(O)),J=Dt.bind(null,W,yt,!1),ct=Dt.bind(null,W,yt,!0)}else N.sourceMap&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&typeof URL.revokeObjectURL=="function"&&typeof Blob=="function"&&typeof btoa=="function"?(W=function(tt){var Pt=document.createElement("link");return tt.attrs.type===void 0&&(tt.attrs.type="text/css"),tt.attrs.rel="stylesheet",Ct(Pt,tt.attrs),Z(tt,Pt),Pt}(O),J=(function(tt,Pt,Zt){var Mt=Zt.css,Nn=Zt.sourceMap,un=Pt.convertToAbsoluteUrls===void 0&&Nn;(Pt.convertToAbsoluteUrls||un)&&(Mt=D(Mt)),Nn&&(Mt+=`
/*# sourceMappingURL=data:application/json;base64,`+btoa(unescape(encodeURIComponent(JSON.stringify(Nn))))+" */");var ie=new Blob([Mt],{type:"text/css"}),po=tt.href;tt.href=URL.createObjectURL(ie),po&&URL.revokeObjectURL(po)}).bind(null,W,O),ct=function(){lt(W),W.href&&URL.revokeObjectURL(W.href)}):(W=ft(O),J=(function(tt,Pt){var Zt=Pt.css,Mt=Pt.media;if(Mt&&tt.setAttribute("media",Mt),tt.styleSheet)tt.styleSheet.cssText=Zt;else{for(;tt.firstChild;)tt.removeChild(tt.firstChild);tt.appendChild(document.createTextNode(Zt))}}).bind(null,W),ct=function(){lt(W)});return J(N),function(tt){if(tt){if(tt.css===N.css&&tt.media===N.media&&tt.sourceMap===N.sourceMap)return;J(N=tt)}else ct()}}n.exports=function(N,O){if(typeof DEBUG<"u"&&DEBUG&&typeof document!="object")throw new Error("The style-loader cannot be used in a non-browser environment");(O=O||{}).attrs=typeof O.attrs=="object"?O.attrs:{},O.singleton||typeof O.singleton=="boolean"||(O.singleton=m()),O.insertInto||(O.insertInto="head"),O.insertAt||(O.insertAt="bottom");var W=K(N,O);return I(W,O),function(J){for(var ct=[],nt=0;nt<W.length;nt++){var yt=W[nt];(tt=f[yt.id]).refs--,ct.push(tt)}for(J&&I(K(J,O),O),nt=0;nt<ct.length;nt++){var tt;if((tt=ct[nt]).refs===0){for(var Pt=0;Pt<tt.parts.length;Pt++)tt.parts[Pt]();delete f[tt.id]}}}};var gt,Wt=(gt=[],function(N,O){return gt[N]=O,gt.filter(Boolean).join(`
`)});function Dt(N,O,W,J){var ct=W?"":J.css;if(N.styleSheet)N.styleSheet.cssText=Wt(O,ct);else{var nt=document.createTextNode(ct),yt=N.childNodes;yt[O]&&N.removeChild(yt[O]),yt.length?N.insertBefore(nt,yt[O]):N.appendChild(nt)}}},function(n,r){n.exports=function(s){var c=typeof window<"u"&&window.location;if(!c)throw new Error("fixUrls requires window.location");if(!s||typeof s!="string")return s;var h=c.protocol+"//"+c.host,f=h+c.pathname.replace(/\/[^\/]*$/,"/");return s.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(m,k){var B,S=k.trim().replace(/^"(.*)"$/,function(L,D){return D}).replace(/^'(.*)'$/,function(L,D){return D});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(S)?m:(B=S.indexOf("//")===0?S:S.indexOf("/")===0?h+S:f+S.replace(/^\.\//,""),"url("+JSON.stringify(B)+")")})}},function(n,r,s){var c,h,f,m,k,B,S,L,D;n.exports=(c="cdx-notifies",h="cdx-notify",f="cdx-notify__cross",m="cdx-notify__button--confirm",k="cdx-notify__button--cancel",B="cdx-notify__input",S="cdx-notify__button",L="cdx-notify__btns-wrapper",{alert:D=function(I){var K=document.createElement("DIV"),Z=document.createElement("DIV"),lt=I.message,ft=I.style;return K.classList.add(h),ft&&K.classList.add(h+"--"+ft),K.innerHTML=lt,Z.classList.add(f),Z.addEventListener("click",K.remove.bind(K)),K.appendChild(Z),K},confirm:function(I){var K=D(I),Z=document.createElement("div"),lt=document.createElement("button"),ft=document.createElement("button"),Ct=K.querySelector("."+f),wt=I.cancelHandler,gt=I.okHandler;return Z.classList.add(L),lt.innerHTML=I.okText||"Confirm",ft.innerHTML=I.cancelText||"Cancel",lt.classList.add(S),ft.classList.add(S),lt.classList.add(m),ft.classList.add(k),wt&&typeof wt=="function"&&(ft.addEventListener("click",wt),Ct.addEventListener("click",wt)),gt&&typeof gt=="function"&&lt.addEventListener("click",gt),lt.addEventListener("click",K.remove.bind(K)),ft.addEventListener("click",K.remove.bind(K)),Z.appendChild(lt),Z.appendChild(ft),K.appendChild(Z),K},prompt:function(I){var K=D(I),Z=document.createElement("div"),lt=document.createElement("button"),ft=document.createElement("input"),Ct=K.querySelector("."+f),wt=I.cancelHandler,gt=I.okHandler;return Z.classList.add(L),lt.innerHTML=I.okText||"Ok",lt.classList.add(S),lt.classList.add(m),ft.classList.add(B),I.placeholder&&ft.setAttribute("placeholder",I.placeholder),I.default&&(ft.value=I.default),I.inputType&&(ft.type=I.inputType),wt&&typeof wt=="function"&&Ct.addEventListener("click",wt),gt&&typeof gt=="function"&&lt.addEventListener("click",function(){gt(ft.value)}),lt.addEventListener("click",K.remove.bind(K)),Z.appendChild(ft),Z.appendChild(lt),K.appendChild(Z),K},getWrapper:function(){var I=document.createElement("DIV");return I.classList.add(c),I}})}])})})($b);const Yb=qr(zr);class Kb{show(e){Yb.show(e)}}class qb extends et{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.notifier=new Kb}get methods(){return{show:e=>this.show(e)}}show(e){return this.notifier.show(e)}}class Gb extends et{get methods(){const e=()=>this.isEnabled;return{toggle:n=>this.toggle(n),get isEnabled(){return e()}}}toggle(e){return this.Editor.ReadOnly.toggle(e)}get isEnabled(){return this.Editor.ReadOnly.isEnabled}}var Wr={},Xb={get exports(){return Wr},set exports(l){Wr=l}};(function(l,e){(function(n,r){l.exports=r()})(mb,function(){function n(S){var L=S.tags,D=Object.keys(L),I=D.map(function(K){return typeof L[K]}).every(function(K){return K==="object"||K==="boolean"||K==="function"});if(!I)throw new Error("The configuration was invalid");this.config=S}var r=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"];function s(S){return r.indexOf(S.nodeName)!==-1}var c=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];function h(S){return c.indexOf(S.nodeName)!==-1}n.prototype.clean=function(S){const L=document.implementation.createHTMLDocument(),D=L.createElement("div");return D.innerHTML=S,this._sanitize(L,D),D.innerHTML},n.prototype._sanitize=function(S,L){var D=f(S,L),I=D.firstChild();if(I)do{if(I.nodeType===Node.TEXT_NODE)if(I.data.trim()===""&&(I.previousElementSibling&&s(I.previousElementSibling)||I.nextElementSibling&&s(I.nextElementSibling))){L.removeChild(I),this._sanitize(S,L);break}else continue;if(I.nodeType===Node.COMMENT_NODE){L.removeChild(I),this._sanitize(S,L);break}var K=h(I),Z;K&&(Z=Array.prototype.some.call(I.childNodes,s));var lt=!!L.parentNode,ft=s(L)&&s(I)&&lt,Ct=I.nodeName.toLowerCase(),wt=m(this.config,Ct,I),gt=K&&Z;if(gt||k(I,wt)||!this.config.keepNestedBlockElements&&ft){if(!(I.nodeName==="SCRIPT"||I.nodeName==="STYLE"))for(;I.childNodes.length>0;)L.insertBefore(I.childNodes[0],I);L.removeChild(I),this._sanitize(S,L);break}for(var Wt=0;Wt<I.attributes.length;Wt+=1){var Dt=I.attributes[Wt];B(Dt,wt,I)&&(I.removeAttribute(Dt.name),Wt=Wt-1)}this._sanitize(S,I)}while(I=D.nextSibling())};function f(S,L){return S.createTreeWalker(L,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}function m(S,L,D){return typeof S.tags[L]=="function"?S.tags[L](D):S.tags[L]}function k(S,L){return typeof L>"u"?!0:typeof L=="boolean"?!L:!1}function B(S,L,D){var I=S.name.toLowerCase();return L===!0?!1:typeof L[I]=="function"?!L[I](S.value,D):typeof L[I]>"u"||L[I]===!1?!0:typeof L[I]=="string"?L[I]!==S.value:!1}return n})})(Xb);const Zb=Wr;function hc(l,e){return l.map(n=>{const r=pt(e)?e(n.tool):e;return pe(r)||(n.data=Zr(n.data,r)),n})}function He(l,e={}){const n={tags:e};return new Zb(n).clean(l)}function Zr(l,e){return Array.isArray(l)?Vb(l,e):At(l)?jb(l,e):Je(l)?Jb(l,e):l}function Vb(l,e){return l.map(n=>Zr(n,e))}function jb(l,e){const n={};for(const r in l){if(!Object.prototype.hasOwnProperty.call(l,r))continue;const s=l[r],c=Qb(e[r])?e[r]:e;n[r]=Zr(s,c)}return n}function Jb(l,e){return At(e)?He(l,e):e===!1?He(l,{}):l}function Qb(l){return At(l)||kb(l)||pt(l)}class tv extends et{get methods(){return{clean:(e,n)=>this.clean(e,n)}}clean(e,n){return He(e,n)}}class ev extends et{get methods(){return{save:()=>this.save()}}save(){const e="Editor's content can not be saved in read-only mode";return this.Editor.ReadOnly.isEnabled?(ke(e,"warn"),Promise.reject(new Error(e))):this.Editor.Saver.save()}}class nv extends et{get methods(){return{findParentTag:(e,n)=>this.findParentTag(e,n),expandToTag:e=>this.expandToTag(e)}}findParentTag(e,n){return new U().findParentTag(e,n)}expandToTag(e){new U().expandToTag(e)}}class ov extends et{get classes(){return{block:"cdx-block",inlineToolButton:"ce-inline-tool",inlineToolButtonActive:"ce-inline-tool--active",input:"cdx-input",loader:"cdx-loader",button:"cdx-button",settingsButton:"cdx-settings-button",settingsButtonActive:"cdx-settings-button--active"}}}class iv extends et{get methods(){return{close:()=>this.close(),open:()=>this.open(),toggleBlockSettings:e=>this.toggleBlockSettings(e),toggleToolbox:e=>this.toggleToolbox(e)}}open(){this.Editor.Toolbar.moveAndOpen()}close(){this.Editor.Toolbar.close()}toggleBlockSettings(e){if(this.Editor.BlockManager.currentBlockIndex===-1){ke("Could't toggle the Toolbar because there is no block selected ","warn");return}e??!this.Editor.BlockSettings.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.open()):this.Editor.BlockSettings.close()}toggleToolbox(e){if(this.Editor.BlockManager.currentBlockIndex===-1){ke("Could't toggle the Toolbox because there is no block selected ","warn");return}e??!this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()):this.Editor.Toolbar.toolbox.close()}}var $r={},rv={get exports(){return $r},set exports(l){$r=l}};/*!
 * CodeX.Tooltips
 * 
 * @version 1.0.5
 * 
 * @licence MIT
 * @author CodeX <https://codex.so>
 * 
 * 
 */(function(l,e){(function(n,r){l.exports=r()})(window,function(){return function(n){var r={};function s(c){if(r[c])return r[c].exports;var h=r[c]={i:c,l:!1,exports:{}};return n[c].call(h.exports,h,h.exports,s),h.l=!0,h.exports}return s.m=n,s.c=r,s.d=function(c,h,f){s.o(c,h)||Object.defineProperty(c,h,{enumerable:!0,get:f})},s.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},s.t=function(c,h){if(1&h&&(c=s(c)),8&h||4&h&&typeof c=="object"&&c&&c.__esModule)return c;var f=Object.create(null);if(s.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:c}),2&h&&typeof c!="string")for(var m in c)s.d(f,m,(function(k){return c[k]}).bind(null,m));return f},s.n=function(c){var h=c&&c.__esModule?function(){return c.default}:function(){return c};return s.d(h,"a",h),h},s.o=function(c,h){return Object.prototype.hasOwnProperty.call(c,h)},s.p="",s(s.s=0)}([function(n,r,s){n.exports=s(1)},function(n,r,s){s.r(r),s.d(r,"default",function(){return c});class c{constructor(){this.nodes={wrapper:null,content:null},this.showed=!1,this.offsetTop=10,this.offsetLeft=10,this.offsetRight=10,this.hidingDelay=0,this.handleWindowScroll=()=>{this.showed&&this.hide(!0)},this.loadStyles(),this.prepare(),window.addEventListener("scroll",this.handleWindowScroll,{passive:!0})}get CSS(){return{tooltip:"ct",tooltipContent:"ct__content",tooltipShown:"ct--shown",placement:{left:"ct--left",bottom:"ct--bottom",right:"ct--right",top:"ct--top"}}}show(f,m,k){this.nodes.wrapper||this.prepare(),this.hidingTimeout&&clearTimeout(this.hidingTimeout);const B=Object.assign({placement:"bottom",marginTop:0,marginLeft:0,marginRight:0,marginBottom:0,delay:70,hidingDelay:0},k);if(B.hidingDelay&&(this.hidingDelay=B.hidingDelay),this.nodes.content.innerHTML="",typeof m=="string")this.nodes.content.appendChild(document.createTextNode(m));else{if(!(m instanceof Node))throw Error("[CodeX Tooltip] Wrong type of «content» passed. It should be an instance of Node or String. But "+typeof m+" given.");this.nodes.content.appendChild(m)}switch(this.nodes.wrapper.classList.remove(...Object.values(this.CSS.placement)),B.placement){case"top":this.placeTop(f,B);break;case"left":this.placeLeft(f,B);break;case"right":this.placeRight(f,B);break;case"bottom":default:this.placeBottom(f,B)}B&&B.delay?this.showingTimeout=setTimeout(()=>{this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0},B.delay):(this.nodes.wrapper.classList.add(this.CSS.tooltipShown),this.showed=!0)}hide(f=!1){if(this.hidingDelay&&!f)return this.hidingTimeout&&clearTimeout(this.hidingTimeout),void(this.hidingTimeout=setTimeout(()=>{this.hide(!0)},this.hidingDelay));this.nodes.wrapper.classList.remove(this.CSS.tooltipShown),this.showed=!1,this.showingTimeout&&clearTimeout(this.showingTimeout)}onHover(f,m,k){f.addEventListener("mouseenter",()=>{this.show(f,m,k)}),f.addEventListener("mouseleave",()=>{this.hide()})}destroy(){this.nodes.wrapper.remove(),window.removeEventListener("scroll",this.handleWindowScroll)}prepare(){this.nodes.wrapper=this.make("div",this.CSS.tooltip),this.nodes.content=this.make("div",this.CSS.tooltipContent),this.append(this.nodes.wrapper,this.nodes.content),this.append(document.body,this.nodes.wrapper)}loadStyles(){const f="codex-tooltips-style";if(document.getElementById(f))return;const m=s(2),k=this.make("style",null,{textContent:m.toString(),id:f});this.prepend(document.head,k)}placeBottom(f,m){const k=f.getBoundingClientRect(),B=k.left+f.clientWidth/2-this.nodes.wrapper.offsetWidth/2,S=k.bottom+window.pageYOffset+this.offsetTop+m.marginTop;this.applyPlacement("bottom",B,S)}placeTop(f,m){const k=f.getBoundingClientRect(),B=k.left+f.clientWidth/2-this.nodes.wrapper.offsetWidth/2,S=k.top+window.pageYOffset-this.nodes.wrapper.clientHeight-this.offsetTop;this.applyPlacement("top",B,S)}placeLeft(f,m){const k=f.getBoundingClientRect(),B=k.left-this.nodes.wrapper.offsetWidth-this.offsetLeft-m.marginLeft,S=k.top+window.pageYOffset+f.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("left",B,S)}placeRight(f,m){const k=f.getBoundingClientRect(),B=k.right+this.offsetRight+m.marginRight,S=k.top+window.pageYOffset+f.clientHeight/2-this.nodes.wrapper.offsetHeight/2;this.applyPlacement("right",B,S)}applyPlacement(f,m,k){this.nodes.wrapper.classList.add(this.CSS.placement[f]),this.nodes.wrapper.style.left=m+"px",this.nodes.wrapper.style.top=k+"px"}make(f,m=null,k={}){const B=document.createElement(f);Array.isArray(m)?B.classList.add(...m):m&&B.classList.add(m);for(const S in k)k.hasOwnProperty(S)&&(B[S]=k[S]);return B}append(f,m){Array.isArray(m)?m.forEach(k=>f.appendChild(k)):f.appendChild(m)}prepend(f,m){Array.isArray(m)?(m=m.reverse()).forEach(k=>f.prepend(k)):f.prepend(m)}}},function(n,r){n.exports=`.ct{z-index:999;opacity:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1);transition:opacity 50ms ease-in,transform 70ms cubic-bezier(.215,.61,.355,1),-webkit-transform 70ms cubic-bezier(.215,.61,.355,1);will-change:opacity,top,left;-webkit-box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);box-shadow:0 8px 12px 0 rgba(29,32,43,.17),0 4px 5px -3px rgba(5,6,12,.49);border-radius:9px}.ct,.ct:before{position:absolute;top:0;left:0}.ct:before{content:"";bottom:0;right:0;background-color:#1d202b;z-index:-1;border-radius:4px}@supports(-webkit-mask-box-image:url("")){.ct:before{border-radius:0;-webkit-mask-box-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M10.71 0h2.58c3.02 0 4.64.42 6.1 1.2a8.18 8.18 0 013.4 3.4C23.6 6.07 24 7.7 24 10.71v2.58c0 3.02-.42 4.64-1.2 6.1a8.18 8.18 0 01-3.4 3.4c-1.47.8-3.1 1.21-6.11 1.21H10.7c-3.02 0-4.64-.42-6.1-1.2a8.18 8.18 0 01-3.4-3.4C.4 17.93 0 16.3 0 13.29V10.7c0-3.02.42-4.64 1.2-6.1a8.18 8.18 0 013.4-3.4C6.07.4 7.7 0 10.71 0z"/></svg>') 48% 41% 37.9% 53.3%}}@media (--mobile){.ct{display:none}}.ct__content{padding:6px 10px;color:#cdd1e0;font-size:12px;text-align:center;letter-spacing:.02em;line-height:1em}.ct:after{content:"";width:8px;height:8px;position:absolute;background-color:#1d202b;z-index:-1}.ct--bottom{-webkit-transform:translateY(5px);transform:translateY(5px)}.ct--bottom:after{top:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--top{-webkit-transform:translateY(-5px);transform:translateY(-5px)}.ct--top:after{top:auto;bottom:-3px;left:50%;-webkit-transform:translateX(-50%) rotate(-45deg);transform:translateX(-50%) rotate(-45deg)}.ct--left{-webkit-transform:translateX(-5px);transform:translateX(-5px)}.ct--left:after{top:50%;left:auto;right:0;-webkit-transform:translate(41.6%,-50%) rotate(-45deg);transform:translate(41.6%,-50%) rotate(-45deg)}.ct--right{-webkit-transform:translateX(5px);transform:translateX(5px)}.ct--right:after{top:50%;left:0;-webkit-transform:translate(-41.6%,-50%) rotate(-45deg);transform:translate(-41.6%,-50%) rotate(-45deg)}.ct--shown{opacity:1;-webkit-transform:none;transform:none}`}]).default})})(rv);const sv=qr($r);let ye=null;function Vr(){ye||(ye=new sv)}function av(l,e,n){Vr(),ye==null||ye.show(l,e,n)}function Yr(l=!1){Vr(),ye==null||ye.hide(l)}function co(l,e,n){Vr(),ye==null||ye.onHover(l,e,n)}function lv(){ye==null||ye.destroy(),ye=null}class cv extends et{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n})}get methods(){return{show:(e,n,r)=>this.show(e,n,r),hide:()=>this.hide(),onHover:(e,n,r)=>this.onHover(e,n,r)}}show(e,n,r){av(e,n,r)}hide(){Yr()}onHover(e,n,r){co(e,n,r)}}class dv extends et{get methods(){return{nodes:this.editorNodes}}get editorNodes(){return{wrapper:this.Editor.UI.nodes.wrapper,redactor:this.Editor.UI.nodes.redactor}}}function uc(l,e){const n={};return Object.entries(l).forEach(([r,s])=>{if(At(s)){const c=e?`${e}.${r}`:r;Object.values(s).every(h=>Je(h))?n[r]=c:n[r]=uc(s,c);return}n[r]=s}),n}const xe=uc(rc);function hv(l,e){const n={};return Object.keys(l).forEach(r=>{const s=e[r];s!==void 0?n[s]=l[r]:n[r]=l[r]}),n}const uv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 12L9 7.1C9 7.04477 9.04477 7 9.1 7H10.4C11.5 7 14 7.1 14 9.5C14 9.5 14 12 11 12M9 12V16.8C9 16.9105 9.08954 17 9.2 17H12.5C14 17 15 16 15 14.5C15 11.7046 11 12 11 12M9 12H11"/></svg>',pc='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 10L11.8586 14.8586C11.9367 14.9367 12.0633 14.9367 12.1414 14.8586L17 10"/></svg>',pv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 15L11.8586 10.1414C11.9367 10.0633 12.0633 10.0633 12.1414 10.1414L17 15"/></svg>',fv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',gv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2"/></svg>',mv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M13.34 10C12.4223 12.7337 11 17 11 17"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.21 7H14.2"/></svg>',Wl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.69998 12.6L7.67896 12.62C6.53993 13.7048 6.52012 15.5155 7.63516 16.625V16.625C8.72293 17.7073 10.4799 17.7102 11.5712 16.6314L13.0263 15.193C14.0703 14.1609 14.2141 12.525 13.3662 11.3266L13.22 11.12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16.22 11.12L16.3564 10.9805C17.2895 10.0265 17.3478 8.5207 16.4914 7.49733V7.49733C15.5691 6.39509 13.9269 6.25143 12.8271 7.17675L11.3901 8.38588C10.0935 9.47674 9.95706 11.4241 11.0888 12.6852L11.12 12.72"/></svg>',bv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 7.29999H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 7.29999H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.30999 12H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 12H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.40999 16.7H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 16.7H14.59"/></svg>',vv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',wv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><circle cx="10.5" cy="10.5" r="5.5" stroke="currentColor" stroke-width="2"/><line x1="15.4142" x2="19" y1="15" y2="18.5858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',kv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M15.7795 11.5C15.7795 11.5 16.053 11.1962 16.5497 10.6722C17.4442 9.72856 17.4701 8.2475 16.5781 7.30145V7.30145C15.6482 6.31522 14.0873 6.29227 13.1288 7.25073L11.8796 8.49999"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.24517 12.3883C8.24517 12.3883 7.97171 12.6922 7.47504 13.2161C6.58051 14.1598 6.55467 15.6408 7.44666 16.5869V16.5869C8.37653 17.5731 9.93744 17.5961 10.8959 16.6376L12.1452 15.3883"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M17.7802 15.1032L16.597 14.9422C16.0109 14.8624 15.4841 15.3059 15.4627 15.8969L15.4199 17.0818"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6.39064 9.03238L7.58432 9.06668C8.17551 9.08366 8.6522 8.58665 8.61056 7.99669L8.5271 6.81397"/><line x1="12.1142" x2="11.7" y1="12.2" y2="11.7858" stroke="currentColor" stroke-linecap="round" stroke-width="2"/></svg>',xv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/><line x1="12" x2="12" y1="9" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 15.02V15.01"/></svg>';let $l=class Tt{constructor(e){this.nodes={root:null,icon:null},this.confirmationState=null,this.removeSpecialFocusBehavior=()=>{this.nodes.root.classList.remove(Tt.CSS.noFocus)},this.removeSpecialHoverBehavior=()=>{this.nodes.root.classList.remove(Tt.CSS.noHover)},this.onErrorAnimationEnd=()=>{this.nodes.icon.classList.remove(Tt.CSS.wobbleAnimation),this.nodes.icon.removeEventListener("animationend",this.onErrorAnimationEnd)},this.params=e,this.nodes.root=this.make(e)}get isDisabled(){return this.params.isDisabled}get toggle(){return this.params.toggle}get title(){return this.params.title}get closeOnActivate(){return this.params.closeOnActivate}get isConfirmationStateEnabled(){return this.confirmationState!==null}get isFocused(){return this.nodes.root.classList.contains(Tt.CSS.focused)}static get CSS(){return{container:"ce-popover-item",title:"ce-popover-item__title",secondaryTitle:"ce-popover-item__secondary-title",icon:"ce-popover-item__icon",active:"ce-popover-item--active",disabled:"ce-popover-item--disabled",focused:"ce-popover-item--focused",hidden:"ce-popover-item--hidden",confirmationState:"ce-popover-item--confirmation",noHover:"ce-popover-item--no-hover",noFocus:"ce-popover-item--no-focus",wobbleAnimation:"wobble"}}getElement(){return this.nodes.root}handleClick(){if(this.isConfirmationStateEnabled){this.activateOrEnableConfirmationMode(this.confirmationState);return}this.activateOrEnableConfirmationMode(this.params)}toggleActive(e){this.nodes.root.classList.toggle(Tt.CSS.active,e)}toggleHidden(e){this.nodes.root.classList.toggle(Tt.CSS.hidden,e)}reset(){this.isConfirmationStateEnabled&&this.disableConfirmationMode()}onFocus(){this.disableSpecialHoverAndFocusBehavior()}make(e){const n=y.make("div",Tt.CSS.container);return e.name&&(n.dataset.itemName=e.name),this.nodes.icon=y.make("div",Tt.CSS.icon,{innerHTML:e.icon||gv}),n.appendChild(this.nodes.icon),n.appendChild(y.make("div",Tt.CSS.title,{innerHTML:e.title||""})),e.secondaryLabel&&n.appendChild(y.make("div",Tt.CSS.secondaryTitle,{textContent:e.secondaryLabel})),e.isActive&&n.classList.add(Tt.CSS.active),e.isDisabled&&n.classList.add(Tt.CSS.disabled),n}enableConfirmationMode(e){const n={...this.params,...e,confirmation:e.confirmation},r=this.make(n);this.nodes.root.innerHTML=r.innerHTML,this.nodes.root.classList.add(Tt.CSS.confirmationState),this.confirmationState=e,this.enableSpecialHoverAndFocusBehavior()}disableConfirmationMode(){const e=this.make(this.params);this.nodes.root.innerHTML=e.innerHTML,this.nodes.root.classList.remove(Tt.CSS.confirmationState),this.confirmationState=null,this.disableSpecialHoverAndFocusBehavior()}enableSpecialHoverAndFocusBehavior(){this.nodes.root.classList.add(Tt.CSS.noHover),this.nodes.root.classList.add(Tt.CSS.noFocus),this.nodes.root.addEventListener("mouseleave",this.removeSpecialHoverBehavior,{once:!0})}disableSpecialHoverAndFocusBehavior(){this.removeSpecialFocusBehavior(),this.removeSpecialHoverBehavior(),this.nodes.root.removeEventListener("mouseleave",this.removeSpecialHoverBehavior)}activateOrEnableConfirmationMode(e){if(e.confirmation===void 0)try{e.onActivate(e),this.disableConfirmationMode()}catch{this.animateError()}else this.enableConfirmationMode(e.confirmation)}animateError(){this.nodes.icon.classList.contains(Tt.CSS.wobbleAnimation)||(this.nodes.icon.classList.add(Tt.CSS.wobbleAnimation),this.nodes.icon.addEventListener("animationend",this.onErrorAnimationEnd))}};const ro=class{constructor(l,e){this.cursor=-1,this.items=[],this.items=l||[],this.focusedCssClass=e}get currentItem(){return this.cursor===-1?null:this.items[this.cursor]}setCursor(l){l<this.items.length&&l>=-1&&(this.dropCursor(),this.cursor=l,this.items[this.cursor].classList.add(this.focusedCssClass))}setItems(l){this.items=l}next(){this.cursor=this.leafNodesAndReturnIndex(ro.directions.RIGHT)}previous(){this.cursor=this.leafNodesAndReturnIndex(ro.directions.LEFT)}dropCursor(){this.cursor!==-1&&(this.items[this.cursor].classList.remove(this.focusedCssClass),this.cursor=-1)}leafNodesAndReturnIndex(l){if(this.items.length===0)return this.cursor;let e=this.cursor;return e===-1?e=l===ro.directions.RIGHT?-1:0:this.items[e].classList.remove(this.focusedCssClass),l===ro.directions.RIGHT?e=(e+1)%this.items.length:e=(this.items.length+e-1)%this.items.length,y.canSetCaret(this.items[e])&&li(()=>U.setCursor(this.items[e]),50)(),this.items[e].classList.add(this.focusedCssClass),e}};let Ln=ro;Ln.directions={RIGHT:"right",LEFT:"left"};class Fe{constructor(e){this.iterator=null,this.activated=!1,this.flipCallbacks=[],this.onKeyDown=n=>{if(this.isEventReadyForHandling(n))switch(Fe.usedKeys.includes(n.keyCode)&&n.preventDefault(),n.keyCode){case z.TAB:this.handleTabPress(n);break;case z.LEFT:case z.UP:this.flipLeft();break;case z.RIGHT:case z.DOWN:this.flipRight();break;case z.ENTER:this.handleEnterPress(n);break}},this.iterator=new Ln(e.items,e.focusedItemClass),this.activateCallback=e.activateCallback,this.allowedKeys=e.allowedKeys||Fe.usedKeys}get isActivated(){return this.activated}static get usedKeys(){return[z.TAB,z.LEFT,z.RIGHT,z.ENTER,z.UP,z.DOWN]}activate(e,n){this.activated=!0,e&&this.iterator.setItems(e),n!==void 0&&this.iterator.setCursor(n),document.addEventListener("keydown",this.onKeyDown,!0)}deactivate(){this.activated=!1,this.dropCursor(),document.removeEventListener("keydown",this.onKeyDown)}focusFirst(){this.dropCursor(),this.flipRight()}flipLeft(){this.iterator.previous(),this.flipCallback()}flipRight(){this.iterator.next(),this.flipCallback()}hasFocus(){return!!this.iterator.currentItem}onFlip(e){this.flipCallbacks.push(e)}removeOnFlip(e){this.flipCallbacks=this.flipCallbacks.filter(n=>n!==e)}dropCursor(){this.iterator.dropCursor()}isEventReadyForHandling(e){return this.activated&&this.allowedKeys.includes(e.keyCode)}handleTabPress(e){switch(e.shiftKey?Ln.directions.LEFT:Ln.directions.RIGHT){case Ln.directions.RIGHT:this.flipRight();break;case Ln.directions.LEFT:this.flipLeft();break}}handleEnterPress(e){this.activated&&(this.iterator.currentItem&&(e.stopPropagation(),e.preventDefault(),this.iterator.currentItem.click()),pt(this.activateCallback)&&this.activateCallback(this.iterator.currentItem))}flipCallback(){this.iterator.currentItem&&this.iterator.currentItem.scrollIntoViewIfNeeded(),this.flipCallbacks.forEach(e=>e())}}class ao{static get CSS(){return{wrapper:"cdx-search-field",icon:"cdx-search-field__icon",input:"cdx-search-field__input"}}constructor({items:e,onSearch:n,placeholder:r}){this.listeners=new Gr,this.items=e,this.onSearch=n,this.render(r)}getElement(){return this.wrapper}focus(){this.input.focus()}clear(){this.input.value="",this.searchQuery="",this.onSearch("",this.foundItems)}destroy(){this.listeners.removeAll()}render(e){this.wrapper=y.make("div",ao.CSS.wrapper);const n=y.make("div",ao.CSS.icon,{innerHTML:wv});this.input=y.make("input",ao.CSS.input,{placeholder:e,tabIndex:-1}),this.wrapper.appendChild(n),this.wrapper.appendChild(this.input),this.listeners.on(this.input,"input",()=>{this.searchQuery=this.input.value,this.onSearch(this.searchQuery,this.foundItems)})}get foundItems(){return this.items.filter(e=>this.checkItem(e))}checkItem(e){var n;const r=((n=e.title)==null?void 0:n.toLowerCase())||"",s=this.searchQuery.toLowerCase();return r.includes(s)}}const so=class{lock(){Ul?this.lockHard():document.body.classList.add(so.CSS.scrollLocked)}unlock(){Ul?this.unlockHard():document.body.classList.remove(so.CSS.scrollLocked)}lockHard(){this.scrollPosition=window.pageYOffset,document.documentElement.style.setProperty("--window-scroll-offset",`${this.scrollPosition}px`),document.body.classList.add(so.CSS.scrollLockedHard)}unlockHard(){document.body.classList.remove(so.CSS.scrollLockedHard),this.scrollPosition!==null&&window.scrollTo(0,this.scrollPosition),this.scrollPosition=null}};let fc=so;fc.CSS={scrollLocked:"ce-scroll-locked",scrollLockedHard:"ce-scroll-locked--hard"};var yv=Object.defineProperty,Cv=Object.getOwnPropertyDescriptor,Sv=(l,e,n,r)=>{for(var s=r>1?void 0:r?Cv(e,n):e,c=l.length-1,h;c>=0;c--)(h=l[c])&&(s=(r?h(e,n,s):h(s))||s);return r&&s&&yv(e,n,s),s},ho=(l=>(l.Close="close",l))(ho||{});const Lt=class extends ui{constructor(l){super(),this.scopeElement=document.body,this.listeners=new Gr,this.scrollLocker=new fc,this.nodes={wrapper:null,popover:null,nothingFoundMessage:null,customContent:null,items:null,overlay:null},this.messages={nothingFound:"Nothing found",search:"Search"},this.onFlip=()=>{this.items.find(e=>e.isFocused).onFocus()},this.items=l.items.map(e=>new $l(e)),l.scopeElement!==void 0&&(this.scopeElement=l.scopeElement),l.messages&&(this.messages={...this.messages,...l.messages}),l.customContentFlippableItems&&(this.customContentFlippableItems=l.customContentFlippableItems),this.make(),l.customContent&&this.addCustomContent(l.customContent),l.searchable&&this.addSearch(),this.initializeFlipper()}static get CSS(){return{popover:"ce-popover",popoverOpenTop:"ce-popover--open-top",popoverOpened:"ce-popover--opened",search:"ce-popover__search",nothingFoundMessage:"ce-popover__nothing-found-message",nothingFoundMessageDisplayed:"ce-popover__nothing-found-message--displayed",customContent:"ce-popover__custom-content",customContentHidden:"ce-popover__custom-content--hidden",items:"ce-popover__items",overlay:"ce-popover__overlay",overlayHidden:"ce-popover__overlay--hidden"}}getElement(){return this.nodes.wrapper}hasFocus(){return this.flipper.hasFocus()}show(){this.shouldOpenBottom||(this.nodes.popover.style.setProperty("--popover-height",this.height+"px"),this.nodes.popover.classList.add(Lt.CSS.popoverOpenTop)),this.nodes.overlay.classList.remove(Lt.CSS.overlayHidden),this.nodes.popover.classList.add(Lt.CSS.popoverOpened),this.flipper.activate(this.flippableElements),this.search!==void 0&&requestAnimationFrame(()=>{var l;(l=this.search)==null||l.focus()}),dn()&&this.scrollLocker.lock()}hide(){this.nodes.popover.classList.remove(Lt.CSS.popoverOpened),this.nodes.popover.classList.remove(Lt.CSS.popoverOpenTop),this.nodes.overlay.classList.add(Lt.CSS.overlayHidden),this.flipper.deactivate(),this.items.forEach(l=>l.reset()),this.search!==void 0&&this.search.clear(),dn()&&this.scrollLocker.unlock(),this.emit("close")}destroy(){this.flipper.deactivate(),this.listeners.removeAll(),dn()&&this.scrollLocker.unlock()}make(){this.nodes.popover=y.make("div",[Lt.CSS.popover]),this.nodes.nothingFoundMessage=y.make("div",[Lt.CSS.nothingFoundMessage],{textContent:this.messages.nothingFound}),this.nodes.popover.appendChild(this.nodes.nothingFoundMessage),this.nodes.items=y.make("div",[Lt.CSS.items]),this.items.forEach(l=>{this.nodes.items.appendChild(l.getElement())}),this.nodes.popover.appendChild(this.nodes.items),this.listeners.on(this.nodes.popover,"click",l=>{const e=this.getTargetItem(l);e!==void 0&&this.handleItemClick(e)}),this.nodes.wrapper=y.make("div"),this.nodes.overlay=y.make("div",[Lt.CSS.overlay,Lt.CSS.overlayHidden]),this.listeners.on(this.nodes.overlay,"click",()=>{this.hide()}),this.nodes.wrapper.appendChild(this.nodes.overlay),this.nodes.wrapper.appendChild(this.nodes.popover)}addSearch(){this.search=new ao({items:this.items,placeholder:this.messages.search,onSearch:(e,n)=>{this.items.forEach(s=>{const c=!n.includes(s);s.toggleHidden(c)}),this.toggleNothingFoundMessage(n.length===0),this.toggleCustomContent(e!=="");const r=e===""?this.flippableElements:n.map(s=>s.getElement());this.flipper.isActivated&&(this.flipper.deactivate(),this.flipper.activate(r))}});const l=this.search.getElement();l.classList.add(Lt.CSS.search),this.nodes.popover.insertBefore(l,this.nodes.popover.firstChild)}addCustomContent(l){this.nodes.customContent=l,this.nodes.customContent.classList.add(Lt.CSS.customContent),this.nodes.popover.insertBefore(l,this.nodes.popover.firstChild)}getTargetItem(l){return this.items.find(e=>l.composedPath().includes(e.getElement()))}handleItemClick(l){l.isDisabled||(this.items.filter(e=>e!==l).forEach(e=>e.reset()),l.handleClick(),this.toggleItemActivenessIfNeeded(l),l.closeOnActivate&&this.hide())}initializeFlipper(){this.flipper=new Fe({items:this.flippableElements,focusedItemClass:$l.CSS.focused,allowedKeys:[z.TAB,z.UP,z.DOWN,z.ENTER]}),this.flipper.onFlip(this.onFlip)}get flippableElements(){const l=this.items.map(e=>e.getElement());return(this.customContentFlippableItems||[]).concat(l)}get height(){let l=0;if(this.nodes.popover===null)return l;const e=this.nodes.popover.cloneNode(!0);return e.style.visibility="hidden",e.style.position="absolute",e.style.top="-1000px",e.classList.add(Lt.CSS.popoverOpened),document.body.appendChild(e),l=e.offsetHeight,e.remove(),l}get shouldOpenBottom(){const l=this.nodes.popover.getBoundingClientRect(),e=this.scopeElement.getBoundingClientRect(),n=this.height,r=l.top+n,s=l.top-n,c=Math.min(window.innerHeight,e.bottom);return s<e.top||r<=c}toggleNothingFoundMessage(l){this.nodes.nothingFoundMessage.classList.toggle(Lt.CSS.nothingFoundMessageDisplayed,l)}toggleCustomContent(l){var e;(e=this.nodes.customContent)==null||e.classList.toggle(Lt.CSS.customContentHidden,l)}toggleItemActivenessIfNeeded(l){if(l.toggle===!0&&l.toggleActive(),typeof l.toggle=="string"){const e=this.items.filter(n=>n.toggle===l.toggle);if(e.length===1){l.toggleActive();return}e.forEach(n=>{n.toggleActive(n===l)})}}};let jr=Lt;Sv([Rn],jr.prototype,"height",1);class Ev extends et{constructor(){super(...arguments),this.opened=!1,this.selection=new U,this.onPopoverClose=()=>{this.close()}}get events(){return{opened:"block-settings-opened",closed:"block-settings-closed"}}get CSS(){return{settings:"ce-settings"}}get flipper(){var e;return(e=this.popover)==null?void 0:e.flipper}make(){this.nodes.wrapper=y.make("div",[this.CSS.settings])}destroy(){this.removeAllNodes()}open(e=this.Editor.BlockManager.currentBlock){this.opened=!0,this.selection.save(),this.Editor.BlockSelection.selectBlock(e),this.Editor.BlockSelection.clearCache();const[n,r]=e.getTunes();this.eventsDispatcher.emit(this.events.opened),this.popover=new jr({searchable:!0,items:n.map(s=>this.resolveTuneAliases(s)),customContent:r,customContentFlippableItems:this.getControls(r),scopeElement:this.Editor.API.methods.ui.nodes.redactor,messages:{nothingFound:Xt.ui(xe.ui.popover,"Nothing found"),search:Xt.ui(xe.ui.popover,"Filter")}}),this.popover.on(ho.Close,this.onPopoverClose),this.nodes.wrapper.append(this.popover.getElement()),this.popover.show()}getElement(){return this.nodes.wrapper}close(){this.opened&&(this.opened=!1,U.isAtEditor||this.selection.restore(),this.selection.clearSaved(),!this.Editor.CrossBlockSelection.isCrossBlockSelectionStarted&&this.Editor.BlockManager.currentBlock&&this.Editor.BlockSelection.unselectBlock(this.Editor.BlockManager.currentBlock),this.eventsDispatcher.emit(this.events.closed),this.popover&&(this.popover.off(ho.Close,this.onPopoverClose),this.popover.destroy(),this.popover.getElement().remove(),this.popover=null))}getControls(e){const{StylesAPI:n}=this.Editor,r=e.querySelectorAll(`.${n.classes.settingsButton}, ${y.allInputsSelector}`);return Array.from(r)}resolveTuneAliases(e){const n=hv(e,{label:"title"});return e.confirmation&&(n.confirmation=this.resolveTuneAliases(e.confirmation)),n}}class ne extends et{constructor(){super(...arguments),this.opened=!1,this.tools=[],this.flipper=null,this.togglingCallback=null}static get CSS(){return{conversionToolbarWrapper:"ce-conversion-toolbar",conversionToolbarShowed:"ce-conversion-toolbar--showed",conversionToolbarTools:"ce-conversion-toolbar__tools",conversionToolbarLabel:"ce-conversion-toolbar__label",conversionTool:"ce-conversion-tool",conversionToolHidden:"ce-conversion-tool--hidden",conversionToolIcon:"ce-conversion-tool__icon",conversionToolSecondaryLabel:"ce-conversion-tool__secondary-label",conversionToolFocused:"ce-conversion-tool--focused",conversionToolActive:"ce-conversion-tool--active"}}make(){this.nodes.wrapper=y.make("div",[ne.CSS.conversionToolbarWrapper,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.tools=y.make("div",ne.CSS.conversionToolbarTools);const e=y.make("div",ne.CSS.conversionToolbarLabel,{textContent:Xt.ui(xe.ui.inlineToolbar.converter,"Convert to")});return this.addTools(),this.enableFlipper(),y.append(this.nodes.wrapper,e),y.append(this.nodes.wrapper,this.nodes.tools),this.nodes.wrapper}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}toggle(e){this.opened?this.close():this.open(),pt(e)&&(this.togglingCallback=e)}open(){this.filterTools(),this.opened=!0,this.nodes.wrapper.classList.add(ne.CSS.conversionToolbarShowed),window.requestAnimationFrame(()=>{this.flipper.activate(this.tools.map(e=>e.button).filter(e=>!e.classList.contains(ne.CSS.conversionToolHidden))),this.flipper.focusFirst(),pt(this.togglingCallback)&&this.togglingCallback(!0)})}close(){this.opened=!1,this.flipper.deactivate(),this.nodes.wrapper.classList.remove(ne.CSS.conversionToolbarShowed),pt(this.togglingCallback)&&this.togglingCallback(!1)}hasTools(){return this.tools.length===1?this.tools[0].name!==this.config.defaultBlock:!0}async replaceWithBlock(e,n){const{BlockManager:r,BlockSelection:s,InlineToolbar:c,Caret:h}=this.Editor;r.convert(this.Editor.BlockManager.currentBlock,e,n),s.clearSelection(),this.close(),c.close(),window.requestAnimationFrame(()=>{h.setToBlock(this.Editor.BlockManager.currentBlock,h.positions.END)})}addTools(){const e=this.Editor.Tools.blockTools;Array.from(e.entries()).forEach(([n,r])=>{var s;const c=r.conversionConfig;!c||!c.import||(s=r.toolbox)==null||s.forEach(h=>this.addToolIfValid(n,h))})}addToolIfValid(e,n){pe(n)||!n.icon||this.addTool(e,n)}addTool(e,n){var r;const s=y.make("div",[ne.CSS.conversionTool]),c=y.make("div",[ne.CSS.conversionToolIcon]);s.dataset.tool=e,c.innerHTML=n.icon,y.append(s,c),y.append(s,y.text(Xt.t(xe.toolNames,n.title||Mn(e))));const h=(r=this.Editor.Tools.blockTools.get(e))==null?void 0:r.shortcut;if(h){const f=y.make("span",ne.CSS.conversionToolSecondaryLabel,{innerText:hi(h)});y.append(s,f)}y.append(this.nodes.tools,s),this.tools.push({name:e,button:s,toolboxItem:n}),this.listeners.on(s,"click",async()=>{await this.replaceWithBlock(e,n.data)})}async filterTools(){const{currentBlock:e}=this.Editor.BlockManager,n=await e.getActiveToolboxEntry();function r(s,c){return s.icon===c.icon&&s.title===c.title}this.tools.forEach(s=>{let c=!1;if(n){const h=r(n,s.toolboxItem);c=s.button.dataset.tool===e.name&&h}s.button.hidden=c,s.button.classList.toggle(ne.CSS.conversionToolHidden,c)})}enableFlipper(){this.flipper=new Fe({focusedItemClass:ne.CSS.conversionToolFocused})}}var Kr={},Tv={get exports(){return Kr},set exports(l){Kr=l}};/*!
 * Library for handling keyboard shortcuts
 * @copyright CodeX (https://codex.so)
 * @license MIT
 * @author CodeX (https://codex.so)
 * @version 1.2.0
 */(function(l,e){(function(n,r){l.exports=r()})(window,function(){return function(n){var r={};function s(c){if(r[c])return r[c].exports;var h=r[c]={i:c,l:!1,exports:{}};return n[c].call(h.exports,h,h.exports,s),h.l=!0,h.exports}return s.m=n,s.c=r,s.d=function(c,h,f){s.o(c,h)||Object.defineProperty(c,h,{enumerable:!0,get:f})},s.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},s.t=function(c,h){if(1&h&&(c=s(c)),8&h||4&h&&typeof c=="object"&&c&&c.__esModule)return c;var f=Object.create(null);if(s.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:c}),2&h&&typeof c!="string")for(var m in c)s.d(f,m,(function(k){return c[k]}).bind(null,m));return f},s.n=function(c){var h=c&&c.__esModule?function(){return c.default}:function(){return c};return s.d(h,"a",h),h},s.o=function(c,h){return Object.prototype.hasOwnProperty.call(c,h)},s.p="",s(s.s=0)}([function(n,r,s){function c(m,k){for(var B=0;B<k.length;B++){var S=k[B];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(m,S.key,S)}}function h(m,k,B){return k&&c(m.prototype,k),B&&c(m,B),m}s.r(r);var f=function(){function m(k){var B=this;(function(S,L){if(!(S instanceof L))throw new TypeError("Cannot call a class as a function")})(this,m),this.commands={},this.keys={},this.name=k.name,this.parseShortcutName(k.name),this.element=k.on,this.callback=k.callback,this.executeShortcut=function(S){B.execute(S)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return h(m,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,".":190}}}]),h(m,[{key:"parseShortcutName",value:function(k){k=k.split("+");for(var B=0;B<k.length;B++){k[B]=k[B].toUpperCase();var S=!1;for(var L in m.supportedCommands)if(m.supportedCommands[L].includes(k[B])){S=this.commands[L]=!0;break}S||(this.keys[k[B]]=!0)}for(var D in m.supportedCommands)this.commands[D]||(this.commands[D]=!1)}},{key:"execute",value:function(k){var B,S={CMD:k.ctrlKey||k.metaKey,SHIFT:k.shiftKey,ALT:k.altKey},L=!0;for(B in this.commands)this.commands[B]!==S[B]&&(L=!1);var D,I=!0;for(D in this.keys)I=I&&k.keyCode===m.keyCodes[D];L&&I&&this.callback(k)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),m}();r.default=f}]).default})})(Tv);const _v=qr(Kr);class Bv{constructor(){this.registeredShortcuts=new Map}add(e){if(this.findShortcut(e.on,e.name))throw Error(`Shortcut ${e.name} is already registered for ${e.on}. Please remove it before add a new handler.`);const n=new _v({name:e.name,on:e.on,callback:e.handler}),r=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[...r,n])}remove(e,n){const r=this.findShortcut(e,n);if(!r)return;r.remove();const s=this.registeredShortcuts.get(e);this.registeredShortcuts.set(e,s.filter(c=>c!==r))}findShortcut(e,n){return(this.registeredShortcuts.get(e)||[]).find(({name:r})=>r===n)}}const On=new Bv;var Iv=Object.defineProperty,Lv=Object.getOwnPropertyDescriptor,gc=(l,e,n,r)=>{for(var s=r>1?void 0:r?Lv(e,n):e,c=l.length-1,h;c>=0;c--)(h=l[c])&&(s=(r?h(e,n,s):h(s))||s);return r&&s&&Iv(e,n,s),s},si=(l=>(l.Opened="toolbox-opened",l.Closed="toolbox-closed",l.BlockAdded="toolbox-block-added",l))(si||{});const mc=class extends ui{constructor({api:l,tools:e,i18nLabels:n}){super(),this.opened=!1,this.nodes={toolbox:null},this.onPopoverClose=()=>{this.opened=!1,this.emit("toolbox-closed")},this.api=l,this.tools=e,this.i18nLabels=n}get isEmpty(){return this.toolsToBeDisplayed.length===0}static get CSS(){return{toolbox:"ce-toolbox"}}make(){return this.popover=new jr({scopeElement:this.api.ui.nodes.redactor,searchable:!0,messages:{nothingFound:this.i18nLabels.nothingFound,search:this.i18nLabels.filter},items:this.toolboxItemsToBeDisplayed}),this.popover.on(ho.Close,this.onPopoverClose),this.enableShortcuts(),this.nodes.toolbox=this.popover.getElement(),this.nodes.toolbox.classList.add(mc.CSS.toolbox),this.nodes.toolbox}hasFocus(){var l;return(l=this.popover)==null?void 0:l.hasFocus()}destroy(){var l;super.destroy(),this.nodes&&this.nodes.toolbox&&(this.nodes.toolbox.remove(),this.nodes.toolbox=null),this.removeAllShortcuts(),(l=this.popover)==null||l.off(ho.Close,this.onPopoverClose)}toolButtonActivated(l,e){this.insertNewBlock(l,e)}open(){var l;this.isEmpty||((l=this.popover)==null||l.show(),this.opened=!0,this.emit("toolbox-opened"))}close(){var l;(l=this.popover)==null||l.hide(),this.opened=!1,this.emit("toolbox-closed")}toggle(){this.opened?this.close():this.open()}get toolsToBeDisplayed(){const l=[];return this.tools.forEach(e=>{e.toolbox&&l.push(e)}),l}get toolboxItemsToBeDisplayed(){const l=(e,n)=>({icon:e.icon,title:Xt.t(xe.toolNames,e.title||Mn(n.name)),name:n.name,onActivate:()=>{this.toolButtonActivated(n.name,e.data)},secondaryLabel:n.shortcut?hi(n.shortcut):""});return this.toolsToBeDisplayed.reduce((e,n)=>(Array.isArray(n.toolbox)?n.toolbox.forEach(r=>{e.push(l(r,n))}):n.toolbox!==void 0&&e.push(l(n.toolbox,n)),e),[])}enableShortcuts(){this.toolsToBeDisplayed.forEach(l=>{const e=l.shortcut;e&&this.enableShortcutForTool(l.name,e)})}enableShortcutForTool(l,e){On.add({name:e,on:this.api.ui.nodes.redactor,handler:n=>{n.preventDefault();const r=this.api.blocks.getCurrentBlockIndex(),s=this.api.blocks.getBlockByIndex(r);if(s)try{this.api.blocks.convert(s.id,l),window.requestAnimationFrame(()=>{this.api.caret.setToBlock(r,"end")});return}catch{}this.insertNewBlock(l)}})}removeAllShortcuts(){this.toolsToBeDisplayed.forEach(l=>{const e=l.shortcut;e&&On.remove(this.api.ui.nodes.redactor,e)})}async insertNewBlock(l,e){const n=this.api.blocks.getCurrentBlockIndex(),r=this.api.blocks.getBlockByIndex(n);if(!r)return;const s=r.isEmpty?n:n+1;let c;if(e){const f=await this.api.blocks.composeBlockData(l);c=Object.assign(f,e)}const h=this.api.blocks.insert(l,c,void 0,s,void 0,r.isEmpty);h.call(De.APPEND_CALLBACK),this.api.caret.setToBlock(s),this.emit("toolbox-block-added",{block:h}),this.api.toolbar.close()}};let Jr=mc;gc([Rn],Jr.prototype,"toolsToBeDisplayed",1);gc([Rn],Jr.prototype,"toolboxItemsToBeDisplayed",1);const bc="block hovered";class Av extends et{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.toolboxInstance=null}get CSS(){return{toolbar:"ce-toolbar",content:"ce-toolbar__content",actions:"ce-toolbar__actions",actionsOpened:"ce-toolbar__actions--opened",toolbarOpened:"ce-toolbar--opened",openedToolboxHolderModifier:"codex-editor--toolbox-opened",plusButton:"ce-toolbar__plus",plusButtonShortcut:"ce-toolbar__plus-shortcut",settingsToggler:"ce-toolbar__settings-btn",settingsTogglerHidden:"ce-toolbar__settings-btn--hidden"}}get opened(){return this.nodes.wrapper.classList.contains(this.CSS.toolbarOpened)}get toolbox(){var e;return{opened:(e=this.toolboxInstance)==null?void 0:e.opened,close:()=>{var n;(n=this.toolboxInstance)==null||n.close()},open:()=>{if(this.toolboxInstance===null){it("toolbox.open() called before initialization is finished","warn");return}this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.toolboxInstance.open()},toggle:()=>{if(this.toolboxInstance===null){it("toolbox.toggle() called before initialization is finished","warn");return}this.toolboxInstance.toggle()},hasFocus:()=>{var n;return(n=this.toolboxInstance)==null?void 0:n.hasFocus()}}}get blockActions(){return{hide:()=>{this.nodes.actions.classList.remove(this.CSS.actionsOpened)},show:()=>{this.nodes.actions.classList.add(this.CSS.actionsOpened)}}}get blockTunesToggler(){return{hide:()=>this.nodes.settingsToggler.classList.add(this.CSS.settingsTogglerHidden),show:()=>this.nodes.settingsToggler.classList.remove(this.CSS.settingsTogglerHidden)}}toggleReadOnly(e){e?(this.destroy(),this.Editor.BlockSettings.destroy(),this.disableModuleBindings()):window.requestIdleCallback(()=>{this.drawUI(),this.enableModuleBindings()},{timeout:2e3})}moveAndOpen(e=this.Editor.BlockManager.currentBlock){if(this.toolboxInstance===null){it("Can't open Toolbar since Editor initialization is not finished yet","warn");return}if(this.toolboxInstance.opened&&this.toolboxInstance.close(),this.Editor.BlockSettings.opened&&this.Editor.BlockSettings.close(),!e)return;this.hoveredBlock=e;const n=e.holder,{isMobile:r}=this.Editor.UI,s=e.pluginsContent,c=window.getComputedStyle(s),h=parseInt(c.paddingTop,10),f=n.offsetHeight;let m;r?m=n.offsetTop+f:m=n.offsetTop+h,this.nodes.wrapper.style.top=`${Math.floor(m)}px`,this.Editor.BlockManager.blocks.length===1&&e.isEmpty?this.blockTunesToggler.hide():this.blockTunesToggler.show(),this.open()}close(){var e,n;this.Editor.ReadOnly.isEnabled||((e=this.nodes.wrapper)==null||e.classList.remove(this.CSS.toolbarOpened),this.blockActions.hide(),(n=this.toolboxInstance)==null||n.close(),this.Editor.BlockSettings.close(),this.reset())}reset(){this.nodes.wrapper.style.top="unset"}open(e=!0){this.nodes.wrapper.classList.add(this.CSS.toolbarOpened),e?this.blockActions.show():this.blockActions.hide()}make(){this.nodes.wrapper=y.make("div",this.CSS.toolbar),["content","actions"].forEach(s=>{this.nodes[s]=y.make("div",this.CSS[s])}),y.append(this.nodes.wrapper,this.nodes.content),y.append(this.nodes.content,this.nodes.actions),this.nodes.plusButton=y.make("div",this.CSS.plusButton,{innerHTML:vv}),y.append(this.nodes.actions,this.nodes.plusButton),this.readOnlyMutableListeners.on(this.nodes.plusButton,"click",()=>{Yr(!0),this.plusButtonClicked()},!1);const e=y.make("div");e.appendChild(document.createTextNode(Xt.ui(xe.ui.toolbar.toolbox,"Add"))),e.appendChild(y.make("div",this.CSS.plusButtonShortcut,{textContent:"/"})),co(this.nodes.plusButton,e,{hidingDelay:400}),this.nodes.settingsToggler=y.make("span",this.CSS.settingsToggler,{innerHTML:bv}),y.append(this.nodes.actions,this.nodes.settingsToggler);const n=y.make("div"),r=y.text(Xt.ui(xe.ui.blockTunes.toggler,"Click to tune"));n.appendChild(r),n.appendChild(y.make("div",this.CSS.plusButtonShortcut,{textContent:hi("CMD + /")})),co(this.nodes.settingsToggler,n,{hidingDelay:400}),y.append(this.nodes.actions,this.makeToolbox()),y.append(this.nodes.actions,this.Editor.BlockSettings.getElement()),y.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper)}makeToolbox(){return this.toolboxInstance=new Jr({api:this.Editor.API.methods,tools:this.Editor.Tools.blockTools,i18nLabels:{filter:Xt.ui(xe.ui.popover,"Filter"),nothingFound:Xt.ui(xe.ui.popover,"Nothing found")}}),this.toolboxInstance.on(si.Opened,()=>{this.Editor.UI.nodes.wrapper.classList.add(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(si.Closed,()=>{this.Editor.UI.nodes.wrapper.classList.remove(this.CSS.openedToolboxHolderModifier)}),this.toolboxInstance.on(si.BlockAdded,({block:e})=>{const{BlockManager:n,Caret:r}=this.Editor,s=n.getBlockById(e.id);s.inputs.length===0&&(s===n.lastBlock?(n.insertAtEnd(),r.setToBlock(n.lastBlock)):r.setToBlock(n.nextBlock))}),this.toolboxInstance.make()}plusButtonClicked(){var e;this.Editor.BlockManager.currentBlock=this.hoveredBlock,(e=this.toolboxInstance)==null||e.toggle()}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.settingsToggler,"mousedown",e=>{var n;e.stopPropagation(),this.settingsTogglerClicked(),(n=this.toolboxInstance)!=null&&n.opened&&this.toolboxInstance.close(),Yr(!0)},!0),dn()||this.eventsDispatcher.on(bc,e=>{var n;this.Editor.BlockSettings.opened||(n=this.toolboxInstance)!=null&&n.opened||this.moveAndOpen(e.block)})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}settingsTogglerClicked(){this.Editor.BlockManager.currentBlock=this.hoveredBlock,this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.BlockSettings.open(this.hoveredBlock)}drawUI(){this.Editor.BlockSettings.make(),this.make()}destroy(){this.removeAllNodes(),this.toolboxInstance&&this.toolboxInstance.destroy()}}var pi=(l=>(l[l.Block=0]="Block",l[l.Inline=1]="Inline",l[l.Tune=2]="Tune",l))(pi||{}),ai=(l=>(l.Shortcut="shortcut",l.Toolbox="toolbox",l.EnabledInlineTools="inlineToolbar",l.EnabledBlockTunes="tunes",l.Config="config",l))(ai||{}),vc=(l=>(l.Shortcut="shortcut",l.SanitizeConfig="sanitize",l))(vc||{}),An=(l=>(l.IsEnabledLineBreaks="enableLineBreaks",l.Toolbox="toolbox",l.ConversionConfig="conversionConfig",l.IsReadOnlySupported="isReadOnlySupported",l.PasteConfig="pasteConfig",l))(An||{}),Qr=(l=>(l.IsInline="isInline",l.Title="title",l))(Qr||{}),wc=(l=>(l.IsTune="isTune",l))(wc||{});class ts{constructor({name:e,constructable:n,config:r,api:s,isDefault:c,isInternal:h=!1,defaultPlaceholder:f}){this.api=s,this.name=e,this.constructable=n,this.config=r,this.isDefault=c,this.isInternal=h,this.defaultPlaceholder=f}get settings(){const e=this.config.config||{};return this.isDefault&&!("placeholder"in e)&&this.defaultPlaceholder&&(e.placeholder=this.defaultPlaceholder),e}reset(){if(pt(this.constructable.reset))return this.constructable.reset()}prepare(){if(pt(this.constructable.prepare))return this.constructable.prepare({toolName:this.name,config:this.settings})}get shortcut(){const e=this.constructable.shortcut;return this.config.shortcut||e}get sanitizeConfig(){return this.constructable.sanitize||{}}isInline(){return this.type===1}isBlock(){return this.type===0}isTune(){return this.type===2}}class Mv extends et{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.CSS={inlineToolbar:"ce-inline-toolbar",inlineToolbarShowed:"ce-inline-toolbar--showed",inlineToolbarLeftOriented:"ce-inline-toolbar--left-oriented",inlineToolbarRightOriented:"ce-inline-toolbar--right-oriented",inlineToolbarShortcut:"ce-inline-toolbar__shortcut",buttonsWrapper:"ce-inline-toolbar__buttons",actionsWrapper:"ce-inline-toolbar__actions",inlineToolButton:"ce-inline-tool",inputField:"cdx-input",focusedButton:"ce-inline-tool--focused",conversionToggler:"ce-inline-toolbar__dropdown",conversionTogglerArrow:"ce-inline-toolbar__dropdown-arrow",conversionTogglerHidden:"ce-inline-toolbar__dropdown--hidden",conversionTogglerContent:"ce-inline-toolbar__dropdown-content",togglerAndButtonsWrapper:"ce-inline-toolbar__toggler-and-button-wrapper"},this.opened=!1,this.toolbarVerticalMargin=dn()?20:6,this.buttonsList=null,this.width=0,this.flipper=null}toggleReadOnly(e){e?(this.destroy(),this.Editor.ConversionToolbar.destroy()):window.requestIdleCallback(()=>{this.make()},{timeout:2e3})}async tryToShow(e=!1,n=!0){e&&this.close(),this.allowedToShow()&&(await this.addToolsFiltered(n),this.move(),this.open(n),this.Editor.Toolbar.close())}close(){this.opened&&(this.Editor.ReadOnly.isEnabled||(this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarShowed),Array.from(this.toolsInstances.entries()).forEach(([e,n])=>{const r=this.getToolShortcut(e);r&&On.remove(this.Editor.UI.nodes.redactor,r),pt(n.clear)&&n.clear()}),this.reset(),this.opened=!1,this.flipper.deactivate(),this.Editor.ConversionToolbar.close()))}containsNode(e){return this.nodes.wrapper===void 0?!1:this.nodes.wrapper.contains(e)}destroy(){this.flipper&&(this.flipper.deactivate(),this.flipper=null),this.removeAllNodes()}make(){this.nodes.wrapper=y.make("div",[this.CSS.inlineToolbar,...this.isRtl?[this.Editor.UI.CSS.editorRtlFix]:[]]),this.nodes.togglerAndButtonsWrapper=y.make("div",this.CSS.togglerAndButtonsWrapper),this.nodes.buttons=y.make("div",this.CSS.buttonsWrapper),this.nodes.actions=y.make("div",this.CSS.actionsWrapper),this.listeners.on(this.nodes.wrapper,"mousedown",e=>{e.target.closest(`.${this.CSS.actionsWrapper}`)||e.preventDefault()}),y.append(this.nodes.wrapper,[this.nodes.togglerAndButtonsWrapper,this.nodes.actions]),y.append(this.Editor.UI.nodes.wrapper,this.nodes.wrapper),this.addConversionToggler(),y.append(this.nodes.togglerAndButtonsWrapper,this.nodes.buttons),this.prepareConversionToolbar(),window.requestAnimationFrame(()=>{this.recalculateWidth()}),this.enableFlipper()}open(){if(this.opened)return;this.nodes.wrapper.classList.add(this.CSS.inlineToolbarShowed),this.buttonsList=this.nodes.buttons.querySelectorAll(`.${this.CSS.inlineToolButton}`),this.opened=!0;let e=Array.from(this.buttonsList);e.unshift(this.nodes.conversionToggler),e=e.filter(n=>!n.hidden),this.flipper.activate(e)}move(){const e=U.rect,n=this.Editor.UI.nodes.wrapper.getBoundingClientRect(),r={x:e.x-n.x,y:e.y+e.height-n.top+this.toolbarVerticalMargin};r.x+this.width+n.x>this.Editor.UI.contentRect.right&&(r.x=this.Editor.UI.contentRect.right-this.width-n.x),this.nodes.wrapper.style.left=Math.floor(r.x)+"px",this.nodes.wrapper.style.top=Math.floor(r.y)+"px"}reset(){this.nodes.wrapper.classList.remove(this.CSS.inlineToolbarLeftOriented,this.CSS.inlineToolbarRightOriented),this.nodes.wrapper.style.left="0",this.nodes.wrapper.style.top="0"}allowedToShow(){const e=["IMG","INPUT"],n=U.get(),r=U.text;if(!n||!n.anchorNode||n.isCollapsed||r.length<1)return!1;const s=y.isElement(n.anchorNode)?n.anchorNode:n.anchorNode.parentElement;if(n&&e.includes(s.tagName)||s.closest('[contenteditable="true"]')===null)return!1;const c=this.Editor.BlockManager.getBlock(n.anchorNode);return c?c.tool.inlineTools.size!==0:!1}recalculateWidth(){this.width=this.nodes.wrapper.offsetWidth}addConversionToggler(){this.nodes.conversionToggler=y.make("div",this.CSS.conversionToggler),this.nodes.conversionTogglerContent=y.make("div",this.CSS.conversionTogglerContent);const e=y.make("div",this.CSS.conversionTogglerArrow,{innerHTML:pc});this.nodes.conversionToggler.appendChild(this.nodes.conversionTogglerContent),this.nodes.conversionToggler.appendChild(e),this.nodes.togglerAndButtonsWrapper.appendChild(this.nodes.conversionToggler),this.listeners.on(this.nodes.conversionToggler,"click",()=>{this.Editor.ConversionToolbar.toggle(n=>{!n&&this.opened?this.flipper.activate():this.opened&&this.flipper.deactivate()})}),dn()===!1&&co(this.nodes.conversionToggler,Xt.ui(xe.ui.inlineToolbar.converter,"Convert to"),{placement:"top",hidingDelay:100})}async setConversionTogglerContent(){const{BlockManager:e}=this.Editor,{currentBlock:n}=e,r=n.name,s=n.tool.conversionConfig,c=s&&s.export;this.nodes.conversionToggler.hidden=!c,this.nodes.conversionToggler.classList.toggle(this.CSS.conversionTogglerHidden,!c);const h=await n.getActiveToolboxEntry()||{};this.nodes.conversionTogglerContent.innerHTML=h.icon||h.title||Mn(r)}prepareConversionToolbar(){const e=this.Editor.ConversionToolbar.make();y.append(this.nodes.wrapper,e)}async addToolsFiltered(e=!0){const n=U.get(),r=this.Editor.BlockManager.getBlock(n.anchorNode);this.nodes.buttons.innerHTML="",this.nodes.actions.innerHTML="",this.toolsInstances=new Map,Array.from(r.tool.inlineTools.values()).forEach(s=>{this.addTool(s)}),e&&this.Editor.ConversionToolbar.hasTools()?await this.setConversionTogglerContent():this.nodes.conversionToggler.hidden=!0,this.recalculateWidth()}addTool(e){const n=e.create(),r=n.render();if(!r){it("Render method must return an instance of Node","warn",e.name);return}if(r.dataset.tool=e.name,this.nodes.buttons.appendChild(r),this.toolsInstances.set(e.name,n),pt(n.renderActions)){const f=n.renderActions();this.nodes.actions.appendChild(f)}this.listeners.on(r,"click",f=>{this.toolClicked(n),f.preventDefault()});const s=this.getToolShortcut(e.name);if(s)try{this.enableShortcuts(n,s)}catch{}const c=y.make("div"),h=Xt.t(xe.toolNames,e.title||Mn(e.name));c.appendChild(y.text(h)),s&&c.appendChild(y.make("div",this.CSS.inlineToolbarShortcut,{textContent:hi(s)})),dn()===!1&&co(r,c,{placement:"top",hidingDelay:100}),n.checkState(U.get())}getToolShortcut(e){const{Tools:n}=this.Editor,r=n.inlineTools.get(e),s=n.internal.inlineTools;return Array.from(s.keys()).includes(e)?this.inlineTools[e][vc.Shortcut]:r.shortcut}enableShortcuts(e,n){On.add({name:n,handler:r=>{const{currentBlock:s}=this.Editor.BlockManager;s&&s.tool.enabledInlineTools&&(r.preventDefault(),this.toolClicked(e))},on:this.Editor.UI.nodes.redactor})}toolClicked(e){const n=U.range;e.surround(n),this.checkToolsState(),e.renderActions!==void 0&&this.flipper.deactivate()}checkToolsState(){this.toolsInstances.forEach(e=>{e.checkState(U.get())})}get inlineTools(){const e={};return Array.from(this.Editor.Tools.inlineTools.entries()).forEach(([n,r])=>{e[n]=r.create()}),e}enableFlipper(){this.flipper=new Fe({focusedItemClass:this.CSS.focusedButton,allowedKeys:[z.ENTER,z.TAB]})}}class Ov extends et{keydown(e){switch(this.beforeKeydownProcessing(e),e.keyCode){case z.BACKSPACE:this.backspace(e);break;case z.DELETE:this.delete(e);break;case z.ENTER:this.enter(e);break;case z.DOWN:case z.RIGHT:this.arrowRightAndDown(e);break;case z.UP:case z.LEFT:this.arrowLeftAndUp(e);break;case z.TAB:this.tabPressed(e);break;case z.SLASH:e.ctrlKey||e.metaKey?this.commandSlashPressed():this.slashPressed();break}}beforeKeydownProcessing(e){this.needToolbarClosing(e)&&nc(e.keyCode)&&(this.Editor.Toolbar.close(),this.Editor.ConversionToolbar.close(),e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||this.Editor.BlockSelection.clearSelection(e))}keyup(e){e.shiftKey||this.Editor.UI.checkEmptiness()}dragOver(e){const n=this.Editor.BlockManager.getBlockByChildNode(e.target);n.dropTarget=!0}dragLeave(e){const n=this.Editor.BlockManager.getBlockByChildNode(e.target);n.dropTarget=!1}handleCommandC(e){const{BlockSelection:n}=this.Editor;n.anyBlockSelected&&n.copySelectedBlocks(e)}handleCommandX(e){const{BlockSelection:n,BlockManager:r,Caret:s}=this.Editor;n.anyBlockSelected&&n.copySelectedBlocks(e).then(()=>{const c=r.removeSelectedBlocks(),h=r.insertDefaultBlockAtIndex(c,!0);s.setToBlock(h,s.positions.START),n.clearSelection(e)})}tabPressed(e){const{InlineToolbar:n,ConversionToolbar:r,Caret:s}=this.Editor;r.opened||n.opened||(e.shiftKey?s.navigatePrevious(!0):s.navigateNext(!0))&&e.preventDefault()}commandSlashPressed(){this.Editor.BlockSelection.selectedBlocks.length>1||this.activateBlockSettings()}slashPressed(){this.Editor.BlockManager.currentBlock.isEmpty&&this.activateToolbox()}enter(e){const{BlockManager:n,UI:r}=this.Editor;if(n.currentBlock.tool.isLineBreaksEnabled||r.someToolbarOpened&&r.someFlipperButtonFocused||e.shiftKey)return;let s=this.Editor.BlockManager.currentBlock;this.Editor.Caret.isAtStart&&!this.Editor.BlockManager.currentBlock.hasMedia?this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex):this.Editor.Caret.isAtEnd?s=this.Editor.BlockManager.insertDefaultBlockAtIndex(this.Editor.BlockManager.currentBlockIndex+1):s=this.Editor.BlockManager.split(),this.Editor.Caret.setToBlock(s),this.Editor.Toolbar.moveAndOpen(s),e.preventDefault()}backspace(e){const{BlockManager:n,Caret:r}=this.Editor,{currentBlock:s,previousBlock:c}=n;if(!(!U.isCollapsed||!r.isAtStart)){if(e.preventDefault(),this.Editor.Toolbar.close(),s.currentInput!==s.firstInput){r.navigatePrevious();return}if(c!==null){if(c.isEmpty){n.removeBlock(c);return}if(s.isEmpty){n.removeBlock(s);const h=n.currentBlock;r.setToBlock(h,r.positions.END);return}zl(s,c)?this.mergeBlocks(c,s):r.setToBlock(c,r.positions.END)}}}delete(e){const{BlockManager:n,Caret:r}=this.Editor,{currentBlock:s,nextBlock:c}=n;if(!(!U.isCollapsed||!r.isAtEnd)){if(e.preventDefault(),this.Editor.Toolbar.close(),s.currentInput!==s.lastInput){r.navigateNext();return}if(c!==null){if(c.isEmpty){n.removeBlock(c);return}if(s.isEmpty){n.removeBlock(s),r.setToBlock(c,r.positions.START);return}zl(s,c)?this.mergeBlocks(s,c):r.setToBlock(c,r.positions.START)}}}mergeBlocks(e,n){const{BlockManager:r,Caret:s,Toolbar:c}=this.Editor;s.createShadow(e.pluginsContent),r.mergeBlocks(e,n).then(()=>{window.requestAnimationFrame(()=>{s.restoreCaret(e.pluginsContent),e.pluginsContent.normalize(),c.close()})})}arrowRightAndDown(e){const n=Fe.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===z.TAB);if(this.Editor.UI.someToolbarOpened&&n)return;this.Editor.Toolbar.close();const r=this.Editor.Caret.isAtEnd||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===z.DOWN&&r){this.Editor.CrossBlockSelection.toggleBlockSelectedState();return}if(e.keyCode===z.DOWN||e.keyCode===z.RIGHT&&!this.isRtl?this.Editor.Caret.navigateNext():this.Editor.Caret.navigatePrevious()){e.preventDefault();return}li(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}arrowLeftAndUp(e){if(this.Editor.UI.someToolbarOpened){if(Fe.usedKeys.includes(e.keyCode)&&(!e.shiftKey||e.keyCode===z.TAB))return;this.Editor.UI.closeAllToolbars()}this.Editor.Toolbar.close();const n=this.Editor.Caret.isAtStart||this.Editor.BlockSelection.anyBlockSelected;if(e.shiftKey&&e.keyCode===z.UP&&n){this.Editor.CrossBlockSelection.toggleBlockSelectedState(!1);return}if(e.keyCode===z.UP||e.keyCode===z.LEFT&&!this.isRtl?this.Editor.Caret.navigatePrevious():this.Editor.Caret.navigateNext()){e.preventDefault();return}li(()=>{this.Editor.BlockManager.currentBlock&&this.Editor.BlockManager.currentBlock.updateCurrentInput()},20)(),this.Editor.BlockSelection.clearSelection(e)}needToolbarClosing(e){const n=e.keyCode===z.ENTER&&this.Editor.Toolbar.toolbox.opened,r=e.keyCode===z.ENTER&&this.Editor.BlockSettings.opened,s=e.keyCode===z.ENTER&&this.Editor.InlineToolbar.opened,c=e.keyCode===z.ENTER&&this.Editor.ConversionToolbar.opened,h=e.keyCode===z.TAB;return!(e.shiftKey||h||n||r||s||c)}activateToolbox(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.Toolbar.toolbox.open()}activateBlockSettings(){this.Editor.Toolbar.opened||this.Editor.Toolbar.moveAndOpen(),this.Editor.BlockSettings.opened||this.Editor.BlockSettings.open()}}class Dr{constructor(e){this.blocks=[],this.workingArea=e}get length(){return this.blocks.length}get array(){return this.blocks}get nodes(){return oc(this.workingArea.children)}static set(e,n,r){return isNaN(Number(n))?(Reflect.set(e,n,r),!0):(e.insert(+n,r),!0)}static get(e,n){return isNaN(Number(n))?Reflect.get(e,n):e.get(+n)}push(e){this.blocks.push(e),this.insertToDOM(e)}swap(e,n){const r=this.blocks[n];y.swap(this.blocks[e].holder,r.holder),this.blocks[n]=this.blocks[e],this.blocks[e]=r}move(e,n){const r=this.blocks.splice(n,1)[0],s=e-1,c=Math.max(0,s),h=this.blocks[c];e>0?this.insertToDOM(r,"afterend",h):this.insertToDOM(r,"beforebegin",h),this.blocks.splice(e,0,r);const f=this.composeBlockEvent("move",{fromIndex:n,toIndex:e});r.call(De.MOVED,f)}insert(e,n,r=!1){if(!this.length){this.push(n);return}e>this.length&&(e=this.length),r&&(this.blocks[e].holder.remove(),this.blocks[e].call(De.REMOVED));const s=r?1:0;if(this.blocks.splice(e,s,n),e>0){const c=this.blocks[e-1];this.insertToDOM(n,"afterend",c)}else{const c=this.blocks[e+1];c?this.insertToDOM(n,"beforebegin",c):this.insertToDOM(n)}}replace(e,n){if(this.blocks[e]===void 0)throw Error("Incorrect index");this.blocks[e].holder.replaceWith(n.holder),this.blocks[e]=n}insertMany(e,n){const r=new DocumentFragment;for(const s of e)r.appendChild(s.holder);if(this.length>0){if(n>0){const s=Math.min(n-1,this.length-1);this.blocks[s].holder.after(r)}else n===0&&this.workingArea.prepend(r);this.blocks.splice(n,0,...e)}else this.blocks.push(...e),this.workingArea.appendChild(r);e.forEach(s=>s.call(De.RENDERED))}remove(e){isNaN(e)&&(e=this.length-1),this.blocks[e].holder.remove(),this.blocks[e].call(De.REMOVED),this.blocks.splice(e,1)}removeAll(){this.workingArea.innerHTML="",this.blocks.forEach(e=>e.call(De.REMOVED)),this.blocks.length=0}insertAfter(e,n){const r=this.blocks.indexOf(e);this.insert(r+1,n)}get(e){return this.blocks[e]}indexOf(e){return this.blocks.indexOf(e)}insertToDOM(e,n,r){n?r.holder.insertAdjacentElement(n,e.holder):this.workingArea.appendChild(e.holder),e.call(De.RENDERED)}composeBlockEvent(e,n){return new CustomEvent(e,{detail:n})}}const Yl="block-removed",Kl="block-added",Rv="block-moved",ql="block-changed";class Nv{constructor(){this.completed=Promise.resolve()}add(e){return new Promise((n,r)=>{this.completed=this.completed.then(e).then(n).catch(r)})}}class Dv extends et{constructor(){super(...arguments),this._currentBlockIndex=-1,this._blocks=null}get currentBlockIndex(){return this._currentBlockIndex}set currentBlockIndex(e){this._currentBlockIndex=e}get firstBlock(){return this._blocks[0]}get lastBlock(){return this._blocks[this._blocks.length-1]}get currentBlock(){return this._blocks[this.currentBlockIndex]}set currentBlock(e){this.currentBlockIndex=this.getBlockIndex(e)}get nextBlock(){return this.currentBlockIndex===this._blocks.length-1?null:this._blocks[this.currentBlockIndex+1]}get nextContentfulBlock(){return this.blocks.slice(this.currentBlockIndex+1).find(e=>!!e.inputs.length)}get previousContentfulBlock(){return this.blocks.slice(0,this.currentBlockIndex).reverse().find(e=>!!e.inputs.length)}get previousBlock(){return this.currentBlockIndex===0?null:this._blocks[this.currentBlockIndex-1]}get blocks(){return this._blocks.array}get isEditorEmpty(){return this.blocks.every(e=>e.isEmpty)}prepare(){const e=new Dr(this.Editor.UI.nodes.redactor);this._blocks=new Proxy(e,{set:Dr.set,get:Dr.get}),this.listeners.on(document,"copy",n=>this.Editor.BlockEvents.handleCommandC(n))}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}composeBlock({tool:e,data:n={},id:r=void 0,tunes:s={}}){const c=this.Editor.ReadOnly.isEnabled,h=this.Editor.Tools.blockTools.get(e),f=new Pe({id:r,data:n,tool:h,api:this.Editor.API,readOnly:c,tunesData:s},this.eventsDispatcher);return c||window.requestIdleCallback(()=>{this.bindBlockEvents(f)},{timeout:2e3}),f}insert({id:e=void 0,tool:n=this.config.defaultBlock,data:r={},index:s,needToFocus:c=!0,replace:h=!1,tunes:f={}}={}){let m=s;m===void 0&&(m=this.currentBlockIndex+(h?0:1));const k=this.composeBlock({id:e,tool:n,data:r,tunes:f});return h&&this.blockDidMutated(Yl,this.getBlockByIndex(m),{index:m}),this._blocks.insert(m,k,h),this.blockDidMutated(Kl,k,{index:m}),c?this.currentBlockIndex=m:m<=this.currentBlockIndex&&this.currentBlockIndex++,k}insertMany(e,n=0){this._blocks.insertMany(e,n)}async update(e,n){const r=await e.data,s=this.composeBlock({id:e.id,tool:e.name,data:Object.assign({},r,n),tunes:e.tunes}),c=this.getBlockIndex(e);return this._blocks.replace(c,s),this.blockDidMutated(ql,s,{index:c}),s}replace(e,n,r){const s=this.getBlockIndex(e);this.insert({tool:n,data:r,index:s,replace:!0})}paste(e,n,r=!1){const s=this.insert({tool:e,replace:r});try{window.requestIdleCallback(()=>{s.call(De.ON_PASTE,n)})}catch(c){it(`${e}: onPaste callback call is failed`,"error",c)}return s}insertDefaultBlockAtIndex(e,n=!1){const r=this.composeBlock({tool:this.config.defaultBlock});return this._blocks[e]=r,this.blockDidMutated(Kl,r,{index:e}),n?this.currentBlockIndex=e:e<=this.currentBlockIndex&&this.currentBlockIndex++,r}insertAtEnd(){return this.currentBlockIndex=this.blocks.length-1,this.insert()}async mergeBlocks(e,n){const r=await n.data;pe(r)||await e.mergeWith(r),this.removeBlock(n),this.currentBlockIndex=this._blocks.indexOf(e)}removeBlock(e,n=!0){return new Promise(r=>{const s=this._blocks.indexOf(e);if(!this.validateIndex(s))throw new Error("Can't find a Block to remove");e.destroy(),this._blocks.remove(s),this.blockDidMutated(Yl,e,{index:s}),this.currentBlockIndex>=s&&this.currentBlockIndex--,this.blocks.length?s===0&&(this.currentBlockIndex=0):(this.currentBlockIndex=-1,n&&this.insert()),r()})}removeSelectedBlocks(){let e;for(let n=this.blocks.length-1;n>=0;n--)this.blocks[n].selected&&(this.removeBlock(this.blocks[n]),e=n);return e}removeAllBlocks(){for(let e=this.blocks.length-1;e>=0;e--)this._blocks.remove(e);this.currentBlockIndex=-1,this.insert(),this.currentBlock.firstInput.focus()}split(){const e=this.Editor.Caret.extractFragmentFromCaretPosition(),n=y.make("div");n.appendChild(e);const r={text:y.isEmpty(n)?"":n.innerHTML};return this.insert({data:r})}getBlockByIndex(e){return e===-1&&(e=this._blocks.length-1),this._blocks[e]}getBlockIndex(e){return this._blocks.indexOf(e)}getBlockById(e){return this._blocks.array.find(n=>n.id===e)}getBlock(e){y.isElement(e)||(e=e.parentNode);const n=this._blocks.nodes,r=e.closest(`.${Pe.CSS.wrapper}`),s=n.indexOf(r);if(s>=0)return this._blocks[s]}setCurrentBlockByChildNode(e){y.isElement(e)||(e=e.parentNode);const n=e.closest(`.${Pe.CSS.wrapper}`);if(!n)return;const r=n.closest(`.${this.Editor.UI.CSS.editorWrapper}`);if(r!=null&&r.isEqualNode(this.Editor.UI.nodes.wrapper))return this.currentBlockIndex=this._blocks.nodes.indexOf(n),this.currentBlock.updateCurrentInput(),this.currentBlock}getBlockByChildNode(e){if(!e||!(e instanceof Node))return;y.isElement(e)||(e=e.parentNode);const n=e.closest(`.${Pe.CSS.wrapper}`);return this.blocks.find(r=>r.holder===n)}swap(e,n){this._blocks.swap(e,n),this.currentBlockIndex=n}move(e,n=this.currentBlockIndex){if(isNaN(e)||isNaN(n)){it("Warning during 'move' call: incorrect indices provided.","warn");return}if(!this.validateIndex(e)||!this.validateIndex(n)){it("Warning during 'move' call: indices cannot be lower than 0 or greater than the amount of blocks.","warn");return}this._blocks.move(e,n),this.currentBlockIndex=e,this.blockDidMutated(Rv,this.currentBlock,{fromIndex:n,toIndex:e})}async convert(e,n,r){if(!await e.save())throw new Error("Could not convert Block. Failed to extract original Block data.");const s=this.Editor.Tools.blockTools.get(n);if(!s)throw new Error(`Could not convert Block. Tool «${n}» not found.`);const c=await e.exportDataAsString(),h=He(c,s.sanitizeConfig);let f=Db(h,s.conversionConfig);r&&(f=Object.assign(f,r)),this.replace(e,s.name,f)}dropPointer(){this.currentBlockIndex=-1}async clear(e=!1){const n=new Nv;this.blocks.forEach(r=>{n.add(async()=>{await this.removeBlock(r,!1)})}),await n.completed,this.dropPointer(),e&&this.insert(),this.Editor.UI.checkEmptiness()}async destroy(){await Promise.all(this.blocks.map(e=>e.destroy()))}bindBlockEvents(e){const{BlockEvents:n}=this.Editor;this.readOnlyMutableListeners.on(e.holder,"keydown",r=>{n.keydown(r)}),this.readOnlyMutableListeners.on(e.holder,"keyup",r=>{n.keyup(r)}),this.readOnlyMutableListeners.on(e.holder,"dragover",r=>{n.dragOver(r)}),this.readOnlyMutableListeners.on(e.holder,"dragleave",r=>{n.dragLeave(r)}),e.on("didMutated",r=>this.blockDidMutated(ql,r,{index:this.getBlockIndex(r)}))}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}enableModuleBindings(){this.readOnlyMutableListeners.on(document,"cut",e=>this.Editor.BlockEvents.handleCommandX(e)),this.blocks.forEach(e=>{this.bindBlockEvents(e)})}validateIndex(e){return!(e<0||e>=this._blocks.length)}blockDidMutated(e,n,r){const s=new CustomEvent(e,{detail:{target:new cn(n),...r}});return this.eventsDispatcher.emit(lc,{event:s}),n}}class Pv extends et{constructor(){super(...arguments),this.anyBlockSelectedCache=null,this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1}get sanitizerConfig(){return{p:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},ol:{},ul:{},li:{},br:!0,img:{src:!0,width:!0,height:!0},a:{href:!0},b:{},i:{},u:{}}}get allBlocksSelected(){const{BlockManager:e}=this.Editor;return e.blocks.every(n=>n.selected===!0)}set allBlocksSelected(e){const{BlockManager:n}=this.Editor;n.blocks.forEach(r=>{r.selected=e}),this.clearCache()}get anyBlockSelected(){const{BlockManager:e}=this.Editor;return this.anyBlockSelectedCache===null&&(this.anyBlockSelectedCache=e.blocks.some(n=>n.selected===!0)),this.anyBlockSelectedCache}get selectedBlocks(){return this.Editor.BlockManager.blocks.filter(e=>e.selected)}prepare(){this.selection=new U,On.add({name:"CMD+A",handler:e=>{const{BlockManager:n,ReadOnly:r}=this.Editor;if(r.isEnabled){e.preventDefault(),this.selectAllBlocks();return}n.currentBlock&&this.handleCommandA(e)},on:this.Editor.UI.nodes.redactor})}toggleReadOnly(){U.get().removeAllRanges(),this.allBlocksSelected=!1}unSelectBlockByIndex(e){const{BlockManager:n}=this.Editor;let r;isNaN(e)?r=n.currentBlock:r=n.getBlockByIndex(e),r.selected=!1,this.clearCache()}clearSelection(e,n=!1){const{BlockManager:r,Caret:s,RectangleSelection:c}=this.Editor;this.needToSelectAll=!1,this.nativeInputSelected=!1,this.readyToBlockSelection=!1;const h=e&&e instanceof KeyboardEvent,f=h&&nc(e.keyCode);if(this.anyBlockSelected&&h&&f&&!U.isSelectionExists){const m=r.removeSelectedBlocks();r.insertDefaultBlockAtIndex(m,!0),s.setToBlock(r.currentBlock),li(()=>{const k=e.key;s.insertContentAtCaretPosition(k.length>1?"":k)},20)()}if(this.Editor.CrossBlockSelection.clear(e),!this.anyBlockSelected||c.isRectActivated()){this.Editor.RectangleSelection.clearSelection();return}n&&this.selection.restore(),this.allBlocksSelected=!1}copySelectedBlocks(e){e.preventDefault();const n=y.make("div");this.selectedBlocks.forEach(c=>{const h=He(c.holder.innerHTML,this.sanitizerConfig),f=y.make("p");f.innerHTML=h,n.appendChild(f)});const r=Array.from(n.childNodes).map(c=>c.textContent).join(`

`),s=n.innerHTML;return e.clipboardData.setData("text/plain",r),e.clipboardData.setData("text/html",s),Promise.all(this.selectedBlocks.map(c=>c.save())).then(c=>{try{e.clipboardData.setData(this.Editor.Paste.MIME_TYPE,JSON.stringify(c))}catch{}})}selectBlockByIndex(e){const{BlockManager:n}=this.Editor,r=n.getBlockByIndex(e);r!==void 0&&this.selectBlock(r)}selectBlock(e){this.selection.save(),U.get().removeAllRanges(),e.selected=!0,this.clearCache(),this.Editor.InlineToolbar.close()}unselectBlock(e){e.selected=!1,this.clearCache()}clearCache(){this.anyBlockSelectedCache=null}destroy(){On.remove(this.Editor.UI.nodes.redactor,"CMD+A")}handleCommandA(e){if(this.Editor.RectangleSelection.clearSelection(),y.isNativeInput(e.target)&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}const n=this.Editor.BlockManager.getBlock(e.target),r=n.inputs;if(r.length>1&&!this.readyToBlockSelection){this.readyToBlockSelection=!0;return}if(r.length===1&&!this.needToSelectAll){this.needToSelectAll=!0;return}this.needToSelectAll?(e.preventDefault(),this.selectAllBlocks(),this.needToSelectAll=!1,this.readyToBlockSelection=!1,this.Editor.ConversionToolbar.close()):this.readyToBlockSelection&&(e.preventDefault(),this.selectBlock(n),this.needToSelectAll=!0)}selectAllBlocks(){this.selection.save(),U.get().removeAllRanges(),this.allBlocksSelected=!0,this.Editor.InlineToolbar.close()}}class ci extends et{get positions(){return{START:"start",END:"end",DEFAULT:"default"}}static get CSS(){return{shadowCaret:"cdx-shadow-caret"}}get isAtStart(){const{currentBlock:e}=this.Editor.BlockManager;if(!e.focusable)return!0;const n=U.get(),r=y.getDeepestNode(e.currentInput);let s=n.focusNode;if(y.isNativeInput(r))return r.selectionEnd===0;if(!n.anchorNode)return!1;let c=s.textContent.search(/\S/);c===-1&&(c=0);let h=n.focusOffset;return s.nodeType!==Node.TEXT_NODE&&s.childNodes.length&&(s.childNodes[h]?(s=s.childNodes[h],h=0):(s=s.childNodes[h-1],h=s.textContent.length)),(y.isLineBreakTag(r)||y.isEmpty(r))&&this.getHigherLevelSiblings(s,"left").every(f=>{const m=y.isLineBreakTag(f),k=f.children.length===1&&y.isLineBreakTag(f.children[0]),B=m||k;return y.isEmpty(f)&&!B})&&h===c?!0:r===null||s===r&&h<=c}get isAtEnd(){const{currentBlock:e}=this.Editor.BlockManager;if(!e.focusable)return!0;const n=U.get();let r=n.focusNode;const s=y.getDeepestNode(e.currentInput,!0);if(y.isNativeInput(s))return s.selectionEnd===s.value.length;if(!n.focusNode)return!1;let c=n.focusOffset;if(r.nodeType!==Node.TEXT_NODE&&r.childNodes.length&&(r.childNodes[c-1]?(r=r.childNodes[c-1],c=r.textContent.length):(r=r.childNodes[0],c=0)),y.isLineBreakTag(s)||y.isEmpty(s)){const f=this.getHigherLevelSiblings(r,"right");if(f.every((m,k)=>k===f.length-1&&y.isLineBreakTag(m)||y.isEmpty(m)&&!y.isLineBreakTag(m))&&c===r.textContent.length)return!0}const h=s.textContent.replace(/\s+$/,"");return r===s&&c>=h.length}setToBlock(e,n=this.positions.DEFAULT,r=0){var s;const{BlockManager:c,BlockSelection:h}=this.Editor;if(h.clearSelection(),!e.focusable){(s=window.getSelection())==null||s.removeAllRanges(),h.selectBlock(e),c.currentBlock=e;return}let f;switch(n){case this.positions.START:f=e.firstInput;break;case this.positions.END:f=e.lastInput;break;default:f=e.currentInput}if(!f)return;const m=y.getDeepestNode(f,n===this.positions.END),k=y.getContentLength(m);switch(!0){case n===this.positions.START:r=0;break;case n===this.positions.END:case r>k:r=k;break}this.set(m,r),c.setCurrentBlockByChildNode(e.holder),c.currentBlock.currentInput=f}setToInput(e,n=this.positions.DEFAULT,r=0){const{currentBlock:s}=this.Editor.BlockManager,c=y.getDeepestNode(e);switch(n){case this.positions.START:this.set(c,0);break;case this.positions.END:this.set(c,y.getContentLength(c));break;default:r&&this.set(c,r)}s.currentInput=e}set(e,n=0){const{top:r,bottom:s}=U.setCursor(e,n),{innerHeight:c}=window;r<0?window.scrollBy(0,r-30):s>c&&window.scrollBy(0,s-c+30)}setToTheLastBlock(){const e=this.Editor.BlockManager.lastBlock;if(e)if(e.tool.isDefault&&e.isEmpty)this.setToBlock(e);else{const n=this.Editor.BlockManager.insertAtEnd();this.setToBlock(n)}}extractFragmentFromCaretPosition(){const e=U.get();if(e.rangeCount){const n=e.getRangeAt(0),r=this.Editor.BlockManager.currentBlock.currentInput;if(n.deleteContents(),r)if(y.isNativeInput(r)){const s=r,c=document.createDocumentFragment(),h=s.value.substring(0,s.selectionStart),f=s.value.substring(s.selectionStart);return c.textContent=f,s.value=h,c}else{const s=n.cloneRange();return s.selectNodeContents(r),s.setStart(n.endContainer,n.endOffset),s.extractContents()}}}navigateNext(e=!1){const{BlockManager:n}=this.Editor,{currentBlock:r,nextBlock:s}=n,{nextInput:c}=r,h=this.isAtEnd;let f=s;const m=e||h;if(c&&m)return this.setToInput(c,this.positions.START),!0;if(f===null){if(r.tool.isDefault||!m)return!1;f=n.insertAtEnd()}return m?(this.setToBlock(f,this.positions.START),!0):!1}navigatePrevious(e=!1){const{currentBlock:n,previousBlock:r}=this.Editor.BlockManager;if(!n)return!1;const{previousInput:s}=n,c=e||this.isAtStart;return s&&c?(this.setToInput(s,this.positions.END),!0):r!==null&&c?(this.setToBlock(r,this.positions.END),!0):!1}createShadow(e){const n=document.createElement("span");n.classList.add(ci.CSS.shadowCaret),e.insertAdjacentElement("beforeend",n)}restoreCaret(e){const n=e.querySelector(`.${ci.CSS.shadowCaret}`);if(!n)return;new U().expandToTag(n);const r=document.createRange();r.selectNode(n),r.extractContents()}insertContentAtCaretPosition(e){const n=document.createDocumentFragment(),r=document.createElement("div"),s=U.get(),c=U.range;r.innerHTML=e,Array.from(r.childNodes).forEach(k=>n.appendChild(k)),n.childNodes.length===0&&n.appendChild(new Text);const h=n.lastChild;c.deleteContents(),c.insertNode(n);const f=document.createRange(),m=h.nodeType===Node.TEXT_NODE?h:h.firstChild;m!==null&&m.textContent!==null&&f.setStart(m,m.textContent.length),s.removeAllRanges(),s.addRange(f)}getHigherLevelSiblings(e,n){let r=e;const s=[];for(;r.parentNode&&r.parentNode.contentEditable!=="true";)r=r.parentNode;const c=n==="left"?"previousSibling":"nextSibling";for(;r[c];)r=r[c],s.push(r);return s}}class Hv extends et{constructor(){super(...arguments),this.onMouseUp=()=>{this.listeners.off(document,"mouseover",this.onMouseOver),this.listeners.off(document,"mouseup",this.onMouseUp)},this.onMouseOver=e=>{const{BlockManager:n,BlockSelection:r}=this.Editor;if(e.relatedTarget===null&&e.target===null)return;const s=n.getBlockByChildNode(e.relatedTarget)||this.lastSelectedBlock,c=n.getBlockByChildNode(e.target);if(!(!s||!c)&&c!==s){if(s===this.firstSelectedBlock){U.get().removeAllRanges(),s.selected=!0,c.selected=!0,r.clearCache();return}if(c===this.firstSelectedBlock){s.selected=!1,c.selected=!1,r.clearCache();return}this.Editor.InlineToolbar.close(),this.toggleBlocksSelectedState(s,c),this.lastSelectedBlock=c}}}async prepare(){this.listeners.on(document,"mousedown",e=>{this.enableCrossBlockSelection(e)})}watchSelection(e){if(e.button!==vb.LEFT)return;const{BlockManager:n}=this.Editor;this.firstSelectedBlock=n.getBlock(e.target),this.lastSelectedBlock=this.firstSelectedBlock,this.listeners.on(document,"mouseover",this.onMouseOver),this.listeners.on(document,"mouseup",this.onMouseUp)}get isCrossBlockSelectionStarted(){return!!this.firstSelectedBlock&&!!this.lastSelectedBlock}toggleBlockSelectedState(e=!0){const{BlockManager:n,BlockSelection:r}=this.Editor;this.lastSelectedBlock||(this.lastSelectedBlock=this.firstSelectedBlock=n.currentBlock),this.firstSelectedBlock===this.lastSelectedBlock&&(this.firstSelectedBlock.selected=!0,r.clearCache(),U.get().removeAllRanges());const s=n.blocks.indexOf(this.lastSelectedBlock)+(e?1:-1),c=n.blocks[s];c&&(this.lastSelectedBlock.selected!==c.selected?(c.selected=!0,r.clearCache()):(this.lastSelectedBlock.selected=!1,r.clearCache()),this.lastSelectedBlock=c,this.Editor.InlineToolbar.close(),c.holder.scrollIntoView({block:"nearest"}))}clear(e){const{BlockManager:n,BlockSelection:r,Caret:s}=this.Editor,c=n.blocks.indexOf(this.firstSelectedBlock),h=n.blocks.indexOf(this.lastSelectedBlock);if(r.anyBlockSelected&&c>-1&&h>-1&&e&&e instanceof KeyboardEvent)switch(e.keyCode){case z.DOWN:case z.RIGHT:s.setToBlock(n.blocks[Math.max(c,h)],s.positions.END);break;case z.UP:case z.LEFT:s.setToBlock(n.blocks[Math.min(c,h)],s.positions.START);break;default:s.setToBlock(n.blocks[Math.max(c,h)],s.positions.END)}this.firstSelectedBlock=this.lastSelectedBlock=null}enableCrossBlockSelection(e){const{UI:n}=this.Editor;U.isCollapsed||this.Editor.BlockSelection.clearSelection(e),n.nodes.redactor.contains(e.target)?this.watchSelection(e):this.Editor.BlockSelection.clearSelection(e)}toggleBlocksSelectedState(e,n){const{BlockManager:r,BlockSelection:s}=this.Editor,c=r.blocks.indexOf(e),h=r.blocks.indexOf(n),f=e.selected!==n.selected;for(let m=Math.min(c,h);m<=Math.max(c,h);m++){const k=r.blocks[m];k!==this.firstSelectedBlock&&k!==(f?e:n)&&(r.blocks[m].selected=!r.blocks[m].selected,s.clearCache())}}}class Fv extends et{constructor(){super(...arguments),this.isStartedAtEditor=!1}toggleReadOnly(e){e?this.disableModuleBindings():this.enableModuleBindings()}enableModuleBindings(){const{UI:e}=this.Editor;this.readOnlyMutableListeners.on(e.nodes.holder,"drop",async n=>{await this.processDrop(n)},!0),this.readOnlyMutableListeners.on(e.nodes.holder,"dragstart",()=>{this.processDragStart()}),this.readOnlyMutableListeners.on(e.nodes.holder,"dragover",n=>{this.processDragOver(n)},!0)}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}async processDrop(e){const{BlockManager:n,Caret:r,Paste:s}=this.Editor;e.preventDefault(),n.blocks.forEach(h=>{h.dropTarget=!1}),U.isAtEditor&&!U.isCollapsed&&this.isStartedAtEditor&&document.execCommand("delete"),this.isStartedAtEditor=!1;const c=n.setCurrentBlockByChildNode(e.target);if(c)this.Editor.Caret.setToBlock(c,r.positions.END);else{const h=n.setCurrentBlockByChildNode(n.lastBlock.holder);this.Editor.Caret.setToBlock(h,r.positions.END)}await s.processDataTransfer(e.dataTransfer,!0)}processDragStart(){U.isAtEditor&&!U.isCollapsed&&(this.isStartedAtEditor=!0),this.Editor.InlineToolbar.close()}processDragOver(e){e.preventDefault()}}class Uv extends et{constructor({config:e,eventsDispatcher:n}){super({config:e,eventsDispatcher:n}),this.disabled=!1,this.batchingTimeout=null,this.batchingOnChangeQueue=new Map,this.batchTime=400,this.mutationObserver=new MutationObserver(r=>{this.redactorChanged(r)}),this.eventsDispatcher.on(lc,r=>{this.particularBlockChanged(r.event)}),this.eventsDispatcher.on(cc,()=>{this.disable()}),this.eventsDispatcher.on(dc,()=>{this.enable()})}enable(){this.mutationObserver.observe(this.Editor.UI.nodes.redactor,{childList:!0,subtree:!0,characterData:!0,attributes:!0}),this.disabled=!1}disable(){this.mutationObserver.disconnect(),this.disabled=!0}particularBlockChanged(e){this.disabled||!pt(this.config.onChange)||(this.batchingOnChangeQueue.set(`block:${e.detail.target.id}:event:${e.type}`,e),this.batchingTimeout&&clearTimeout(this.batchingTimeout),this.batchingTimeout=setTimeout(()=>{let n;this.batchingOnChangeQueue.size===1?n=this.batchingOnChangeQueue.values().next().value:n=Array.from(this.batchingOnChangeQueue.values()),this.config.onChange&&this.config.onChange(this.Editor.API.methods,n),this.batchingOnChangeQueue.clear()},this.batchTime))}redactorChanged(e){this.eventsDispatcher.emit(Ur,{mutations:e})}}const kc=class extends et{constructor(){super(...arguments),this.MIME_TYPE="application/x-editor-js",this.toolsTags={},this.tagsByTool={},this.toolsPatterns=[],this.toolsFiles={},this.exceptionList=[],this.processTool=l=>{try{const e=l.create({},{},!1);if(l.pasteConfig===!1){this.exceptionList.push(l.name);return}if(!pt(e.onPaste))return;this.getTagsConfig(l),this.getFilesConfig(l),this.getPatternsConfig(l)}catch(e){it(`Paste handling for «${l.name}» Tool hasn't been set up because of the error`,"warn",e)}},this.handlePasteEvent=async l=>{const{BlockManager:e,Toolbar:n}=this.Editor,r=e.setCurrentBlockByChildNode(l.target);!r||this.isNativeBehaviour(l.target)&&!l.clipboardData.types.includes("Files")||r&&this.exceptionList.includes(r.name)||(l.preventDefault(),this.processDataTransfer(l.clipboardData),n.close())}}async prepare(){this.processTools()}toggleReadOnly(l){l?this.unsetCallback():this.setCallback()}async processDataTransfer(l,e=!1){const{Tools:n}=this.Editor,r=l.types;if((r.includes?r.includes("Files"):r.contains("Files"))&&!pe(this.toolsFiles)){await this.processFiles(l.files);return}const s=l.getData(this.MIME_TYPE),c=l.getData("text/plain");let h=l.getData("text/html");if(s)try{this.insertEditorJSData(JSON.parse(s));return}catch{}e&&c.trim()&&h.trim()&&(h="<p>"+(h.trim()?h:c)+"</p>");const f=Object.keys(this.toolsTags).reduce((B,S)=>(B[S.toLowerCase()]=this.toolsTags[S].sanitizationConfig??{},B),{}),m=Object.assign({},f,n.getAllInlineToolsSanitizeConfig(),{br:{}}),k=He(h,m);!k.trim()||k.trim()===c||!y.isHTMLString(k)?await this.processText(c):await this.processText(k,!0)}async processText(l,e=!1){const{Caret:n,BlockManager:r}=this.Editor,s=e?this.processHTML(l):this.processPlain(l);if(!s.length)return;if(s.length===1){s[0].isBlock?this.processSingleBlock(s.pop()):this.processInlinePaste(s.pop());return}const c=r.currentBlock&&r.currentBlock.tool.isDefault&&r.currentBlock.isEmpty;s.map(async(h,f)=>this.insertBlock(h,f===0&&c)),r.currentBlock&&n.setToBlock(r.currentBlock,n.positions.END)}setCallback(){this.listeners.on(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}unsetCallback(){this.listeners.off(this.Editor.UI.nodes.holder,"paste",this.handlePasteEvent)}processTools(){const l=this.Editor.Tools.blockTools;Array.from(l.values()).forEach(this.processTool)}collectTagNames(l){return Je(l)?[l]:At(l)?Object.keys(l):[]}getTagsConfig(l){if(l.pasteConfig===!1)return;const e=l.pasteConfig.tags||[],n=[];e.forEach(r=>{const s=this.collectTagNames(r);n.push(...s),s.forEach(c=>{if(Object.prototype.hasOwnProperty.call(this.toolsTags,c)){it(`Paste handler for «${l.name}» Tool on «${c}» tag is skipped because it is already used by «${this.toolsTags[c].tool.name}» Tool.`,"warn");return}const h=At(r)?r[c]:null;this.toolsTags[c.toUpperCase()]={tool:l,sanitizationConfig:h}})}),this.tagsByTool[l.name]=n.map(r=>r.toUpperCase())}getFilesConfig(l){if(l.pasteConfig===!1)return;const{files:e={}}=l.pasteConfig;let{extensions:n,mimeTypes:r}=e;!n&&!r||(n&&!Array.isArray(n)&&(it(`«extensions» property of the onDrop config for «${l.name}» Tool should be an array`),n=[]),r&&!Array.isArray(r)&&(it(`«mimeTypes» property of the onDrop config for «${l.name}» Tool should be an array`),r=[]),r&&(r=r.filter(s=>Cb(s)?!0:(it(`MIME type value «${s}» for the «${l.name}» Tool is not a valid MIME type`,"warn"),!1))),this.toolsFiles[l.name]={extensions:n||[],mimeTypes:r||[]})}getPatternsConfig(l){l.pasteConfig===!1||!l.pasteConfig.patterns||pe(l.pasteConfig.patterns)||Object.entries(l.pasteConfig.patterns).forEach(([e,n])=>{n instanceof RegExp||it(`Pattern ${n} for «${l.name}» Tool is skipped because it should be a Regexp instance.`,"warn"),this.toolsPatterns.push({key:e,pattern:n,tool:l})})}isNativeBehaviour(l){return y.isNativeInput(l)}async processFiles(l){const{BlockManager:e}=this.Editor;let n;n=await Promise.all(Array.from(l).map(s=>this.processFile(s))),n=n.filter(s=>!!s);const r=e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty;n.forEach((s,c)=>{e.paste(s.type,s.event,c===0&&r)})}async processFile(l){const e=yb(l),n=Object.entries(this.toolsFiles).find(([s,{mimeTypes:c,extensions:h}])=>{const[f,m]=l.type.split("/"),k=h.find(S=>S.toLowerCase()===e.toLowerCase()),B=c.find(S=>{const[L,D]=S.split("/");return L===f&&(D===m||D==="*")});return!!k||!!B});if(!n)return;const[r]=n;return{event:this.composePasteEvent("file",{file:l}),type:r}}processHTML(l){const{Tools:e}=this.Editor,n=y.make("DIV");return n.innerHTML=l,this.getNodes(n).map(r=>{let s,c=e.defaultTool,h=!1;switch(r.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:s=y.make("div"),s.appendChild(r);break;case Node.ELEMENT_NODE:s=r,h=!0,this.toolsTags[s.tagName]&&(c=this.toolsTags[s.tagName].tool);break}const{tags:f}=c.pasteConfig||{tags:[]},m=f.reduce((S,L)=>(this.collectTagNames(L).forEach(D=>{const I=At(L)?L[D]:null;S[D.toLowerCase()]=I||{}}),S),{}),k=Object.assign({},m,c.baseSanitizeConfig);if(s.tagName.toLowerCase()==="table"){const S=He(s.outerHTML,k);s=y.make("div",void 0,{innerHTML:S}).firstChild}else s.innerHTML=He(s.innerHTML,k);const B=this.composePasteEvent("tag",{data:s});return{content:s,isBlock:h,tool:c.name,event:B}}).filter(r=>{const s=y.isEmpty(r.content),c=y.isSingleTag(r.content);return!s||c})}processPlain(l){const{defaultBlock:e}=this.config;if(!l)return[];const n=e;return l.split(/\r?\n/).filter(r=>r.trim()).map(r=>{const s=y.make("div");s.textContent=r;const c=this.composePasteEvent("tag",{data:s});return{content:s,tool:n,isBlock:!1,event:c}})}async processSingleBlock(l){const{Caret:e,BlockManager:n}=this.Editor,{currentBlock:r}=n;if(!r||l.tool!==r.name||!y.containsOnlyInlineElements(l.content.innerHTML)){this.insertBlock(l,(r==null?void 0:r.tool.isDefault)&&r.isEmpty);return}e.insertContentAtCaretPosition(l.content.innerHTML)}async processInlinePaste(l){const{BlockManager:e,Caret:n}=this.Editor,{content:r}=l;if(e.currentBlock&&e.currentBlock.tool.isDefault&&r.textContent.length<kc.PATTERN_PROCESSING_MAX_LENGTH){const s=await this.processPattern(r.textContent);if(s){const c=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty,h=e.paste(s.tool,s.event,c);n.setToBlock(h,n.positions.END);return}}if(e.currentBlock&&e.currentBlock.currentInput){const s=e.currentBlock.tool.baseSanitizeConfig;document.execCommand("insertHTML",!1,He(r.innerHTML,s))}else this.insertBlock(l)}async processPattern(l){const e=this.toolsPatterns.find(n=>{const r=n.pattern.exec(l);return r?l===r.shift():!1});return e?{event:this.composePasteEvent("pattern",{key:e.key,data:l}),tool:e.tool.name}:void 0}insertBlock(l,e=!1){const{BlockManager:n,Caret:r}=this.Editor,{currentBlock:s}=n;let c;if(e&&s&&s.isEmpty){c=n.paste(l.tool,l.event,!0),r.setToBlock(c,r.positions.END);return}c=n.paste(l.tool,l.event),r.setToBlock(c,r.positions.END)}insertEditorJSData(l){const{BlockManager:e,Caret:n,Tools:r}=this.Editor;hc(l,s=>r.blockTools.get(s).sanitizeConfig).forEach(({tool:s,data:c},h)=>{let f=!1;h===0&&(f=e.currentBlock&&e.currentBlock.tool.isDefault&&e.currentBlock.isEmpty);const m=e.insert({tool:s,data:c,replace:f});n.setToBlock(m,n.positions.END)})}processElementNode(l,e,n){const r=Object.keys(this.toolsTags),s=l,{tool:c}=this.toolsTags[s.tagName]||{},h=this.tagsByTool[c==null?void 0:c.name]||[],f=r.includes(s.tagName),m=y.blockElements.includes(s.tagName.toLowerCase()),k=Array.from(s.children).some(({tagName:S})=>r.includes(S)&&!h.includes(S)),B=Array.from(s.children).some(({tagName:S})=>y.blockElements.includes(S.toLowerCase()));if(!m&&!f&&!k)return n.appendChild(s),[...e,n];if(f&&!k||m&&!B&&!k)return[...e,n,s]}getNodes(l){const e=Array.from(l.childNodes);let n;const r=(s,c)=>{if(y.isEmpty(c)&&!y.isSingleTag(c))return s;const h=s[s.length-1];let f=new DocumentFragment;switch(h&&y.isFragment(h)&&(f=s.pop()),c.nodeType){case Node.ELEMENT_NODE:if(n=this.processElementNode(c,s,f),n)return n;break;case Node.TEXT_NODE:return f.appendChild(c),[...s,f];default:return[...s,f]}return[...s,...Array.from(c.childNodes).reduce(r,[])]};return e.reduce(r,[])}composePasteEvent(l,e){return new CustomEvent(l,{detail:e})}};let xc=kc;xc.PATTERN_PROCESSING_MAX_LENGTH=450;class zv extends et{constructor(){super(...arguments),this.toolsDontSupportReadOnly=[],this.readOnlyEnabled=!1}get isEnabled(){return this.readOnlyEnabled}async prepare(){const{Tools:e}=this.Editor,{blockTools:n}=e,r=[];Array.from(n.entries()).forEach(([s,c])=>{c.isReadOnlySupported||r.push(s)}),this.toolsDontSupportReadOnly=r,this.config.readOnly&&r.length>0&&this.throwCriticalError(),this.toggle(this.config.readOnly)}async toggle(e=!this.readOnlyEnabled){e&&this.toolsDontSupportReadOnly.length>0&&this.throwCriticalError();const n=this.readOnlyEnabled;this.readOnlyEnabled=e;for(const s in this.Editor)this.Editor[s].toggleReadOnly&&this.Editor[s].toggleReadOnly(e);if(n===e)return this.readOnlyEnabled;const r=await this.Editor.Saver.save();return await this.Editor.BlockManager.clear(),await this.Editor.Renderer.render(r.blocks),this.readOnlyEnabled}throwCriticalError(){throw new sc(`To enable read-only mode all connected tools should support it. Tools ${this.toolsDontSupportReadOnly.join(", ")} don't support read-only mode.`)}}class lo extends et{constructor(){super(...arguments),this.isRectSelectionActivated=!1,this.SCROLL_SPEED=3,this.HEIGHT_OF_SCROLL_ZONE=40,this.BOTTOM_SCROLL_ZONE=1,this.TOP_SCROLL_ZONE=2,this.MAIN_MOUSE_BUTTON=0,this.mousedown=!1,this.isScrolling=!1,this.inScrollZone=null,this.startX=0,this.startY=0,this.mouseX=0,this.mouseY=0,this.stackOfSelected=[],this.listenerIds=[]}static get CSS(){return{overlay:"codex-editor-overlay",overlayContainer:"codex-editor-overlay__container",rect:"codex-editor-overlay__rectangle",topScrollZone:"codex-editor-overlay__scroll-zone--top",bottomScrollZone:"codex-editor-overlay__scroll-zone--bottom"}}prepare(){this.enableModuleBindings()}startSelection(e,n){const r=document.elementFromPoint(e-window.pageXOffset,n-window.pageYOffset);r.closest(`.${this.Editor.Toolbar.CSS.toolbar}`)||(this.Editor.BlockSelection.allBlocksSelected=!1,this.clearSelection(),this.stackOfSelected=[]);const s=[`.${Pe.CSS.content}`,`.${this.Editor.Toolbar.CSS.toolbar}`,`.${this.Editor.InlineToolbar.CSS.inlineToolbar}`],c=r.closest("."+this.Editor.UI.CSS.editorWrapper),h=s.some(f=>!!r.closest(f));!c||h||(this.mousedown=!0,this.startX=e,this.startY=n)}endSelection(){this.mousedown=!1,this.startX=0,this.startY=0,this.overlayRectangle.style.display="none"}isRectActivated(){return this.isRectSelectionActivated}clearSelection(){this.isRectSelectionActivated=!1}enableModuleBindings(){const{container:e}=this.genHTML();this.listeners.on(e,"mousedown",n=>{this.processMouseDown(n)},!1),this.listeners.on(document.body,"mousemove",Pr(n=>{this.processMouseMove(n)},10),{passive:!0}),this.listeners.on(document.body,"mouseleave",()=>{this.processMouseLeave()}),this.listeners.on(window,"scroll",Pr(n=>{this.processScroll(n)},10),{passive:!0}),this.listeners.on(document.body,"mouseup",()=>{this.processMouseUp()},!1)}processMouseDown(e){e.button===this.MAIN_MOUSE_BUTTON&&(e.target.closest(y.allInputsSelector)!==null||this.startSelection(e.pageX,e.pageY))}processMouseMove(e){this.changingRectangle(e),this.scrollByZones(e.clientY)}processMouseLeave(){this.clearSelection(),this.endSelection()}processScroll(e){this.changingRectangle(e)}processMouseUp(){this.clearSelection(),this.endSelection()}scrollByZones(e){if(this.inScrollZone=null,e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.TOP_SCROLL_ZONE),document.documentElement.clientHeight-e<=this.HEIGHT_OF_SCROLL_ZONE&&(this.inScrollZone=this.BOTTOM_SCROLL_ZONE),!this.inScrollZone){this.isScrolling=!1;return}this.isScrolling||(this.scrollVertical(this.inScrollZone===this.TOP_SCROLL_ZONE?-this.SCROLL_SPEED:this.SCROLL_SPEED),this.isScrolling=!0)}genHTML(){const{UI:e}=this.Editor,n=e.nodes.holder.querySelector("."+e.CSS.editorWrapper),r=y.make("div",lo.CSS.overlay,{}),s=y.make("div",lo.CSS.overlayContainer,{}),c=y.make("div",lo.CSS.rect,{});return s.appendChild(c),r.appendChild(s),n.appendChild(r),this.overlayRectangle=c,{container:n,overlay:r}}scrollVertical(e){if(!(this.inScrollZone&&this.mousedown))return;const n=window.pageYOffset;window.scrollBy(0,e),this.mouseY+=window.pageYOffset-n,setTimeout(()=>{this.scrollVertical(e)},0)}changingRectangle(e){if(!this.mousedown)return;e.pageY!==void 0&&(this.mouseX=e.pageX,this.mouseY=e.pageY);const{rightPos:n,leftPos:r,index:s}=this.genInfoForMouseSelection(),c=this.startX>n&&this.mouseX>n,h=this.startX<r&&this.mouseX<r;this.rectCrossesBlocks=!(c||h),this.isRectSelectionActivated||(this.rectCrossesBlocks=!1,this.isRectSelectionActivated=!0,this.shrinkRectangleToPoint(),this.overlayRectangle.style.display="block"),this.updateRectangleSize(),this.Editor.Toolbar.close(),s!==void 0&&(this.trySelectNextBlock(s),this.inverseSelection(),U.get().removeAllRanges())}shrinkRectangleToPoint(){this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`}inverseSelection(){const e=this.Editor.BlockManager.getBlockByIndex(this.stackOfSelected[0]).selected;if(this.rectCrossesBlocks&&!e)for(const n of this.stackOfSelected)this.Editor.BlockSelection.selectBlockByIndex(n);if(!this.rectCrossesBlocks&&e)for(const n of this.stackOfSelected)this.Editor.BlockSelection.unSelectBlockByIndex(n)}updateRectangleSize(){this.mouseY>=this.startY?(this.overlayRectangle.style.top=`${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.bottom=`calc(100% - ${this.mouseY-window.pageYOffset}px`):(this.overlayRectangle.style.bottom=`calc(100% - ${this.startY-window.pageYOffset}px`,this.overlayRectangle.style.top=`${this.mouseY-window.pageYOffset}px`),this.mouseX>=this.startX?(this.overlayRectangle.style.left=`${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.right=`calc(100% - ${this.mouseX-window.pageXOffset}px`):(this.overlayRectangle.style.right=`calc(100% - ${this.startX-window.pageXOffset}px`,this.overlayRectangle.style.left=`${this.mouseX-window.pageXOffset}px`)}genInfoForMouseSelection(){const e=document.body.offsetWidth/2,n=this.mouseY-window.pageYOffset,r=document.elementFromPoint(e,n),s=this.Editor.BlockManager.getBlockByChildNode(r);let c;s!==void 0&&(c=this.Editor.BlockManager.blocks.findIndex(B=>B.holder===s.holder));const h=this.Editor.BlockManager.lastBlock.holder.querySelector("."+Pe.CSS.content),f=Number.parseInt(window.getComputedStyle(h).width,10)/2,m=e-f,k=e+f;return{index:c,leftPos:m,rightPos:k}}addBlockInSelection(e){this.rectCrossesBlocks&&this.Editor.BlockSelection.selectBlockByIndex(e),this.stackOfSelected.push(e)}trySelectNextBlock(e){const n=this.stackOfSelected[this.stackOfSelected.length-1]===e,r=this.stackOfSelected.length,s=1,c=-1,h=0;if(n)return;const f=this.stackOfSelected[r-1]-this.stackOfSelected[r-2]>0;let m=h;r>1&&(m=f?s:c);const k=e>this.stackOfSelected[r-1]&&m===s,B=e<this.stackOfSelected[r-1]&&m===c,S=!(k||B||m===h);if(!S&&(e>this.stackOfSelected[r-1]||this.stackOfSelected[r-1]===void 0)){let I=this.stackOfSelected[r-1]+1||e;for(I;I<=e;I++)this.addBlockInSelection(I);return}if(!S&&e<this.stackOfSelected[r-1]){for(let I=this.stackOfSelected[r-1]-1;I>=e;I--)this.addBlockInSelection(I);return}if(!S)return;let L=r-1,D;for(e>this.stackOfSelected[r-1]?D=()=>e>this.stackOfSelected[L]:D=()=>e<this.stackOfSelected[L];D();)this.rectCrossesBlocks&&this.Editor.BlockSelection.unSelectBlockByIndex(this.stackOfSelected[L]),this.stackOfSelected.pop(),L--}}class Wv extends et{async render(e){return new Promise(n=>{const{Tools:r,BlockManager:s}=this.Editor;if(e.length===0)s.insert();else{const c=e.map(({type:h,data:f,tunes:m,id:k})=>{r.available.has(h)===!1&&(ke(`Tool «${h}» is not found. Check 'tools' property at the Editor.js config.`,"warn"),f=this.composeStubDataForTool(h,f,k),h=r.stubTool);let B;try{B=s.composeBlock({id:k,tool:h,data:f,tunes:m})}catch(S){it(`Block «${h}» skipped because of plugins error`,"error",{data:f,error:S}),f=this.composeStubDataForTool(h,f,k),h=r.stubTool,B=s.composeBlock({id:k,tool:h,data:f,tunes:m})}return B});s.insertMany(c)}window.requestIdleCallback(()=>{n()},{timeout:2e3})})}composeStubDataForTool(e,n,r){const{Tools:s}=this.Editor;let c=e;if(s.unavailable.has(e)){const h=s.unavailable.get(e).toolbox;h!==void 0&&h[0].title!==void 0&&(c=h[0].title)}return{savedData:{id:r,type:e,data:n},title:c}}}class $v extends et{async save(){const{BlockManager:e,Tools:n}=this.Editor,r=e.blocks,s=[];try{r.forEach(f=>{s.push(this.getSavedData(f))});const c=await Promise.all(s),h=await hc(c,f=>n.blockTools.get(f).sanitizeConfig);return this.makeOutput(h)}catch(c){ke("Saving failed due to the Error %o","error",c)}}async getSavedData(e){const n=await e.save(),r=n&&await e.validate(n.data);return{...n,isValid:r}}makeOutput(e){const n=[];return e.forEach(({id:r,tool:s,data:c,tunes:h,isValid:f})=>{if(!f){it(`Block «${s}» skipped because saved data is invalid`);return}if(s===this.Editor.Tools.stubTool){n.push(c);return}const m={id:r,type:s,data:c,...!pe(h)&&{tunes:h}};n.push(m)}),{time:+new Date,blocks:n,version:"2.29.0"}}}(function(){try{if(typeof document<"u"){var l=document.createElement("style");l.appendChild(document.createTextNode(".ce-paragraph{line-height:1.6em;outline:none}.ce-paragraph[data-placeholder]:empty:before{content:attr(data-placeholder);color:#707684;font-weight:400;opacity:0}.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before{opacity:1}.codex-editor--toolbox-opened .ce-block:first-child .ce-paragraph[data-placeholder]:empty:before,.codex-editor--empty .ce-block:first-child .ce-paragraph[data-placeholder]:empty:focus:before{opacity:0}.ce-paragraph p:first-of-type{margin-top:0}.ce-paragraph p:last-of-type{margin-bottom:0}")),document.head.appendChild(l)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Yv='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 9V7.2C8 7.08954 8.08954 7 8.2 7L12 7M16 9V7.2C16 7.08954 15.9105 7 15.8 7L12 7M12 7L12 17M12 17H10M12 17H14"/></svg>';/**
 * Base Paragraph Block for the Editor.js.
 * Represents a regular text block
 *
 * @author CodeX (team@codex.so)
 * @copyright CodeX 2018
 * @license The MIT License (MIT)
 */class es{static get DEFAULT_PLACEHOLDER(){return""}constructor({data:e,config:n,api:r,readOnly:s}){this.api=r,this.readOnly=s,this._CSS={block:this.api.styles.block,wrapper:"ce-paragraph"},this.readOnly||(this.onKeyUp=this.onKeyUp.bind(this)),this._placeholder=n.placeholder?n.placeholder:es.DEFAULT_PLACEHOLDER,this._data={},this._element=null,this._preserveBlank=n.preserveBlank!==void 0?n.preserveBlank:!1,this.data=e}onKeyUp(e){if(e.code!=="Backspace"&&e.code!=="Delete")return;const{textContent:n}=this._element;n===""&&(this._element.innerHTML="")}drawView(){const e=document.createElement("DIV");return e.classList.add(this._CSS.wrapper,this._CSS.block),e.contentEditable=!1,e.dataset.placeholder=this.api.i18n.t(this._placeholder),this._data.text&&(e.innerHTML=this._data.text),this.readOnly||(e.contentEditable=!0,e.addEventListener("keyup",this.onKeyUp)),e}render(){return this._element=this.drawView(),this._element}merge(e){const n={text:this.data.text+e.text};this.data=n}validate(e){return!(e.text.trim()===""&&!this._preserveBlank)}save(e){return{text:e.innerHTML}}onPaste(e){const n={text:e.detail.data.innerHTML};this.data=n}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{text:{br:!0}}}static get isReadOnlySupported(){return!0}get data(){if(this._element!==null){const e=this._element.innerHTML;this._data.text=e}return this._data}set data(e){this._data=e||{},this._element!==null&&this.hydrate()}hydrate(){window.requestAnimationFrame(()=>{this._element.innerHTML=this._data.text||""})}static get pasteConfig(){return{tags:["P"]}}static get toolbox(){return{icon:Yv,title:"Text"}}}class ns{constructor(){this.commandName="bold",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--bold"},this.nodes={button:void 0}}static get sanitize(){return{b:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=uv,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+B"}}ns.isInline=!0;ns.title="Bold";class os{constructor(){this.commandName="italic",this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--italic"},this.nodes={button:null}}static get sanitize(){return{i:{}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=mv,this.nodes.button}surround(){document.execCommand(this.commandName)}checkState(){const e=document.queryCommandState(this.commandName);return this.nodes.button.classList.toggle(this.CSS.buttonActive,e),e}get shortcut(){return"CMD+I"}}os.isInline=!0;os.title="Italic";class is{constructor({api:e}){this.commandLink="createLink",this.commandUnlink="unlink",this.ENTER_KEY=13,this.CSS={button:"ce-inline-tool",buttonActive:"ce-inline-tool--active",buttonModifier:"ce-inline-tool--link",buttonUnlink:"ce-inline-tool--unlink",input:"ce-inline-tool-input",inputShowed:"ce-inline-tool-input--showed"},this.nodes={button:null,input:null},this.inputOpened=!1,this.toolbar=e.toolbar,this.inlineToolbar=e.inlineToolbar,this.notifier=e.notifier,this.i18n=e.i18n,this.selection=new U}static get sanitize(){return{a:{href:!0,target:"_blank",rel:"nofollow"}}}render(){return this.nodes.button=document.createElement("button"),this.nodes.button.type="button",this.nodes.button.classList.add(this.CSS.button,this.CSS.buttonModifier),this.nodes.button.innerHTML=Wl,this.nodes.button}renderActions(){return this.nodes.input=document.createElement("input"),this.nodes.input.placeholder=this.i18n.t("Add a link"),this.nodes.input.classList.add(this.CSS.input),this.nodes.input.addEventListener("keydown",e=>{e.keyCode===this.ENTER_KEY&&this.enterPressed(e)}),this.nodes.input}surround(e){if(e){this.inputOpened?(this.selection.restore(),this.selection.removeFakeBackground()):(this.selection.setFakeBackground(),this.selection.save());const n=this.selection.findParentTag("A");if(n){this.selection.expandToTag(n),this.unlink(),this.closeActions(),this.checkState(),this.toolbar.close();return}}this.toggleActions()}checkState(){const e=this.selection.findParentTag("A");if(e){this.nodes.button.innerHTML=kv,this.nodes.button.classList.add(this.CSS.buttonUnlink),this.nodes.button.classList.add(this.CSS.buttonActive),this.openActions();const n=e.getAttribute("href");this.nodes.input.value=n!=="null"?n:"",this.selection.save()}else this.nodes.button.innerHTML=Wl,this.nodes.button.classList.remove(this.CSS.buttonUnlink),this.nodes.button.classList.remove(this.CSS.buttonActive);return!!e}clear(){this.closeActions()}get shortcut(){return"CMD+K"}toggleActions(){this.inputOpened?this.closeActions(!1):this.openActions(!0)}openActions(e=!1){this.nodes.input.classList.add(this.CSS.inputShowed),e&&this.nodes.input.focus(),this.inputOpened=!0}closeActions(e=!0){if(this.selection.isFakeBackgroundEnabled){const n=new U;n.save(),this.selection.restore(),this.selection.removeFakeBackground(),n.restore()}this.nodes.input.classList.remove(this.CSS.inputShowed),this.nodes.input.value="",e&&this.selection.clearSaved(),this.inputOpened=!1}enterPressed(e){let n=this.nodes.input.value||"";if(!n.trim()){this.selection.restore(),this.unlink(),e.preventDefault(),this.closeActions();return}if(!this.validateURL(n)){this.notifier.show({message:"Pasted link is not valid.",style:"error"}),it("Incorrect Link pasted","warn",n);return}n=this.prepareLink(n),this.selection.restore(),this.selection.removeFakeBackground(),this.insertLink(n),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.selection.collapseToEnd(),this.inlineToolbar.close()}validateURL(e){return!/\s/.test(e)}prepareLink(e){return e=e.trim(),e=this.addProtocol(e),e}addProtocol(e){if(/^(\w+):(\/\/)?/.test(e))return e;const n=/^\/[^/\s]/.test(e),r=e.substring(0,1)==="#",s=/^\/\/[^/\s]/.test(e);return!n&&!r&&!s&&(e="http://"+e),e}insertLink(e){const n=this.selection.findParentTag("A");n&&this.selection.expandToTag(n),document.execCommand(this.commandLink,!1,e)}unlink(){document.execCommand(this.commandUnlink)}}is.isInline=!0;is.title="Link";class yc{constructor({data:e,api:n}){this.CSS={wrapper:"ce-stub",info:"ce-stub__info",title:"ce-stub__title",subtitle:"ce-stub__subtitle"},this.api=n,this.title=e.title||this.api.i18n.t("Error"),this.subtitle=this.api.i18n.t("The block can not be displayed correctly."),this.savedData=e.savedData,this.wrapper=this.make()}render(){return this.wrapper}save(){return this.savedData}make(){const e=y.make("div",this.CSS.wrapper),n=xv,r=y.make("div",this.CSS.info),s=y.make("div",this.CSS.title,{textContent:this.title}),c=y.make("div",this.CSS.subtitle,{textContent:this.subtitle});return e.innerHTML=n,r.appendChild(s),r.appendChild(c),e.appendChild(r),e}}yc.isReadOnlySupported=!0;class Kv extends ts{constructor(){super(...arguments),this.type=pi.Inline}get title(){return this.constructable[Qr.Title]}create(){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings})}}class qv extends ts{constructor(){super(...arguments),this.type=pi.Tune}create(e,n){return new this.constructable({api:this.api.getMethodsForTool(this),config:this.settings,block:n,data:e})}}class Nt extends Map{get blockTools(){const e=Array.from(this.entries()).filter(([,n])=>n.isBlock());return new Nt(e)}get inlineTools(){const e=Array.from(this.entries()).filter(([,n])=>n.isInline());return new Nt(e)}get blockTunes(){const e=Array.from(this.entries()).filter(([,n])=>n.isTune());return new Nt(e)}get internalTools(){const e=Array.from(this.entries()).filter(([,n])=>n.isInternal);return new Nt(e)}get externalTools(){const e=Array.from(this.entries()).filter(([,n])=>!n.isInternal);return new Nt(e)}}var Gv=Object.defineProperty,Xv=Object.getOwnPropertyDescriptor,Cc=(l,e,n,r)=>{for(var s=r>1?void 0:r?Xv(e,n):e,c=l.length-1,h;c>=0;c--)(h=l[c])&&(s=(r?h(e,n,s):h(s))||s);return r&&s&&Gv(e,n,s),s};class rs extends ts{constructor(){super(...arguments),this.type=pi.Block,this.inlineTools=new Nt,this.tunes=new Nt}create(e,n,r){return new this.constructable({data:e,block:n,readOnly:r,api:this.api.getMethodsForTool(this),config:this.settings})}get isReadOnlySupported(){return this.constructable[An.IsReadOnlySupported]===!0}get isLineBreaksEnabled(){return this.constructable[An.IsEnabledLineBreaks]}get toolbox(){const e=this.constructable[An.Toolbox],n=this.config[ai.Toolbox];if(!pe(e)&&n!==!1)return n?Array.isArray(e)?Array.isArray(n)?n.map((r,s)=>{const c=e[s];return c?{...c,...r}:r}):[n]:Array.isArray(n)?n:[{...e,...n}]:Array.isArray(e)?e:[e]}get conversionConfig(){return this.constructable[An.ConversionConfig]}get enabledInlineTools(){return this.config[ai.EnabledInlineTools]||!1}get enabledBlockTunes(){return this.config[ai.EnabledBlockTunes]}get pasteConfig(){return this.constructable[An.PasteConfig]??{}}get sanitizeConfig(){const e=super.sanitizeConfig,n=this.baseSanitizeConfig;if(pe(e))return n;const r={};for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)){const c=e[s];At(c)?r[s]=Object.assign({},n,c):r[s]=c}return r}get baseSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(n=>Object.assign(e,n.sanitizeConfig)),Array.from(this.tunes.values()).forEach(n=>Object.assign(e,n.sanitizeConfig)),e}}Cc([Rn],rs.prototype,"sanitizeConfig",1);Cc([Rn],rs.prototype,"baseSanitizeConfig",1);class Zv{constructor(e,n,r){this.api=r,this.config=e,this.editorConfig=n}get(e){const{class:n,isInternal:r=!1,...s}=this.config[e],c=this.getConstructor(n);return new c({name:e,constructable:n,config:s,api:this.api,isDefault:e===this.editorConfig.defaultBlock,defaultPlaceholder:this.editorConfig.placeholder,isInternal:r})}getConstructor(e){switch(!0){case e[Qr.IsInline]:return Kv;case e[wc.IsTune]:return qv;default:return rs}}}class Sc{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:pc,title:this.api.i18n.t("Move down"),onActivate:()=>this.handleClick(),name:"move-down"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(e+1);if(!n)throw new Error("Unable to move Block down since it is already the last");const r=n.holder,s=r.getBoundingClientRect();let c=Math.abs(window.innerHeight-r.offsetHeight);s.top<window.innerHeight&&(c=window.scrollY+r.offsetHeight),window.scrollTo(0,c),this.api.blocks.move(e+1),this.api.toolbar.toggleBlockSettings(!0)}}Sc.isTune=!0;class Ec{constructor({api:e}){this.api=e}render(){return{icon:fv,title:this.api.i18n.t("Delete"),name:"delete",confirmation:{title:this.api.i18n.t("Click to delete"),onActivate:()=>this.handleClick()}}}handleClick(){this.api.blocks.delete()}}Ec.isTune=!0;class Tc{constructor({api:e}){this.CSS={animation:"wobble"},this.api=e}render(){return{icon:pv,title:this.api.i18n.t("Move up"),onActivate:()=>this.handleClick(),name:"move-up"}}handleClick(){const e=this.api.blocks.getCurrentBlockIndex(),n=this.api.blocks.getBlockByIndex(e),r=this.api.blocks.getBlockByIndex(e-1);if(e===0||!n||!r)throw new Error("Unable to move Block up since it is already the first");const s=n.holder,c=r.holder,h=s.getBoundingClientRect(),f=c.getBoundingClientRect();let m;f.top>0?m=Math.abs(h.top)-Math.abs(f.top):m=Math.abs(h.top)+f.height,window.scrollBy(0,-1*m),this.api.blocks.move(e-1),this.api.toolbar.toggleBlockSettings(!0)}}Tc.isTune=!0;var Vv=Object.defineProperty,jv=Object.getOwnPropertyDescriptor,Jv=(l,e,n,r)=>{for(var s=r>1?void 0:r?jv(e,n):e,c=l.length-1,h;c>=0;c--)(h=l[c])&&(s=(r?h(e,n,s):h(s))||s);return r&&s&&Vv(e,n,s),s};class _c extends et{constructor(){super(...arguments),this.stubTool="stub",this.toolsAvailable=new Nt,this.toolsUnavailable=new Nt}get available(){return this.toolsAvailable}get unavailable(){return this.toolsUnavailable}get inlineTools(){return this.available.inlineTools}get blockTools(){return this.available.blockTools}get blockTunes(){return this.available.blockTunes}get defaultTool(){return this.blockTools.get(this.config.defaultBlock)}get internal(){return this.available.internalTools}async prepare(){if(this.validateTools(),this.config.tools=Hr({},this.internalTools,this.config.tools),!Object.prototype.hasOwnProperty.call(this.config,"tools")||Object.keys(this.config.tools).length===0)throw Error("Can't start without tools");const e=this.prepareConfig();this.factory=new Zv(e,this.config,this.Editor.API);const n=this.getListOfPrepareFunctions(e);if(n.length===0)return Promise.resolve();await xb(n,r=>{this.toolPrepareMethodSuccess(r)},r=>{this.toolPrepareMethodFallback(r)}),this.prepareBlockTools()}getAllInlineToolsSanitizeConfig(){const e={};return Array.from(this.inlineTools.values()).forEach(n=>{Object.assign(e,n.sanitizeConfig)}),e}destroy(){Object.values(this.available).forEach(async e=>{pt(e.reset)&&await e.reset()})}get internalTools(){return{bold:{class:ns,isInternal:!0},italic:{class:os,isInternal:!0},link:{class:is,isInternal:!0},paragraph:{class:es,inlineToolbar:!0,isInternal:!0},stub:{class:yc,isInternal:!0},moveUp:{class:Tc,isInternal:!0},delete:{class:Ec,isInternal:!0},moveDown:{class:Sc,isInternal:!0}}}toolPrepareMethodSuccess(e){const n=this.factory.get(e.toolName);if(n.isInline()){const r=["render","surround","checkState"].filter(s=>!n.create()[s]);if(r.length){it(`Incorrect Inline Tool: ${n.name}. Some of required methods is not implemented %o`,"warn",r),this.toolsUnavailable.set(n.name,n);return}}this.toolsAvailable.set(n.name,n)}toolPrepareMethodFallback(e){this.toolsUnavailable.set(e.toolName,this.factory.get(e.toolName))}getListOfPrepareFunctions(e){const n=[];return Object.entries(e).forEach(([r,s])=>{n.push({function:pt(s.class.prepare)?s.class.prepare:()=>{},data:{toolName:r,config:s.config}})}),n}prepareBlockTools(){Array.from(this.blockTools.values()).forEach(e=>{this.assignInlineToolsToBlockTool(e),this.assignBlockTunesToBlockTool(e)})}assignInlineToolsToBlockTool(e){if(this.config.inlineToolbar!==!1){if(e.enabledInlineTools===!0){e.inlineTools=new Nt(Array.isArray(this.config.inlineToolbar)?this.config.inlineToolbar.map(n=>[n,this.inlineTools.get(n)]):Array.from(this.inlineTools.entries()));return}Array.isArray(e.enabledInlineTools)&&(e.inlineTools=new Nt(e.enabledInlineTools.map(n=>[n,this.inlineTools.get(n)])))}}assignBlockTunesToBlockTool(e){if(e.enabledBlockTunes!==!1){if(Array.isArray(e.enabledBlockTunes)){const n=new Nt(e.enabledBlockTunes.map(r=>[r,this.blockTunes.get(r)]));e.tunes=new Nt([...n,...this.blockTunes.internalTools]);return}if(Array.isArray(this.config.tunes)){const n=new Nt(this.config.tunes.map(r=>[r,this.blockTunes.get(r)]));e.tunes=new Nt([...n,...this.blockTunes.internalTools]);return}e.tunes=this.blockTunes.internalTools}}validateTools(){for(const e in this.config.tools)if(Object.prototype.hasOwnProperty.call(this.config.tools,e)){if(e in this.internalTools)return;const n=this.config.tools[e];if(!pt(n)&&!pt(n.class))throw Error(`Tool «${e}» must be a constructor function or an object with function in the «class» property`)}}prepareConfig(){const e={};for(const n in this.config.tools)At(this.config.tools[n])?e[n]=this.config.tools[n]:e[n]={class:this.config.tools[n]};return e}}Jv([Rn],_c.prototype,"getAllInlineToolsSanitizeConfig",1);const Qv=`:root{--selectionColor: #e1f2ff;--inlineSelectionColor: #d4ecff;--bg-light: #eff2f5;--grayText: #707684;--color-dark: #1D202B;--color-active-icon: #388AE5;--color-gray-border: rgba(201, 201, 204, .48);--content-width: 650px;--narrow-mode-right-padding: 50px;--toolbox-buttons-size: 26px;--toolbox-buttons-size--mobile: 36px;--icon-size: 20px;--icon-size--mobile: 28px;--block-padding-vertical: .4em;--color-line-gray: #EFF0F1 }.codex-editor{position:relative;-webkit-box-sizing:border-box;box-sizing:border-box;z-index:1}.codex-editor .hide{display:none}.codex-editor__redactor [contenteditable]:empty:after{content:"\\feff"}@media (min-width: 651px){.codex-editor--narrow .codex-editor__redactor{margin-right:50px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .codex-editor__redactor{margin-left:50px;margin-right:0}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__actions{right:-5px}}.codex-editor-copyable{position:absolute;height:1px;width:1px;top:-400%;opacity:.001}.codex-editor-overlay{position:fixed;top:0px;left:0px;right:0px;bottom:0px;z-index:999;pointer-events:none;overflow:hidden}.codex-editor-overlay__container{position:relative;pointer-events:auto;z-index:0}.codex-editor-overlay__rectangle{position:absolute;pointer-events:none;background-color:#2eaadc33;border:1px solid transparent}.codex-editor svg{max-height:100%}.codex-editor path{stroke:currentColor}.codex-editor ::-moz-selection{background-color:#d4ecff}.codex-editor ::selection{background-color:#d4ecff}.codex-editor--toolbox-opened [contentEditable=true][data-placeholder]:focus:before{opacity:0!important}.ce-scroll-locked{overflow:hidden}.ce-scroll-locked--hard{overflow:hidden;top:calc(-1 * var(--window-scroll-offset));position:fixed;width:100%}.ce-toolbar{position:absolute;left:0;right:0;top:0;-webkit-transition:opacity .1s ease;transition:opacity .1s ease;will-change:opacity,top;display:none}.ce-toolbar--opened{display:block}.ce-toolbar__content{max-width:650px;margin:0 auto;position:relative}.ce-toolbar__plus{color:#1d202b;cursor:pointer;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-ms-flex-negative:0;flex-shrink:0}@media (max-width: 650px){.ce-toolbar__plus{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__plus:hover{background-color:#eff2f5}}.ce-toolbar__plus--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-toolbar__plus-shortcut{opacity:.6;word-spacing:-2px;margin-top:5px}@media (max-width: 650px){.ce-toolbar__plus{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__plus--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__plus--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__actions{position:absolute;right:100%;opacity:0;display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:5px}.ce-toolbar__actions--opened{opacity:1}@media (max-width: 650px){.ce-toolbar__actions{right:auto}}.ce-toolbar__settings-btn{color:#1d202b;width:26px;height:26px;border-radius:7px;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;margin-left:3px;cursor:pointer;user-select:none}@media (max-width: 650px){.ce-toolbar__settings-btn{width:36px;height:36px}}@media (hover: hover){.ce-toolbar__settings-btn:hover{background-color:#eff2f5}}.ce-toolbar__settings-btn--active{background-color:#eff2f5;-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@media (min-width: 651px){.ce-toolbar__settings-btn{width:24px}}.ce-toolbar__settings-btn--hidden{display:none}@media (max-width: 650px){.ce-toolbar__settings-btn{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;position:static}.ce-toolbar__settings-btn--left-oriented:before{left:15px;margin-left:0}.ce-toolbar__settings-btn--right-oriented:before{left:auto;right:15px;margin-left:0}}.ce-toolbar__plus svg,.ce-toolbar__settings-btn svg{width:24px;height:24px}@media (min-width: 651px){.codex-editor--narrow .ce-toolbar__plus{left:5px}}@media (min-width: 651px){.codex-editor--narrow .ce-toolbox .ce-popover{right:0;left:auto;left:initial}}.ce-inline-toolbar{--y-offset: 8px;position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;-webkit-transition:opacity .25s ease;transition:opacity .25s ease;will-change:opacity,left,top;top:0;left:0;z-index:3}.ce-inline-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-inline-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-inline-toolbar--showed{opacity:1;visibility:visible}.ce-inline-toolbar [hidden]{display:none!important}.ce-inline-toolbar__toggler-and-button-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;width:100%;padding:0 6px}.ce-inline-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown{display:-webkit-box;display:-ms-flexbox;display:flex;padding:6px;margin:0 6px 0 -6px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;border-right:1px solid rgba(201,201,204,.48);-webkit-box-sizing:border-box;box-sizing:border-box}@media (hover: hover){.ce-inline-toolbar__dropdown:hover{background:#eff2f5}}.ce-inline-toolbar__dropdown--hidden{display:none}.ce-inline-toolbar__dropdown-content,.ce-inline-toolbar__dropdown-arrow{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-inline-toolbar__dropdown-content svg,.ce-inline-toolbar__dropdown-arrow svg{width:20px;height:20px}.ce-inline-toolbar__shortcut{opacity:.6;word-spacing:-3px;margin-top:3px}.ce-inline-tool{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;border-radius:0;line-height:normal}.ce-inline-tool svg{width:20px;height:20px}@media (max-width: 650px){.ce-inline-tool svg{width:28px;height:28px}}@media (hover: hover){.ce-inline-tool:hover{background-color:#eff2f5}}.ce-inline-tool--active{color:#388ae5}.ce-inline-tool--focused{background:rgba(34,186,255,.08)!important}.ce-inline-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-inline-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-inline-tool--link .icon--unlink,.ce-inline-tool--unlink .icon--link{display:none}.ce-inline-tool--unlink .icon--unlink{display:inline-block;margin-bottom:-1px}.ce-inline-tool-input{outline:none;border:0;border-radius:0 0 4px 4px;margin:0;font-size:13px;padding:10px;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:none;font-weight:500;border-top:1px solid rgba(201,201,204,.48);-webkit-appearance:none;font-family:inherit}@media (max-width: 650px){.ce-inline-tool-input{font-size:15px;font-weight:500}}.ce-inline-tool-input::-webkit-input-placeholder{color:#707684}.ce-inline-tool-input::-moz-placeholder{color:#707684}.ce-inline-tool-input:-ms-input-placeholder{color:#707684}.ce-inline-tool-input::-ms-input-placeholder{color:#707684}.ce-inline-tool-input::placeholder{color:#707684}.ce-inline-tool-input--showed{display:block}.ce-conversion-toolbar{position:absolute;background-color:#fff;border:1px solid #E8E8EB;-webkit-box-shadow:0 3px 15px -3px rgba(13,20,33,.13);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;z-index:2;opacity:0;visibility:hidden;will-change:transform,opacity;-webkit-transition:opacity .1s ease,-webkit-transform .1s ease;transition:opacity .1s ease,-webkit-transform .1s ease;transition:transform .1s ease,opacity .1s ease;transition:transform .1s ease,opacity .1s ease,-webkit-transform .1s ease;-webkit-transform:translateY(-8px);transform:translateY(-8px);left:-1px;width:190px;margin-top:5px;-webkit-box-sizing:content-box;box-sizing:content-box}.ce-conversion-toolbar--left-oriented:before{left:15px;margin-left:0}.ce-conversion-toolbar--right-oriented:before{left:auto;right:15px;margin-left:0}.ce-conversion-toolbar--showed{opacity:1;visibility:visible;-webkit-transform:none;transform:none}.ce-conversion-toolbar [hidden]{display:none!important}.ce-conversion-toolbar__buttons{display:-webkit-box;display:-ms-flexbox;display:flex}.ce-conversion-toolbar__label{color:#707684;font-size:11px;font-weight:500;letter-spacing:.33px;padding:10px 10px 5px;text-transform:uppercase}.ce-conversion-tool{display:-webkit-box;display:-ms-flexbox;display:flex;padding:5px 10px;font-size:14px;line-height:20px;font-weight:500;cursor:pointer;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.ce-conversion-tool--hidden{display:none}.ce-conversion-tool--focused{background:rgba(34,186,255,.08)!important}.ce-conversion-tool--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-conversion-tool--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-conversion-tool:hover{background:#eff2f5}.ce-conversion-tool__icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px rgba(201,201,204,.48);box-shadow:0 0 0 1px #c9c9cc7a;border-radius:5px;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#fff;-webkit-box-sizing:content-box;box-sizing:content-box;-ms-flex-negative:0;flex-shrink:0;margin-right:10px}.ce-conversion-tool__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-conversion-tool__icon{width:36px;height:36px;border-radius:8px}.ce-conversion-tool__icon svg{width:28px;height:28px}}.ce-conversion-tool--last{margin-right:0!important}.ce-conversion-tool--active{color:#388ae5!important}.ce-conversion-tool--active{-webkit-animation:bounceIn .75s 1;animation:bounceIn .75s 1;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}.ce-conversion-tool__secondary-label{color:#707684;font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-conversion-tool__secondary-label{display:none}}.ce-settings__button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;line-height:32px}.ce-settings__button svg{width:20px;height:20px}@media (max-width: 650px){.ce-settings__button svg{width:28px;height:28px}}@media (hover: hover){.ce-settings__button:hover{background-color:#eff2f5}}.ce-settings__button--active{color:#388ae5}.ce-settings__button--focused{background:rgba(34,186,255,.08)!important}.ce-settings__button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.ce-settings__button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.ce-settings__button:not(:nth-child(3n+3)){margin-right:3px}.ce-settings__button:nth-child(n+4){margin-top:3px}.ce-settings__button--disabled{cursor:not-allowed!important}.ce-settings__button--disabled{opacity:.3}.ce-settings__button--selected{color:#388ae5}@media (min-width: 651px){.codex-editor--narrow .ce-settings .ce-popover{right:0;left:auto;left:initial}}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.ce-block{-webkit-animation:fade-in .3s ease;animation:fade-in .3s ease;-webkit-animation-fill-mode:none;animation-fill-mode:none;-webkit-animation-fill-mode:initial;animation-fill-mode:initial}.ce-block:first-of-type{margin-top:0}.ce-block--selected .ce-block__content{background:#e1f2ff}.ce-block--selected .ce-block__content [contenteditable]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ce-block--selected .ce-block__content img,.ce-block--selected .ce-block__content .ce-stub{opacity:.55}.ce-block--stretched .ce-block__content{max-width:none}.ce-block__content{position:relative;max-width:650px;margin:0 auto;-webkit-transition:background-color .15s ease;transition:background-color .15s ease}.ce-block--drop-target .ce-block__content:before{content:"";position:absolute;top:100%;left:-20px;margin-top:-1px;height:8px;width:8px;border:solid #388AE5;border-width:1px 1px 0 0;-webkit-transform-origin:right;transform-origin:right;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.ce-block--drop-target .ce-block__content:after{content:"";position:absolute;top:100%;height:1px;width:100%;color:#388ae5;background:repeating-linear-gradient(90deg,#388AE5,#388AE5 1px,#fff 1px,#fff 6px)}.ce-block a{cursor:pointer;-webkit-text-decoration:underline;text-decoration:underline}.ce-block b{font-weight:700}.ce-block i{font-style:italic}@-webkit-keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes bounceIn{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.9,.9,.9);transform:scale3d(.9,.9,.9)}20%{-webkit-transform:scale3d(1.03,1.03,1.03);transform:scale3d(1.03,1.03,1.03)}60%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes selectionBounce{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}50%{-webkit-transform:scale3d(1.01,1.01,1.01);transform:scale3d(1.01,1.01,1.01)}70%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@-webkit-keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}@keyframes buttonClicked{0%,20%,40%,60%,80%,to{-webkit-animation-timing-function:cubic-bezier(.215,.61,.355,1);animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{-webkit-transform:scale3d(.95,.95,.95);transform:scale3d(.95,.95,.95)}60%{-webkit-transform:scale3d(1.02,1.02,1.02);transform:scale3d(1.02,1.02,1.02)}80%{-webkit-transform:scale3d(1,1,1);transform:scaleZ(1)}}.cdx-block{padding:.4em 0}.cdx-block::-webkit-input-placeholder{line-height:normal!important}.cdx-input{border:1px solid rgba(201,201,204,.48);-webkit-box-shadow:inset 0 1px 2px 0 rgba(35,44,72,.06);box-shadow:inset 0 1px 2px #232c480f;border-radius:3px;padding:10px 12px;outline:none;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.cdx-input[data-placeholder]:before{position:static!important}.cdx-input[data-placeholder]:before{display:inline-block;width:0;white-space:nowrap;pointer-events:none}.cdx-settings-button{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:6px 1px;border-radius:3px;cursor:pointer;border:0;outline:none;background-color:transparent;vertical-align:bottom;color:inherit;margin:0;min-width:26px;min-height:26px}.cdx-settings-button svg{width:20px;height:20px}@media (max-width: 650px){.cdx-settings-button svg{width:28px;height:28px}}@media (hover: hover){.cdx-settings-button:hover{background-color:#eff2f5}}.cdx-settings-button--focused{background:rgba(34,186,255,.08)!important}.cdx-settings-button--focused{-webkit-box-shadow:inset 0 0 0px 1px rgba(7,161,227,.08);box-shadow:inset 0 0 0 1px #07a1e314}.cdx-settings-button--focused-animated{-webkit-animation-name:buttonClicked;animation-name:buttonClicked;-webkit-animation-duration:.25s;animation-duration:.25s}.cdx-settings-button--active{color:#388ae5}.cdx-settings-button svg{width:auto;height:auto}@media (max-width: 650px){.cdx-settings-button{width:36px;height:36px;border-radius:8px}}.cdx-loader{position:relative;border:1px solid rgba(201,201,204,.48)}.cdx-loader:before{content:"";position:absolute;left:50%;top:50%;width:18px;height:18px;margin:-11px 0 0 -11px;border:2px solid rgba(201,201,204,.48);border-left-color:#388ae5;border-radius:50%;-webkit-animation:cdxRotation 1.2s infinite linear;animation:cdxRotation 1.2s infinite linear}@-webkit-keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cdxRotation{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.cdx-button{padding:13px;border-radius:3px;border:1px solid rgba(201,201,204,.48);font-size:14.9px;background:#fff;-webkit-box-shadow:0 2px 2px 0 rgba(18,30,57,.04);box-shadow:0 2px 2px #121e390a;color:#707684;text-align:center;cursor:pointer}@media (hover: hover){.cdx-button:hover{background:#FBFCFE;-webkit-box-shadow:0 1px 3px 0 rgba(18,30,57,.08);box-shadow:0 1px 3px #121e3914}}.cdx-button svg{height:20px;margin-right:.2em;margin-top:-2px}.ce-stub{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:12px 18px;margin:10px 0;border-radius:10px;background:#eff2f5;border:1px solid #EFF0F1;color:#707684;font-size:14px}.ce-stub svg{width:20px;height:20px}.ce-stub__info{margin-left:14px}.ce-stub__title{font-weight:500;text-transform:capitalize}.codex-editor.codex-editor--rtl{direction:rtl}.codex-editor.codex-editor--rtl .cdx-list{padding-left:0;padding-right:40px}.codex-editor.codex-editor--rtl .ce-toolbar__plus{right:-26px;left:auto}.codex-editor.codex-editor--rtl .ce-toolbar__actions{right:auto;left:-26px}@media (max-width: 650px){.codex-editor.codex-editor--rtl .ce-toolbar__actions{margin-left:0;margin-right:auto;padding-right:0;padding-left:10px}}.codex-editor.codex-editor--rtl .ce-settings{left:5px;right:auto}.codex-editor.codex-editor--rtl .ce-settings:before{right:auto;left:25px}.codex-editor.codex-editor--rtl .ce-settings__button:not(:nth-child(3n+3)){margin-left:3px;margin-right:0}.codex-editor.codex-editor--rtl .ce-conversion-tool__icon{margin-right:0;margin-left:10px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown{border-right:0px solid transparent;border-left:1px solid rgba(201,201,204,.48);margin:0 -6px 0 6px}.codex-editor.codex-editor--rtl .ce-inline-toolbar__dropdown .icon--toggler-down{margin-left:0;margin-right:4px}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__plus{left:0px;right:5px}}@media (min-width: 651px){.codex-editor--narrow.codex-editor--rtl .ce-toolbar__actions{left:-5px}}.cdx-search-field{--icon-margin-right: 10px;background:rgba(232,232,235,.49);border:1px solid rgba(226,226,229,.2);border-radius:6px;padding:2px;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto}.cdx-search-field__icon{width:26px;height:26px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:var(--icon-margin-right)}.cdx-search-field__icon svg{width:20px;height:20px;color:#707684}.cdx-search-field__input{font-size:14px;outline:none;font-weight:500;font-family:inherit;border:0;background:transparent;margin:0;padding:0;line-height:22px;min-width:calc(100% - 26px - var(--icon-margin-right))}.cdx-search-field__input::-webkit-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-moz-placeholder{color:#707684;font-weight:500}.cdx-search-field__input:-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::-ms-input-placeholder{color:#707684;font-weight:500}.cdx-search-field__input::placeholder{color:#707684;font-weight:500}.ce-popover{--border-radius: 6px;--width: 200px;--max-height: 270px;--padding: 6px;--offset-from-target: 8px;--color-border: #e8e8eb;--color-shadow: rgba(13,20,33,.13);--color-background: white;--color-text-primary: black;--color-text-secondary: #707684;--color-border-icon: rgba(201, 201, 204, .48);--color-border-icon-disabled: #EFF0F1;--color-text-icon-active: #388AE5;--color-background-icon-active: rgba(56, 138, 229, .1);--color-background-item-focus: rgba(34, 186, 255, .08);--color-shadow-item-focus: rgba(7, 161, 227, .08);--color-background-item-hover: #eff2f5;--color-background-item-confirm: #E24A4A;--color-background-item-confirm-hover: #CE4343;min-width:var(--width);width:var(--width);max-height:var(--max-height);border-radius:var(--border-radius);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-box-shadow:0 3px 15px -3px var(--color-shadow);box-shadow:0 3px 15px -3px var(--color-shadow);position:absolute;left:0;top:calc(100% + var(--offset-from-target));background:var(--color-background);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;z-index:4;opacity:0;max-height:0;pointer-events:none;padding:0;border:none}.ce-popover--opened{opacity:1;padding:var(--padding);max-height:var(--max-height);pointer-events:auto;-webkit-animation:panelShowing .1s ease;animation:panelShowing .1s ease;border:1px solid var(--color-border)}@media (max-width: 650px){.ce-popover--opened{-webkit-animation:panelShowingMobile .25s ease;animation:panelShowingMobile .25s ease}}.ce-popover__items{overflow-y:auto;-ms-scroll-chaining:none;overscroll-behavior:contain}@media (max-width: 650px){.ce-popover__overlay{position:fixed;top:0;bottom:0;left:0;right:0;background:#1D202B;z-index:3;opacity:.5;-webkit-transition:opacity .12s ease-in;transition:opacity .12s ease-in;will-change:opacity;visibility:visible}}.ce-popover__overlay--hidden{display:none}.ce-popover--open-top{top:calc(-1 * (var(--offset-from-target) + var(--popover-height)))}@media (max-width: 650px){.ce-popover{--offset: 5px;position:fixed;max-width:none;min-width:calc(100% - var(--offset) * 2);left:var(--offset);right:var(--offset);bottom:calc(var(--offset) + env(safe-area-inset-bottom));top:auto;border-radius:10px}.ce-popover .ce-popover__search{display:none}}.ce-popover__search,.ce-popover__custom-content:not(:empty){margin-bottom:5px}.ce-popover__nothing-found-message{color:#707684;display:none;cursor:default;padding:3px;font-size:14px;line-height:20px;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ce-popover__nothing-found-message--displayed{display:block}.ce-popover__custom-content:not(:empty){padding:4px}@media (min-width: 651px){.ce-popover__custom-content:not(:empty){padding:0}}.ce-popover__custom-content--hidden{display:none}.ce-popover-item{--border-radius: 6px;--icon-size: 20px;--icon-size-mobile: 28px;border-radius:var(--border-radius);display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:3px;color:var(--color-text-primary);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@media (max-width: 650px){.ce-popover-item{padding:4px}}.ce-popover-item:not(:last-of-type){margin-bottom:1px}.ce-popover-item__icon{border-radius:5px;width:26px;height:26px;-webkit-box-shadow:0 0 0 1px var(--color-border-icon);box-shadow:0 0 0 1px var(--color-border-icon);background:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-right:10px}.ce-popover-item__icon svg{width:20px;height:20px}@media (max-width: 650px){.ce-popover-item__icon{width:36px;height:36px;border-radius:8px}.ce-popover-item__icon svg{width:var(--icon-size-mobile);height:var(--icon-size-mobile)}}.ce-popover-item__title{font-size:14px;line-height:20px;font-weight:500;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}@media (max-width: 650px){.ce-popover-item__title{font-size:16px}}.ce-popover-item__secondary-title{color:var(--color-text-secondary);font-size:12px;margin-left:auto;white-space:nowrap;letter-spacing:-.1em;padding-right:5px;margin-bottom:-2px;opacity:.6}@media (max-width: 650px){.ce-popover-item__secondary-title{display:none}}.ce-popover-item--active{background:var(--color-background-icon-active);color:var(--color-text-icon-active)}.ce-popover-item--active .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}.ce-popover-item--disabled{color:var(--color-text-secondary);cursor:default;pointer-events:none}.ce-popover-item--disabled .ce-popover-item__icon{-webkit-box-shadow:0 0 0 1px var(--color-border-icon-disabled);box-shadow:0 0 0 1px var(--color-border-icon-disabled)}.ce-popover-item--focused:not(.ce-popover-item--no-focus){background:var(--color-background-item-focus)!important}.ce-popover-item--focused:not(.ce-popover-item--no-focus){-webkit-box-shadow:inset 0 0 0px 1px var(--color-shadow-item-focus);box-shadow:inset 0 0 0 1px var(--color-shadow-item-focus)}.ce-popover-item--hidden{display:none}@media (hover: hover){.ce-popover-item:hover{cursor:pointer}.ce-popover-item:hover:not(.ce-popover-item--no-hover){background-color:var(--color-background-item-hover)}.ce-popover-item:hover .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}}.ce-popover-item--confirmation{background:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__icon{color:var(--color-background-item-confirm)}.ce-popover-item--confirmation .ce-popover-item__title{color:#fff}@media (hover: hover){.ce-popover-item--confirmation:not(.ce-popover-item--no-hover):hover{background:var(--color-background-item-confirm-hover)}}.ce-popover-item--confirmation:not(.ce-popover-item--no-focus).ce-popover-item--focused{background:var(--color-background-item-confirm-hover)!important}.ce-popover-item--confirmation .ce-popover-item__icon,.ce-popover-item--active .ce-popover-item__icon,.ce-popover-item--focused .ce-popover-item__icon{-webkit-box-shadow:none;box-shadow:none}@-webkit-keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowing{0%{opacity:0;-webkit-transform:translateY(-8px) scale(.9);transform:translateY(-8px) scale(.9)}70%{opacity:1;-webkit-transform:translateY(2px);transform:translateY(2px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes panelShowingMobile{0%{opacity:0;-webkit-transform:translateY(14px) scale(.98);transform:translateY(14px) scale(.98)}70%{opacity:1;-webkit-transform:translateY(-4px);transform:translateY(-4px)}to{-webkit-transform:translateY(0);transform:translateY(0)}}.wobble{-webkit-animation-name:wobble;animation-name:wobble;-webkit-animation-duration:.4s;animation-duration:.4s}@-webkit-keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}@keyframes wobble{0%{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}15%{-webkit-transform:translate3d(-9%,0,0);transform:translate3d(-9%,0,0)}30%{-webkit-transform:translate3d(9%,0,0);transform:translate3d(9%,0,0)}45%{-webkit-transform:translate3d(-4%,0,0);transform:translate3d(-4%,0,0)}60%{-webkit-transform:translate3d(4%,0,0);transform:translate3d(4%,0,0)}75%{-webkit-transform:translate3d(-1%,0,0);transform:translate3d(-1%,0,0)}to{-webkit-transform:translate3d(0,0,0);transform:translateZ(0)}}
`;class t1 extends et{constructor(){super(...arguments),this.isMobile=!1,this.contentRectCache=void 0,this.resizeDebouncer=Fl(()=>{this.windowResize()},200)}get CSS(){return{editorWrapper:"codex-editor",editorWrapperNarrow:"codex-editor--narrow",editorZone:"codex-editor__redactor",editorZoneHidden:"codex-editor__redactor--hidden",editorEmpty:"codex-editor--empty",editorRtlFix:"codex-editor--rtl"}}get contentRect(){if(this.contentRectCache)return this.contentRectCache;const e=this.nodes.wrapper.querySelector(`.${Pe.CSS.content}`);return e?(this.contentRectCache=e.getBoundingClientRect(),this.contentRectCache):{width:650,left:0,right:0}}async prepare(){this.checkIsMobile(),this.make(),this.loadStyles()}toggleReadOnly(e){e?this.disableModuleBindings():window.requestIdleCallback(()=>{this.enableModuleBindings()},{timeout:2e3})}checkEmptiness(){const{BlockManager:e}=this.Editor;this.nodes.wrapper.classList.toggle(this.CSS.editorEmpty,e.isEditorEmpty)}get someToolbarOpened(){const{Toolbar:e,BlockSettings:n,InlineToolbar:r,ConversionToolbar:s}=this.Editor;return n.opened||r.opened||s.opened||e.toolbox.opened}get someFlipperButtonFocused(){return this.Editor.Toolbar.toolbox.hasFocus()?!0:Object.entries(this.Editor).filter(([e,n])=>n.flipper instanceof Fe).some(([e,n])=>n.flipper.hasFocus())}destroy(){this.nodes.holder.innerHTML=""}closeAllToolbars(){const{Toolbar:e,BlockSettings:n,InlineToolbar:r,ConversionToolbar:s}=this.Editor;n.close(),r.close(),s.close(),e.toolbox.close()}checkIsMobile(){this.isMobile=window.innerWidth<ic}make(){this.nodes.holder=y.getHolder(this.config.holder),this.nodes.wrapper=y.make("div",[this.CSS.editorWrapper,...this.isRtl?[this.CSS.editorRtlFix]:[]]),this.nodes.redactor=y.make("div",this.CSS.editorZone),this.nodes.holder.offsetWidth<this.contentRect.width&&this.nodes.wrapper.classList.add(this.CSS.editorWrapperNarrow),this.nodes.redactor.style.paddingBottom=this.config.minHeight+"px",this.nodes.wrapper.appendChild(this.nodes.redactor),this.nodes.holder.appendChild(this.nodes.wrapper)}loadStyles(){const e="editor-js-styles";if(y.get(e))return;const n=y.make("style",null,{id:e,textContent:Qv.toString()});this.config.style&&!pe(this.config.style)&&this.config.style.nonce&&n.setAttribute("nonce",this.config.style.nonce),y.prepend(document.head,n)}enableModuleBindings(){this.readOnlyMutableListeners.on(this.nodes.redactor,"click",n=>{this.redactorClicked(n)},!1),this.readOnlyMutableListeners.on(this.nodes.redactor,"mousedown",n=>{this.documentTouched(n)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(this.nodes.redactor,"touchstart",n=>{this.documentTouched(n)},{capture:!0,passive:!0}),this.readOnlyMutableListeners.on(document,"keydown",n=>{this.documentKeydown(n)},!0),this.readOnlyMutableListeners.on(document,"mousedown",n=>{this.documentClicked(n)},!0);const e=Fl(()=>{this.selectionChanged()},180);this.readOnlyMutableListeners.on(document,"selectionchange",e,!0),this.readOnlyMutableListeners.on(window,"resize",()=>{this.resizeDebouncer()},{passive:!0}),this.watchBlockHoveredEvents()}watchBlockHoveredEvents(){let e;this.readOnlyMutableListeners.on(this.nodes.redactor,"mousemove",Pr(n=>{const r=n.target.closest(".ce-block");this.Editor.BlockSelection.anyBlockSelected||r&&e!==r&&(e=r,this.eventsDispatcher.emit(bc,{block:this.Editor.BlockManager.getBlockByChildNode(r)}))},20),{passive:!0})}disableModuleBindings(){this.readOnlyMutableListeners.clearAll()}windowResize(){this.contentRectCache=null,this.checkIsMobile()}documentKeydown(e){switch(e.keyCode){case z.ENTER:this.enterPressed(e);break;case z.BACKSPACE:case z.DELETE:this.backspacePressed(e);break;case z.ESC:this.escapePressed(e);break;default:this.defaultBehaviour(e);break}}defaultBehaviour(e){const{currentBlock:n}=this.Editor.BlockManager,r=e.target.closest(`.${this.CSS.editorWrapper}`),s=e.altKey||e.ctrlKey||e.metaKey||e.shiftKey;if(n!==void 0&&r===null){this.Editor.BlockEvents.keydown(e);return}r||n&&s||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close())}backspacePressed(e){const{BlockManager:n,BlockSelection:r,Caret:s}=this.Editor;if(r.anyBlockSelected&&!U.isSelectionExists){const c=n.removeSelectedBlocks(),h=n.insertDefaultBlockAtIndex(c,!0);s.setToBlock(h,s.positions.START),r.clearSelection(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}}escapePressed(e){this.Editor.BlockSelection.clearSelection(e),this.Editor.Toolbar.toolbox.opened?(this.Editor.Toolbar.toolbox.close(),this.Editor.Caret.setToBlock(this.Editor.BlockManager.currentBlock,this.Editor.Caret.positions.END)):this.Editor.BlockSettings.opened?this.Editor.BlockSettings.close():this.Editor.ConversionToolbar.opened?this.Editor.ConversionToolbar.close():this.Editor.InlineToolbar.opened?this.Editor.InlineToolbar.close():this.Editor.Toolbar.close()}enterPressed(e){const{BlockManager:n,BlockSelection:r}=this.Editor,s=n.currentBlockIndex>=0;if(r.anyBlockSelected&&!U.isSelectionExists){r.clearSelection(e),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation();return}if(!this.someToolbarOpened&&s&&e.target.tagName==="BODY"){const c=this.Editor.BlockManager.insert();this.Editor.Caret.setToBlock(c),this.Editor.Toolbar.moveAndOpen(c)}this.Editor.BlockSelection.clearSelection(e)}documentClicked(e){var n,r;if(!e.isTrusted)return;const s=e.target;this.nodes.holder.contains(s)||U.isAtEditor||(this.Editor.BlockManager.dropPointer(),this.Editor.Toolbar.close());const c=(n=this.Editor.BlockSettings.nodes.wrapper)==null?void 0:n.contains(s),h=(r=this.Editor.Toolbar.nodes.settingsToggler)==null?void 0:r.contains(s),f=c||h;if(this.Editor.BlockSettings.opened&&!f){this.Editor.BlockSettings.close();const m=this.Editor.BlockManager.getBlockByChildNode(s);this.Editor.Toolbar.moveAndOpen(m)}this.Editor.BlockSelection.clearSelection(e)}documentTouched(e){let n=e.target;if(n===this.nodes.redactor){const r=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,s=e instanceof MouseEvent?e.clientY:e.touches[0].clientY;n=document.elementFromPoint(r,s)}try{this.Editor.BlockManager.setCurrentBlockByChildNode(n)}catch{this.Editor.RectangleSelection.isRectActivated()||this.Editor.Caret.setToTheLastBlock()}this.Editor.Toolbar.moveAndOpen()}redactorClicked(e){if(!U.isCollapsed)return;const n=e.target,r=e.metaKey||e.ctrlKey;if(y.isAnchor(n)&&r){e.stopImmediatePropagation(),e.stopPropagation();const s=n.getAttribute("href"),c=Eb(s);_b(c);return}this.processBottomZoneClick(e)}processBottomZoneClick(e){const n=this.Editor.BlockManager.getBlockByIndex(-1),r=y.offset(n.holder).bottom,s=e.pageY,{BlockSelection:c}=this.Editor;if(e.target instanceof Element&&e.target.isEqualNode(this.nodes.redactor)&&!c.anyBlockSelected&&r<s){e.stopImmediatePropagation(),e.stopPropagation();const{BlockManager:h,Caret:f,Toolbar:m}=this.Editor;(!h.lastBlock.tool.isDefault||!h.lastBlock.isEmpty)&&h.insertAtEnd(),f.setToTheLastBlock(),m.moveAndOpen(h.lastBlock)}}selectionChanged(){const{CrossBlockSelection:e,BlockSelection:n}=this.Editor,r=U.anchorElement;if(e.isCrossBlockSelectionStarted&&n.anyBlockSelected&&U.get().removeAllRanges(),!r){U.range||this.Editor.InlineToolbar.close();return}const s=r.closest(`.${Pe.CSS.content}`)===null;if(s&&(this.Editor.InlineToolbar.containsNode(r)||this.Editor.InlineToolbar.close(),r.dataset.inlineToolbar!=="true"))return;this.Editor.BlockManager.currentBlock||this.Editor.BlockManager.setCurrentBlockByChildNode(r);const c=s!==!0;this.Editor.InlineToolbar.tryToShow(!0,c)}}const e1={BlocksAPI:Pb,CaretAPI:Hb,EventsAPI:Fb,I18nAPI:Xr,API:Ub,InlineToolbarAPI:zb,ListenersAPI:Wb,NotifierAPI:qb,ReadOnlyAPI:Gb,SanitizerAPI:tv,SaverAPI:ev,SelectionAPI:nv,StylesAPI:ov,ToolbarAPI:iv,TooltipAPI:cv,UiAPI:dv,BlockSettings:Ev,ConversionToolbar:ne,Toolbar:Av,InlineToolbar:Mv,BlockEvents:Ov,BlockManager:Dv,BlockSelection:Pv,Caret:ci,CrossBlockSelection:Hv,DragNDrop:Fv,ModificationsObserver:Uv,Paste:xc,ReadOnly:zv,RectangleSelection:lo,Renderer:Wv,Saver:$v,Tools:_c,UI:t1};class n1{constructor(e){this.moduleInstances={},this.eventsDispatcher=new ui;let n,r;this.isReady=new Promise((s,c)=>{n=s,r=c}),Promise.resolve().then(async()=>{this.configuration=e,this.validate(),this.init(),await this.start(),await this.render();const{BlockManager:s,Caret:c,UI:h,ModificationsObserver:f}=this.moduleInstances;h.checkEmptiness(),f.enable(),this.configuration.autofocus&&c.setToBlock(s.blocks[0],c.positions.START),n()}).catch(s=>{it(`Editor.js is not ready because of ${s}`,"error"),r(s)})}set configuration(e){var n,r;At(e)?this.config={...e}:this.config={holder:e},Fr(!!this.config.holderId,"config.holderId","config.holder"),this.config.holderId&&!this.config.holder&&(this.config.holder=this.config.holderId,this.config.holderId=null),this.config.holder==null&&(this.config.holder="editorjs"),this.config.logLevel||(this.config.logLevel=ec.VERBOSE),wb(this.config.logLevel),Fr(!!this.config.initialBlock,"config.initialBlock","config.defaultBlock"),this.config.defaultBlock=this.config.defaultBlock||this.config.initialBlock||"paragraph",this.config.minHeight=this.config.minHeight!==void 0?this.config.minHeight:300;const s={type:this.config.defaultBlock,data:{}};this.config.placeholder=this.config.placeholder||!1,this.config.sanitizer=this.config.sanitizer||{p:!0,b:!0,a:!0},this.config.hideToolbar=this.config.hideToolbar?this.config.hideToolbar:!1,this.config.tools=this.config.tools||{},this.config.i18n=this.config.i18n||{},this.config.data=this.config.data||{blocks:[]},this.config.onReady=this.config.onReady||(()=>{}),this.config.onChange=this.config.onChange||(()=>{}),this.config.inlineToolbar=this.config.inlineToolbar!==void 0?this.config.inlineToolbar:!0,(pe(this.config.data)||!this.config.data.blocks||this.config.data.blocks.length===0)&&(this.config.data={blocks:[s]}),this.config.readOnly=this.config.readOnly||!1,(n=this.config.i18n)!=null&&n.messages&&Xt.setDictionary(this.config.i18n.messages),this.config.i18n.direction=((r=this.config.i18n)==null?void 0:r.direction)||"ltr"}get configuration(){return this.config}validate(){const{holderId:e,holder:n}=this.config;if(e&&n)throw Error("«holderId» and «holder» param can't assign at the same time.");if(Je(n)&&!y.get(n))throw Error(`element with ID «${n}» is missing. Pass correct holder's ID.`);if(n&&At(n)&&!y.isElement(n))throw Error("«holder» value must be an Element node")}init(){this.constructModules(),this.configureModules()}async start(){await["Tools","UI","BlockManager","Paste","BlockSelection","RectangleSelection","CrossBlockSelection","ReadOnly"].reduce((e,n)=>e.then(async()=>{try{await this.moduleInstances[n].prepare()}catch(r){if(r instanceof sc)throw new Error(r.message);it(`Module ${n} was skipped because of %o`,"warn",r)}}),Promise.resolve())}render(){return this.moduleInstances.Renderer.render(this.config.data.blocks)}constructModules(){Object.entries(e1).forEach(([e,n])=>{try{this.moduleInstances[e]=new n({config:this.configuration,eventsDispatcher:this.eventsDispatcher})}catch(r){it("[constructModules]",`Module ${e} skipped because`,"error",r)}})}configureModules(){for(const e in this.moduleInstances)Object.prototype.hasOwnProperty.call(this.moduleInstances,e)&&(this.moduleInstances[e].state=this.getModulesDiff(e))}getModulesDiff(e){const n={};for(const r in this.moduleInstances)r!==e&&(n[r]=this.moduleInstances[r]);return n}}/**
 * Editor.js
 *
 * @license Apache-2.0
 * @see Editor.js <https://editorjs.io>
 * @author CodeX Team <https://codex.so>
 */class o1{static get version(){return"2.29.0"}constructor(e){let n=()=>{};At(e)&&pt(e.onReady)&&(n=e.onReady);const r=new n1(e);this.isReady=r.isReady.then(()=>{this.exportAPI(r),n()})}exportAPI(e){const n=["configuration"],r=()=>{Object.values(e.moduleInstances).forEach(s=>{pt(s.destroy)&&s.destroy(),s.listeners.removeAll()}),lv(),e=null;for(const s in this)Object.prototype.hasOwnProperty.call(this,s)&&delete this[s];Object.setPrototypeOf(this,null)};n.forEach(s=>{this[s]=e[s]}),this.destroy=r,Object.setPrototypeOf(this,e.moduleInstances.API.methods),delete this.exportAPI,Object.entries({blocks:{clear:"clear",render:"render"},caret:{focus:"focus"},events:{on:"on",off:"off",emit:"emit"},saver:{save:"save"}}).forEach(([s,c])=>{Object.entries(c).forEach(([h,f])=>{this[f]=e.moduleInstances.API.methods[s][h]})})}}(function(){try{if(typeof document<"u"){var l=document.createElement("style");l.appendChild(document.createTextNode(".ce-header{padding:.6em 0 3px;margin:0;line-height:1.25em;outline:none}.ce-header p,.ce-header div{padding:0!important;margin:0!important}.ce-header[contentEditable=true][data-placeholder]:before{position:absolute;content:attr(data-placeholder);color:#707684;font-weight:400;display:none;cursor:text}.ce-header[contentEditable=true][data-placeholder]:empty:before{display:block}.ce-header[contentEditable=true][data-placeholder]:empty:focus:before{display:none}")),document.head.appendChild(l)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const i1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19 17V10.2135C19 10.1287 18.9011 10.0824 18.836 10.1367L16 12.5"/></svg>',r1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10 19 9.5 19 12C19 13.9771 16.0684 13.9997 16.0012 16.8981C15.9999 16.9533 16.0448 17 16.1 17L19.3 17"/></svg>',s1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 11C16 10.5 16.8323 10 17.6 10C18.3677 10 19.5 10.311 19.5 11.5C19.5 12.5315 18.7474 12.9022 18.548 12.9823C18.5378 12.9864 18.5395 13.0047 18.5503 13.0063C18.8115 13.0456 20 13.3065 20 14.8C20 16 19.5 17 17.8 17C17.8 17 16 17 16 16.3"/></svg>',a1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M18 10L15.2834 14.8511C15.246 14.9178 15.294 15 15.3704 15C16.8489 15 18.7561 15 20.2 15M19 17C19 15.7187 19 14.8813 19 13.6"/></svg>',l1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M16 15.9C16 15.9 16.3768 17 17.8 17C19.5 17 20 15.6199 20 14.7C20 12.7323 17.6745 12.0486 16.1635 12.9894C16.094 13.0327 16 12.9846 16 12.9027V10.1C16 10.0448 16.0448 10 16.1 10H19.8"/></svg>',c1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7L6 12M6 17L6 12M6 12L12 12M12 7V12M12 17L12 12"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M19.5 10C16.5 10.5 16 13.3285 16 15M16 15V15C16 16.1046 16.8954 17 18 17H18.3246C19.3251 17 20.3191 16.3492 20.2522 15.3509C20.0612 12.4958 16 12.6611 16 15Z"/></svg>',d1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M9 7L9 12M9 17V12M9 12L15 12M15 7V12M15 17L15 12"/></svg>';/**
 * Header block for the Editor.js.
 *
 * @author CodeX (team@ifmo.su)
 * @copyright CodeX 2018
 * @license MIT
 * @version 2.0.0
 */let h1=class{constructor({data:e,config:n,api:r,readOnly:s}){this.api=r,this.readOnly=s,this._CSS={block:this.api.styles.block,wrapper:"ce-header"},this._settings=n,this._data=this.normalizeData(e),this._element=this.getTag()}normalizeData(e){const n={};return typeof e!="object"&&(e={}),n.text=e.text||"",n.level=parseInt(e.level)||this.defaultLevel.number,n}render(){return this._element}renderSettings(){return this.levels.map(e=>({icon:e.svg,label:this.api.i18n.t(`Heading ${e.number}`),onActivate:()=>this.setLevel(e.number),closeOnActivate:!0,isActive:this.currentLevel.number===e.number}))}setLevel(e){this.data={level:e,text:this.data.text}}merge(e){const n={text:this.data.text+e.text,level:this.data.level};this.data=n}validate(e){return e.text.trim()!==""}save(e){return{text:e.innerHTML,level:this.currentLevel.number}}static get conversionConfig(){return{export:"text",import:"text"}}static get sanitize(){return{level:!1,text:{}}}static get isReadOnlySupported(){return!0}get data(){return this._data.text=this._element.innerHTML,this._data.level=this.currentLevel.number,this._data}set data(e){if(this._data=this.normalizeData(e),e.level!==void 0&&this._element.parentNode){const n=this.getTag();n.innerHTML=this._element.innerHTML,this._element.parentNode.replaceChild(n,this._element),this._element=n}e.text!==void 0&&(this._element.innerHTML=this._data.text||"")}getTag(){const e=document.createElement(this.currentLevel.tag);return e.innerHTML=this._data.text||"",e.classList.add(this._CSS.wrapper),e.contentEditable=this.readOnly?"false":"true",e.dataset.placeholder=this.api.i18n.t(this._settings.placeholder||""),e}get currentLevel(){let e=this.levels.find(n=>n.number===this._data.level);return e||(e=this.defaultLevel),e}get defaultLevel(){if(this._settings.defaultLevel){const e=this.levels.find(n=>n.number===this._settings.defaultLevel);if(e)return e;console.warn("(ง'̀-'́)ง Heading Tool: the default level specified was not found in available levels")}return this.levels[1]}get levels(){const e=[{number:1,tag:"H1",svg:i1},{number:2,tag:"H2",svg:r1},{number:3,tag:"H3",svg:s1},{number:4,tag:"H4",svg:a1},{number:5,tag:"H5",svg:l1},{number:6,tag:"H6",svg:c1}];return this._settings.levels?e.filter(n=>this._settings.levels.includes(n.number)):e}onPaste(e){const n=e.detail.data;let r=this.defaultLevel.number;switch(n.tagName){case"H1":r=1;break;case"H2":r=2;break;case"H3":r=3;break;case"H4":r=4;break;case"H5":r=5;break;case"H6":r=6;break}this._settings.levels&&(r=this._settings.levels.reduce((s,c)=>Math.abs(c-r)<Math.abs(s-r)?c:s)),this.data={level:r,text:n.innerHTML}}static get pasteConfig(){return{tags:["H1","H2","H3","H4","H5","H6"]}}static get toolbox(){return{icon:d1,title:"Heading"}}};(function(){try{if(typeof document<"u"){var l=document.createElement("style");l.appendChild(document.createTextNode(".cdx-list{margin:0;padding-left:40px;outline:none}.cdx-list__item{padding:5.5px 0 5.5px 3px;line-height:1.6em}.cdx-list--unordered{list-style:disc}.cdx-list--ordered{list-style:decimal}.cdx-list-settings{display:flex}.cdx-list-settings .cdx-settings-button{width:50%}")),document.head.appendChild(l)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();const Gl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="9" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="9" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 17H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 12H4.99002"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M5.00001 7H4.99002"/></svg>',u1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><line x1="12" x2="19" y1="7" y2="7" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="12" y2="12" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><line x1="12" x2="19" y1="17" y2="17" stroke="currentColor" stroke-linecap="round" stroke-width="2"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7.79999 14L7.79999 7.2135C7.79999 7.12872 7.7011 7.0824 7.63597 7.13668L4.79999 9.5"/></svg>';class p1{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}static get toolbox(){return{icon:Gl,title:"List"}}constructor({data:e,config:n,api:r,readOnly:s}){this._elements={wrapper:null},this.api=r,this.readOnly=s,this.settings=[{name:"unordered",label:this.api.i18n.t("Unordered"),icon:Gl,default:n.defaultStyle==="unordered"||!1},{name:"ordered",label:this.api.i18n.t("Ordered"),icon:u1,default:n.defaultStyle==="ordered"||!0}],this._data={style:this.settings.find(c=>c.default===!0).name,items:[]},this.data=e}render(){return this._elements.wrapper=this.makeMainTag(this._data.style),this._data.items.length?this._data.items.forEach(e=>{this._elements.wrapper.appendChild(this._make("li",this.CSS.item,{innerHTML:e}))}):this._elements.wrapper.appendChild(this._make("li",this.CSS.item)),this.readOnly||this._elements.wrapper.addEventListener("keydown",e=>{const[n,r]=[13,8];switch(e.keyCode){case n:this.getOutofList(e);break;case r:this.backspace(e);break}},!1),this._elements.wrapper}save(){return this.data}static get conversionConfig(){return{export:e=>e.items.join(". "),import:e=>({items:[e],style:"unordered"})}}static get sanitize(){return{style:{},items:{br:!0}}}renderSettings(){return this.settings.map(e=>({...e,isActive:this._data.style===e.name,closeOnActivate:!0,onActivate:()=>this.toggleTune(e.name)}))}onPaste(e){const n=e.detail.data;this.data=this.pasteHandler(n)}static get pasteConfig(){return{tags:["OL","UL","LI"]}}makeMainTag(e){const n=e==="ordered"?this.CSS.wrapperOrdered:this.CSS.wrapperUnordered,r=e==="ordered"?"ol":"ul";return this._make(r,[this.CSS.baseBlock,this.CSS.wrapper,n],{contentEditable:!this.readOnly})}toggleTune(e){const n=this.makeMainTag(e);for(;this._elements.wrapper.hasChildNodes();)n.appendChild(this._elements.wrapper.firstChild);this._elements.wrapper.replaceWith(n),this._elements.wrapper=n,this._data.style=e}get CSS(){return{baseBlock:this.api.styles.block,wrapper:"cdx-list",wrapperOrdered:"cdx-list--ordered",wrapperUnordered:"cdx-list--unordered",item:"cdx-list__item"}}set data(e){e||(e={}),this._data.style=e.style||this.settings.find(r=>r.default===!0).name,this._data.items=e.items||[];const n=this._elements.wrapper;n&&n.parentNode.replaceChild(this.render(),n)}get data(){this._data.items=[];const e=this._elements.wrapper.querySelectorAll(`.${this.CSS.item}`);for(let n=0;n<e.length;n++)e[n].innerHTML.replace("<br>"," ").trim()&&this._data.items.push(e[n].innerHTML);return this._data}_make(e,n=null,r={}){const s=document.createElement(e);Array.isArray(n)?s.classList.add(...n):n&&s.classList.add(n);for(const c in r)s[c]=r[c];return s}get currentItem(){let e=window.getSelection().anchorNode;return e.nodeType!==Node.ELEMENT_NODE&&(e=e.parentNode),e.closest(`.${this.CSS.item}`)}getOutofList(e){const n=this._elements.wrapper.querySelectorAll("."+this.CSS.item);if(n.length<2)return;const r=n[n.length-1],s=this.currentItem;s===r&&!r.textContent.trim().length&&(s.parentElement.removeChild(s),this.api.blocks.insert(),this.api.caret.setToBlock(this.api.blocks.getCurrentBlockIndex()),e.preventDefault(),e.stopPropagation())}backspace(e){const n=this._elements.wrapper.querySelectorAll("."+this.CSS.item),r=n[0];r&&n.length<2&&!r.innerHTML.replace("<br>"," ").trim()&&e.preventDefault()}selectItem(e){e.preventDefault();const n=window.getSelection(),r=n.anchorNode.parentNode,s=r.closest("."+this.CSS.item),c=new Range;c.selectNodeContents(s),n.removeAllRanges(),n.addRange(c)}pasteHandler(e){const{tagName:n}=e;let r;switch(n){case"OL":r="ordered";break;case"UL":case"LI":r="unordered"}const s={style:r,items:[]};if(n==="LI")s.items=[e.innerHTML];else{const c=Array.from(e.querySelectorAll("LI"));s.items=c.map(h=>h.innerHTML).filter(h=>!!h.trim())}return s}}(function(){try{if(typeof document<"u"){var l=document.createElement("style");l.appendChild(document.createTextNode('.tc-wrap{--color-background:#f9f9fb;--color-text-secondary:#7b7e89;--color-border:#e8e8eb;--cell-size:34px;--toolbox-icon-size:18px;--toolbox-padding:6px;--toolbox-aiming-field-size:calc(var(--toolbox-icon-size) + var(--toolbox-padding)*2);border-left:0;position:relative;height:100%;width:100%;margin-top:var(--toolbox-icon-size);box-sizing:border-box;display:grid;grid-template-columns:calc(100% - var(--cell-size)) var(--cell-size)}.tc-wrap--readonly{grid-template-columns:100% var(--cell-size)}.tc-wrap svg{vertical-align:top}@media print{.tc-wrap{border-left-color:var(--color-border);border-left-style:solid;border-left-width:1px;grid-template-columns:100% var(--cell-size)}}@media print{.tc-wrap .tc-row:after{display:none}}.tc-table{position:relative;width:100%;height:100%;display:grid;font-size:14px;border-top:1px solid var(--color-border);line-height:1.4}.tc-table:after{width:calc(var(--cell-size));height:100%;left:calc(var(--cell-size)*-1);top:0}.tc-table:after,.tc-table:before{position:absolute;content:""}.tc-table:before{width:100%;height:var(--toolbox-aiming-field-size);top:calc(var(--toolbox-aiming-field-size)*-1);left:0}.tc-table--heading .tc-row:first-child{font-weight:600;border-bottom:2px solid var(--color-border)}.tc-table--heading .tc-row:first-child [contenteditable]:empty:before{content:attr(heading);color:var(--color-text-secondary)}.tc-table--heading .tc-row:first-child:after{bottom:-2px;border-bottom:2px solid var(--color-border)}.tc-add-column,.tc-add-row{display:flex;color:var(--color-text-secondary)}@media print{.tc-add{display:none}}.tc-add-column{padding:4px 0;justify-content:center;border-top:1px solid var(--color-border)}@media print{.tc-add-column{display:none}}.tc-add-row{height:var(--cell-size);align-items:center;padding-left:4px;position:relative}.tc-add-row:before{content:"";position:absolute;right:calc(var(--cell-size)*-1);width:var(--cell-size);height:100%}@media print{.tc-add-row{display:none}}.tc-add-column,.tc-add-row{transition:0s;cursor:pointer;will-change:background-color}.tc-add-column:hover,.tc-add-row:hover{transition:background-color .1s ease;background-color:var(--color-background)}.tc-add-row{margin-top:1px}.tc-add-row:hover:before{transition:.1s;background-color:var(--color-background)}.tc-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(10px,1fr));position:relative;border-bottom:1px solid var(--color-border)}.tc-row:after{content:"";pointer-events:none;position:absolute;width:var(--cell-size);height:100%;bottom:-1px;right:calc(var(--cell-size)*-1);border-bottom:1px solid var(--color-border)}.tc-row--selected{background:var(--color-background)}.tc-row--selected:after{background:var(--color-background)}.tc-cell{border-right:1px solid var(--color-border);padding:6px 12px;overflow:hidden;outline:none;line-break:normal}.tc-cell--selected{background:var(--color-background)}.tc-wrap--readonly .tc-row:after{display:none}.tc-toolbox{--toolbox-padding:6px;--popover-margin:30px;--toggler-click-zone-size:30px;--toggler-dots-color:#7b7e89;--toggler-dots-color-hovered:#1d202b;position:absolute;cursor:pointer;z-index:1;opacity:0;transition:opacity .1s;will-change:left,opacity}.tc-toolbox--column{top:calc(var(--toggler-click-zone-size)*-1);transform:translate(calc(var(--toggler-click-zone-size)*-1/2));will-change:left,opacity}.tc-toolbox--row{left:calc(var(--popover-margin)*-1);transform:translateY(calc(var(--toggler-click-zone-size)*-1/2));margin-top:-1px;will-change:top,opacity}.tc-toolbox--showed{opacity:1}.tc-toolbox .tc-popover{position:absolute;top:0;left:var(--popover-margin)}.tc-toolbox__toggler{display:flex;align-items:center;justify-content:center;width:var(--toggler-click-zone-size);height:var(--toggler-click-zone-size);color:var(--toggler-dots-color);opacity:0;transition:opacity .15s ease;will-change:opacity}.tc-toolbox__toggler:hover{color:var(--toggler-dots-color-hovered)}.tc-toolbox__toggler svg{fill:currentColor}.tc-wrap:hover .tc-toolbox__toggler{opacity:1}.tc-settings .cdx-settings-button{width:50%;margin:0}.tc-popover{--color-border:#eaeaea;--color-background:#fff;--color-background-hover:rgba(232,232,235,.49);--color-background-confirm:#e24a4a;--color-background-confirm-hover:#d54040;--color-text-confirm:#fff;background:var(--color-background);border:1px solid var(--color-border);box-shadow:0 3px 15px -3px #0d142121;border-radius:6px;padding:6px;display:none;will-change:opacity,transform}.tc-popover--opened{display:block;animation:menuShowing .1s cubic-bezier(.215,.61,.355,1) forwards}.tc-popover__item{display:flex;align-items:center;padding:2px 14px 2px 2px;border-radius:5px;cursor:pointer;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none}.tc-popover__item:hover{background:var(--color-background-hover)}.tc-popover__item:not(:last-of-type){margin-bottom:2px}.tc-popover__item-icon{display:inline-flex;width:26px;height:26px;align-items:center;justify-content:center;background:var(--color-background);border-radius:5px;border:1px solid var(--color-border);margin-right:8px}.tc-popover__item-label{line-height:22px;font-size:14px;font-weight:500}.tc-popover__item--confirm{background:var(--color-background-confirm);color:var(--color-text-confirm)}.tc-popover__item--confirm:hover{background-color:var(--color-background-confirm-hover)}.tc-popover__item--confirm .tc-popover__item-icon{background:var(--color-background-confirm);border-color:#0000001a}.tc-popover__item--confirm .tc-popover__item-icon svg{transition:transform .2s ease-in;transform:rotate(90deg) scale(1.2)}.tc-popover__item--hidden{display:none}@keyframes menuShowing{0%{opacity:0;transform:translateY(-8px) scale(.9)}70%{opacity:1;transform:translateY(2px)}to{transform:translateY(0)}}')),document.head.appendChild(l)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();function oe(l,e,n={}){const r=document.createElement(l);Array.isArray(e)?r.classList.add(...e):e&&r.classList.add(e);for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s]);return r}function Xl(l){const e=l.getBoundingClientRect();return{y1:Math.floor(e.top+window.pageYOffset),x1:Math.floor(e.left+window.pageXOffset),x2:Math.floor(e.right+window.pageXOffset),y2:Math.floor(e.bottom+window.pageYOffset)}}function Zl(l,e){const n=Xl(l),r=Xl(e);return{fromTopBorder:r.y1-n.y1,fromLeftBorder:r.x1-n.x1,fromRightBorder:n.x2-r.x2,fromBottomBorder:n.y2-r.y2}}function f1(l,e){const n=l.getBoundingClientRect(),{width:r,height:s,x:c,y:h}=n,{clientX:f,clientY:m}=e;return{width:r,height:s,x:f-c,y:m-h}}function Vl(l,e){return e.parentNode.insertBefore(l,e)}function jl(l,e=!0){const n=document.createRange(),r=window.getSelection();n.selectNodeContents(l),n.collapse(e),r.removeAllRanges(),r.addRange(n)}class Gt{constructor({items:e}){this.items=e,this.wrapper=void 0,this.itemEls=[]}static get CSS(){return{popover:"tc-popover",popoverOpened:"tc-popover--opened",item:"tc-popover__item",itemHidden:"tc-popover__item--hidden",itemConfirmState:"tc-popover__item--confirm",itemIcon:"tc-popover__item-icon",itemLabel:"tc-popover__item-label"}}render(){return this.wrapper=oe("div",Gt.CSS.popover),this.items.forEach((e,n)=>{const r=oe("div",Gt.CSS.item),s=oe("div",Gt.CSS.itemIcon,{innerHTML:e.icon}),c=oe("div",Gt.CSS.itemLabel,{textContent:e.label});r.dataset.index=n,r.appendChild(s),r.appendChild(c),this.wrapper.appendChild(r),this.itemEls.push(r)}),this.wrapper.addEventListener("click",e=>{this.popoverClicked(e)}),this.wrapper}popoverClicked(e){const n=e.target.closest(`.${Gt.CSS.item}`);if(!n)return;const r=n.dataset.index,s=this.items[r];if(s.confirmationRequired&&!this.hasConfirmationState(n)){this.setConfirmationState(n);return}s.onClick()}setConfirmationState(e){e.classList.add(Gt.CSS.itemConfirmState)}clearConfirmationState(e){e.classList.remove(Gt.CSS.itemConfirmState)}hasConfirmationState(e){return e.classList.contains(Gt.CSS.itemConfirmState)}get opened(){return this.wrapper.classList.contains(Gt.CSS.popoverOpened)}open(){this.items.forEach((e,n)=>{typeof e.hideIf=="function"&&this.itemEls[n].classList.toggle(Gt.CSS.itemHidden,e.hideIf())}),this.wrapper.classList.add(Gt.CSS.popoverOpened)}close(){this.wrapper.classList.remove(Gt.CSS.popoverOpened),this.itemEls.forEach(e=>{this.clearConfirmationState(e)})}}const Jl='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8 8L12 12M12 12L16 16M12 12L16 8M12 12L8 16"/></svg>',g1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 9.16666L18.2167 12.5M18.2167 12.5L14.8833 15.8333M18.2167 12.5H10.05C9.16594 12.5 8.31809 12.1488 7.69297 11.5237C7.06785 10.8986 6.71666 10.0507 6.71666 9.16666"/></svg>',m1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.9167 14.9167L11.5833 18.25M11.5833 18.25L8.25 14.9167M11.5833 18.25L11.5833 10.0833C11.5833 9.19928 11.9345 8.35143 12.5596 7.72631C13.1848 7.10119 14.0326 6.75 14.9167 6.75"/></svg>',b1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.13333 14.9167L12.4667 18.25M12.4667 18.25L15.8 14.9167M12.4667 18.25L12.4667 10.0833C12.4667 9.19928 12.1155 8.35143 11.4904 7.72631C10.8652 7.10119 10.0174 6.75 9.13333 6.75"/></svg>',v1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.8833 15.8333L18.2167 12.5M18.2167 12.5L14.8833 9.16667M18.2167 12.5L10.05 12.5C9.16595 12.5 8.31811 12.8512 7.69299 13.4763C7.06787 14.1014 6.71667 14.9493 6.71667 15.8333"/></svg>',w1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.41 9.66H9.4"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 9.66H14.59"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M9.31 14.36H9.3"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2.6" d="M14.6 14.36H14.59"/></svg>',Ql='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M12 7V12M12 17V12M17 12H12M12 12H7"/></svg>',k1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',x1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M14 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><path stroke="currentColor" stroke-width="2" d="M5 14H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>',y1='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-width="2" d="M10 5V18.5"/><path stroke="currentColor" stroke-width="2" d="M5 10H19"/><rect width="14" height="14" x="5" y="5" stroke="currentColor" stroke-width="2" rx="4"/></svg>';class je{constructor({api:e,items:n,onOpen:r,onClose:s,cssModifier:c=""}){this.api=e,this.items=n,this.onOpen=r,this.onClose=s,this.cssModifier=c,this.popover=null,this.wrapper=this.createToolbox()}static get CSS(){return{toolbox:"tc-toolbox",toolboxShowed:"tc-toolbox--showed",toggler:"tc-toolbox__toggler"}}get element(){return this.wrapper}createToolbox(){const e=oe("div",[je.CSS.toolbox,this.cssModifier?`${je.CSS.toolbox}--${this.cssModifier}`:""]);e.dataset.mutationFree="true";const n=this.createPopover(),r=this.createToggler();return e.appendChild(r),e.appendChild(n),e}createToggler(){const e=oe("div",je.CSS.toggler,{innerHTML:w1});return e.addEventListener("click",()=>{this.togglerClicked()}),e}createPopover(){return this.popover=new Gt({items:this.items}),this.popover.render()}togglerClicked(){this.popover.opened?(this.popover.close(),this.onClose()):(this.popover.open(),this.onOpen())}show(e){const n=e();Object.entries(n).forEach(([r,s])=>{this.wrapper.style[r]=s}),this.wrapper.classList.add(je.CSS.toolboxShowed)}hide(){this.popover.close(),this.wrapper.classList.remove(je.CSS.toolboxShowed)}}function C1(l,e){let n=0;return function(...r){const s=new Date().getTime();if(!(s-n<l))return n=s,e(...r)}}const at={wrapper:"tc-wrap",wrapperReadOnly:"tc-wrap--readonly",table:"tc-table",row:"tc-row",withHeadings:"tc-table--heading",rowSelected:"tc-row--selected",cell:"tc-cell",cellSelected:"tc-cell--selected",addRow:"tc-add-row",addColumn:"tc-add-column"};class S1{constructor(e,n,r,s){this.readOnly=e,this.api=n,this.data=r,this.config=s,this.wrapper=null,this.table=null,this.toolboxColumn=this.createColumnToolbox(),this.toolboxRow=this.createRowToolbox(),this.createTableWrapper(),this.hoveredRow=0,this.hoveredColumn=0,this.selectedRow=0,this.selectedColumn=0,this.tunes={withHeadings:!1},this.resize(),this.fill(),this.focusedCell={row:0,column:0},this.documentClicked=c=>{const h=c.target.closest(`.${at.table}`)!==null,f=c.target.closest(`.${at.wrapper}`)===null;(h||f)&&this.hideToolboxes();const m=c.target.closest(`.${at.addRow}`),k=c.target.closest(`.${at.addColumn}`);m&&m.parentNode===this.wrapper?(this.addRow(void 0,!0),this.hideToolboxes()):k&&k.parentNode===this.wrapper&&(this.addColumn(void 0,!0),this.hideToolboxes())},this.readOnly||this.bindEvents()}getWrapper(){return this.wrapper}bindEvents(){document.addEventListener("click",this.documentClicked),this.table.addEventListener("mousemove",C1(150,e=>this.onMouseMoveInTable(e)),{passive:!0}),this.table.onkeypress=e=>this.onKeyPressListener(e),this.table.addEventListener("keydown",e=>this.onKeyDownListener(e)),this.table.addEventListener("focusin",e=>this.focusInTableListener(e))}createColumnToolbox(){return new je({api:this.api,cssModifier:"column",items:[{label:this.api.i18n.t("Add column to left"),icon:m1,onClick:()=>{this.addColumn(this.selectedColumn,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add column to right"),icon:b1,onClick:()=>{this.addColumn(this.selectedColumn+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete column"),icon:Jl,hideIf:()=>this.numberOfColumns===1,confirmationRequired:!0,onClick:()=>{this.deleteColumn(this.selectedColumn),this.hideToolboxes()}}],onOpen:()=>{this.selectColumn(this.hoveredColumn),this.hideRowToolbox()},onClose:()=>{this.unselectColumn()}})}createRowToolbox(){return new je({api:this.api,cssModifier:"row",items:[{label:this.api.i18n.t("Add row above"),icon:v1,onClick:()=>{this.addRow(this.selectedRow,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Add row below"),icon:g1,onClick:()=>{this.addRow(this.selectedRow+1,!0),this.hideToolboxes()}},{label:this.api.i18n.t("Delete row"),icon:Jl,hideIf:()=>this.numberOfRows===1,confirmationRequired:!0,onClick:()=>{this.deleteRow(this.selectedRow),this.hideToolboxes()}}],onOpen:()=>{this.selectRow(this.hoveredRow),this.hideColumnToolbox()},onClose:()=>{this.unselectRow()}})}moveCursorToNextRow(){this.focusedCell.row!==this.numberOfRows?(this.focusedCell.row+=1,this.focusCell(this.focusedCell)):(this.addRow(),this.focusedCell.row+=1,this.focusCell(this.focusedCell),this.updateToolboxesPosition(0,0))}getCell(e,n){return this.table.querySelectorAll(`.${at.row}:nth-child(${e}) .${at.cell}`)[n-1]}getRow(e){return this.table.querySelector(`.${at.row}:nth-child(${e})`)}getRowByCell(e){return e.parentElement}getRowFirstCell(e){return e.querySelector(`.${at.cell}:first-child`)}setCellContent(e,n,r){const s=this.getCell(e,n);s.innerHTML=r}addColumn(e=-1,n=!1){let r=this.numberOfColumns;for(let s=1;s<=this.numberOfRows;s++){let c;const h=this.createCell();if(e>0&&e<=r?(c=this.getCell(s,e),Vl(h,c)):c=this.getRow(s).appendChild(h),s===1){const f=this.getCell(s,e>0?e:r+1);f&&n&&jl(f)}}this.addHeadingAttrToFirstRow()}addRow(e=-1,n=!1){let r,s=oe("div",at.row);this.tunes.withHeadings&&this.removeHeadingAttrFromFirstRow();let c=this.numberOfColumns;if(e>0&&e<=this.numberOfRows){let f=this.getRow(e);r=Vl(s,f)}else r=this.table.appendChild(s);this.fillRow(r,c),this.tunes.withHeadings&&this.addHeadingAttrToFirstRow();const h=this.getRowFirstCell(r);return h&&n&&jl(h),r}deleteColumn(e){for(let n=1;n<=this.numberOfRows;n++){const r=this.getCell(n,e);if(!r)return;r.remove()}}deleteRow(e){this.getRow(e).remove(),this.addHeadingAttrToFirstRow()}createTableWrapper(){if(this.wrapper=oe("div",at.wrapper),this.table=oe("div",at.table),this.readOnly&&this.wrapper.classList.add(at.wrapperReadOnly),this.wrapper.appendChild(this.toolboxRow.element),this.wrapper.appendChild(this.toolboxColumn.element),this.wrapper.appendChild(this.table),!this.readOnly){const e=oe("div",at.addColumn,{innerHTML:Ql}),n=oe("div",at.addRow,{innerHTML:Ql});this.wrapper.appendChild(e),this.wrapper.appendChild(n)}}computeInitialSize(){const e=this.data&&this.data.content,n=Array.isArray(e),r=n?e.length:!1,s=n?e.length:void 0,c=r?e[0].length:void 0,h=Number.parseInt(this.config&&this.config.rows),f=Number.parseInt(this.config&&this.config.cols),m=!isNaN(h)&&h>0?h:void 0,k=!isNaN(f)&&f>0?f:void 0;return{rows:s||m||2,cols:c||k||2}}resize(){const{rows:e,cols:n}=this.computeInitialSize();for(let r=0;r<e;r++)this.addRow();for(let r=0;r<n;r++)this.addColumn()}fill(){const e=this.data;if(e&&e.content)for(let n=0;n<e.content.length;n++)for(let r=0;r<e.content[n].length;r++)this.setCellContent(n+1,r+1,e.content[n][r])}fillRow(e,n){for(let r=1;r<=n;r++){const s=this.createCell();e.appendChild(s)}}createCell(){return oe("div",at.cell,{contentEditable:!this.readOnly})}get numberOfRows(){return this.table.childElementCount}get numberOfColumns(){return this.numberOfRows?this.table.querySelectorAll(`.${at.row}:first-child .${at.cell}`).length:0}get isColumnMenuShowing(){return this.selectedColumn!==0}get isRowMenuShowing(){return this.selectedRow!==0}onMouseMoveInTable(e){const{row:n,column:r}=this.getHoveredCell(e);this.hoveredColumn=r,this.hoveredRow=n,this.updateToolboxesPosition()}onKeyPressListener(e){if(e.key==="Enter"){if(e.shiftKey)return!0;this.moveCursorToNextRow()}return e.key!=="Enter"}onKeyDownListener(e){e.key==="Tab"&&e.stopPropagation()}focusInTableListener(e){const n=e.target,r=this.getRowByCell(n);this.focusedCell={row:Array.from(this.table.querySelectorAll(`.${at.row}`)).indexOf(r)+1,column:Array.from(r.querySelectorAll(`.${at.cell}`)).indexOf(n)+1}}hideToolboxes(){this.hideRowToolbox(),this.hideColumnToolbox(),this.updateToolboxesPosition()}hideRowToolbox(){this.unselectRow(),this.toolboxRow.hide()}hideColumnToolbox(){this.unselectColumn(),this.toolboxColumn.hide()}focusCell(){this.focusedCellElem.focus()}get focusedCellElem(){const{row:e,column:n}=this.focusedCell;return this.getCell(e,n)}updateToolboxesPosition(e=this.hoveredRow,n=this.hoveredColumn){this.isColumnMenuShowing||n>0&&n<=this.numberOfColumns&&this.toolboxColumn.show(()=>({left:`calc((100% - var(--cell-size)) / (${this.numberOfColumns} * 2) * (1 + (${n} - 1) * 2))`})),this.isRowMenuShowing||e>0&&e<=this.numberOfRows&&this.toolboxRow.show(()=>{const r=this.getRow(e),{fromTopBorder:s}=Zl(this.table,r),{height:c}=r.getBoundingClientRect();return{top:`${Math.ceil(s+c/2)}px`}})}setHeadingsSetting(e){this.tunes.withHeadings=e,e?(this.table.classList.add(at.withHeadings),this.addHeadingAttrToFirstRow()):(this.table.classList.remove(at.withHeadings),this.removeHeadingAttrFromFirstRow())}addHeadingAttrToFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let n=this.getCell(1,e);n&&n.setAttribute("heading",this.api.i18n.t("Heading"))}}removeHeadingAttrFromFirstRow(){for(let e=1;e<=this.numberOfColumns;e++){let n=this.getCell(1,e);n&&n.removeAttribute("heading")}}selectRow(e){const n=this.getRow(e);n&&(this.selectedRow=e,n.classList.add(at.rowSelected))}unselectRow(){if(this.selectedRow<=0)return;const e=this.table.querySelector(`.${at.rowSelected}`);e&&e.classList.remove(at.rowSelected),this.selectedRow=0}selectColumn(e){for(let n=1;n<=this.numberOfRows;n++){const r=this.getCell(n,e);r&&r.classList.add(at.cellSelected)}this.selectedColumn=e}unselectColumn(){if(this.selectedColumn<=0)return;let e=this.table.querySelectorAll(`.${at.cellSelected}`);Array.from(e).forEach(n=>{n.classList.remove(at.cellSelected)}),this.selectedColumn=0}getHoveredCell(e){let n=this.hoveredRow,r=this.hoveredColumn;const{width:s,height:c,x:h,y:f}=f1(this.table,e);return h>=0&&(r=this.binSearch(this.numberOfColumns,m=>this.getCell(1,m),({fromLeftBorder:m})=>h<m,({fromRightBorder:m})=>h>s-m)),f>=0&&(n=this.binSearch(this.numberOfRows,m=>this.getCell(m,1),({fromTopBorder:m})=>f<m,({fromBottomBorder:m})=>f>c-m)),{row:n||this.hoveredRow,column:r||this.hoveredColumn}}binSearch(e,n,r,s){let c=0,h=e+1,f=0,m;for(;c<h-1&&f<10;){m=Math.ceil((c+h)/2);const k=n(m),B=Zl(this.table,k);if(r(B))h=m;else if(s(B))c=m;else break;f++}return m}getData(){const e=[];for(let n=1;n<=this.numberOfRows;n++){const r=this.table.querySelector(`.${at.row}:nth-child(${n})`),s=Array.from(r.querySelectorAll(`.${at.cell}`));s.every(c=>!c.textContent.trim())||e.push(s.map(c=>c.innerHTML))}return e}destroy(){document.removeEventListener("click",this.documentClicked)}}class E1{static get isReadOnlySupported(){return!0}static get enableLineBreaks(){return!0}constructor({data:e,config:n,api:r,readOnly:s}){this.api=r,this.readOnly=s,this.config=n,this.data={withHeadings:this.getConfig("withHeadings",!1,e),content:e&&e.content?e.content:[]},this.table=null}static get toolbox(){return{icon:y1,title:"Table"}}render(){return this.table=new S1(this.readOnly,this.api,this.data,this.config),this.container=oe("div",this.api.styles.block),this.container.appendChild(this.table.getWrapper()),this.table.setHeadingsSetting(this.data.withHeadings),this.container}renderSettings(){return[{label:this.api.i18n.t("With headings"),icon:k1,isActive:this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!0,this.table.setHeadingsSetting(this.data.withHeadings)}},{label:this.api.i18n.t("Without headings"),icon:x1,isActive:!this.data.withHeadings,closeOnActivate:!0,toggle:!0,onActivate:()=>{this.data.withHeadings=!1,this.table.setHeadingsSetting(this.data.withHeadings)}}]}save(){const e=this.table.getData();return{withHeadings:this.data.withHeadings,content:e}}destroy(){this.table.destroy()}getConfig(e,n=void 0,r=void 0){const s=this.data||r;return s?s[e]?s[e]:n:this.config&&this.config[e]?this.config[e]:n}static get pasteConfig(){return{tags:["TABLE","TR","TH","TD"]}}onPaste(e){const n=e.detail.data,r=n.querySelector(":scope > thead, tr:first-of-type th"),s=Array.from(n.querySelectorAll("tr")).map(c=>Array.from(c.querySelectorAll("th, td")).map(h=>h.innerHTML));this.data={withHeadings:r!==null,content:s},this.table.wrapper&&this.table.wrapper.replaceWith(this.render())}}var io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function T1(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var di={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */di.exports;(function(l,e){(function(){var n,r="4.17.21",s=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",h="Expected a function",f="Invalid `variable` option passed into `_.template`",m="__lodash_hash_undefined__",k=500,B="__lodash_placeholder__",S=1,L=2,D=4,I=1,K=2,Z=1,lt=2,ft=4,Ct=8,wt=16,gt=32,Wt=64,Dt=128,N=256,O=512,W=30,J="...",ct=800,nt=16,yt=1,tt=2,Pt=3,Zt=1/0,Mt=9007199254740991,Nn=17976931348623157e292,un=0/0,ie=4294967295,po=ie-1,Bc=ie>>>1,Ic=[["ary",Dt],["bind",Z],["bindKey",lt],["curry",Ct],["curryRight",wt],["flip",O],["partial",gt],["partialRight",Wt],["rearg",N]],pn="[object Arguments]",fo="[object Array]",Lc="[object AsyncFunction]",Dn="[object Boolean]",Pn="[object Date]",Ac="[object DOMException]",go="[object Error]",mo="[object Function]",ss="[object GeneratorFunction]",fe="[object Map]",Hn="[object Number]",Mc="[object Null]",Te="[object Object]",as="[object Promise]",Oc="[object Proxy]",Fn="[object RegExp]",ge="[object Set]",Un="[object String]",bo="[object Symbol]",Rc="[object Undefined]",zn="[object WeakMap]",Nc="[object WeakSet]",Wn="[object ArrayBuffer]",fn="[object DataView]",fi="[object Float32Array]",gi="[object Float64Array]",mi="[object Int8Array]",bi="[object Int16Array]",vi="[object Int32Array]",wi="[object Uint8Array]",ki="[object Uint8ClampedArray]",xi="[object Uint16Array]",yi="[object Uint32Array]",Dc=/\b__p \+= '';/g,Pc=/\b(__p \+=) '' \+/g,Hc=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ls=/&(?:amp|lt|gt|quot|#39);/g,cs=/[&<>"']/g,Fc=RegExp(ls.source),Uc=RegExp(cs.source),zc=/<%-([\s\S]+?)%>/g,Wc=/<%([\s\S]+?)%>/g,ds=/<%=([\s\S]+?)%>/g,$c=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yc=/^\w*$/,Kc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ci=/[\\^$.*+?()[\]{}|]/g,qc=RegExp(Ci.source),Si=/^\s+/,Gc=/\s/,Xc=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Zc=/\{\n\/\* \[wrapped with (.+)\] \*/,Vc=/,? & /,jc=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Jc=/[()=,{}\[\]\/\s]/,Qc=/\\(\\)?/g,td=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,hs=/\w*$/,ed=/^[-+]0x[0-9a-f]+$/i,nd=/^0b[01]+$/i,od=/^\[object .+?Constructor\]$/,id=/^0o[0-7]+$/i,rd=/^(?:0|[1-9]\d*)$/,sd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,vo=/($^)/,ad=/['\n\r\u2028\u2029\\]/g,wo="\\ud800-\\udfff",ld="\\u0300-\\u036f",cd="\\ufe20-\\ufe2f",dd="\\u20d0-\\u20ff",us=ld+cd+dd,ps="\\u2700-\\u27bf",fs="a-z\\xdf-\\xf6\\xf8-\\xff",hd="\\xac\\xb1\\xd7\\xf7",ud="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",pd="\\u2000-\\u206f",fd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",gs="A-Z\\xc0-\\xd6\\xd8-\\xde",ms="\\ufe0e\\ufe0f",bs=hd+ud+pd+fd,Ei="['’]",gd="["+wo+"]",vs="["+bs+"]",ko="["+us+"]",ws="\\d+",md="["+ps+"]",ks="["+fs+"]",xs="[^"+wo+bs+ws+ps+fs+gs+"]",Ti="\\ud83c[\\udffb-\\udfff]",bd="(?:"+ko+"|"+Ti+")",ys="[^"+wo+"]",_i="(?:\\ud83c[\\udde6-\\uddff]){2}",Bi="[\\ud800-\\udbff][\\udc00-\\udfff]",gn="["+gs+"]",Cs="\\u200d",Ss="(?:"+ks+"|"+xs+")",vd="(?:"+gn+"|"+xs+")",Es="(?:"+Ei+"(?:d|ll|m|re|s|t|ve))?",Ts="(?:"+Ei+"(?:D|LL|M|RE|S|T|VE))?",_s=bd+"?",Bs="["+ms+"]?",wd="(?:"+Cs+"(?:"+[ys,_i,Bi].join("|")+")"+Bs+_s+")*",kd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",xd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Is=Bs+_s+wd,yd="(?:"+[md,_i,Bi].join("|")+")"+Is,Cd="(?:"+[ys+ko+"?",ko,_i,Bi,gd].join("|")+")",Sd=RegExp(Ei,"g"),Ed=RegExp(ko,"g"),Ii=RegExp(Ti+"(?="+Ti+")|"+Cd+Is,"g"),Td=RegExp([gn+"?"+ks+"+"+Es+"(?="+[vs,gn,"$"].join("|")+")",vd+"+"+Ts+"(?="+[vs,gn+Ss,"$"].join("|")+")",gn+"?"+Ss+"+"+Es,gn+"+"+Ts,xd,kd,ws,yd].join("|"),"g"),_d=RegExp("["+Cs+wo+us+ms+"]"),Bd=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Id=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ld=-1,ut={};ut[fi]=ut[gi]=ut[mi]=ut[bi]=ut[vi]=ut[wi]=ut[ki]=ut[xi]=ut[yi]=!0,ut[pn]=ut[fo]=ut[Wn]=ut[Dn]=ut[fn]=ut[Pn]=ut[go]=ut[mo]=ut[fe]=ut[Hn]=ut[Te]=ut[Fn]=ut[ge]=ut[Un]=ut[zn]=!1;var ht={};ht[pn]=ht[fo]=ht[Wn]=ht[fn]=ht[Dn]=ht[Pn]=ht[fi]=ht[gi]=ht[mi]=ht[bi]=ht[vi]=ht[fe]=ht[Hn]=ht[Te]=ht[Fn]=ht[ge]=ht[Un]=ht[bo]=ht[wi]=ht[ki]=ht[xi]=ht[yi]=!0,ht[go]=ht[mo]=ht[zn]=!1;var Ad={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Md={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Od={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Rd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Nd=parseFloat,Dd=parseInt,Ls=typeof io=="object"&&io&&io.Object===Object&&io,Pd=typeof self=="object"&&self&&self.Object===Object&&self,Bt=Ls||Pd||Function("return this")(),Li=e&&!e.nodeType&&e,Qe=Li&&!0&&l&&!l.nodeType&&l,As=Qe&&Qe.exports===Li,Ai=As&&Ls.process,re=function(){try{var v=Qe&&Qe.require&&Qe.require("util").types;return v||Ai&&Ai.binding&&Ai.binding("util")}catch{}}(),Ms=re&&re.isArrayBuffer,Os=re&&re.isDate,Rs=re&&re.isMap,Ns=re&&re.isRegExp,Ds=re&&re.isSet,Ps=re&&re.isTypedArray;function Vt(v,C,x){switch(x.length){case 0:return v.call(C);case 1:return v.call(C,x[0]);case 2:return v.call(C,x[0],x[1]);case 3:return v.call(C,x[0],x[1],x[2])}return v.apply(C,x)}function Hd(v,C,x,M){for(var $=-1,ot=v==null?0:v.length;++$<ot;){var St=v[$];C(M,St,x(St),v)}return M}function se(v,C){for(var x=-1,M=v==null?0:v.length;++x<M&&C(v[x],x,v)!==!1;);return v}function Fd(v,C){for(var x=v==null?0:v.length;x--&&C(v[x],x,v)!==!1;);return v}function Hs(v,C){for(var x=-1,M=v==null?0:v.length;++x<M;)if(!C(v[x],x,v))return!1;return!0}function Ue(v,C){for(var x=-1,M=v==null?0:v.length,$=0,ot=[];++x<M;){var St=v[x];C(St,x,v)&&(ot[$++]=St)}return ot}function xo(v,C){var x=v==null?0:v.length;return!!x&&mn(v,C,0)>-1}function Mi(v,C,x){for(var M=-1,$=v==null?0:v.length;++M<$;)if(x(C,v[M]))return!0;return!1}function mt(v,C){for(var x=-1,M=v==null?0:v.length,$=Array(M);++x<M;)$[x]=C(v[x],x,v);return $}function ze(v,C){for(var x=-1,M=C.length,$=v.length;++x<M;)v[$+x]=C[x];return v}function Oi(v,C,x,M){var $=-1,ot=v==null?0:v.length;for(M&&ot&&(x=v[++$]);++$<ot;)x=C(x,v[$],$,v);return x}function Ud(v,C,x,M){var $=v==null?0:v.length;for(M&&$&&(x=v[--$]);$--;)x=C(x,v[$],$,v);return x}function Ri(v,C){for(var x=-1,M=v==null?0:v.length;++x<M;)if(C(v[x],x,v))return!0;return!1}var zd=Ni("length");function Wd(v){return v.split("")}function $d(v){return v.match(jc)||[]}function Fs(v,C,x){var M;return x(v,function($,ot,St){if(C($,ot,St))return M=ot,!1}),M}function yo(v,C,x,M){for(var $=v.length,ot=x+(M?1:-1);M?ot--:++ot<$;)if(C(v[ot],ot,v))return ot;return-1}function mn(v,C,x){return C===C?eh(v,C,x):yo(v,Us,x)}function Yd(v,C,x,M){for(var $=x-1,ot=v.length;++$<ot;)if(M(v[$],C))return $;return-1}function Us(v){return v!==v}function zs(v,C){var x=v==null?0:v.length;return x?Pi(v,C)/x:un}function Ni(v){return function(C){return C==null?n:C[v]}}function Di(v){return function(C){return v==null?n:v[C]}}function Ws(v,C,x,M,$){return $(v,function(ot,St,dt){x=M?(M=!1,ot):C(x,ot,St,dt)}),x}function Kd(v,C){var x=v.length;for(v.sort(C);x--;)v[x]=v[x].value;return v}function Pi(v,C){for(var x,M=-1,$=v.length;++M<$;){var ot=C(v[M]);ot!==n&&(x=x===n?ot:x+ot)}return x}function Hi(v,C){for(var x=-1,M=Array(v);++x<v;)M[x]=C(x);return M}function qd(v,C){return mt(C,function(x){return[x,v[x]]})}function $s(v){return v&&v.slice(0,Gs(v)+1).replace(Si,"")}function jt(v){return function(C){return v(C)}}function Fi(v,C){return mt(C,function(x){return v[x]})}function $n(v,C){return v.has(C)}function Ys(v,C){for(var x=-1,M=v.length;++x<M&&mn(C,v[x],0)>-1;);return x}function Ks(v,C){for(var x=v.length;x--&&mn(C,v[x],0)>-1;);return x}function Gd(v,C){for(var x=v.length,M=0;x--;)v[x]===C&&++M;return M}var Xd=Di(Ad),Zd=Di(Md);function Vd(v){return"\\"+Rd[v]}function jd(v,C){return v==null?n:v[C]}function bn(v){return _d.test(v)}function Jd(v){return Bd.test(v)}function Qd(v){for(var C,x=[];!(C=v.next()).done;)x.push(C.value);return x}function Ui(v){var C=-1,x=Array(v.size);return v.forEach(function(M,$){x[++C]=[$,M]}),x}function qs(v,C){return function(x){return v(C(x))}}function We(v,C){for(var x=-1,M=v.length,$=0,ot=[];++x<M;){var St=v[x];(St===C||St===B)&&(v[x]=B,ot[$++]=x)}return ot}function Co(v){var C=-1,x=Array(v.size);return v.forEach(function(M){x[++C]=M}),x}function th(v){var C=-1,x=Array(v.size);return v.forEach(function(M){x[++C]=[M,M]}),x}function eh(v,C,x){for(var M=x-1,$=v.length;++M<$;)if(v[M]===C)return M;return-1}function nh(v,C,x){for(var M=x+1;M--;)if(v[M]===C)return M;return M}function vn(v){return bn(v)?ih(v):zd(v)}function me(v){return bn(v)?rh(v):Wd(v)}function Gs(v){for(var C=v.length;C--&&Gc.test(v.charAt(C)););return C}var oh=Di(Od);function ih(v){for(var C=Ii.lastIndex=0;Ii.test(v);)++C;return C}function rh(v){return v.match(Ii)||[]}function sh(v){return v.match(Td)||[]}var ah=function v(C){C=C==null?Bt:wn.defaults(Bt.Object(),C,wn.pick(Bt,Id));var x=C.Array,M=C.Date,$=C.Error,ot=C.Function,St=C.Math,dt=C.Object,zi=C.RegExp,lh=C.String,ae=C.TypeError,So=x.prototype,ch=ot.prototype,kn=dt.prototype,Eo=C["__core-js_shared__"],To=ch.toString,st=kn.hasOwnProperty,dh=0,Xs=function(){var t=/[^.]+$/.exec(Eo&&Eo.keys&&Eo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_o=kn.toString,hh=To.call(dt),uh=Bt._,ph=zi("^"+To.call(st).replace(Ci,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bo=As?C.Buffer:n,$e=C.Symbol,Io=C.Uint8Array,Zs=Bo?Bo.allocUnsafe:n,Lo=qs(dt.getPrototypeOf,dt),Vs=dt.create,js=kn.propertyIsEnumerable,Ao=So.splice,Js=$e?$e.isConcatSpreadable:n,Yn=$e?$e.iterator:n,tn=$e?$e.toStringTag:n,Mo=function(){try{var t=sn(dt,"defineProperty");return t({},"",{}),t}catch{}}(),fh=C.clearTimeout!==Bt.clearTimeout&&C.clearTimeout,gh=M&&M.now!==Bt.Date.now&&M.now,mh=C.setTimeout!==Bt.setTimeout&&C.setTimeout,Oo=St.ceil,Ro=St.floor,Wi=dt.getOwnPropertySymbols,bh=Bo?Bo.isBuffer:n,Qs=C.isFinite,vh=So.join,wh=qs(dt.keys,dt),Et=St.max,Ot=St.min,kh=M.now,xh=C.parseInt,ta=St.random,yh=So.reverse,$i=sn(C,"DataView"),Kn=sn(C,"Map"),Yi=sn(C,"Promise"),xn=sn(C,"Set"),qn=sn(C,"WeakMap"),Gn=sn(dt,"create"),No=qn&&new qn,yn={},Ch=an($i),Sh=an(Kn),Eh=an(Yi),Th=an(xn),_h=an(qn),Do=$e?$e.prototype:n,Xn=Do?Do.valueOf:n,ea=Do?Do.toString:n;function u(t){if(vt(t)&&!Y(t)&&!(t instanceof j)){if(t instanceof le)return t;if(st.call(t,"__wrapped__"))return nl(t)}return new le(t)}var Cn=function(){function t(){}return function(o){if(!bt(o))return{};if(Vs)return Vs(o);t.prototype=o;var i=new t;return t.prototype=n,i}}();function Po(){}function le(t,o){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!o,this.__index__=0,this.__values__=n}u.templateSettings={escape:zc,evaluate:Wc,interpolate:ds,variable:"",imports:{_:u}},u.prototype=Po.prototype,u.prototype.constructor=u,le.prototype=Cn(Po.prototype),le.prototype.constructor=le;function j(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ie,this.__views__=[]}function Bh(){var t=new j(this.__wrapped__);return t.__actions__=$t(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=$t(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=$t(this.__views__),t}function Ih(){if(this.__filtered__){var t=new j(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Lh(){var t=this.__wrapped__.value(),o=this.__dir__,i=Y(t),a=o<0,d=i?t.length:0,p=Wu(0,d,this.__views__),g=p.start,b=p.end,w=b-g,E=a?b:g-1,T=this.__iteratees__,_=T.length,A=0,R=Ot(w,this.__takeCount__);if(!i||!a&&d==w&&R==w)return Ea(t,this.__actions__);var H=[];t:for(;w--&&A<R;){E+=o;for(var G=-1,F=t[E];++G<_;){var V=T[G],Q=V.iteratee,te=V.type,Ut=Q(F);if(te==tt)F=Ut;else if(!Ut){if(te==yt)continue t;break t}}H[A++]=F}return H}j.prototype=Cn(Po.prototype),j.prototype.constructor=j;function en(t){var o=-1,i=t==null?0:t.length;for(this.clear();++o<i;){var a=t[o];this.set(a[0],a[1])}}function Ah(){this.__data__=Gn?Gn(null):{},this.size=0}function Mh(t){var o=this.has(t)&&delete this.__data__[t];return this.size-=o?1:0,o}function Oh(t){var o=this.__data__;if(Gn){var i=o[t];return i===m?n:i}return st.call(o,t)?o[t]:n}function Rh(t){var o=this.__data__;return Gn?o[t]!==n:st.call(o,t)}function Nh(t,o){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Gn&&o===n?m:o,this}en.prototype.clear=Ah,en.prototype.delete=Mh,en.prototype.get=Oh,en.prototype.has=Rh,en.prototype.set=Nh;function _e(t){var o=-1,i=t==null?0:t.length;for(this.clear();++o<i;){var a=t[o];this.set(a[0],a[1])}}function Dh(){this.__data__=[],this.size=0}function Ph(t){var o=this.__data__,i=Ho(o,t);if(i<0)return!1;var a=o.length-1;return i==a?o.pop():Ao.call(o,i,1),--this.size,!0}function Hh(t){var o=this.__data__,i=Ho(o,t);return i<0?n:o[i][1]}function Fh(t){return Ho(this.__data__,t)>-1}function Uh(t,o){var i=this.__data__,a=Ho(i,t);return a<0?(++this.size,i.push([t,o])):i[a][1]=o,this}_e.prototype.clear=Dh,_e.prototype.delete=Ph,_e.prototype.get=Hh,_e.prototype.has=Fh,_e.prototype.set=Uh;function Be(t){var o=-1,i=t==null?0:t.length;for(this.clear();++o<i;){var a=t[o];this.set(a[0],a[1])}}function zh(){this.size=0,this.__data__={hash:new en,map:new(Kn||_e),string:new en}}function Wh(t){var o=Vo(this,t).delete(t);return this.size-=o?1:0,o}function $h(t){return Vo(this,t).get(t)}function Yh(t){return Vo(this,t).has(t)}function Kh(t,o){var i=Vo(this,t),a=i.size;return i.set(t,o),this.size+=i.size==a?0:1,this}Be.prototype.clear=zh,Be.prototype.delete=Wh,Be.prototype.get=$h,Be.prototype.has=Yh,Be.prototype.set=Kh;function nn(t){var o=-1,i=t==null?0:t.length;for(this.__data__=new Be;++o<i;)this.add(t[o])}function qh(t){return this.__data__.set(t,m),this}function Gh(t){return this.__data__.has(t)}nn.prototype.add=nn.prototype.push=qh,nn.prototype.has=Gh;function be(t){var o=this.__data__=new _e(t);this.size=o.size}function Xh(){this.__data__=new _e,this.size=0}function Zh(t){var o=this.__data__,i=o.delete(t);return this.size=o.size,i}function Vh(t){return this.__data__.get(t)}function jh(t){return this.__data__.has(t)}function Jh(t,o){var i=this.__data__;if(i instanceof _e){var a=i.__data__;if(!Kn||a.length<s-1)return a.push([t,o]),this.size=++i.size,this;i=this.__data__=new Be(a)}return i.set(t,o),this.size=i.size,this}be.prototype.clear=Xh,be.prototype.delete=Zh,be.prototype.get=Vh,be.prototype.has=jh,be.prototype.set=Jh;function na(t,o){var i=Y(t),a=!i&&ln(t),d=!i&&!a&&Xe(t),p=!i&&!a&&!d&&_n(t),g=i||a||d||p,b=g?Hi(t.length,lh):[],w=b.length;for(var E in t)(o||st.call(t,E))&&!(g&&(E=="length"||d&&(E=="offset"||E=="parent")||p&&(E=="buffer"||E=="byteLength"||E=="byteOffset")||Me(E,w)))&&b.push(E);return b}function oa(t){var o=t.length;return o?t[er(0,o-1)]:n}function Qh(t,o){return jo($t(t),on(o,0,t.length))}function tu(t){return jo($t(t))}function Ki(t,o,i){(i!==n&&!ve(t[o],i)||i===n&&!(o in t))&&Ie(t,o,i)}function Zn(t,o,i){var a=t[o];(!(st.call(t,o)&&ve(a,i))||i===n&&!(o in t))&&Ie(t,o,i)}function Ho(t,o){for(var i=t.length;i--;)if(ve(t[i][0],o))return i;return-1}function eu(t,o,i,a){return Ye(t,function(d,p,g){o(a,d,i(d),g)}),a}function ia(t,o){return t&&Se(o,_t(o),t)}function nu(t,o){return t&&Se(o,Kt(o),t)}function Ie(t,o,i){o=="__proto__"&&Mo?Mo(t,o,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[o]=i}function qi(t,o){for(var i=-1,a=o.length,d=x(a),p=t==null;++i<a;)d[i]=p?n:Tr(t,o[i]);return d}function on(t,o,i){return t===t&&(i!==n&&(t=t<=i?t:i),o!==n&&(t=t>=o?t:o)),t}function ce(t,o,i,a,d,p){var g,b=o&S,w=o&L,E=o&D;if(i&&(g=d?i(t,a,d,p):i(t)),g!==n)return g;if(!bt(t))return t;var T=Y(t);if(T){if(g=Yu(t),!b)return $t(t,g)}else{var _=Rt(t),A=_==mo||_==ss;if(Xe(t))return Ba(t,b);if(_==Te||_==pn||A&&!d){if(g=w||A?{}:Ga(t),!b)return w?Ou(t,nu(g,t)):Mu(t,ia(g,t))}else{if(!ht[_])return d?t:{};g=Ku(t,_,b)}}p||(p=new be);var R=p.get(t);if(R)return R;p.set(t,g),yl(t)?t.forEach(function(F){g.add(ce(F,o,i,F,t,p))}):kl(t)&&t.forEach(function(F,V){g.set(V,ce(F,o,i,V,t,p))});var H=E?w?ur:hr:w?Kt:_t,G=T?n:H(t);return se(G||t,function(F,V){G&&(V=F,F=t[V]),Zn(g,V,ce(F,o,i,V,t,p))}),g}function ou(t){var o=_t(t);return function(i){return ra(i,t,o)}}function ra(t,o,i){var a=i.length;if(t==null)return!a;for(t=dt(t);a--;){var d=i[a],p=o[d],g=t[d];if(g===n&&!(d in t)||!p(g))return!1}return!0}function sa(t,o,i){if(typeof t!="function")throw new ae(h);return no(function(){t.apply(n,i)},o)}function Vn(t,o,i,a){var d=-1,p=xo,g=!0,b=t.length,w=[],E=o.length;if(!b)return w;i&&(o=mt(o,jt(i))),a?(p=Mi,g=!1):o.length>=s&&(p=$n,g=!1,o=new nn(o));t:for(;++d<b;){var T=t[d],_=i==null?T:i(T);if(T=a||T!==0?T:0,g&&_===_){for(var A=E;A--;)if(o[A]===_)continue t;w.push(T)}else p(o,_,a)||w.push(T)}return w}var Ye=Oa(Ce),aa=Oa(Xi,!0);function iu(t,o){var i=!0;return Ye(t,function(a,d,p){return i=!!o(a,d,p),i}),i}function Fo(t,o,i){for(var a=-1,d=t.length;++a<d;){var p=t[a],g=o(p);if(g!=null&&(b===n?g===g&&!Qt(g):i(g,b)))var b=g,w=p}return w}function ru(t,o,i,a){var d=t.length;for(i=q(i),i<0&&(i=-i>d?0:d+i),a=a===n||a>d?d:q(a),a<0&&(a+=d),a=i>a?0:Sl(a);i<a;)t[i++]=o;return t}function la(t,o){var i=[];return Ye(t,function(a,d,p){o(a,d,p)&&i.push(a)}),i}function It(t,o,i,a,d){var p=-1,g=t.length;for(i||(i=Gu),d||(d=[]);++p<g;){var b=t[p];o>0&&i(b)?o>1?It(b,o-1,i,a,d):ze(d,b):a||(d[d.length]=b)}return d}var Gi=Ra(),ca=Ra(!0);function Ce(t,o){return t&&Gi(t,o,_t)}function Xi(t,o){return t&&ca(t,o,_t)}function Uo(t,o){return Ue(o,function(i){return Oe(t[i])})}function rn(t,o){o=qe(o,t);for(var i=0,a=o.length;t!=null&&i<a;)t=t[Ee(o[i++])];return i&&i==a?t:n}function da(t,o,i){var a=o(t);return Y(t)?a:ze(a,i(t))}function Ht(t){return t==null?t===n?Rc:Mc:tn&&tn in dt(t)?zu(t):tp(t)}function Zi(t,o){return t>o}function su(t,o){return t!=null&&st.call(t,o)}function au(t,o){return t!=null&&o in dt(t)}function lu(t,o,i){return t>=Ot(o,i)&&t<Et(o,i)}function Vi(t,o,i){for(var a=i?Mi:xo,d=t[0].length,p=t.length,g=p,b=x(p),w=1/0,E=[];g--;){var T=t[g];g&&o&&(T=mt(T,jt(o))),w=Ot(T.length,w),b[g]=!i&&(o||d>=120&&T.length>=120)?new nn(g&&T):n}T=t[0];var _=-1,A=b[0];t:for(;++_<d&&E.length<w;){var R=T[_],H=o?o(R):R;if(R=i||R!==0?R:0,!(A?$n(A,H):a(E,H,i))){for(g=p;--g;){var G=b[g];if(!(G?$n(G,H):a(t[g],H,i)))continue t}A&&A.push(H),E.push(R)}}return E}function cu(t,o,i,a){return Ce(t,function(d,p,g){o(a,i(d),p,g)}),a}function jn(t,o,i){o=qe(o,t),t=ja(t,o);var a=t==null?t:t[Ee(he(o))];return a==null?n:Vt(a,t,i)}function ha(t){return vt(t)&&Ht(t)==pn}function du(t){return vt(t)&&Ht(t)==Wn}function hu(t){return vt(t)&&Ht(t)==Pn}function Jn(t,o,i,a,d){return t===o?!0:t==null||o==null||!vt(t)&&!vt(o)?t!==t&&o!==o:uu(t,o,i,a,Jn,d)}function uu(t,o,i,a,d,p){var g=Y(t),b=Y(o),w=g?fo:Rt(t),E=b?fo:Rt(o);w=w==pn?Te:w,E=E==pn?Te:E;var T=w==Te,_=E==Te,A=w==E;if(A&&Xe(t)){if(!Xe(o))return!1;g=!0,T=!1}if(A&&!T)return p||(p=new be),g||_n(t)?Ya(t,o,i,a,d,p):Fu(t,o,w,i,a,d,p);if(!(i&I)){var R=T&&st.call(t,"__wrapped__"),H=_&&st.call(o,"__wrapped__");if(R||H){var G=R?t.value():t,F=H?o.value():o;return p||(p=new be),d(G,F,i,a,p)}}return A?(p||(p=new be),Uu(t,o,i,a,d,p)):!1}function pu(t){return vt(t)&&Rt(t)==fe}function ji(t,o,i,a){var d=i.length,p=d,g=!a;if(t==null)return!p;for(t=dt(t);d--;){var b=i[d];if(g&&b[2]?b[1]!==t[b[0]]:!(b[0]in t))return!1}for(;++d<p;){b=i[d];var w=b[0],E=t[w],T=b[1];if(g&&b[2]){if(E===n&&!(w in t))return!1}else{var _=new be;if(a)var A=a(E,T,w,t,o,_);if(!(A===n?Jn(T,E,I|K,a,_):A))return!1}}return!0}function ua(t){if(!bt(t)||Zu(t))return!1;var o=Oe(t)?ph:od;return o.test(an(t))}function fu(t){return vt(t)&&Ht(t)==Fn}function gu(t){return vt(t)&&Rt(t)==ge}function mu(t){return vt(t)&&oi(t.length)&&!!ut[Ht(t)]}function pa(t){return typeof t=="function"?t:t==null?qt:typeof t=="object"?Y(t)?ma(t[0],t[1]):ga(t):Nl(t)}function Ji(t){if(!eo(t))return wh(t);var o=[];for(var i in dt(t))st.call(t,i)&&i!="constructor"&&o.push(i);return o}function bu(t){if(!bt(t))return Qu(t);var o=eo(t),i=[];for(var a in t)a=="constructor"&&(o||!st.call(t,a))||i.push(a);return i}function Qi(t,o){return t<o}function fa(t,o){var i=-1,a=Yt(t)?x(t.length):[];return Ye(t,function(d,p,g){a[++i]=o(d,p,g)}),a}function ga(t){var o=fr(t);return o.length==1&&o[0][2]?Za(o[0][0],o[0][1]):function(i){return i===t||ji(i,t,o)}}function ma(t,o){return mr(t)&&Xa(o)?Za(Ee(t),o):function(i){var a=Tr(i,t);return a===n&&a===o?_r(i,t):Jn(o,a,I|K)}}function zo(t,o,i,a,d){t!==o&&Gi(o,function(p,g){if(d||(d=new be),bt(p))vu(t,o,g,i,zo,a,d);else{var b=a?a(vr(t,g),p,g+"",t,o,d):n;b===n&&(b=p),Ki(t,g,b)}},Kt)}function vu(t,o,i,a,d,p,g){var b=vr(t,i),w=vr(o,i),E=g.get(w);if(E){Ki(t,i,E);return}var T=p?p(b,w,i+"",t,o,g):n,_=T===n;if(_){var A=Y(w),R=!A&&Xe(w),H=!A&&!R&&_n(w);T=w,A||R||H?Y(b)?T=b:kt(b)?T=$t(b):R?(_=!1,T=Ba(w,!0)):H?(_=!1,T=Ia(w,!0)):T=[]:oo(w)||ln(w)?(T=b,ln(b)?T=El(b):(!bt(b)||Oe(b))&&(T=Ga(w))):_=!1}_&&(g.set(w,T),d(T,w,a,p,g),g.delete(w)),Ki(t,i,T)}function ba(t,o){var i=t.length;if(i)return o+=o<0?i:0,Me(o,i)?t[o]:n}function va(t,o,i){o.length?o=mt(o,function(p){return Y(p)?function(g){return rn(g,p.length===1?p[0]:p)}:p}):o=[qt];var a=-1;o=mt(o,jt(P()));var d=fa(t,function(p,g,b){var w=mt(o,function(E){return E(p)});return{criteria:w,index:++a,value:p}});return Kd(d,function(p,g){return Au(p,g,i)})}function wu(t,o){return wa(t,o,function(i,a){return _r(t,a)})}function wa(t,o,i){for(var a=-1,d=o.length,p={};++a<d;){var g=o[a],b=rn(t,g);i(b,g)&&Qn(p,qe(g,t),b)}return p}function ku(t){return function(o){return rn(o,t)}}function tr(t,o,i,a){var d=a?Yd:mn,p=-1,g=o.length,b=t;for(t===o&&(o=$t(o)),i&&(b=mt(t,jt(i)));++p<g;)for(var w=0,E=o[p],T=i?i(E):E;(w=d(b,T,w,a))>-1;)b!==t&&Ao.call(b,w,1),Ao.call(t,w,1);return t}function ka(t,o){for(var i=t?o.length:0,a=i-1;i--;){var d=o[i];if(i==a||d!==p){var p=d;Me(d)?Ao.call(t,d,1):ir(t,d)}}return t}function er(t,o){return t+Ro(ta()*(o-t+1))}function xu(t,o,i,a){for(var d=-1,p=Et(Oo((o-t)/(i||1)),0),g=x(p);p--;)g[a?p:++d]=t,t+=i;return g}function nr(t,o){var i="";if(!t||o<1||o>Mt)return i;do o%2&&(i+=t),o=Ro(o/2),o&&(t+=t);while(o);return i}function X(t,o){return wr(Va(t,o,qt),t+"")}function yu(t){return oa(Bn(t))}function Cu(t,o){var i=Bn(t);return jo(i,on(o,0,i.length))}function Qn(t,o,i,a){if(!bt(t))return t;o=qe(o,t);for(var d=-1,p=o.length,g=p-1,b=t;b!=null&&++d<p;){var w=Ee(o[d]),E=i;if(w==="__proto__"||w==="constructor"||w==="prototype")return t;if(d!=g){var T=b[w];E=a?a(T,w,b):n,E===n&&(E=bt(T)?T:Me(o[d+1])?[]:{})}Zn(b,w,E),b=b[w]}return t}var xa=No?function(t,o){return No.set(t,o),t}:qt,Su=Mo?function(t,o){return Mo(t,"toString",{configurable:!0,enumerable:!1,value:Ir(o),writable:!0})}:qt;function Eu(t){return jo(Bn(t))}function de(t,o,i){var a=-1,d=t.length;o<0&&(o=-o>d?0:d+o),i=i>d?d:i,i<0&&(i+=d),d=o>i?0:i-o>>>0,o>>>=0;for(var p=x(d);++a<d;)p[a]=t[a+o];return p}function Tu(t,o){var i;return Ye(t,function(a,d,p){return i=o(a,d,p),!i}),!!i}function Wo(t,o,i){var a=0,d=t==null?a:t.length;if(typeof o=="number"&&o===o&&d<=Bc){for(;a<d;){var p=a+d>>>1,g=t[p];g!==null&&!Qt(g)&&(i?g<=o:g<o)?a=p+1:d=p}return d}return or(t,o,qt,i)}function or(t,o,i,a){var d=0,p=t==null?0:t.length;if(p===0)return 0;o=i(o);for(var g=o!==o,b=o===null,w=Qt(o),E=o===n;d<p;){var T=Ro((d+p)/2),_=i(t[T]),A=_!==n,R=_===null,H=_===_,G=Qt(_);if(g)var F=a||H;else E?F=H&&(a||A):b?F=H&&A&&(a||!R):w?F=H&&A&&!R&&(a||!G):R||G?F=!1:F=a?_<=o:_<o;F?d=T+1:p=T}return Ot(p,po)}function ya(t,o){for(var i=-1,a=t.length,d=0,p=[];++i<a;){var g=t[i],b=o?o(g):g;if(!i||!ve(b,w)){var w=b;p[d++]=g===0?0:g}}return p}function Ca(t){return typeof t=="number"?t:Qt(t)?un:+t}function Jt(t){if(typeof t=="string")return t;if(Y(t))return mt(t,Jt)+"";if(Qt(t))return ea?ea.call(t):"";var o=t+"";return o=="0"&&1/t==-Zt?"-0":o}function Ke(t,o,i){var a=-1,d=xo,p=t.length,g=!0,b=[],w=b;if(i)g=!1,d=Mi;else if(p>=s){var E=o?null:Pu(t);if(E)return Co(E);g=!1,d=$n,w=new nn}else w=o?[]:b;t:for(;++a<p;){var T=t[a],_=o?o(T):T;if(T=i||T!==0?T:0,g&&_===_){for(var A=w.length;A--;)if(w[A]===_)continue t;o&&w.push(_),b.push(T)}else d(w,_,i)||(w!==b&&w.push(_),b.push(T))}return b}function ir(t,o){return o=qe(o,t),t=ja(t,o),t==null||delete t[Ee(he(o))]}function Sa(t,o,i,a){return Qn(t,o,i(rn(t,o)),a)}function $o(t,o,i,a){for(var d=t.length,p=a?d:-1;(a?p--:++p<d)&&o(t[p],p,t););return i?de(t,a?0:p,a?p+1:d):de(t,a?p+1:0,a?d:p)}function Ea(t,o){var i=t;return i instanceof j&&(i=i.value()),Oi(o,function(a,d){return d.func.apply(d.thisArg,ze([a],d.args))},i)}function rr(t,o,i){var a=t.length;if(a<2)return a?Ke(t[0]):[];for(var d=-1,p=x(a);++d<a;)for(var g=t[d],b=-1;++b<a;)b!=d&&(p[d]=Vn(p[d]||g,t[b],o,i));return Ke(It(p,1),o,i)}function Ta(t,o,i){for(var a=-1,d=t.length,p=o.length,g={};++a<d;){var b=a<p?o[a]:n;i(g,t[a],b)}return g}function sr(t){return kt(t)?t:[]}function ar(t){return typeof t=="function"?t:qt}function qe(t,o){return Y(t)?t:mr(t,o)?[t]:el(rt(t))}var _u=X;function Ge(t,o,i){var a=t.length;return i=i===n?a:i,!o&&i>=a?t:de(t,o,i)}var _a=fh||function(t){return Bt.clearTimeout(t)};function Ba(t,o){if(o)return t.slice();var i=t.length,a=Zs?Zs(i):new t.constructor(i);return t.copy(a),a}function lr(t){var o=new t.constructor(t.byteLength);return new Io(o).set(new Io(t)),o}function Bu(t,o){var i=o?lr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}function Iu(t){var o=new t.constructor(t.source,hs.exec(t));return o.lastIndex=t.lastIndex,o}function Lu(t){return Xn?dt(Xn.call(t)):{}}function Ia(t,o){var i=o?lr(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function La(t,o){if(t!==o){var i=t!==n,a=t===null,d=t===t,p=Qt(t),g=o!==n,b=o===null,w=o===o,E=Qt(o);if(!b&&!E&&!p&&t>o||p&&g&&w&&!b&&!E||a&&g&&w||!i&&w||!d)return 1;if(!a&&!p&&!E&&t<o||E&&i&&d&&!a&&!p||b&&i&&d||!g&&d||!w)return-1}return 0}function Au(t,o,i){for(var a=-1,d=t.criteria,p=o.criteria,g=d.length,b=i.length;++a<g;){var w=La(d[a],p[a]);if(w){if(a>=b)return w;var E=i[a];return w*(E=="desc"?-1:1)}}return t.index-o.index}function Aa(t,o,i,a){for(var d=-1,p=t.length,g=i.length,b=-1,w=o.length,E=Et(p-g,0),T=x(w+E),_=!a;++b<w;)T[b]=o[b];for(;++d<g;)(_||d<p)&&(T[i[d]]=t[d]);for(;E--;)T[b++]=t[d++];return T}function Ma(t,o,i,a){for(var d=-1,p=t.length,g=-1,b=i.length,w=-1,E=o.length,T=Et(p-b,0),_=x(T+E),A=!a;++d<T;)_[d]=t[d];for(var R=d;++w<E;)_[R+w]=o[w];for(;++g<b;)(A||d<p)&&(_[R+i[g]]=t[d++]);return _}function $t(t,o){var i=-1,a=t.length;for(o||(o=x(a));++i<a;)o[i]=t[i];return o}function Se(t,o,i,a){var d=!i;i||(i={});for(var p=-1,g=o.length;++p<g;){var b=o[p],w=a?a(i[b],t[b],b,i,t):n;w===n&&(w=t[b]),d?Ie(i,b,w):Zn(i,b,w)}return i}function Mu(t,o){return Se(t,gr(t),o)}function Ou(t,o){return Se(t,Ka(t),o)}function Yo(t,o){return function(i,a){var d=Y(i)?Hd:eu,p=o?o():{};return d(i,t,P(a,2),p)}}function Sn(t){return X(function(o,i){var a=-1,d=i.length,p=d>1?i[d-1]:n,g=d>2?i[2]:n;for(p=t.length>3&&typeof p=="function"?(d--,p):n,g&&Ft(i[0],i[1],g)&&(p=d<3?n:p,d=1),o=dt(o);++a<d;){var b=i[a];b&&t(o,b,a,p)}return o})}function Oa(t,o){return function(i,a){if(i==null)return i;if(!Yt(i))return t(i,a);for(var d=i.length,p=o?d:-1,g=dt(i);(o?p--:++p<d)&&a(g[p],p,g)!==!1;);return i}}function Ra(t){return function(o,i,a){for(var d=-1,p=dt(o),g=a(o),b=g.length;b--;){var w=g[t?b:++d];if(i(p[w],w,p)===!1)break}return o}}function Ru(t,o,i){var a=o&Z,d=to(t);function p(){var g=this&&this!==Bt&&this instanceof p?d:t;return g.apply(a?i:this,arguments)}return p}function Na(t){return function(o){o=rt(o);var i=bn(o)?me(o):n,a=i?i[0]:o.charAt(0),d=i?Ge(i,1).join(""):o.slice(1);return a[t]()+d}}function En(t){return function(o){return Oi(Ol(Ml(o).replace(Sd,"")),t,"")}}function to(t){return function(){var o=arguments;switch(o.length){case 0:return new t;case 1:return new t(o[0]);case 2:return new t(o[0],o[1]);case 3:return new t(o[0],o[1],o[2]);case 4:return new t(o[0],o[1],o[2],o[3]);case 5:return new t(o[0],o[1],o[2],o[3],o[4]);case 6:return new t(o[0],o[1],o[2],o[3],o[4],o[5]);case 7:return new t(o[0],o[1],o[2],o[3],o[4],o[5],o[6])}var i=Cn(t.prototype),a=t.apply(i,o);return bt(a)?a:i}}function Nu(t,o,i){var a=to(t);function d(){for(var p=arguments.length,g=x(p),b=p,w=Tn(d);b--;)g[b]=arguments[b];var E=p<3&&g[0]!==w&&g[p-1]!==w?[]:We(g,w);if(p-=E.length,p<i)return Ua(t,o,Ko,d.placeholder,n,g,E,n,n,i-p);var T=this&&this!==Bt&&this instanceof d?a:t;return Vt(T,this,g)}return d}function Da(t){return function(o,i,a){var d=dt(o);if(!Yt(o)){var p=P(i,3);o=_t(o),i=function(b){return p(d[b],b,d)}}var g=t(o,i,a);return g>-1?d[p?o[g]:g]:n}}function Pa(t){return Ae(function(o){var i=o.length,a=i,d=le.prototype.thru;for(t&&o.reverse();a--;){var p=o[a];if(typeof p!="function")throw new ae(h);if(d&&!g&&Zo(p)=="wrapper")var g=new le([],!0)}for(a=g?a:i;++a<i;){p=o[a];var b=Zo(p),w=b=="wrapper"?pr(p):n;w&&br(w[0])&&w[1]==(Dt|Ct|gt|N)&&!w[4].length&&w[9]==1?g=g[Zo(w[0])].apply(g,w[3]):g=p.length==1&&br(p)?g[b]():g.thru(p)}return function(){var E=arguments,T=E[0];if(g&&E.length==1&&Y(T))return g.plant(T).value();for(var _=0,A=i?o[_].apply(this,E):T;++_<i;)A=o[_].call(this,A);return A}})}function Ko(t,o,i,a,d,p,g,b,w,E){var T=o&Dt,_=o&Z,A=o&lt,R=o&(Ct|wt),H=o&O,G=A?n:to(t);function F(){for(var V=arguments.length,Q=x(V),te=V;te--;)Q[te]=arguments[te];if(R)var Ut=Tn(F),ee=Gd(Q,Ut);if(a&&(Q=Aa(Q,a,d,R)),p&&(Q=Ma(Q,p,g,R)),V-=ee,R&&V<E){var xt=We(Q,Ut);return Ua(t,o,Ko,F.placeholder,i,Q,xt,b,w,E-V)}var we=_?i:this,Ne=A?we[t]:t;return V=Q.length,b?Q=ep(Q,b):H&&V>1&&Q.reverse(),T&&w<V&&(Q.length=w),this&&this!==Bt&&this instanceof F&&(Ne=G||to(Ne)),Ne.apply(we,Q)}return F}function Ha(t,o){return function(i,a){return cu(i,t,o(a),{})}}function qo(t,o){return function(i,a){var d;if(i===n&&a===n)return o;if(i!==n&&(d=i),a!==n){if(d===n)return a;typeof i=="string"||typeof a=="string"?(i=Jt(i),a=Jt(a)):(i=Ca(i),a=Ca(a)),d=t(i,a)}return d}}function cr(t){return Ae(function(o){return o=mt(o,jt(P())),X(function(i){var a=this;return t(o,function(d){return Vt(d,a,i)})})})}function Go(t,o){o=o===n?" ":Jt(o);var i=o.length;if(i<2)return i?nr(o,t):o;var a=nr(o,Oo(t/vn(o)));return bn(o)?Ge(me(a),0,t).join(""):a.slice(0,t)}function Du(t,o,i,a){var d=o&Z,p=to(t);function g(){for(var b=-1,w=arguments.length,E=-1,T=a.length,_=x(T+w),A=this&&this!==Bt&&this instanceof g?p:t;++E<T;)_[E]=a[E];for(;w--;)_[E++]=arguments[++b];return Vt(A,d?i:this,_)}return g}function Fa(t){return function(o,i,a){return a&&typeof a!="number"&&Ft(o,i,a)&&(i=a=n),o=Re(o),i===n?(i=o,o=0):i=Re(i),a=a===n?o<i?1:-1:Re(a),xu(o,i,a,t)}}function Xo(t){return function(o,i){return typeof o=="string"&&typeof i=="string"||(o=ue(o),i=ue(i)),t(o,i)}}function Ua(t,o,i,a,d,p,g,b,w,E){var T=o&Ct,_=T?g:n,A=T?n:g,R=T?p:n,H=T?n:p;o|=T?gt:Wt,o&=~(T?Wt:gt),o&ft||(o&=~(Z|lt));var G=[t,o,d,R,_,H,A,b,w,E],F=i.apply(n,G);return br(t)&&Ja(F,G),F.placeholder=a,Qa(F,t,o)}function dr(t){var o=St[t];return function(i,a){if(i=ue(i),a=a==null?0:Ot(q(a),292),a&&Qs(i)){var d=(rt(i)+"e").split("e"),p=o(d[0]+"e"+(+d[1]+a));return d=(rt(p)+"e").split("e"),+(d[0]+"e"+(+d[1]-a))}return o(i)}}var Pu=xn&&1/Co(new xn([,-0]))[1]==Zt?function(t){return new xn(t)}:Mr;function za(t){return function(o){var i=Rt(o);return i==fe?Ui(o):i==ge?th(o):qd(o,t(o))}}function Le(t,o,i,a,d,p,g,b){var w=o&lt;if(!w&&typeof t!="function")throw new ae(h);var E=a?a.length:0;if(E||(o&=~(gt|Wt),a=d=n),g=g===n?g:Et(q(g),0),b=b===n?b:q(b),E-=d?d.length:0,o&Wt){var T=a,_=d;a=d=n}var A=w?n:pr(t),R=[t,o,i,a,d,T,_,p,g,b];if(A&&Ju(R,A),t=R[0],o=R[1],i=R[2],a=R[3],d=R[4],b=R[9]=R[9]===n?w?0:t.length:Et(R[9]-E,0),!b&&o&(Ct|wt)&&(o&=~(Ct|wt)),!o||o==Z)var H=Ru(t,o,i);else o==Ct||o==wt?H=Nu(t,o,b):(o==gt||o==(Z|gt))&&!d.length?H=Du(t,o,i,a):H=Ko.apply(n,R);var G=A?xa:Ja;return Qa(G(H,R),t,o)}function Wa(t,o,i,a){return t===n||ve(t,kn[i])&&!st.call(a,i)?o:t}function $a(t,o,i,a,d,p){return bt(t)&&bt(o)&&(p.set(o,t),zo(t,o,n,$a,p),p.delete(o)),t}function Hu(t){return oo(t)?n:t}function Ya(t,o,i,a,d,p){var g=i&I,b=t.length,w=o.length;if(b!=w&&!(g&&w>b))return!1;var E=p.get(t),T=p.get(o);if(E&&T)return E==o&&T==t;var _=-1,A=!0,R=i&K?new nn:n;for(p.set(t,o),p.set(o,t);++_<b;){var H=t[_],G=o[_];if(a)var F=g?a(G,H,_,o,t,p):a(H,G,_,t,o,p);if(F!==n){if(F)continue;A=!1;break}if(R){if(!Ri(o,function(V,Q){if(!$n(R,Q)&&(H===V||d(H,V,i,a,p)))return R.push(Q)})){A=!1;break}}else if(!(H===G||d(H,G,i,a,p))){A=!1;break}}return p.delete(t),p.delete(o),A}function Fu(t,o,i,a,d,p,g){switch(i){case fn:if(t.byteLength!=o.byteLength||t.byteOffset!=o.byteOffset)return!1;t=t.buffer,o=o.buffer;case Wn:return!(t.byteLength!=o.byteLength||!p(new Io(t),new Io(o)));case Dn:case Pn:case Hn:return ve(+t,+o);case go:return t.name==o.name&&t.message==o.message;case Fn:case Un:return t==o+"";case fe:var b=Ui;case ge:var w=a&I;if(b||(b=Co),t.size!=o.size&&!w)return!1;var E=g.get(t);if(E)return E==o;a|=K,g.set(t,o);var T=Ya(b(t),b(o),a,d,p,g);return g.delete(t),T;case bo:if(Xn)return Xn.call(t)==Xn.call(o)}return!1}function Uu(t,o,i,a,d,p){var g=i&I,b=hr(t),w=b.length,E=hr(o),T=E.length;if(w!=T&&!g)return!1;for(var _=w;_--;){var A=b[_];if(!(g?A in o:st.call(o,A)))return!1}var R=p.get(t),H=p.get(o);if(R&&H)return R==o&&H==t;var G=!0;p.set(t,o),p.set(o,t);for(var F=g;++_<w;){A=b[_];var V=t[A],Q=o[A];if(a)var te=g?a(Q,V,A,o,t,p):a(V,Q,A,t,o,p);if(!(te===n?V===Q||d(V,Q,i,a,p):te)){G=!1;break}F||(F=A=="constructor")}if(G&&!F){var Ut=t.constructor,ee=o.constructor;Ut!=ee&&"constructor"in t&&"constructor"in o&&!(typeof Ut=="function"&&Ut instanceof Ut&&typeof ee=="function"&&ee instanceof ee)&&(G=!1)}return p.delete(t),p.delete(o),G}function Ae(t){return wr(Va(t,n,rl),t+"")}function hr(t){return da(t,_t,gr)}function ur(t){return da(t,Kt,Ka)}var pr=No?function(t){return No.get(t)}:Mr;function Zo(t){for(var o=t.name+"",i=yn[o],a=st.call(yn,o)?i.length:0;a--;){var d=i[a],p=d.func;if(p==null||p==t)return d.name}return o}function Tn(t){var o=st.call(u,"placeholder")?u:t;return o.placeholder}function P(){var t=u.iteratee||Lr;return t=t===Lr?pa:t,arguments.length?t(arguments[0],arguments[1]):t}function Vo(t,o){var i=t.__data__;return Xu(o)?i[typeof o=="string"?"string":"hash"]:i.map}function fr(t){for(var o=_t(t),i=o.length;i--;){var a=o[i],d=t[a];o[i]=[a,d,Xa(d)]}return o}function sn(t,o){var i=jd(t,o);return ua(i)?i:n}function zu(t){var o=st.call(t,tn),i=t[tn];try{t[tn]=n;var a=!0}catch{}var d=_o.call(t);return a&&(o?t[tn]=i:delete t[tn]),d}var gr=Wi?function(t){return t==null?[]:(t=dt(t),Ue(Wi(t),function(o){return js.call(t,o)}))}:Or,Ka=Wi?function(t){for(var o=[];t;)ze(o,gr(t)),t=Lo(t);return o}:Or,Rt=Ht;($i&&Rt(new $i(new ArrayBuffer(1)))!=fn||Kn&&Rt(new Kn)!=fe||Yi&&Rt(Yi.resolve())!=as||xn&&Rt(new xn)!=ge||qn&&Rt(new qn)!=zn)&&(Rt=function(t){var o=Ht(t),i=o==Te?t.constructor:n,a=i?an(i):"";if(a)switch(a){case Ch:return fn;case Sh:return fe;case Eh:return as;case Th:return ge;case _h:return zn}return o});function Wu(t,o,i){for(var a=-1,d=i.length;++a<d;){var p=i[a],g=p.size;switch(p.type){case"drop":t+=g;break;case"dropRight":o-=g;break;case"take":o=Ot(o,t+g);break;case"takeRight":t=Et(t,o-g);break}}return{start:t,end:o}}function $u(t){var o=t.match(Zc);return o?o[1].split(Vc):[]}function qa(t,o,i){o=qe(o,t);for(var a=-1,d=o.length,p=!1;++a<d;){var g=Ee(o[a]);if(!(p=t!=null&&i(t,g)))break;t=t[g]}return p||++a!=d?p:(d=t==null?0:t.length,!!d&&oi(d)&&Me(g,d)&&(Y(t)||ln(t)))}function Yu(t){var o=t.length,i=new t.constructor(o);return o&&typeof t[0]=="string"&&st.call(t,"index")&&(i.index=t.index,i.input=t.input),i}function Ga(t){return typeof t.constructor=="function"&&!eo(t)?Cn(Lo(t)):{}}function Ku(t,o,i){var a=t.constructor;switch(o){case Wn:return lr(t);case Dn:case Pn:return new a(+t);case fn:return Bu(t,i);case fi:case gi:case mi:case bi:case vi:case wi:case ki:case xi:case yi:return Ia(t,i);case fe:return new a;case Hn:case Un:return new a(t);case Fn:return Iu(t);case ge:return new a;case bo:return Lu(t)}}function qu(t,o){var i=o.length;if(!i)return t;var a=i-1;return o[a]=(i>1?"& ":"")+o[a],o=o.join(i>2?", ":" "),t.replace(Xc,`{
/* [wrapped with `+o+`] */
`)}function Gu(t){return Y(t)||ln(t)||!!(Js&&t&&t[Js])}function Me(t,o){var i=typeof t;return o=o??Mt,!!o&&(i=="number"||i!="symbol"&&rd.test(t))&&t>-1&&t%1==0&&t<o}function Ft(t,o,i){if(!bt(i))return!1;var a=typeof o;return(a=="number"?Yt(i)&&Me(o,i.length):a=="string"&&o in i)?ve(i[o],t):!1}function mr(t,o){if(Y(t))return!1;var i=typeof t;return i=="number"||i=="symbol"||i=="boolean"||t==null||Qt(t)?!0:Yc.test(t)||!$c.test(t)||o!=null&&t in dt(o)}function Xu(t){var o=typeof t;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?t!=="__proto__":t===null}function br(t){var o=Zo(t),i=u[o];if(typeof i!="function"||!(o in j.prototype))return!1;if(t===i)return!0;var a=pr(i);return!!a&&t===a[0]}function Zu(t){return!!Xs&&Xs in t}var Vu=Eo?Oe:Rr;function eo(t){var o=t&&t.constructor,i=typeof o=="function"&&o.prototype||kn;return t===i}function Xa(t){return t===t&&!bt(t)}function Za(t,o){return function(i){return i==null?!1:i[t]===o&&(o!==n||t in dt(i))}}function ju(t){var o=ei(t,function(a){return i.size===k&&i.clear(),a}),i=o.cache;return o}function Ju(t,o){var i=t[1],a=o[1],d=i|a,p=d<(Z|lt|Dt),g=a==Dt&&i==Ct||a==Dt&&i==N&&t[7].length<=o[8]||a==(Dt|N)&&o[7].length<=o[8]&&i==Ct;if(!(p||g))return t;a&Z&&(t[2]=o[2],d|=i&Z?0:ft);var b=o[3];if(b){var w=t[3];t[3]=w?Aa(w,b,o[4]):b,t[4]=w?We(t[3],B):o[4]}return b=o[5],b&&(w=t[5],t[5]=w?Ma(w,b,o[6]):b,t[6]=w?We(t[5],B):o[6]),b=o[7],b&&(t[7]=b),a&Dt&&(t[8]=t[8]==null?o[8]:Ot(t[8],o[8])),t[9]==null&&(t[9]=o[9]),t[0]=o[0],t[1]=d,t}function Qu(t){var o=[];if(t!=null)for(var i in dt(t))o.push(i);return o}function tp(t){return _o.call(t)}function Va(t,o,i){return o=Et(o===n?t.length-1:o,0),function(){for(var a=arguments,d=-1,p=Et(a.length-o,0),g=x(p);++d<p;)g[d]=a[o+d];d=-1;for(var b=x(o+1);++d<o;)b[d]=a[d];return b[o]=i(g),Vt(t,this,b)}}function ja(t,o){return o.length<2?t:rn(t,de(o,0,-1))}function ep(t,o){for(var i=t.length,a=Ot(o.length,i),d=$t(t);a--;){var p=o[a];t[a]=Me(p,i)?d[p]:n}return t}function vr(t,o){if(!(o==="constructor"&&typeof t[o]=="function")&&o!="__proto__")return t[o]}var Ja=tl(xa),no=mh||function(t,o){return Bt.setTimeout(t,o)},wr=tl(Su);function Qa(t,o,i){var a=o+"";return wr(t,qu(a,np($u(a),i)))}function tl(t){var o=0,i=0;return function(){var a=kh(),d=nt-(a-i);if(i=a,d>0){if(++o>=ct)return arguments[0]}else o=0;return t.apply(n,arguments)}}function jo(t,o){var i=-1,a=t.length,d=a-1;for(o=o===n?a:o;++i<o;){var p=er(i,d),g=t[p];t[p]=t[i],t[i]=g}return t.length=o,t}var el=ju(function(t){var o=[];return t.charCodeAt(0)===46&&o.push(""),t.replace(Kc,function(i,a,d,p){o.push(d?p.replace(Qc,"$1"):a||i)}),o});function Ee(t){if(typeof t=="string"||Qt(t))return t;var o=t+"";return o=="0"&&1/t==-Zt?"-0":o}function an(t){if(t!=null){try{return To.call(t)}catch{}try{return t+""}catch{}}return""}function np(t,o){return se(Ic,function(i){var a="_."+i[0];o&i[1]&&!xo(t,a)&&t.push(a)}),t.sort()}function nl(t){if(t instanceof j)return t.clone();var o=new le(t.__wrapped__,t.__chain__);return o.__actions__=$t(t.__actions__),o.__index__=t.__index__,o.__values__=t.__values__,o}function op(t,o,i){(i?Ft(t,o,i):o===n)?o=1:o=Et(q(o),0);var a=t==null?0:t.length;if(!a||o<1)return[];for(var d=0,p=0,g=x(Oo(a/o));d<a;)g[p++]=de(t,d,d+=o);return g}function ip(t){for(var o=-1,i=t==null?0:t.length,a=0,d=[];++o<i;){var p=t[o];p&&(d[a++]=p)}return d}function rp(){var t=arguments.length;if(!t)return[];for(var o=x(t-1),i=arguments[0],a=t;a--;)o[a-1]=arguments[a];return ze(Y(i)?$t(i):[i],It(o,1))}var sp=X(function(t,o){return kt(t)?Vn(t,It(o,1,kt,!0)):[]}),ap=X(function(t,o){var i=he(o);return kt(i)&&(i=n),kt(t)?Vn(t,It(o,1,kt,!0),P(i,2)):[]}),lp=X(function(t,o){var i=he(o);return kt(i)&&(i=n),kt(t)?Vn(t,It(o,1,kt,!0),n,i):[]});function cp(t,o,i){var a=t==null?0:t.length;return a?(o=i||o===n?1:q(o),de(t,o<0?0:o,a)):[]}function dp(t,o,i){var a=t==null?0:t.length;return a?(o=i||o===n?1:q(o),o=a-o,de(t,0,o<0?0:o)):[]}function hp(t,o){return t&&t.length?$o(t,P(o,3),!0,!0):[]}function up(t,o){return t&&t.length?$o(t,P(o,3),!0):[]}function pp(t,o,i,a){var d=t==null?0:t.length;return d?(i&&typeof i!="number"&&Ft(t,o,i)&&(i=0,a=d),ru(t,o,i,a)):[]}function ol(t,o,i){var a=t==null?0:t.length;if(!a)return-1;var d=i==null?0:q(i);return d<0&&(d=Et(a+d,0)),yo(t,P(o,3),d)}function il(t,o,i){var a=t==null?0:t.length;if(!a)return-1;var d=a-1;return i!==n&&(d=q(i),d=i<0?Et(a+d,0):Ot(d,a-1)),yo(t,P(o,3),d,!0)}function rl(t){var o=t==null?0:t.length;return o?It(t,1):[]}function fp(t){var o=t==null?0:t.length;return o?It(t,Zt):[]}function gp(t,o){var i=t==null?0:t.length;return i?(o=o===n?1:q(o),It(t,o)):[]}function mp(t){for(var o=-1,i=t==null?0:t.length,a={};++o<i;){var d=t[o];a[d[0]]=d[1]}return a}function sl(t){return t&&t.length?t[0]:n}function bp(t,o,i){var a=t==null?0:t.length;if(!a)return-1;var d=i==null?0:q(i);return d<0&&(d=Et(a+d,0)),mn(t,o,d)}function vp(t){var o=t==null?0:t.length;return o?de(t,0,-1):[]}var wp=X(function(t){var o=mt(t,sr);return o.length&&o[0]===t[0]?Vi(o):[]}),kp=X(function(t){var o=he(t),i=mt(t,sr);return o===he(i)?o=n:i.pop(),i.length&&i[0]===t[0]?Vi(i,P(o,2)):[]}),xp=X(function(t){var o=he(t),i=mt(t,sr);return o=typeof o=="function"?o:n,o&&i.pop(),i.length&&i[0]===t[0]?Vi(i,n,o):[]});function yp(t,o){return t==null?"":vh.call(t,o)}function he(t){var o=t==null?0:t.length;return o?t[o-1]:n}function Cp(t,o,i){var a=t==null?0:t.length;if(!a)return-1;var d=a;return i!==n&&(d=q(i),d=d<0?Et(a+d,0):Ot(d,a-1)),o===o?nh(t,o,d):yo(t,Us,d,!0)}function Sp(t,o){return t&&t.length?ba(t,q(o)):n}var Ep=X(al);function al(t,o){return t&&t.length&&o&&o.length?tr(t,o):t}function Tp(t,o,i){return t&&t.length&&o&&o.length?tr(t,o,P(i,2)):t}function _p(t,o,i){return t&&t.length&&o&&o.length?tr(t,o,n,i):t}var Bp=Ae(function(t,o){var i=t==null?0:t.length,a=qi(t,o);return ka(t,mt(o,function(d){return Me(d,i)?+d:d}).sort(La)),a});function Ip(t,o){var i=[];if(!(t&&t.length))return i;var a=-1,d=[],p=t.length;for(o=P(o,3);++a<p;){var g=t[a];o(g,a,t)&&(i.push(g),d.push(a))}return ka(t,d),i}function kr(t){return t==null?t:yh.call(t)}function Lp(t,o,i){var a=t==null?0:t.length;return a?(i&&typeof i!="number"&&Ft(t,o,i)?(o=0,i=a):(o=o==null?0:q(o),i=i===n?a:q(i)),de(t,o,i)):[]}function Ap(t,o){return Wo(t,o)}function Mp(t,o,i){return or(t,o,P(i,2))}function Op(t,o){var i=t==null?0:t.length;if(i){var a=Wo(t,o);if(a<i&&ve(t[a],o))return a}return-1}function Rp(t,o){return Wo(t,o,!0)}function Np(t,o,i){return or(t,o,P(i,2),!0)}function Dp(t,o){var i=t==null?0:t.length;if(i){var a=Wo(t,o,!0)-1;if(ve(t[a],o))return a}return-1}function Pp(t){return t&&t.length?ya(t):[]}function Hp(t,o){return t&&t.length?ya(t,P(o,2)):[]}function Fp(t){var o=t==null?0:t.length;return o?de(t,1,o):[]}function Up(t,o,i){return t&&t.length?(o=i||o===n?1:q(o),de(t,0,o<0?0:o)):[]}function zp(t,o,i){var a=t==null?0:t.length;return a?(o=i||o===n?1:q(o),o=a-o,de(t,o<0?0:o,a)):[]}function Wp(t,o){return t&&t.length?$o(t,P(o,3),!1,!0):[]}function $p(t,o){return t&&t.length?$o(t,P(o,3)):[]}var Yp=X(function(t){return Ke(It(t,1,kt,!0))}),Kp=X(function(t){var o=he(t);return kt(o)&&(o=n),Ke(It(t,1,kt,!0),P(o,2))}),qp=X(function(t){var o=he(t);return o=typeof o=="function"?o:n,Ke(It(t,1,kt,!0),n,o)});function Gp(t){return t&&t.length?Ke(t):[]}function Xp(t,o){return t&&t.length?Ke(t,P(o,2)):[]}function Zp(t,o){return o=typeof o=="function"?o:n,t&&t.length?Ke(t,n,o):[]}function xr(t){if(!(t&&t.length))return[];var o=0;return t=Ue(t,function(i){if(kt(i))return o=Et(i.length,o),!0}),Hi(o,function(i){return mt(t,Ni(i))})}function ll(t,o){if(!(t&&t.length))return[];var i=xr(t);return o==null?i:mt(i,function(a){return Vt(o,n,a)})}var Vp=X(function(t,o){return kt(t)?Vn(t,o):[]}),jp=X(function(t){return rr(Ue(t,kt))}),Jp=X(function(t){var o=he(t);return kt(o)&&(o=n),rr(Ue(t,kt),P(o,2))}),Qp=X(function(t){var o=he(t);return o=typeof o=="function"?o:n,rr(Ue(t,kt),n,o)}),tf=X(xr);function ef(t,o){return Ta(t||[],o||[],Zn)}function nf(t,o){return Ta(t||[],o||[],Qn)}var of=X(function(t){var o=t.length,i=o>1?t[o-1]:n;return i=typeof i=="function"?(t.pop(),i):n,ll(t,i)});function cl(t){var o=u(t);return o.__chain__=!0,o}function rf(t,o){return o(t),t}function Jo(t,o){return o(t)}var sf=Ae(function(t){var o=t.length,i=o?t[0]:0,a=this.__wrapped__,d=function(p){return qi(p,t)};return o>1||this.__actions__.length||!(a instanceof j)||!Me(i)?this.thru(d):(a=a.slice(i,+i+(o?1:0)),a.__actions__.push({func:Jo,args:[d],thisArg:n}),new le(a,this.__chain__).thru(function(p){return o&&!p.length&&p.push(n),p}))});function af(){return cl(this)}function lf(){return new le(this.value(),this.__chain__)}function cf(){this.__values__===n&&(this.__values__=Cl(this.value()));var t=this.__index__>=this.__values__.length,o=t?n:this.__values__[this.__index__++];return{done:t,value:o}}function df(){return this}function hf(t){for(var o,i=this;i instanceof Po;){var a=nl(i);a.__index__=0,a.__values__=n,o?d.__wrapped__=a:o=a;var d=a;i=i.__wrapped__}return d.__wrapped__=t,o}function uf(){var t=this.__wrapped__;if(t instanceof j){var o=t;return this.__actions__.length&&(o=new j(this)),o=o.reverse(),o.__actions__.push({func:Jo,args:[kr],thisArg:n}),new le(o,this.__chain__)}return this.thru(kr)}function pf(){return Ea(this.__wrapped__,this.__actions__)}var ff=Yo(function(t,o,i){st.call(t,i)?++t[i]:Ie(t,i,1)});function gf(t,o,i){var a=Y(t)?Hs:iu;return i&&Ft(t,o,i)&&(o=n),a(t,P(o,3))}function mf(t,o){var i=Y(t)?Ue:la;return i(t,P(o,3))}var bf=Da(ol),vf=Da(il);function wf(t,o){return It(Qo(t,o),1)}function kf(t,o){return It(Qo(t,o),Zt)}function xf(t,o,i){return i=i===n?1:q(i),It(Qo(t,o),i)}function dl(t,o){var i=Y(t)?se:Ye;return i(t,P(o,3))}function hl(t,o){var i=Y(t)?Fd:aa;return i(t,P(o,3))}var yf=Yo(function(t,o,i){st.call(t,i)?t[i].push(o):Ie(t,i,[o])});function Cf(t,o,i,a){t=Yt(t)?t:Bn(t),i=i&&!a?q(i):0;var d=t.length;return i<0&&(i=Et(d+i,0)),ii(t)?i<=d&&t.indexOf(o,i)>-1:!!d&&mn(t,o,i)>-1}var Sf=X(function(t,o,i){var a=-1,d=typeof o=="function",p=Yt(t)?x(t.length):[];return Ye(t,function(g){p[++a]=d?Vt(o,g,i):jn(g,o,i)}),p}),Ef=Yo(function(t,o,i){Ie(t,i,o)});function Qo(t,o){var i=Y(t)?mt:fa;return i(t,P(o,3))}function Tf(t,o,i,a){return t==null?[]:(Y(o)||(o=o==null?[]:[o]),i=a?n:i,Y(i)||(i=i==null?[]:[i]),va(t,o,i))}var _f=Yo(function(t,o,i){t[i?0:1].push(o)},function(){return[[],[]]});function Bf(t,o,i){var a=Y(t)?Oi:Ws,d=arguments.length<3;return a(t,P(o,4),i,d,Ye)}function If(t,o,i){var a=Y(t)?Ud:Ws,d=arguments.length<3;return a(t,P(o,4),i,d,aa)}function Lf(t,o){var i=Y(t)?Ue:la;return i(t,ni(P(o,3)))}function Af(t){var o=Y(t)?oa:yu;return o(t)}function Mf(t,o,i){(i?Ft(t,o,i):o===n)?o=1:o=q(o);var a=Y(t)?Qh:Cu;return a(t,o)}function Of(t){var o=Y(t)?tu:Eu;return o(t)}function Rf(t){if(t==null)return 0;if(Yt(t))return ii(t)?vn(t):t.length;var o=Rt(t);return o==fe||o==ge?t.size:Ji(t).length}function Nf(t,o,i){var a=Y(t)?Ri:Tu;return i&&Ft(t,o,i)&&(o=n),a(t,P(o,3))}var Df=X(function(t,o){if(t==null)return[];var i=o.length;return i>1&&Ft(t,o[0],o[1])?o=[]:i>2&&Ft(o[0],o[1],o[2])&&(o=[o[0]]),va(t,It(o,1),[])}),ti=gh||function(){return Bt.Date.now()};function Pf(t,o){if(typeof o!="function")throw new ae(h);return t=q(t),function(){if(--t<1)return o.apply(this,arguments)}}function ul(t,o,i){return o=i?n:o,o=t&&o==null?t.length:o,Le(t,Dt,n,n,n,n,o)}function pl(t,o){var i;if(typeof o!="function")throw new ae(h);return t=q(t),function(){return--t>0&&(i=o.apply(this,arguments)),t<=1&&(o=n),i}}var yr=X(function(t,o,i){var a=Z;if(i.length){var d=We(i,Tn(yr));a|=gt}return Le(t,a,o,i,d)}),fl=X(function(t,o,i){var a=Z|lt;if(i.length){var d=We(i,Tn(fl));a|=gt}return Le(o,a,t,i,d)});function gl(t,o,i){o=i?n:o;var a=Le(t,Ct,n,n,n,n,n,o);return a.placeholder=gl.placeholder,a}function ml(t,o,i){o=i?n:o;var a=Le(t,wt,n,n,n,n,n,o);return a.placeholder=ml.placeholder,a}function bl(t,o,i){var a,d,p,g,b,w,E=0,T=!1,_=!1,A=!0;if(typeof t!="function")throw new ae(h);o=ue(o)||0,bt(i)&&(T=!!i.leading,_="maxWait"in i,p=_?Et(ue(i.maxWait)||0,o):p,A="trailing"in i?!!i.trailing:A);function R(xt){var we=a,Ne=d;return a=d=n,E=xt,g=t.apply(Ne,we),g}function H(xt){return E=xt,b=no(V,o),T?R(xt):g}function G(xt){var we=xt-w,Ne=xt-E,Dl=o-we;return _?Ot(Dl,p-Ne):Dl}function F(xt){var we=xt-w,Ne=xt-E;return w===n||we>=o||we<0||_&&Ne>=p}function V(){var xt=ti();if(F(xt))return Q(xt);b=no(V,G(xt))}function Q(xt){return b=n,A&&a?R(xt):(a=d=n,g)}function te(){b!==n&&_a(b),E=0,a=w=d=b=n}function Ut(){return b===n?g:Q(ti())}function ee(){var xt=ti(),we=F(xt);if(a=arguments,d=this,w=xt,we){if(b===n)return H(w);if(_)return _a(b),b=no(V,o),R(w)}return b===n&&(b=no(V,o)),g}return ee.cancel=te,ee.flush=Ut,ee}var Hf=X(function(t,o){return sa(t,1,o)}),Ff=X(function(t,o,i){return sa(t,ue(o)||0,i)});function Uf(t){return Le(t,O)}function ei(t,o){if(typeof t!="function"||o!=null&&typeof o!="function")throw new ae(h);var i=function(){var a=arguments,d=o?o.apply(this,a):a[0],p=i.cache;if(p.has(d))return p.get(d);var g=t.apply(this,a);return i.cache=p.set(d,g)||p,g};return i.cache=new(ei.Cache||Be),i}ei.Cache=Be;function ni(t){if(typeof t!="function")throw new ae(h);return function(){var o=arguments;switch(o.length){case 0:return!t.call(this);case 1:return!t.call(this,o[0]);case 2:return!t.call(this,o[0],o[1]);case 3:return!t.call(this,o[0],o[1],o[2])}return!t.apply(this,o)}}function zf(t){return pl(2,t)}var Wf=_u(function(t,o){o=o.length==1&&Y(o[0])?mt(o[0],jt(P())):mt(It(o,1),jt(P()));var i=o.length;return X(function(a){for(var d=-1,p=Ot(a.length,i);++d<p;)a[d]=o[d].call(this,a[d]);return Vt(t,this,a)})}),Cr=X(function(t,o){var i=We(o,Tn(Cr));return Le(t,gt,n,o,i)}),vl=X(function(t,o){var i=We(o,Tn(vl));return Le(t,Wt,n,o,i)}),$f=Ae(function(t,o){return Le(t,N,n,n,n,o)});function Yf(t,o){if(typeof t!="function")throw new ae(h);return o=o===n?o:q(o),X(t,o)}function Kf(t,o){if(typeof t!="function")throw new ae(h);return o=o==null?0:Et(q(o),0),X(function(i){var a=i[o],d=Ge(i,0,o);return a&&ze(d,a),Vt(t,this,d)})}function qf(t,o,i){var a=!0,d=!0;if(typeof t!="function")throw new ae(h);return bt(i)&&(a="leading"in i?!!i.leading:a,d="trailing"in i?!!i.trailing:d),bl(t,o,{leading:a,maxWait:o,trailing:d})}function Gf(t){return ul(t,1)}function Xf(t,o){return Cr(ar(o),t)}function Zf(){if(!arguments.length)return[];var t=arguments[0];return Y(t)?t:[t]}function Vf(t){return ce(t,D)}function jf(t,o){return o=typeof o=="function"?o:n,ce(t,D,o)}function Jf(t){return ce(t,S|D)}function Qf(t,o){return o=typeof o=="function"?o:n,ce(t,S|D,o)}function tg(t,o){return o==null||ra(t,o,_t(o))}function ve(t,o){return t===o||t!==t&&o!==o}var eg=Xo(Zi),ng=Xo(function(t,o){return t>=o}),ln=ha(function(){return arguments}())?ha:function(t){return vt(t)&&st.call(t,"callee")&&!js.call(t,"callee")},Y=x.isArray,og=Ms?jt(Ms):du;function Yt(t){return t!=null&&oi(t.length)&&!Oe(t)}function kt(t){return vt(t)&&Yt(t)}function ig(t){return t===!0||t===!1||vt(t)&&Ht(t)==Dn}var Xe=bh||Rr,rg=Os?jt(Os):hu;function sg(t){return vt(t)&&t.nodeType===1&&!oo(t)}function ag(t){if(t==null)return!0;if(Yt(t)&&(Y(t)||typeof t=="string"||typeof t.splice=="function"||Xe(t)||_n(t)||ln(t)))return!t.length;var o=Rt(t);if(o==fe||o==ge)return!t.size;if(eo(t))return!Ji(t).length;for(var i in t)if(st.call(t,i))return!1;return!0}function lg(t,o){return Jn(t,o)}function cg(t,o,i){i=typeof i=="function"?i:n;var a=i?i(t,o):n;return a===n?Jn(t,o,n,i):!!a}function Sr(t){if(!vt(t))return!1;var o=Ht(t);return o==go||o==Ac||typeof t.message=="string"&&typeof t.name=="string"&&!oo(t)}function dg(t){return typeof t=="number"&&Qs(t)}function Oe(t){if(!bt(t))return!1;var o=Ht(t);return o==mo||o==ss||o==Lc||o==Oc}function wl(t){return typeof t=="number"&&t==q(t)}function oi(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Mt}function bt(t){var o=typeof t;return t!=null&&(o=="object"||o=="function")}function vt(t){return t!=null&&typeof t=="object"}var kl=Rs?jt(Rs):pu;function hg(t,o){return t===o||ji(t,o,fr(o))}function ug(t,o,i){return i=typeof i=="function"?i:n,ji(t,o,fr(o),i)}function pg(t){return xl(t)&&t!=+t}function fg(t){if(Vu(t))throw new $(c);return ua(t)}function gg(t){return t===null}function mg(t){return t==null}function xl(t){return typeof t=="number"||vt(t)&&Ht(t)==Hn}function oo(t){if(!vt(t)||Ht(t)!=Te)return!1;var o=Lo(t);if(o===null)return!0;var i=st.call(o,"constructor")&&o.constructor;return typeof i=="function"&&i instanceof i&&To.call(i)==hh}var Er=Ns?jt(Ns):fu;function bg(t){return wl(t)&&t>=-Mt&&t<=Mt}var yl=Ds?jt(Ds):gu;function ii(t){return typeof t=="string"||!Y(t)&&vt(t)&&Ht(t)==Un}function Qt(t){return typeof t=="symbol"||vt(t)&&Ht(t)==bo}var _n=Ps?jt(Ps):mu;function vg(t){return t===n}function wg(t){return vt(t)&&Rt(t)==zn}function kg(t){return vt(t)&&Ht(t)==Nc}var xg=Xo(Qi),yg=Xo(function(t,o){return t<=o});function Cl(t){if(!t)return[];if(Yt(t))return ii(t)?me(t):$t(t);if(Yn&&t[Yn])return Qd(t[Yn]());var o=Rt(t),i=o==fe?Ui:o==ge?Co:Bn;return i(t)}function Re(t){if(!t)return t===0?t:0;if(t=ue(t),t===Zt||t===-Zt){var o=t<0?-1:1;return o*Nn}return t===t?t:0}function q(t){var o=Re(t),i=o%1;return o===o?i?o-i:o:0}function Sl(t){return t?on(q(t),0,ie):0}function ue(t){if(typeof t=="number")return t;if(Qt(t))return un;if(bt(t)){var o=typeof t.valueOf=="function"?t.valueOf():t;t=bt(o)?o+"":o}if(typeof t!="string")return t===0?t:+t;t=$s(t);var i=nd.test(t);return i||id.test(t)?Dd(t.slice(2),i?2:8):ed.test(t)?un:+t}function El(t){return Se(t,Kt(t))}function Cg(t){return t?on(q(t),-Mt,Mt):t===0?t:0}function rt(t){return t==null?"":Jt(t)}var Sg=Sn(function(t,o){if(eo(o)||Yt(o)){Se(o,_t(o),t);return}for(var i in o)st.call(o,i)&&Zn(t,i,o[i])}),Tl=Sn(function(t,o){Se(o,Kt(o),t)}),ri=Sn(function(t,o,i,a){Se(o,Kt(o),t,a)}),Eg=Sn(function(t,o,i,a){Se(o,_t(o),t,a)}),Tg=Ae(qi);function _g(t,o){var i=Cn(t);return o==null?i:ia(i,o)}var Bg=X(function(t,o){t=dt(t);var i=-1,a=o.length,d=a>2?o[2]:n;for(d&&Ft(o[0],o[1],d)&&(a=1);++i<a;)for(var p=o[i],g=Kt(p),b=-1,w=g.length;++b<w;){var E=g[b],T=t[E];(T===n||ve(T,kn[E])&&!st.call(t,E))&&(t[E]=p[E])}return t}),Ig=X(function(t){return t.push(n,$a),Vt(_l,n,t)});function Lg(t,o){return Fs(t,P(o,3),Ce)}function Ag(t,o){return Fs(t,P(o,3),Xi)}function Mg(t,o){return t==null?t:Gi(t,P(o,3),Kt)}function Og(t,o){return t==null?t:ca(t,P(o,3),Kt)}function Rg(t,o){return t&&Ce(t,P(o,3))}function Ng(t,o){return t&&Xi(t,P(o,3))}function Dg(t){return t==null?[]:Uo(t,_t(t))}function Pg(t){return t==null?[]:Uo(t,Kt(t))}function Tr(t,o,i){var a=t==null?n:rn(t,o);return a===n?i:a}function Hg(t,o){return t!=null&&qa(t,o,su)}function _r(t,o){return t!=null&&qa(t,o,au)}var Fg=Ha(function(t,o,i){o!=null&&typeof o.toString!="function"&&(o=_o.call(o)),t[o]=i},Ir(qt)),Ug=Ha(function(t,o,i){o!=null&&typeof o.toString!="function"&&(o=_o.call(o)),st.call(t,o)?t[o].push(i):t[o]=[i]},P),zg=X(jn);function _t(t){return Yt(t)?na(t):Ji(t)}function Kt(t){return Yt(t)?na(t,!0):bu(t)}function Wg(t,o){var i={};return o=P(o,3),Ce(t,function(a,d,p){Ie(i,o(a,d,p),a)}),i}function $g(t,o){var i={};return o=P(o,3),Ce(t,function(a,d,p){Ie(i,d,o(a,d,p))}),i}var Yg=Sn(function(t,o,i){zo(t,o,i)}),_l=Sn(function(t,o,i,a){zo(t,o,i,a)}),Kg=Ae(function(t,o){var i={};if(t==null)return i;var a=!1;o=mt(o,function(p){return p=qe(p,t),a||(a=p.length>1),p}),Se(t,ur(t),i),a&&(i=ce(i,S|L|D,Hu));for(var d=o.length;d--;)ir(i,o[d]);return i});function qg(t,o){return Bl(t,ni(P(o)))}var Gg=Ae(function(t,o){return t==null?{}:wu(t,o)});function Bl(t,o){if(t==null)return{};var i=mt(ur(t),function(a){return[a]});return o=P(o),wa(t,i,function(a,d){return o(a,d[0])})}function Xg(t,o,i){o=qe(o,t);var a=-1,d=o.length;for(d||(d=1,t=n);++a<d;){var p=t==null?n:t[Ee(o[a])];p===n&&(a=d,p=i),t=Oe(p)?p.call(t):p}return t}function Zg(t,o,i){return t==null?t:Qn(t,o,i)}function Vg(t,o,i,a){return a=typeof a=="function"?a:n,t==null?t:Qn(t,o,i,a)}var Il=za(_t),Ll=za(Kt);function jg(t,o,i){var a=Y(t),d=a||Xe(t)||_n(t);if(o=P(o,4),i==null){var p=t&&t.constructor;d?i=a?new p:[]:bt(t)?i=Oe(p)?Cn(Lo(t)):{}:i={}}return(d?se:Ce)(t,function(g,b,w){return o(i,g,b,w)}),i}function Jg(t,o){return t==null?!0:ir(t,o)}function Qg(t,o,i){return t==null?t:Sa(t,o,ar(i))}function tm(t,o,i,a){return a=typeof a=="function"?a:n,t==null?t:Sa(t,o,ar(i),a)}function Bn(t){return t==null?[]:Fi(t,_t(t))}function em(t){return t==null?[]:Fi(t,Kt(t))}function nm(t,o,i){return i===n&&(i=o,o=n),i!==n&&(i=ue(i),i=i===i?i:0),o!==n&&(o=ue(o),o=o===o?o:0),on(ue(t),o,i)}function om(t,o,i){return o=Re(o),i===n?(i=o,o=0):i=Re(i),t=ue(t),lu(t,o,i)}function im(t,o,i){if(i&&typeof i!="boolean"&&Ft(t,o,i)&&(o=i=n),i===n&&(typeof o=="boolean"?(i=o,o=n):typeof t=="boolean"&&(i=t,t=n)),t===n&&o===n?(t=0,o=1):(t=Re(t),o===n?(o=t,t=0):o=Re(o)),t>o){var a=t;t=o,o=a}if(i||t%1||o%1){var d=ta();return Ot(t+d*(o-t+Nd("1e-"+((d+"").length-1))),o)}return er(t,o)}var rm=En(function(t,o,i){return o=o.toLowerCase(),t+(i?Al(o):o)});function Al(t){return Br(rt(t).toLowerCase())}function Ml(t){return t=rt(t),t&&t.replace(sd,Xd).replace(Ed,"")}function sm(t,o,i){t=rt(t),o=Jt(o);var a=t.length;i=i===n?a:on(q(i),0,a);var d=i;return i-=o.length,i>=0&&t.slice(i,d)==o}function am(t){return t=rt(t),t&&Uc.test(t)?t.replace(cs,Zd):t}function lm(t){return t=rt(t),t&&qc.test(t)?t.replace(Ci,"\\$&"):t}var cm=En(function(t,o,i){return t+(i?"-":"")+o.toLowerCase()}),dm=En(function(t,o,i){return t+(i?" ":"")+o.toLowerCase()}),hm=Na("toLowerCase");function um(t,o,i){t=rt(t),o=q(o);var a=o?vn(t):0;if(!o||a>=o)return t;var d=(o-a)/2;return Go(Ro(d),i)+t+Go(Oo(d),i)}function pm(t,o,i){t=rt(t),o=q(o);var a=o?vn(t):0;return o&&a<o?t+Go(o-a,i):t}function fm(t,o,i){t=rt(t),o=q(o);var a=o?vn(t):0;return o&&a<o?Go(o-a,i)+t:t}function gm(t,o,i){return i||o==null?o=0:o&&(o=+o),xh(rt(t).replace(Si,""),o||0)}function mm(t,o,i){return(i?Ft(t,o,i):o===n)?o=1:o=q(o),nr(rt(t),o)}function bm(){var t=arguments,o=rt(t[0]);return t.length<3?o:o.replace(t[1],t[2])}var vm=En(function(t,o,i){return t+(i?"_":"")+o.toLowerCase()});function wm(t,o,i){return i&&typeof i!="number"&&Ft(t,o,i)&&(o=i=n),i=i===n?ie:i>>>0,i?(t=rt(t),t&&(typeof o=="string"||o!=null&&!Er(o))&&(o=Jt(o),!o&&bn(t))?Ge(me(t),0,i):t.split(o,i)):[]}var km=En(function(t,o,i){return t+(i?" ":"")+Br(o)});function xm(t,o,i){return t=rt(t),i=i==null?0:on(q(i),0,t.length),o=Jt(o),t.slice(i,i+o.length)==o}function ym(t,o,i){var a=u.templateSettings;i&&Ft(t,o,i)&&(o=n),t=rt(t),o=ri({},o,a,Wa);var d=ri({},o.imports,a.imports,Wa),p=_t(d),g=Fi(d,p),b,w,E=0,T=o.interpolate||vo,_="__p += '",A=zi((o.escape||vo).source+"|"+T.source+"|"+(T===ds?td:vo).source+"|"+(o.evaluate||vo).source+"|$","g"),R="//# sourceURL="+(st.call(o,"sourceURL")?(o.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ld+"]")+`
`;t.replace(A,function(F,V,Q,te,Ut,ee){return Q||(Q=te),_+=t.slice(E,ee).replace(ad,Vd),V&&(b=!0,_+=`' +
__e(`+V+`) +
'`),Ut&&(w=!0,_+=`';
`+Ut+`;
__p += '`),Q&&(_+=`' +
((__t = (`+Q+`)) == null ? '' : __t) +
'`),E=ee+F.length,F}),_+=`';
`;var H=st.call(o,"variable")&&o.variable;if(!H)_=`with (obj) {
`+_+`
}
`;else if(Jc.test(H))throw new $(f);_=(w?_.replace(Dc,""):_).replace(Pc,"$1").replace(Hc,"$1;"),_="function("+(H||"obj")+`) {
`+(H?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(b?", __e = _.escape":"")+(w?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_+`return __p
}`;var G=Rl(function(){return ot(p,R+"return "+_).apply(n,g)});if(G.source=_,Sr(G))throw G;return G}function Cm(t){return rt(t).toLowerCase()}function Sm(t){return rt(t).toUpperCase()}function Em(t,o,i){if(t=rt(t),t&&(i||o===n))return $s(t);if(!t||!(o=Jt(o)))return t;var a=me(t),d=me(o),p=Ys(a,d),g=Ks(a,d)+1;return Ge(a,p,g).join("")}function Tm(t,o,i){if(t=rt(t),t&&(i||o===n))return t.slice(0,Gs(t)+1);if(!t||!(o=Jt(o)))return t;var a=me(t),d=Ks(a,me(o))+1;return Ge(a,0,d).join("")}function _m(t,o,i){if(t=rt(t),t&&(i||o===n))return t.replace(Si,"");if(!t||!(o=Jt(o)))return t;var a=me(t),d=Ys(a,me(o));return Ge(a,d).join("")}function Bm(t,o){var i=W,a=J;if(bt(o)){var d="separator"in o?o.separator:d;i="length"in o?q(o.length):i,a="omission"in o?Jt(o.omission):a}t=rt(t);var p=t.length;if(bn(t)){var g=me(t);p=g.length}if(i>=p)return t;var b=i-vn(a);if(b<1)return a;var w=g?Ge(g,0,b).join(""):t.slice(0,b);if(d===n)return w+a;if(g&&(b+=w.length-b),Er(d)){if(t.slice(b).search(d)){var E,T=w;for(d.global||(d=zi(d.source,rt(hs.exec(d))+"g")),d.lastIndex=0;E=d.exec(T);)var _=E.index;w=w.slice(0,_===n?b:_)}}else if(t.indexOf(Jt(d),b)!=b){var A=w.lastIndexOf(d);A>-1&&(w=w.slice(0,A))}return w+a}function Im(t){return t=rt(t),t&&Fc.test(t)?t.replace(ls,oh):t}var Lm=En(function(t,o,i){return t+(i?" ":"")+o.toUpperCase()}),Br=Na("toUpperCase");function Ol(t,o,i){return t=rt(t),o=i?n:o,o===n?Jd(t)?sh(t):$d(t):t.match(o)||[]}var Rl=X(function(t,o){try{return Vt(t,n,o)}catch(i){return Sr(i)?i:new $(i)}}),Am=Ae(function(t,o){return se(o,function(i){i=Ee(i),Ie(t,i,yr(t[i],t))}),t});function Mm(t){var o=t==null?0:t.length,i=P();return t=o?mt(t,function(a){if(typeof a[1]!="function")throw new ae(h);return[i(a[0]),a[1]]}):[],X(function(a){for(var d=-1;++d<o;){var p=t[d];if(Vt(p[0],this,a))return Vt(p[1],this,a)}})}function Om(t){return ou(ce(t,S))}function Ir(t){return function(){return t}}function Rm(t,o){return t==null||t!==t?o:t}var Nm=Pa(),Dm=Pa(!0);function qt(t){return t}function Lr(t){return pa(typeof t=="function"?t:ce(t,S))}function Pm(t){return ga(ce(t,S))}function Hm(t,o){return ma(t,ce(o,S))}var Fm=X(function(t,o){return function(i){return jn(i,t,o)}}),Um=X(function(t,o){return function(i){return jn(t,i,o)}});function Ar(t,o,i){var a=_t(o),d=Uo(o,a);i==null&&!(bt(o)&&(d.length||!a.length))&&(i=o,o=t,t=this,d=Uo(o,_t(o)));var p=!(bt(i)&&"chain"in i)||!!i.chain,g=Oe(t);return se(d,function(b){var w=o[b];t[b]=w,g&&(t.prototype[b]=function(){var E=this.__chain__;if(p||E){var T=t(this.__wrapped__),_=T.__actions__=$t(this.__actions__);return _.push({func:w,args:arguments,thisArg:t}),T.__chain__=E,T}return w.apply(t,ze([this.value()],arguments))})}),t}function zm(){return Bt._===this&&(Bt._=uh),this}function Mr(){}function Wm(t){return t=q(t),X(function(o){return ba(o,t)})}var $m=cr(mt),Ym=cr(Hs),Km=cr(Ri);function Nl(t){return mr(t)?Ni(Ee(t)):ku(t)}function qm(t){return function(o){return t==null?n:rn(t,o)}}var Gm=Fa(),Xm=Fa(!0);function Or(){return[]}function Rr(){return!1}function Zm(){return{}}function Vm(){return""}function jm(){return!0}function Jm(t,o){if(t=q(t),t<1||t>Mt)return[];var i=ie,a=Ot(t,ie);o=P(o),t-=ie;for(var d=Hi(a,o);++i<t;)o(i);return d}function Qm(t){return Y(t)?mt(t,Ee):Qt(t)?[t]:$t(el(rt(t)))}function tb(t){var o=++dh;return rt(t)+o}var eb=qo(function(t,o){return t+o},0),nb=dr("ceil"),ob=qo(function(t,o){return t/o},1),ib=dr("floor");function rb(t){return t&&t.length?Fo(t,qt,Zi):n}function sb(t,o){return t&&t.length?Fo(t,P(o,2),Zi):n}function ab(t){return zs(t,qt)}function lb(t,o){return zs(t,P(o,2))}function cb(t){return t&&t.length?Fo(t,qt,Qi):n}function db(t,o){return t&&t.length?Fo(t,P(o,2),Qi):n}var hb=qo(function(t,o){return t*o},1),ub=dr("round"),pb=qo(function(t,o){return t-o},0);function fb(t){return t&&t.length?Pi(t,qt):0}function gb(t,o){return t&&t.length?Pi(t,P(o,2)):0}return u.after=Pf,u.ary=ul,u.assign=Sg,u.assignIn=Tl,u.assignInWith=ri,u.assignWith=Eg,u.at=Tg,u.before=pl,u.bind=yr,u.bindAll=Am,u.bindKey=fl,u.castArray=Zf,u.chain=cl,u.chunk=op,u.compact=ip,u.concat=rp,u.cond=Mm,u.conforms=Om,u.constant=Ir,u.countBy=ff,u.create=_g,u.curry=gl,u.curryRight=ml,u.debounce=bl,u.defaults=Bg,u.defaultsDeep=Ig,u.defer=Hf,u.delay=Ff,u.difference=sp,u.differenceBy=ap,u.differenceWith=lp,u.drop=cp,u.dropRight=dp,u.dropRightWhile=hp,u.dropWhile=up,u.fill=pp,u.filter=mf,u.flatMap=wf,u.flatMapDeep=kf,u.flatMapDepth=xf,u.flatten=rl,u.flattenDeep=fp,u.flattenDepth=gp,u.flip=Uf,u.flow=Nm,u.flowRight=Dm,u.fromPairs=mp,u.functions=Dg,u.functionsIn=Pg,u.groupBy=yf,u.initial=vp,u.intersection=wp,u.intersectionBy=kp,u.intersectionWith=xp,u.invert=Fg,u.invertBy=Ug,u.invokeMap=Sf,u.iteratee=Lr,u.keyBy=Ef,u.keys=_t,u.keysIn=Kt,u.map=Qo,u.mapKeys=Wg,u.mapValues=$g,u.matches=Pm,u.matchesProperty=Hm,u.memoize=ei,u.merge=Yg,u.mergeWith=_l,u.method=Fm,u.methodOf=Um,u.mixin=Ar,u.negate=ni,u.nthArg=Wm,u.omit=Kg,u.omitBy=qg,u.once=zf,u.orderBy=Tf,u.over=$m,u.overArgs=Wf,u.overEvery=Ym,u.overSome=Km,u.partial=Cr,u.partialRight=vl,u.partition=_f,u.pick=Gg,u.pickBy=Bl,u.property=Nl,u.propertyOf=qm,u.pull=Ep,u.pullAll=al,u.pullAllBy=Tp,u.pullAllWith=_p,u.pullAt=Bp,u.range=Gm,u.rangeRight=Xm,u.rearg=$f,u.reject=Lf,u.remove=Ip,u.rest=Yf,u.reverse=kr,u.sampleSize=Mf,u.set=Zg,u.setWith=Vg,u.shuffle=Of,u.slice=Lp,u.sortBy=Df,u.sortedUniq=Pp,u.sortedUniqBy=Hp,u.split=wm,u.spread=Kf,u.tail=Fp,u.take=Up,u.takeRight=zp,u.takeRightWhile=Wp,u.takeWhile=$p,u.tap=rf,u.throttle=qf,u.thru=Jo,u.toArray=Cl,u.toPairs=Il,u.toPairsIn=Ll,u.toPath=Qm,u.toPlainObject=El,u.transform=jg,u.unary=Gf,u.union=Yp,u.unionBy=Kp,u.unionWith=qp,u.uniq=Gp,u.uniqBy=Xp,u.uniqWith=Zp,u.unset=Jg,u.unzip=xr,u.unzipWith=ll,u.update=Qg,u.updateWith=tm,u.values=Bn,u.valuesIn=em,u.without=Vp,u.words=Ol,u.wrap=Xf,u.xor=jp,u.xorBy=Jp,u.xorWith=Qp,u.zip=tf,u.zipObject=ef,u.zipObjectDeep=nf,u.zipWith=of,u.entries=Il,u.entriesIn=Ll,u.extend=Tl,u.extendWith=ri,Ar(u,u),u.add=eb,u.attempt=Rl,u.camelCase=rm,u.capitalize=Al,u.ceil=nb,u.clamp=nm,u.clone=Vf,u.cloneDeep=Jf,u.cloneDeepWith=Qf,u.cloneWith=jf,u.conformsTo=tg,u.deburr=Ml,u.defaultTo=Rm,u.divide=ob,u.endsWith=sm,u.eq=ve,u.escape=am,u.escapeRegExp=lm,u.every=gf,u.find=bf,u.findIndex=ol,u.findKey=Lg,u.findLast=vf,u.findLastIndex=il,u.findLastKey=Ag,u.floor=ib,u.forEach=dl,u.forEachRight=hl,u.forIn=Mg,u.forInRight=Og,u.forOwn=Rg,u.forOwnRight=Ng,u.get=Tr,u.gt=eg,u.gte=ng,u.has=Hg,u.hasIn=_r,u.head=sl,u.identity=qt,u.includes=Cf,u.indexOf=bp,u.inRange=om,u.invoke=zg,u.isArguments=ln,u.isArray=Y,u.isArrayBuffer=og,u.isArrayLike=Yt,u.isArrayLikeObject=kt,u.isBoolean=ig,u.isBuffer=Xe,u.isDate=rg,u.isElement=sg,u.isEmpty=ag,u.isEqual=lg,u.isEqualWith=cg,u.isError=Sr,u.isFinite=dg,u.isFunction=Oe,u.isInteger=wl,u.isLength=oi,u.isMap=kl,u.isMatch=hg,u.isMatchWith=ug,u.isNaN=pg,u.isNative=fg,u.isNil=mg,u.isNull=gg,u.isNumber=xl,u.isObject=bt,u.isObjectLike=vt,u.isPlainObject=oo,u.isRegExp=Er,u.isSafeInteger=bg,u.isSet=yl,u.isString=ii,u.isSymbol=Qt,u.isTypedArray=_n,u.isUndefined=vg,u.isWeakMap=wg,u.isWeakSet=kg,u.join=yp,u.kebabCase=cm,u.last=he,u.lastIndexOf=Cp,u.lowerCase=dm,u.lowerFirst=hm,u.lt=xg,u.lte=yg,u.max=rb,u.maxBy=sb,u.mean=ab,u.meanBy=lb,u.min=cb,u.minBy=db,u.stubArray=Or,u.stubFalse=Rr,u.stubObject=Zm,u.stubString=Vm,u.stubTrue=jm,u.multiply=hb,u.nth=Sp,u.noConflict=zm,u.noop=Mr,u.now=ti,u.pad=um,u.padEnd=pm,u.padStart=fm,u.parseInt=gm,u.random=im,u.reduce=Bf,u.reduceRight=If,u.repeat=mm,u.replace=bm,u.result=Xg,u.round=ub,u.runInContext=v,u.sample=Af,u.size=Rf,u.snakeCase=vm,u.some=Nf,u.sortedIndex=Ap,u.sortedIndexBy=Mp,u.sortedIndexOf=Op,u.sortedLastIndex=Rp,u.sortedLastIndexBy=Np,u.sortedLastIndexOf=Dp,u.startCase=km,u.startsWith=xm,u.subtract=pb,u.sum=fb,u.sumBy=gb,u.template=ym,u.times=Jm,u.toFinite=Re,u.toInteger=q,u.toLength=Sl,u.toLower=Cm,u.toNumber=ue,u.toSafeInteger=Cg,u.toString=rt,u.toUpper=Sm,u.trim=Em,u.trimEnd=Tm,u.trimStart=_m,u.truncate=Bm,u.unescape=Im,u.uniqueId=tb,u.upperCase=Lm,u.upperFirst=Br,u.each=dl,u.eachRight=hl,u.first=sl,Ar(u,function(){var t={};return Ce(u,function(o,i){st.call(u.prototype,i)||(t[i]=o)}),t}(),{chain:!1}),u.VERSION=r,se(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){u[t].placeholder=u}),se(["drop","take"],function(t,o){j.prototype[t]=function(i){i=i===n?1:Et(q(i),0);var a=this.__filtered__&&!o?new j(this):this.clone();return a.__filtered__?a.__takeCount__=Ot(i,a.__takeCount__):a.__views__.push({size:Ot(i,ie),type:t+(a.__dir__<0?"Right":"")}),a},j.prototype[t+"Right"]=function(i){return this.reverse()[t](i).reverse()}}),se(["filter","map","takeWhile"],function(t,o){var i=o+1,a=i==yt||i==Pt;j.prototype[t]=function(d){var p=this.clone();return p.__iteratees__.push({iteratee:P(d,3),type:i}),p.__filtered__=p.__filtered__||a,p}}),se(["head","last"],function(t,o){var i="take"+(o?"Right":"");j.prototype[t]=function(){return this[i](1).value()[0]}}),se(["initial","tail"],function(t,o){var i="drop"+(o?"":"Right");j.prototype[t]=function(){return this.__filtered__?new j(this):this[i](1)}}),j.prototype.compact=function(){return this.filter(qt)},j.prototype.find=function(t){return this.filter(t).head()},j.prototype.findLast=function(t){return this.reverse().find(t)},j.prototype.invokeMap=X(function(t,o){return typeof t=="function"?new j(this):this.map(function(i){return jn(i,t,o)})}),j.prototype.reject=function(t){return this.filter(ni(P(t)))},j.prototype.slice=function(t,o){t=q(t);var i=this;return i.__filtered__&&(t>0||o<0)?new j(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),o!==n&&(o=q(o),i=o<0?i.dropRight(-o):i.take(o-t)),i)},j.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},j.prototype.toArray=function(){return this.take(ie)},Ce(j.prototype,function(t,o){var i=/^(?:filter|find|map|reject)|While$/.test(o),a=/^(?:head|last)$/.test(o),d=u[a?"take"+(o=="last"?"Right":""):o],p=a||/^find/.test(o);d&&(u.prototype[o]=function(){var g=this.__wrapped__,b=a?[1]:arguments,w=g instanceof j,E=b[0],T=w||Y(g),_=function(V){var Q=d.apply(u,ze([V],b));return a&&A?Q[0]:Q};T&&i&&typeof E=="function"&&E.length!=1&&(w=T=!1);var A=this.__chain__,R=!!this.__actions__.length,H=p&&!A,G=w&&!R;if(!p&&T){g=G?g:new j(this);var F=t.apply(g,b);return F.__actions__.push({func:Jo,args:[_],thisArg:n}),new le(F,A)}return H&&G?t.apply(this,b):(F=this.thru(_),H?a?F.value()[0]:F.value():F)})}),se(["pop","push","shift","sort","splice","unshift"],function(t){var o=So[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",a=/^(?:pop|shift)$/.test(t);u.prototype[t]=function(){var d=arguments;if(a&&!this.__chain__){var p=this.value();return o.apply(Y(p)?p:[],d)}return this[i](function(g){return o.apply(Y(g)?g:[],d)})}}),Ce(j.prototype,function(t,o){var i=u[o];if(i){var a=i.name+"";st.call(yn,a)||(yn[a]=[]),yn[a].push({name:o,func:i})}}),yn[Ko(n,lt).name]=[{name:"wrapper",func:n}],j.prototype.clone=Bh,j.prototype.reverse=Ih,j.prototype.value=Lh,u.prototype.at=sf,u.prototype.chain=af,u.prototype.commit=lf,u.prototype.next=cf,u.prototype.plant=hf,u.prototype.reverse=uf,u.prototype.toJSON=u.prototype.valueOf=u.prototype.value=pf,u.prototype.first=u.prototype.head,Yn&&(u.prototype[Yn]=df),u},wn=ah();Qe?((Qe.exports=wn)._=wn,Li._=wn):Bt._=wn}).call(io)})(di,di.exports);var _1=di.exports;const B1=T1(_1),tc=document.getElementById("editorjs"),I1=new o1({holder:"editorjs",data:JSON.parse(tc.dataset.editorjsData),tools:{header:{class:h1,inlineToolbar:!0},list:{class:p1,inlineToolbar:!0},table:E1},onChange:B1.debounce(function(){I1.save().then(l=>{fetch(tc.dataset.postUrl,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-Token":document.querySelector('input[name="_token"]').value},body:JSON.stringify({data:l})}).then(e=>e.json()).then(e=>{console.log("Success:",e)}).catch(e=>{console.error("Error:",e)})})},200)});
